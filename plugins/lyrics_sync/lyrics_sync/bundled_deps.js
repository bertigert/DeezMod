var zo=Object.create;var An=Object.defineProperty;var Uo=Object.getOwnPropertyDescriptor;var Ko=Object.getOwnPropertyNames;var No=Object.getPrototypeOf,Mo=Object.prototype.hasOwnProperty;var U=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var qo=(r,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ko(e))!Mo.call(r,s)&&s!==n&&An(r,s,{get:()=>e[s],enumerable:!(o=Uo(e,s))||o.enumerable});return r};var $o=(r,e,n)=>(n=r!=null?zo(No(r)):{},qo(e||!r||!r.__esModule?An(n,"default",{value:r,enumerable:!0}):n,r));var Fn=U(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.kanaToRomaji=D.kanaToKatakana=D.kanaToHiragna=D.toRawRomaji=D.toRawKatakana=D.toRawHiragana=D.hasJapanese=D.hasKanji=D.hasKana=D.hasKatakana=D.hasHiragana=D.isJapanese=D.isKanji=D.isKana=D.isKatakana=D.isHiragana=D.patchTokens=D.getStrType=D.ROMANIZATION_SYSTEM=void 0;var Ho=-96,Vo=96,er={NIPPON:"nippon",PASSPORT:"passport",HEPBURN:"hepburn"};D.ROMANIZATION_SYSTEM=er;var se=function(e){return e=e[0],e>="\u3040"&&e<="\u309F"};D.isHiragana=se;var ce=function(e){return e=e[0],e>="\u30A0"&&e<="\u30FF"};D.isKatakana=ce;var le=function(e){return se(e)||ce(e)};D.isKana=le;var he=function(e){return e=e[0],e>="\u4E00"&&e<="\u9FCF"||e>="\uF900"&&e<="\uFAFF"||e>="\u3400"&&e<="\u4DBF"};D.isKanji=he;var Sn=function(e){return le(e)||he(e)};D.isJapanese=Sn;var jn=function(e){for(let n=0;n<e.length;n++)if(se(e[n]))return!0;return!1};D.hasHiragana=jn;var Go=function(e){for(let n=0;n<e.length;n++)if(ce(e[n]))return!0;return!1};D.hasKatakana=Go;var Jo=function(e){for(let n=0;n<e.length;n++)if(le(e[n]))return!0;return!1};D.hasKana=Jo;var Yo=function(e){for(let n=0;n<e.length;n++)if(he(e[n]))return!0;return!1};D.hasKanji=Yo;var Cn=function(e){for(let n=0;n<e.length;n++)if(Sn(e[n]))return!0;return!1};D.hasJapanese=Cn;var In=function(e){return[...e].map(n=>n>"\u30A0"&&n<"\u30F7"?String.fromCharCode(n.charCodeAt(0)+Ho):n).join("")};D.toRawHiragana=In;var fe=function(e){return[...e].map(n=>n>"\u3040"&&n<"\u3097"?String.fromCharCode(n.charCodeAt(0)+Vo):n).join("")};D.toRawKatakana=fe;var En=function(e,n){n=n||er.HEPBURN;let o={nippon:{"\uFF11":"1","\uFF12":"2","\uFF13":"3","\uFF14":"4","\uFF15":"5","\uFF16":"6","\uFF17":"7","\uFF18":"8","\uFF19":"9","\uFF10":"0","\uFF01":"!","\u201C":'"',"\u201D":'"',"\uFF03":"#","\uFF04":"$","\uFF05":"%","\uFF06":"&","\u2019":"'","\uFF08":"(","\uFF09":")","\uFF1D":"=","\uFF5E":"~","\uFF5C":"|","\uFF20":"@","\u2018":"`","\uFF0B":"+","\uFF0A":"*","\uFF1B":";","\uFF1A":":","\uFF1C":"<","\uFF1E":">","\u3001":",","\u3002":".","\uFF0F":"/","\uFF1F":"?","\uFF3F":"_","\u30FB":"\uFF65","\u300C":'"',"\u300D":'"',"\uFF5B":"{","\uFF5D":"}","\uFFE5":"\\","\uFF3E":"^",\u3042:"a",\u3044:"i",\u3046:"u",\u3048:"e",\u304A:"o",\u30A2:"a",\u30A4:"i",\u30A6:"u",\u30A8:"e",\u30AA:"o",\u304B:"ka",\u304D:"ki",\u304F:"ku",\u3051:"ke",\u3053:"ko",\u30AB:"ka",\u30AD:"ki",\u30AF:"ku",\u30B1:"ke",\u30B3:"ko",\u3055:"sa",\u3057:"si",\u3059:"su",\u305B:"se",\u305D:"so",\u30B5:"sa",\u30B7:"si",\u30B9:"su",\u30BB:"se",\u30BD:"so",\u305F:"ta",\u3061:"ti",\u3064:"tu",\u3066:"te",\u3068:"to",\u30BF:"ta",\u30C1:"ti",\u30C4:"tu",\u30C6:"te",\u30C8:"to",\u306A:"na",\u306B:"ni",\u306C:"nu",\u306D:"ne",\u306E:"no",\u30CA:"na",\u30CB:"ni",\u30CC:"nu",\u30CD:"ne",\u30CE:"no",\u306F:"ha",\u3072:"hi",\u3075:"hu",\u3078:"he",\u307B:"ho",\u30CF:"ha",\u30D2:"hi",\u30D5:"hu",\u30D8:"he",\u30DB:"ho",\u307E:"ma",\u307F:"mi",\u3080:"mu",\u3081:"me",\u3082:"mo",\u30DE:"ma",\u30DF:"mi",\u30E0:"mu",\u30E1:"me",\u30E2:"mo",\u3084:"ya",\u3086:"yu",\u3088:"yo",\u30E4:"ya",\u30E6:"yu",\u30E8:"yo",\u3089:"ra",\u308A:"ri",\u308B:"ru",\u308C:"re",\u308D:"ro",\u30E9:"ra",\u30EA:"ri",\u30EB:"ru",\u30EC:"re",\u30ED:"ro",\u308F:"wa",\u3090:"wi",\u3091:"we",\u3092:"wo",\u30EF:"wa",\u30F0:"wi",\u30F1:"we",\u30F2:"wo",\u304C:"ga",\u304E:"gi",\u3050:"gu",\u3052:"ge",\u3054:"go",\u30AC:"ga",\u30AE:"gi",\u30B0:"gu",\u30B2:"ge",\u30B4:"go",\u3056:"za",\u3058:"zi",\u305A:"zu",\u305C:"ze",\u305E:"zo",\u30B6:"za",\u30B8:"zi",\u30BA:"zu",\u30BC:"ze",\u30BE:"zo",\u3060:"da",\u3062:"di",\u3065:"du",\u3067:"de",\u3069:"do",\u30C0:"da",\u30C2:"di",\u30C5:"du",\u30C7:"de",\u30C9:"do",\u3070:"ba",\u3073:"bi",\u3076:"bu",\u3079:"be",\u307C:"bo",\u30D0:"ba",\u30D3:"bi",\u30D6:"bu",\u30D9:"be",\u30DC:"bo",\u3071:"pa",\u3074:"pi",\u3077:"pu",\u307A:"pe",\u307D:"po",\u30D1:"pa",\u30D4:"pi",\u30D7:"pu",\u30DA:"pe",\u30DD:"po",\u304D\u3083:"kya",\u304D\u3085:"kyu",\u304D\u3087:"kyo",\u3057\u3083:"sya",\u3057\u3085:"syu",\u3057\u3087:"syo",\u3061\u3083:"tya",\u3061\u3085:"tyu",\u3061\u3087:"tyo",\u306B\u3083:"nya",\u306B\u3085:"nyu",\u306B\u3087:"nyo",\u3072\u3083:"hya",\u3072\u3085:"hyu",\u3072\u3087:"hyo",\u307F\u3083:"mya",\u307F\u3085:"myu",\u307F\u3087:"myo",\u308A\u3083:"rya",\u308A\u3085:"ryu",\u308A\u3087:"ryo",\u30AD\u30E3:"kya",\u30AD\u30E5:"kyu",\u30AD\u30E7:"kyo",\u30B7\u30E3:"sya",\u30B7\u30E5:"syu",\u30B7\u30E7:"syo",\u30C1\u30E3:"tya",\u30C1\u30E5:"tyu",\u30C1\u30E7:"tyo",\u30CB\u30E3:"nya",\u30CB\u30E5:"nyu",\u30CB\u30E7:"nyo",\u30D2\u30E3:"hya",\u30D2\u30E5:"hyu",\u30D2\u30E7:"hyo",\u30DF\u30E3:"mya",\u30DF\u30E5:"myu",\u30DF\u30E7:"myo",\u30EA\u30E3:"rya",\u30EA\u30E5:"ryu",\u30EA\u30E7:"ryo",\u304E\u3083:"gya",\u304E\u3085:"gyu",\u304E\u3087:"gyo",\u3058\u3083:"zya",\u3058\u3085:"zyu",\u3058\u3087:"zyo",\u3062\u3083:"dya",\u3062\u3085:"dyu",\u3062\u3087:"dyo",\u3073\u3083:"bya",\u3073\u3085:"byu",\u3073\u3087:"byo",\u3074\u3083:"pya",\u3074\u3085:"pyu",\u3074\u3087:"pyo",\u304F\u308E:"kwa",\u3050\u308E:"gwa",\u30AE\u30E3:"gya",\u30AE\u30E5:"gyu",\u30AE\u30E7:"gyo",\u30B8\u30E3:"zya",\u30B8\u30E5:"zyu",\u30B8\u30E7:"zyo",\u30C2\u30E3:"dya",\u30C2\u30E5:"dyu",\u30C2\u30E7:"dyo",\u30D3\u30E3:"bya",\u30D3\u30E5:"byu",\u30D3\u30E7:"byo",\u30D4\u30E3:"pya",\u30D4\u30E5:"pyu",\u30D4\u30E7:"pyo",\u30AF\u30EE:"kwa",\u30B0\u30EE:"gwa",\u3041:"a",\u3043:"i",\u3045:"u",\u3047:"e",\u3049:"o",\u3083:"ya",\u3085:"yu",\u3087:"yo",\u308E:"wa",\u30A1:"a",\u30A3:"i",\u30A5:"u",\u30A7:"e",\u30A9:"o",\u30E3:"ya",\u30E5:"yu",\u30E7:"yo",\u30EE:"wa",\u30F5:"ka",\u30F6:"ke",\u3093:"n",\u30F3:"n","\u3000":" ",\u3044\u3047:"ye",\u304D\u3047:"kye",\u304F\u3043:"kwi",\u304F\u3047:"kwe",\u304F\u3049:"kwo",\u3050\u3043:"gwi",\u3050\u3047:"gwe",\u3050\u3049:"gwo",\u30A4\u30A7:"ye",\u30AD\u30A7:"kya",\u30AF\u30A3:"kwi",\u30AF\u30A7:"kwe",\u30AF\u30A9:"kwo",\u30B0\u30A3:"gwi",\u30B0\u30A7:"gwe",\u30B0\u30A9:"gwo",\u3057\u3047:"sye",\u3058\u3047:"zye",\u3059\u3043:"swi",\u305A\u3043:"zwi",\u3061\u3047:"tye",\u3064\u3041:"twa",\u3064\u3043:"twi",\u3064\u3047:"twe",\u3064\u3049:"two",\u306B\u3047:"nye",\u3072\u3047:"hye",\u3075\u3041:"hwa",\u3075\u3043:"hwi",\u3075\u3047:"hwe",\u3075\u3049:"hwo",\u3075\u3085:"hwyu",\u3075\u3087:"hwyo",\u30B7\u30A7:"sye",\u30B8\u30A7:"zye",\u30B9\u30A3:"swi",\u30BA\u30A3:"zwi",\u30C1\u30A7:"tye",\u30C4\u30A1:"twa",\u30C4\u30A3:"twi",\u30C4\u30A7:"twe",\u30C4\u30A9:"two",\u30CB\u30A7:"nye",\u30D2\u30A7:"hye",\u30D5\u30A1:"hwa",\u30D5\u30A3:"hwi",\u30D5\u30A7:"hwe",\u30D5\u30A9:"hwo",\u30D5\u30E5:"hwyu",\u30D5\u30E7:"hwyo"},passport:{"\uFF11":"1","\uFF12":"2","\uFF13":"3","\uFF14":"4","\uFF15":"5","\uFF16":"6","\uFF17":"7","\uFF18":"8","\uFF19":"9","\uFF10":"0","\uFF01":"!","\u201C":'"',"\u201D":'"',"\uFF03":"#","\uFF04":"$","\uFF05":"%","\uFF06":"&","\u2019":"'","\uFF08":"(","\uFF09":")","\uFF1D":"=","\uFF5E":"~","\uFF5C":"|","\uFF20":"@","\u2018":"`","\uFF0B":"+","\uFF0A":"*","\uFF1B":";","\uFF1A":":","\uFF1C":"<","\uFF1E":">","\u3001":",","\u3002":".","\uFF0F":"/","\uFF1F":"?","\uFF3F":"_","\u30FB":"\uFF65","\u300C":'"',"\u300D":'"',"\uFF5B":"{","\uFF5D":"}","\uFFE5":"\\","\uFF3E":"^",\u3042:"a",\u3044:"i",\u3046:"u",\u3048:"e",\u304A:"o",\u30A2:"a",\u30A4:"i",\u30A6:"u",\u30A8:"e",\u30AA:"o",\u304B:"ka",\u304D:"ki",\u304F:"ku",\u3051:"ke",\u3053:"ko",\u30AB:"ka",\u30AD:"ki",\u30AF:"ku",\u30B1:"ke",\u30B3:"ko",\u3055:"sa",\u3057:"shi",\u3059:"su",\u305B:"se",\u305D:"so",\u30B5:"sa",\u30B7:"shi",\u30B9:"su",\u30BB:"se",\u30BD:"so",\u305F:"ta",\u3061:"chi",\u3064:"tsu",\u3066:"te",\u3068:"to",\u30BF:"ta",\u30C1:"chi",\u30C4:"tsu",\u30C6:"te",\u30C8:"to",\u306A:"na",\u306B:"ni",\u306C:"nu",\u306D:"ne",\u306E:"no",\u30CA:"na",\u30CB:"ni",\u30CC:"nu",\u30CD:"ne",\u30CE:"no",\u306F:"ha",\u3072:"hi",\u3075:"fu",\u3078:"he",\u307B:"ho",\u30CF:"ha",\u30D2:"hi",\u30D5:"fu",\u30D8:"he",\u30DB:"ho",\u307E:"ma",\u307F:"mi",\u3080:"mu",\u3081:"me",\u3082:"mo",\u30DE:"ma",\u30DF:"mi",\u30E0:"mu",\u30E1:"me",\u30E2:"mo",\u3084:"ya",\u3086:"yu",\u3088:"yo",\u30E4:"ya",\u30E6:"yu",\u30E8:"yo",\u3089:"ra",\u308A:"ri",\u308B:"ru",\u308C:"re",\u308D:"ro",\u30E9:"ra",\u30EA:"ri",\u30EB:"ru",\u30EC:"re",\u30ED:"ro",\u308F:"wa",\u3090:"i",\u3091:"e",\u3092:"o",\u30EF:"wa",\u30F0:"i",\u30F1:"e",\u30F2:"o",\u304C:"ga",\u304E:"gi",\u3050:"gu",\u3052:"ge",\u3054:"go",\u30AC:"ga",\u30AE:"gi",\u30B0:"gu",\u30B2:"ge",\u30B4:"go",\u3056:"za",\u3058:"ji",\u305A:"zu",\u305C:"ze",\u305E:"zo",\u30B6:"za",\u30B8:"ji",\u30BA:"zu",\u30BC:"ze",\u30BE:"zo",\u3060:"da",\u3062:"ji",\u3065:"zu",\u3067:"de",\u3069:"do",\u30C0:"da",\u30C2:"ji",\u30C5:"zu",\u30C7:"de",\u30C9:"do",\u3070:"ba",\u3073:"bi",\u3076:"bu",\u3079:"be",\u307C:"bo",\u30D0:"ba",\u30D3:"bi",\u30D6:"bu",\u30D9:"be",\u30DC:"bo",\u3071:"pa",\u3074:"pi",\u3077:"pu",\u307A:"pe",\u307D:"po",\u30D1:"pa",\u30D4:"pi",\u30D7:"pu",\u30DA:"pe",\u30DD:"po",\u304D\u3083:"kya",\u304D\u3085:"kyu",\u304D\u3087:"kyo",\u3057\u3083:"sha",\u3057\u3085:"shu",\u3057\u3087:"sho",\u3061\u3083:"cha",\u3061\u3085:"chu",\u3061\u3087:"cho",\u306B\u3083:"nya",\u306B\u3085:"nyu",\u306B\u3087:"nyo",\u3072\u3083:"hya",\u3072\u3085:"hyu",\u3072\u3087:"hyo",\u307F\u3083:"mya",\u307F\u3085:"myu",\u307F\u3087:"myo",\u308A\u3083:"rya",\u308A\u3085:"ryu",\u308A\u3087:"ryo",\u30AD\u30E3:"kya",\u30AD\u30E5:"kyu",\u30AD\u30E7:"kyo",\u30B7\u30E3:"sha",\u30B7\u30E5:"shu",\u30B7\u30E7:"sho",\u30C1\u30E3:"cha",\u30C1\u30E5:"chu",\u30C1\u30E7:"cho",\u30CB\u30E3:"nya",\u30CB\u30E5:"nyu",\u30CB\u30E7:"nyo",\u30D2\u30E3:"hya",\u30D2\u30E5:"hyu",\u30D2\u30E7:"hyo",\u30DF\u30E3:"mya",\u30DF\u30E5:"myu",\u30DF\u30E7:"myo",\u30EA\u30E3:"rya",\u30EA\u30E5:"ryu",\u30EA\u30E7:"ryo",\u304E\u3083:"gya",\u304E\u3085:"gyu",\u304E\u3087:"gyo",\u3058\u3083:"ja",\u3058\u3085:"ju",\u3058\u3087:"jo",\u3062\u3083:"ja",\u3062\u3085:"ju",\u3062\u3087:"jo",\u3073\u3083:"bya",\u3073\u3085:"byu",\u3073\u3087:"byo",\u3074\u3083:"pya",\u3074\u3085:"pyu",\u3074\u3087:"pyo",\u30AE\u30E3:"gya",\u30AE\u30E5:"gyu",\u30AE\u30E7:"gyo",\u30B8\u30E3:"ja",\u30B8\u30E5:"ju",\u30B8\u30E7:"jo",\u30C2\u30E3:"ja",\u30C2\u30E5:"ju",\u30C2\u30E7:"jo",\u30D3\u30E3:"bya",\u30D3\u30E5:"byu",\u30D3\u30E7:"byo",\u30D4\u30E3:"pya",\u30D4\u30E5:"pyu",\u30D4\u30E7:"pyo",\u3041:"a",\u3043:"i",\u3045:"u",\u3047:"e",\u3049:"o",\u3083:"ya",\u3085:"yu",\u3087:"yo",\u308E:"wa",\u30A1:"a",\u30A3:"i",\u30A5:"u",\u30A7:"e",\u30A9:"o",\u30E3:"ya",\u30E5:"yu",\u30E7:"yo",\u30EE:"wa",\u30F5:"ka",\u30F6:"ke",\u3093:"n",\u30F3:"n","\u3000":" ",\u30F4:"b"},hepburn:{"\uFF11":"1","\uFF12":"2","\uFF13":"3","\uFF14":"4","\uFF15":"5","\uFF16":"6","\uFF17":"7","\uFF18":"8","\uFF19":"9","\uFF10":"0","\uFF01":"!","\u201C":'"',"\u201D":'"',"\uFF03":"#","\uFF04":"$","\uFF05":"%","\uFF06":"&","\u2019":"'","\uFF08":"(","\uFF09":")","\uFF1D":"=","\uFF5E":"~","\uFF5C":"|","\uFF20":"@","\u2018":"`","\uFF0B":"+","\uFF0A":"*","\uFF1B":";","\uFF1A":":","\uFF1C":"<","\uFF1E":">","\u3001":",","\u3002":".","\uFF0F":"/","\uFF1F":"?","\uFF3F":"_","\u30FB":"\uFF65","\u300C":'"',"\u300D":'"',"\uFF5B":"{","\uFF5D":"}","\uFFE5":"\\","\uFF3E":"^",\u3042:"a",\u3044:"i",\u3046:"u",\u3048:"e",\u304A:"o",\u30A2:"a",\u30A4:"i",\u30A6:"u",\u30A8:"e",\u30AA:"o",\u304B:"ka",\u304D:"ki",\u304F:"ku",\u3051:"ke",\u3053:"ko",\u30AB:"ka",\u30AD:"ki",\u30AF:"ku",\u30B1:"ke",\u30B3:"ko",\u3055:"sa",\u3057:"shi",\u3059:"su",\u305B:"se",\u305D:"so",\u30B5:"sa",\u30B7:"shi",\u30B9:"su",\u30BB:"se",\u30BD:"so",\u305F:"ta",\u3061:"chi",\u3064:"tsu",\u3066:"te",\u3068:"to",\u30BF:"ta",\u30C1:"chi",\u30C4:"tsu",\u30C6:"te",\u30C8:"to",\u306A:"na",\u306B:"ni",\u306C:"nu",\u306D:"ne",\u306E:"no",\u30CA:"na",\u30CB:"ni",\u30CC:"nu",\u30CD:"ne",\u30CE:"no",\u306F:"ha",\u3072:"hi",\u3075:"fu",\u3078:"he",\u307B:"ho",\u30CF:"ha",\u30D2:"hi",\u30D5:"fu",\u30D8:"he",\u30DB:"ho",\u307E:"ma",\u307F:"mi",\u3080:"mu",\u3081:"me",\u3082:"mo",\u30DE:"ma",\u30DF:"mi",\u30E0:"mu",\u30E1:"me",\u30E2:"mo",\u3084:"ya",\u3086:"yu",\u3088:"yo",\u30E4:"ya",\u30E6:"yu",\u30E8:"yo",\u3089:"ra",\u308A:"ri",\u308B:"ru",\u308C:"re",\u308D:"ro",\u30E9:"ra",\u30EA:"ri",\u30EB:"ru",\u30EC:"re",\u30ED:"ro",\u308F:"wa",\u3090:"i",\u3091:"e",\u3092:"o",\u30EF:"wa",\u30F0:"i",\u30F1:"e",\u30F2:"o",\u304C:"ga",\u304E:"gi",\u3050:"gu",\u3052:"ge",\u3054:"go",\u30AC:"ga",\u30AE:"gi",\u30B0:"gu",\u30B2:"ge",\u30B4:"go",\u3056:"za",\u3058:"ji",\u305A:"zu",\u305C:"ze",\u305E:"zo",\u30B6:"za",\u30B8:"ji",\u30BA:"zu",\u30BC:"ze",\u30BE:"zo",\u3060:"da",\u3062:"ji",\u3065:"zu",\u3067:"de",\u3069:"do",\u30C0:"da",\u30C2:"ji",\u30C5:"zu",\u30C7:"de",\u30C9:"do",\u3070:"ba",\u3073:"bi",\u3076:"bu",\u3079:"be",\u307C:"bo",\u30D0:"ba",\u30D3:"bi",\u30D6:"bu",\u30D9:"be",\u30DC:"bo",\u3071:"pa",\u3074:"pi",\u3077:"pu",\u307A:"pe",\u307D:"po",\u30D1:"pa",\u30D4:"pi",\u30D7:"pu",\u30DA:"pe",\u30DD:"po",\u304D\u3083:"kya",\u304D\u3085:"kyu",\u304D\u3087:"kyo",\u3057\u3083:"sha",\u3057\u3085:"shu",\u3057\u3087:"sho",\u3061\u3083:"cha",\u3061\u3085:"chu",\u3061\u3087:"cho",\u306B\u3083:"nya",\u306B\u3085:"nyu",\u306B\u3087:"nyo",\u3072\u3083:"hya",\u3072\u3085:"hyu",\u3072\u3087:"hyo",\u307F\u3083:"mya",\u307F\u3085:"myu",\u307F\u3087:"myo",\u308A\u3083:"rya",\u308A\u3085:"ryu",\u308A\u3087:"ryo",\u30AD\u30E3:"kya",\u30AD\u30E5:"kyu",\u30AD\u30E7:"kyo",\u30B7\u30E3:"sha",\u30B7\u30E5:"shu",\u30B7\u30E7:"sho",\u30C1\u30E3:"cha",\u30C1\u30E5:"chu",\u30C1\u30E7:"cho",\u30CB\u30E3:"nya",\u30CB\u30E5:"nyu",\u30CB\u30E7:"nyo",\u30D2\u30E3:"hya",\u30D2\u30E5:"hyu",\u30D2\u30E7:"hyo",\u30DF\u30E3:"mya",\u30DF\u30E5:"myu",\u30DF\u30E7:"myo",\u30EA\u30E3:"rya",\u30EA\u30E5:"ryu",\u30EA\u30E7:"ryo",\u304E\u3083:"gya",\u304E\u3085:"gyu",\u304E\u3087:"gyo",\u3058\u3083:"ja",\u3058\u3085:"ju",\u3058\u3087:"jo",\u3062\u3083:"ja",\u3062\u3085:"ju",\u3062\u3087:"jo",\u3073\u3083:"bya",\u3073\u3085:"byu",\u3073\u3087:"byo",\u3074\u3083:"pya",\u3074\u3085:"pyu",\u3074\u3087:"pyo",\u30AE\u30E3:"gya",\u30AE\u30E5:"gyu",\u30AE\u30E7:"gyo",\u30B8\u30E3:"ja",\u30B8\u30E5:"ju",\u30B8\u30E7:"jo",\u30C2\u30E3:"ja",\u30C2\u30E5:"ju",\u30C2\u30E7:"jo",\u30D3\u30E3:"bya",\u30D3\u30E5:"byu",\u30D3\u30E7:"byo",\u30D4\u30E3:"pya",\u30D4\u30E5:"pyu",\u30D4\u30E7:"pyo",\u3041:"a",\u3043:"i",\u3045:"u",\u3047:"e",\u3049:"o",\u3083:"ya",\u3085:"yu",\u3087:"yo",\u308E:"wa",\u30A1:"a",\u30A3:"i",\u30A5:"u",\u30A7:"e",\u30A9:"o",\u30E3:"ya",\u30E5:"yu",\u30E7:"yo",\u30EE:"wa",\u30F5:"ka",\u30F6:"ke",\u3093:"n",\u30F3:"n","\u3000":" ",\u3044\u3047:"ye",\u3046\u3043:"wi",\u3046\u3047:"we",\u3046\u3049:"wo",\u304D\u3047:"kye",\u304F\u3041:"kwa",\u304F\u3043:"kwi",\u304F\u3047:"kwe",\u304F\u3049:"kwo",\u3050\u3041:"gwa",\u3050\u3043:"gwi",\u3050\u3047:"gwe",\u3050\u3049:"gwo",\u30A4\u30A7:"ye",\u30A6\u30A3:"wi",\u30A6\u30A7:"we",\u30A6\u30A9:"wo",\u30F4:"vu",\u30F4\u30A1:"va",\u30F4\u30A3:"vi",\u30F4\u30A7:"ve",\u30F4\u30A9:"vo",\u30F4\u30E5:"vyu",\u30F4\u30E7:"vyo",\u30AD\u30A7:"kya",\u30AF\u30A1:"kwa",\u30AF\u30A3:"kwi",\u30AF\u30A7:"kwe",\u30AF\u30A9:"kwo",\u30B0\u30A1:"gwa",\u30B0\u30A3:"gwi",\u30B0\u30A7:"gwe",\u30B0\u30A9:"gwo",\u3057\u3047:"she",\u3058\u3047:"je",\u3061\u3047:"che",\u3064\u3041:"tsa",\u3064\u3043:"tsi",\u3064\u3047:"tse",\u3064\u3049:"tso",\u3066\u3043:"ti",\u3066\u3085:"tyu",\u3067\u3043:"di",\u3067\u3085:"dyu",\u3068\u3045:"tu",\u3069\u3045:"du",\u306B\u3047:"nye",\u3072\u3047:"hye",\u3075\u3041:"fa",\u3075\u3043:"fi",\u3075\u3047:"fe",\u3075\u3049:"fo",\u3075\u3085:"fyu",\u3075\u3087:"fyo",\u30B7\u30A7:"she",\u30B8\u30A7:"je",\u30C1\u30A7:"che",\u30C4\u30A1:"tsa",\u30C4\u30A3:"tsi",\u30C4\u30A7:"tse",\u30C4\u30A9:"tso",\u30C6\u30A3:"ti",\u30C6\u30E5:"tyu",\u30C7\u30A3:"di",\u30C7\u30E5:"dyu",\u30C8\u30A5:"tu",\u30C9\u30A5:"du",\u30CB\u30A7:"nye",\u30D2\u30A7:"hye",\u30D5\u30A1:"fa",\u30D5\u30A3:"fi",\u30D5\u30A7:"fe",\u30D5\u30A9:"fo",\u30D5\u30E5:"fyu",\u30D5\u30E7:"fyo"}},s=/(っ|ッ)([bcdfghijklmnopqrstuvwyz])/gm,y=/っ|ッ/gm,f=0,p,g,c="";if(n===er.PASSPORT&&(e=e.replace(/ー/gm,"")),n===er.NIPPON||n===er.HEPBURN){let P=new RegExp(/(ん|ン)(?=あ|い|う|え|お|ア|イ|ウ|エ|オ|ぁ|ぃ|ぅ|ぇ|ぉ|ァ|ィ|ゥ|ェ|ォ|や|ゆ|よ|ヤ|ユ|ヨ|ゃ|ゅ|ょ|ャ|ュ|ョ)/g),$,x=[];for(;($=P.exec(e))!==null;)x.push($.index+1);if(x.length!==0){let H="";for(let V=0;V<x.length;V++)V===0?H+=`${e.slice(0,x[V])}'`:H+=`${e.slice(x[V-1],x[V])}'`;H+=e.slice(x[x.length-1]),e=H}}let R=e.length;for(;f<=R;)(g=o[n][e.substring(f,f+2)])?(c+=g,f+=2):(c+=(g=o[n][p=e.substring(f,f+1)])?g:p,f+=1);return c=c.replace(s,"$2$2"),(n===er.PASSPORT||n===er.HEPBURN)&&(c=c.replace(/cc/gm,"tc")),c=c.replace(y,"tsu"),(n===er.PASSPORT||n===er.HEPBURN)&&(c=c.replace(/nm/gm,"mm"),c=c.replace(/nb/gm,"mb"),c=c.replace(/np/gm,"mp")),n===er.NIPPON&&(c=c.replace(/aー/gm,"\xE2"),c=c.replace(/iー/gm,"\xEE"),c=c.replace(/uー/gm,"\xFB"),c=c.replace(/eー/gm,"\xEA"),c=c.replace(/oー/gm,"\xF4")),n===er.HEPBURN&&(c=c.replace(/aー/gm,"\u0101"),c=c.replace(/iー/gm,"\u012B"),c=c.replace(/uー/gm,"\u016B"),c=c.replace(/eー/gm,"\u0113"),c=c.replace(/oー/gm,"\u014D")),c};D.toRawRomaji=En;var Wo=function(e){let n=!1,o=!1;for(let s=0;s<e.length;s++)he(e[s])?n=!0:(se(e[s])||ce(e[s]))&&(o=!0);return n&&o?1:n?0:o?2:3};D.getStrType=Wo;var Zo=function(e){for(let n=0;n<e.length;n++)Cn(e[n].surface_form)?e[n].reading?jn(e[n].reading)&&(e[n].reading=fe(e[n].reading)):e[n].surface_form.split("").every(le)?e[n].reading=fe(e[n].surface_form):e[n].reading=e[n].surface_form:e[n].reading=e[n].surface_form;for(let n=0;n<e.length;n++)e[n].pos&&e[n].pos==="\u52A9\u52D5\u8A5E"&&(e[n].surface_form==="\u3046"||e[n].surface_form==="\u30A6")&&n-1>=0&&e[n-1].pos&&e[n-1].pos==="\u52D5\u8A5E"&&(e[n-1].surface_form+="\u3046",e[n-1].pronunciation?e[n-1].pronunciation+="\u30FC":e[n-1].pronunciation=`${e[n-1].reading}\u30FC`,e[n-1].reading+="\u30A6",e.splice(n,1),n--);for(let n=0;n<e.length;n++)e[n].pos&&(e[n].pos==="\u52D5\u8A5E"||e[n].pos==="\u5F62\u5BB9\u8A5E")&&e[n].surface_form.length>1&&(e[n].surface_form[e[n].surface_form.length-1]==="\u3063"||e[n].surface_form[e[n].surface_form.length-1]==="\u30C3")&&n+1<e.length&&(e[n].surface_form+=e[n+1].surface_form,e[n].pronunciation?e[n].pronunciation+=e[n+1].pronunciation:e[n].pronunciation=`${e[n].reading}${e[n+1].reading}`,e[n].reading+=e[n+1].reading,e.splice(n+1,1),n--);return e};D.patchTokens=Zo;var Xo=function(e){return In(e)};D.kanaToHiragna=Xo;var Qo=function(e){return fe(e)};D.kanaToKatakana=Qo;var ru=function(e,n){return En(e,n)};D.kanaToRomaji=ru});var Rn=U(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.default=void 0;var B=Fn();function On(r,e,n,o,s,y,f){try{var p=r[y](f),g=p.value}catch(c){n(c);return}p.done?e(g):Promise.resolve(g).then(o,s)}function Bn(r){return function(){var e=this,n=arguments;return new Promise(function(o,s){var y=r.apply(e,n);function f(g){On(y,o,s,f,p,"next",g)}function p(g){On(y,o,s,f,p,"throw",g)}f(void 0)})}}var pe=class{constructor(){this._analyzer=null}init(e){var n=this;return Bn(function*(){if(!e||typeof e!="object"||typeof e.init!="function"||typeof e.parse!="function")throw new Error("Invalid initialization parameter.");if(n._analyzer==null)yield e.init(),n._analyzer=e;else throw new Error("Kuroshiro has already been initialized.")})()}convert(e,n){var o=this;return Bn(function*(){if(n=n||{},n.to=n.to||"hiragana",n.mode=n.mode||"normal",n.romajiSystem=n.romajiSystem||B.ROMANIZATION_SYSTEM.HEPBURN,n.delimiter_start=n.delimiter_start||"(",n.delimiter_end=n.delimiter_end||")",e=e||"",["hiragana","katakana","romaji"].indexOf(n.to)===-1)throw new Error("Invalid Target Syllabary.");if(["normal","spaced","okurigana","furigana"].indexOf(n.mode)===-1)throw new Error("Invalid Conversion Mode.");if(Object.keys(B.ROMANIZATION_SYSTEM).map(p=>B.ROMANIZATION_SYSTEM[p]).indexOf(n.romajiSystem)===-1)throw new Error("Invalid Romanization System.");let y=yield o._analyzer.parse(e),f=(0,B.patchTokens)(y);if(n.mode==="normal"||n.mode==="spaced")switch(n.to){case"katakana":return n.mode==="normal"?f.map(g=>g.reading).join(""):f.map(g=>g.reading).join(" ");case"romaji":let p=g=>{let c;return(0,B.hasJapanese)(g.surface_form)?c=g.pronunciation||g.reading:c=g.surface_form,(0,B.toRawRomaji)(c,n.romajiSystem)};return n.mode==="normal"?f.map(p).join(""):f.map(p).join(" ");case"hiragana":for(let g=0;g<f.length;g++)if((0,B.hasKanji)(f[g].surface_form))if(!(0,B.hasKatakana)(f[g].surface_form))f[g].reading=(0,B.toRawHiragana)(f[g].reading);else{f[g].reading=(0,B.toRawHiragana)(f[g].reading);let c="",R="";for(let x=0;x<f[g].surface_form.length;x++)(0,B.isKanji)(f[g].surface_form[x])?R+="(.*)":R+=(0,B.isKatakana)(f[g].surface_form[x])?(0,B.toRawHiragana)(f[g].surface_form[x]):f[g].surface_form[x];let $=new RegExp(R).exec(f[g].reading);if($){let x=0;for(let H=0;H<f[g].surface_form.length;H++)(0,B.isKanji)(f[g].surface_form[H])?(c+=$[x+1],x++):c+=f[g].surface_form[H];f[g].reading=c}}else f[g].reading=f[g].surface_form;return n.mode==="normal"?f.map(g=>g.reading).join(""):f.map(g=>g.reading).join(" ");default:throw new Error("Unknown option.to param")}else if(n.mode==="okurigana"||n.mode==="furigana"){let p=[];for(let c=0;c<f.length;c++)switch((0,B.getStrType)(f[c].surface_form)){case 0:p.push([f[c].surface_form,1,(0,B.toRawHiragana)(f[c].reading),f[c].pronunciation||f[c].reading]);break;case 1:let P="",$=!1,x=[];for(let A=0;A<f[c].surface_form.length;A++)(0,B.isKanji)(f[c].surface_form[A])?$?x[x.length-1]+=f[c].surface_form[A]:($=!0,P+="(.+)",x.push(f[c].surface_form[A])):($=!1,x.push(f[c].surface_form[A]),P+=(0,B.isKatakana)(f[c].surface_form[A])?(0,B.toRawHiragana)(f[c].surface_form[A]):f[c].surface_form[A]);let V=new RegExp(`^${P}$`).exec((0,B.toRawHiragana)(f[c].reading));if(V){let A=1;for(let m=0;m<x.length;m++)(0,B.isKanji)(x[m][0])?(p.push([x[m],1,V[A],(0,B.toRawKatakana)(V[A])]),A+=1):p.push([x[m],2,(0,B.toRawHiragana)(x[m]),(0,B.toRawKatakana)(x[m])])}else p.push([f[c].surface_form,1,(0,B.toRawHiragana)(f[c].reading),f[c].pronunciation||f[c].reading]);break;case 2:for(let A=0;A<f[c].surface_form.length;A++)p.push([f[c].surface_form[A],2,(0,B.toRawHiragana)(f[c].reading[A]),f[c].pronunciation&&f[c].pronunciation[A]||f[c].reading[A]]);break;case 3:for(let A=0;A<f[c].surface_form.length;A++)p.push([f[c].surface_form[A],3,f[c].surface_form[A],f[c].surface_form[A]]);break;default:throw new Error("Unknown strType")}let g="";switch(n.to){case"katakana":if(n.mode==="okurigana")for(let c=0;c<p.length;c++)p[c][1]!==1?g+=p[c][0]:g+=p[c][0]+n.delimiter_start+(0,B.toRawKatakana)(p[c][2])+n.delimiter_end;else for(let c=0;c<p.length;c++)p[c][1]!==1?g+=p[c][0]:g+=`<ruby>${p[c][0]}<rp>${n.delimiter_start}</rp><rt>${(0,B.toRawKatakana)(p[c][2])}</rt><rp>${n.delimiter_end}</rp></ruby>`;return g;case"romaji":if(n.mode==="okurigana")for(let c=0;c<p.length;c++)p[c][1]!==1?g+=p[c][0]:g+=p[c][0]+n.delimiter_start+(0,B.toRawRomaji)(p[c][3],n.romajiSystem)+n.delimiter_end;else{g+="<ruby>";for(let c=0;c<p.length;c++)g+=`${p[c][0]}<rp>${n.delimiter_start}</rp><rt>${(0,B.toRawRomaji)(p[c][3],n.romajiSystem)}</rt><rp>${n.delimiter_end}</rp>`;g+="</ruby>"}return g;case"hiragana":if(n.mode==="okurigana")for(let c=0;c<p.length;c++)p[c][1]!==1?g+=p[c][0]:g+=p[c][0]+n.delimiter_start+p[c][2]+n.delimiter_end;else for(let c=0;c<p.length;c++)p[c][1]!==1?g+=p[c][0]:g+=`<ruby>${p[c][0]}<rp>${n.delimiter_start}</rp><rt>${p[c][2]}</rt><rp>${n.delimiter_end}</rp></ruby>`;return g;default:throw new Error("Invalid Target Syllabary.")}}})()}},eu={isHiragana:B.isHiragana,isKatakana:B.isKatakana,isKana:B.isKana,isKanji:B.isKanji,isJapanese:B.isJapanese,hasHiragana:B.hasHiragana,hasKatakana:B.hasKatakana,hasKana:B.hasKana,hasKanji:B.hasKanji,hasJapanese:B.hasJapanese,kanaToHiragna:B.kanaToHiragna,kanaToKatakana:B.kanaToKatakana,kanaToRomaji:B.kanaToRomaji};pe.Util=eu;var tu=pe;ye.default=tu});var Dn=U(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.default=void 0;var nu=iu(Rn());function iu(r){return r&&r.__esModule?r:{default:r}}var au=nu.default;ve.default=au});var Ve=U((rf,Ln)=>{"use strict";function ou(r,e,n,o,s,y,f,p){this.name=r,this.cost=e,this.start_pos=n,this.length=o,this.left_id=y,this.right_id=f,this.prev=null,this.surface_form=p,s==="BOS"?this.shortest_cost=0:this.shortest_cost=Number.MAX_VALUE,this.type=s}Ln.exports=ou});var zn=U((ef,Pn)=>{"use strict";var xn=Ve();function Ge(){this.nodes_end_at=[],this.nodes_end_at[0]=[new xn(-1,0,0,0,"BOS",0,0,"")],this.eos_pos=1}Ge.prototype.append=function(r){var e=r.start_pos+r.length-1;this.eos_pos<e&&(this.eos_pos=e);var n=this.nodes_end_at[e];n==null&&(n=[]),n.push(r),this.nodes_end_at[e]=n};Ge.prototype.appendEos=function(){var r=this.nodes_end_at.length;this.eos_pos++,this.nodes_end_at[r]=[new xn(-1,0,this.eos_pos,0,"EOS",0,0,"")]};Pn.exports=Ge});var Je=U((tf,Un)=>{"use strict";function vr(r){this.str=r,this.index_mapping=[];for(var e=0;e<r.length;e++){var n=r.charAt(e);this.index_mapping.push(e),vr.isSurrogatePair(n)&&e++}this.length=this.index_mapping.length}vr.prototype.slice=function(r){if(this.index_mapping.length<=r)return"";var e=this.index_mapping[r];return this.str.slice(e)};vr.prototype.charAt=function(r){if(this.str.length<=r)return"";var e=this.index_mapping[r],n=this.index_mapping[r+1];return n==null?this.str.slice(e):this.str.slice(e,n)};vr.prototype.charCodeAt=function(r){if(this.index_mapping.length<=r)return NaN;var e=this.index_mapping[r],n=this.str.charCodeAt(e),o;return n>=55296&&n<=56319&&e<this.str.length&&(o=this.str.charCodeAt(e+1),o>=56320&&o<=57343)?(n-55296)*1024+o-56320+65536:n};vr.prototype.toString=function(){return this.str};vr.isSurrogatePair=function(r){var e=r.charCodeAt(0);return e>=55296&&e<=56319};Un.exports=vr});var qn=U((nf,Mn)=>{"use strict";var Kn=Ve(),uu=zn(),Ye=Je();function Nn(r){this.trie=r.trie,this.token_info_dictionary=r.token_info_dictionary,this.unknown_dictionary=r.unknown_dictionary}Nn.prototype.build=function(r){for(var e=new uu,n=new Ye(r),o,s,y,f,p,g=0;g<n.length;g++){for(var c=n.slice(g),R=this.trie.commonPrefixSearch(c),P=0;P<R.length;P++){s=R[P].v,o=R[P].k;for(var $=this.token_info_dictionary.target_map[s],x=0;x<$.length;x++){var H=parseInt($[x]);y=this.token_info_dictionary.dictionary.getShort(H),f=this.token_info_dictionary.dictionary.getShort(H+2),p=this.token_info_dictionary.dictionary.getShort(H+4),e.append(new Kn(H,p,g+1,o.length,"KNOWN",y,f,o))}}var V=new Ye(c),A=new Ye(V.charAt(0)),m=this.unknown_dictionary.lookup(A.toString());if(R==null||R.length===0||m.is_always_invoke===1){if(o=A,m.is_grouping===1&&1<V.length)for(var S=1;S<V.length;S++){var I=V.charAt(S),j=this.unknown_dictionary.lookup(I);if(m.class_name!==j.class_name)break;o+=I}for(var _=this.unknown_dictionary.target_map[m.class_id],k=0;k<_.length;k++){var T=parseInt(_[k]);y=this.unknown_dictionary.dictionary.getShort(T),f=this.unknown_dictionary.dictionary.getShort(T+2),p=this.unknown_dictionary.dictionary.getShort(T+4),e.append(new Kn(T,p,g+1,o.length,"UNKNOWN",y,f,o.toString()))}}}return e.appendEos(),e};Mn.exports=Nn});var Hn=U((af,$n)=>{"use strict";function ge(r){this.connection_costs=r}ge.prototype.search=function(r){return r=this.forward(r),this.backward(r)};ge.prototype.forward=function(r){var e,n,o;for(e=1;e<=r.eos_pos;e++){var s=r.nodes_end_at[e];if(s!=null)for(n=0;n<s.length;n++){var y=s[n],f=Number.MAX_VALUE,p,g=r.nodes_end_at[y.start_pos-1];if(g!=null){for(o=0;o<g.length;o++){var c=g[o],R;y.left_id==null||c.right_id==null?(console.log("Left or right is null"),R=0):R=this.connection_costs.get(c.right_id,y.left_id);var P=c.shortest_cost+R+y.cost;P<f&&(p=c,f=P)}y.prev=p,y.shortest_cost=f}}}return r};ge.prototype.backward=function(r){var e=[],n=r.nodes_end_at[r.nodes_end_at.length-1][0],o=n.prev;if(o==null)return[];for(;o.type!=="BOS";){if(e.push(o),o.prev==null)return[];o=o.prev}return e.reverse()};$n.exports=ge});var Gn=U((of,Vn)=>{"use strict";function We(){}We.prototype.formatEntry=function(r,e,n,o){var s={};return s.word_id=r,s.word_type=n,s.word_position=e,s.surface_form=o[0],s.pos=o[1],s.pos_detail_1=o[2],s.pos_detail_2=o[3],s.pos_detail_3=o[4],s.conjugated_type=o[5],s.conjugated_form=o[6],s.basic_form=o[7],s.reading=o[8],s.pronunciation=o[9],s};We.prototype.formatUnknownEntry=function(r,e,n,o,s){var y={};return y.word_id=r,y.word_type=n,y.word_position=e,y.surface_form=s,y.pos=o[1],y.pos_detail_1=o[2],y.pos_detail_2=o[3],y.pos_detail_3=o[4],y.conjugated_type=o[5],y.conjugated_form=o[6],y.basic_form=o[7],y};Vn.exports=We});var Yn=U((uf,Jn)=>{"use strict";var fu=qn(),su=Hn(),cu=Gn(),lu=/、|。/;function Ar(r){this.token_info_dictionary=r.token_info_dictionary,this.unknown_dictionary=r.unknown_dictionary,this.viterbi_builder=new fu(r),this.viterbi_searcher=new su(r.connection_costs),this.formatter=new cu}Ar.splitByPunctuation=function(r){for(var e=[],n=r;n!=="";){var o=n.search(lu);if(o<0){e.push(n);break}e.push(n.substring(0,o+1)),n=n.substring(o+1)}return e};Ar.prototype.tokenize=function(r){for(var e=Ar.splitByPunctuation(r),n=[],o=0;o<e.length;o++){var s=e[o];this.tokenizeForSentence(s,n)}return n};Ar.prototype.tokenizeForSentence=function(r,e){e==null&&(e=[]);var n=this.getLattice(r),o=this.viterbi_searcher.search(n),s=0;e.length>0&&(s=e[e.length-1].word_position);for(var y=0;y<o.length;y++){var f=o[y],p,g,c;f.type==="KNOWN"?(c=this.token_info_dictionary.getFeatures(f.name),c==null?g=[]:g=c.split(","),p=this.formatter.formatEntry(f.name,s+f.start_pos,f.type,g)):f.type==="UNKNOWN"?(c=this.unknown_dictionary.getFeatures(f.name),c==null?g=[]:g=c.split(","),p=this.formatter.formatUnknownEntry(f.name,s+f.start_pos,f.type,g,f.surface_form)):p=this.formatter.formatEntry(f.name,s+f.start_pos,f.type,[]),e.push(p)}return e};Ar.prototype.getLattice=function(r){return this.viterbi_builder.build(r)};Jn.exports=Ar});var Wn=U((de,ar)=>{(function(r,e){typeof de=="object"&&typeof ar<"u"?e(de):typeof define=="function"&&define.amd?define(["exports"],e):e(r.async=r.async||{})})(de,(function(r){"use strict";function e(t,i){i=i|0;for(var a=Math.max(t.length-i,0),u=Array(a),h=0;h<a;h++)u[h]=t[i+h];return u}var n=function(t){var i=e(arguments,1);return function(){var a=e(arguments);return t.apply(null,i.concat(a))}},o=function(t){return function(){var i=e(arguments),a=i.pop();t.call(this,i,a)}};function s(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}var y=typeof setImmediate=="function"&&setImmediate,f=typeof process=="object"&&typeof process.nextTick=="function";function p(t){setTimeout(t,0)}function g(t){return function(i){var a=e(arguments,1);t(function(){i.apply(null,a)})}}var c;y?c=setImmediate:f?c=process.nextTick:c=p;var R=g(c);function P(t){return o(function(i,a){var u;try{u=t.apply(this,i)}catch(h){return a(h)}s(u)&&typeof u.then=="function"?u.then(function(h){$(a,null,h)},function(h){$(a,h.message?h:new Error(h))}):a(null,u)})}function $(t,i,a){try{t(i,a)}catch(u){R(x,u)}}function x(t){throw t}var H=typeof Symbol=="function";function V(t){return H&&t[Symbol.toStringTag]==="AsyncFunction"}function A(t){return V(t)?P(t):t}function m(t){return function(i){var a=e(arguments,1),u=o(function(h,l){var v=this;return t(i,function(d,w){A(d).apply(v,h.concat(w))},l)});return a.length?u.apply(this,a):u}}var S=typeof global=="object"&&global&&global.Object===Object&&global,I=typeof self=="object"&&self&&self.Object===Object&&self,j=S||I||Function("return this")(),_=j.Symbol,k=Object.prototype,T=k.hasOwnProperty,C=k.toString,F=_?_.toStringTag:void 0;function L(t){var i=T.call(t,F),a=t[F];try{t[F]=void 0;var u=!0}catch{}var h=C.call(t);return u&&(i?t[F]=a:delete t[F]),h}var G=Object.prototype,or=G.toString;function je(t){return or.call(t)}var ji="[object Null]",Ci="[object Undefined]",ct=_?_.toStringTag:void 0;function zr(t){return t==null?t===void 0?Ci:ji:ct&&ct in Object(t)?L(t):je(t)}var Ii="[object AsyncFunction]",Ei="[object Function]",Fi="[object GeneratorFunction]",Oi="[object Proxy]";function Bi(t){if(!s(t))return!1;var i=zr(t);return i==Ei||i==Fi||i==Ii||i==Oi}var Ri=9007199254740991;function lt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ri}function Cr(t){return t!=null&&lt(t.length)&&!Bi(t)}var Ce={};function z(){}function lr(t){return function(){if(t!==null){var i=t;t=null,i.apply(this,arguments)}}}var Ie=typeof Symbol=="function"&&Symbol.iterator,Di=function(t){return Ie&&t[Ie]&&t[Ie]()};function Li(t,i){for(var a=-1,u=Array(t);++a<t;)u[a]=i(a);return u}function Ur(t){return t!=null&&typeof t=="object"}var xi="[object Arguments]";function ht(t){return Ur(t)&&zr(t)==xi}var pt=Object.prototype,Pi=pt.hasOwnProperty,zi=pt.propertyIsEnumerable,Ui=ht((function(){return arguments})())?ht:function(t){return Ur(t)&&Pi.call(t,"callee")&&!zi.call(t,"callee")},Q=Array.isArray;function Ki(){return!1}var yt=typeof r=="object"&&r&&!r.nodeType&&r,vt=yt&&typeof ar=="object"&&ar&&!ar.nodeType&&ar,Ni=vt&&vt.exports===yt,gt=Ni?j.Buffer:void 0,Mi=gt?gt.isBuffer:void 0,qi=Mi||Ki,$i=9007199254740991,Hi=/^(?:0|[1-9]\d*)$/;function Vi(t,i){var a=typeof t;return i=i??$i,!!i&&(a=="number"||a!="symbol"&&Hi.test(t))&&t>-1&&t%1==0&&t<i}var Gi="[object Arguments]",Ji="[object Array]",Yi="[object Boolean]",Wi="[object Date]",Zi="[object Error]",Xi="[object Function]",Qi="[object Map]",ra="[object Number]",ea="[object Object]",ta="[object RegExp]",na="[object Set]",ia="[object String]",aa="[object WeakMap]",oa="[object ArrayBuffer]",ua="[object DataView]",fa="[object Float32Array]",sa="[object Float64Array]",ca="[object Int8Array]",la="[object Int16Array]",ha="[object Int32Array]",pa="[object Uint8Array]",ya="[object Uint8ClampedArray]",va="[object Uint16Array]",ga="[object Uint32Array]",K={};K[fa]=K[sa]=K[ca]=K[la]=K[ha]=K[pa]=K[ya]=K[va]=K[ga]=!0,K[Gi]=K[Ji]=K[oa]=K[Yi]=K[ua]=K[Wi]=K[Zi]=K[Xi]=K[Qi]=K[ra]=K[ea]=K[ta]=K[na]=K[ia]=K[aa]=!1;function da(t){return Ur(t)&&lt(t.length)&&!!K[zr(t)]}function ma(t){return function(i){return t(i)}}var dt=typeof r=="object"&&r&&!r.nodeType&&r,Ir=dt&&typeof ar=="object"&&ar&&!ar.nodeType&&ar,_a=Ir&&Ir.exports===dt,Ee=_a&&S.process,mt=(function(){try{var t=Ir&&Ir.require&&Ir.require("util").types;return t||Ee&&Ee.binding&&Ee.binding("util")}catch{}})(),_t=mt&&mt.isTypedArray,wa=_t?ma(_t):da,ba=Object.prototype,ka=ba.hasOwnProperty;function Ta(t,i){var a=Q(t),u=!a&&Ui(t),h=!a&&!u&&qi(t),l=!a&&!u&&!h&&wa(t),v=a||u||h||l,d=v?Li(t.length,String):[],w=d.length;for(var E in t)(i||ka.call(t,E))&&!(v&&(E=="length"||h&&(E=="offset"||E=="parent")||l&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||Vi(E,w)))&&d.push(E);return d}var Aa=Object.prototype;function Sa(t){var i=t&&t.constructor,a=typeof i=="function"&&i.prototype||Aa;return t===a}function ja(t,i){return function(a){return t(i(a))}}var Ca=ja(Object.keys,Object),Ia=Object.prototype,Ea=Ia.hasOwnProperty;function Fa(t){if(!Sa(t))return Ca(t);var i=[];for(var a in Object(t))Ea.call(t,a)&&a!="constructor"&&i.push(a);return i}function Fe(t){return Cr(t)?Ta(t):Fa(t)}function Oa(t){var i=-1,a=t.length;return function(){return++i<a?{value:t[i],key:i}:null}}function Ba(t){var i=-1;return function(){var u=t.next();return u.done?null:(i++,{value:u.value,key:i})}}function Ra(t){var i=Fe(t),a=-1,u=i.length;return function h(){var l=i[++a];return l==="__proto__"?h():a<u?{value:t[l],key:l}:null}}function Da(t){if(Cr(t))return Oa(t);var i=Di(t);return i?Ba(i):Ra(t)}function tr(t){return function(){if(t===null)throw new Error("Callback was already called.");var i=t;t=null,i.apply(this,arguments)}}function Kr(t){return function(i,a,u){if(u=lr(u||z),t<=0||!i)return u(null);var h=Da(i),l=!1,v=0,d=!1;function w(b,O){if(v-=1,b)l=!0,u(b);else{if(O===Ce||l&&v<=0)return l=!0,u(null);d||E()}}function E(){for(d=!0;v<t&&!l;){var b=h();if(b===null){l=!0,v<=0&&u(null);return}v+=1,a(b.value,b.key,tr(w))}d=!1}E()}}function yr(t,i,a,u){Kr(i)(t,A(a),u)}function Y(t,i){return function(a,u,h){return t(a,i,u,h)}}function La(t,i,a){a=lr(a||z);var u=0,h=0,l=t.length;l===0&&a(null);function v(d,w){d?a(d):(++h===l||w===Ce)&&a(null)}for(;u<l;u++)i(t[u],u,tr(v))}var xa=Y(yr,1/0),hr=function(t,i,a){var u=Cr(t)?La:xa;u(t,A(i),a)};function dr(t){return function(i,a,u){return t(hr,i,A(a),u)}}function wt(t,i,a,u){u=u||z,i=i||[];var h=[],l=0,v=A(a);t(i,function(d,w,E){var b=l++;v(d,function(O,N){h[b]=N,E(O)})},function(d){u(d,h)})}var Nr=dr(wt),bt=m(Nr);function mr(t){return function(i,a,u,h){return t(Kr(a),i,A(u),h)}}var _r=mr(wt),Oe=Y(_r,1),kt=m(Oe);function Mr(t,i){for(var a=-1,u=t==null?0:t.length;++a<u&&i(t[a],a,t)!==!1;);return t}function Pa(t){return function(i,a,u){for(var h=-1,l=Object(i),v=u(i),d=v.length;d--;){var w=v[t?d:++h];if(a(l[w],w,l)===!1)break}return i}}var za=Pa();function Er(t,i){return t&&za(t,i,Fe)}function Ua(t,i,a,u){for(var h=t.length,l=a+(u?1:-1);u?l--:++l<h;)if(i(t[l],l,t))return l;return-1}function Ka(t){return t!==t}function Na(t,i,a){for(var u=a-1,h=t.length;++u<h;)if(t[u]===i)return u;return-1}function qr(t,i,a){return i===i?Na(t,i,a):Ua(t,Ka,a)}var Be=function(t,i,a){typeof i=="function"&&(a=i,i=null),a=lr(a||z);var u=Fe(t),h=u.length;if(!h)return a(null);i||(i=h);var l={},v=0,d=!1,w=Object.create(null),E=[],b=[],O={};Er(t,function(M,q){if(!Q(M)){N(q,[M]),b.push(q);return}var J=M.slice(0,M.length-1),ur=J.length;if(ur===0){N(q,M),b.push(q);return}O[q]=ur,Mr(J,function(Tr){if(!t[Tr])throw new Error("async.auto task `"+q+"` has a non-existent dependency `"+Tr+"` in "+J.join(", "));nr(Tr,function(){ur--,ur===0&&N(q,M)})})}),Do(),W();function N(M,q){E.push(function(){ir(M,q)})}function W(){if(E.length===0&&v===0)return a(null,l);for(;E.length&&v<i;){var M=E.shift();M()}}function nr(M,q){var J=w[M];J||(J=w[M]=[]),J.push(q)}function X(M){var q=w[M]||[];Mr(q,function(J){J()}),W()}function ir(M,q){if(!d){var J=tr(function(Tr,$e){if(v--,arguments.length>2&&($e=e(arguments,1)),Tr){var He={};Er(l,function(xo,Po){He[Po]=xo}),He[M]=$e,d=!0,w=Object.create(null),a(Tr,He)}else l[M]=$e,X(M)});v++;var ur=A(q[q.length-1]);q.length>1?ur(l,J):ur(J)}}function Do(){for(var M,q=0;b.length;)M=b.pop(),q++,Mr(Lo(M),function(J){--O[J]===0&&b.push(J)});if(q!==h)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function Lo(M){var q=[];return Er(t,function(J,ur){Q(J)&&qr(J,M,0)>=0&&q.push(ur)}),q}};function wr(t,i){for(var a=-1,u=t==null?0:t.length,h=Array(u);++a<u;)h[a]=i(t[a],a,t);return h}var Ma="[object Symbol]";function qa(t){return typeof t=="symbol"||Ur(t)&&zr(t)==Ma}var $a=1/0,Tt=_?_.prototype:void 0,At=Tt?Tt.toString:void 0;function Re(t){if(typeof t=="string")return t;if(Q(t))return wr(t,Re)+"";if(qa(t))return At?At.call(t):"";var i=t+"";return i=="0"&&1/t==-$a?"-0":i}function Ha(t,i,a){var u=-1,h=t.length;i<0&&(i=-i>h?0:h+i),a=a>h?h:a,a<0&&(a+=h),h=i>a?0:a-i>>>0,i>>>=0;for(var l=Array(h);++u<h;)l[u]=t[u+i];return l}function Va(t,i,a){var u=t.length;return a=a===void 0?u:a,!i&&a>=u?t:Ha(t,i,a)}function Ga(t,i){for(var a=t.length;a--&&qr(i,t[a],0)>-1;);return a}function Ja(t,i){for(var a=-1,u=t.length;++a<u&&qr(i,t[a],0)>-1;);return a}function Ya(t){return t.split("")}var Wa="\\ud800-\\udfff",Za="\\u0300-\\u036f",Xa="\\ufe20-\\ufe2f",Qa="\\u20d0-\\u20ff",ro=Za+Xa+Qa,eo="\\ufe0e\\ufe0f",to="\\u200d",no=RegExp("["+to+Wa+ro+eo+"]");function io(t){return no.test(t)}var St="\\ud800-\\udfff",ao="\\u0300-\\u036f",oo="\\ufe20-\\ufe2f",uo="\\u20d0-\\u20ff",fo=ao+oo+uo,so="\\ufe0e\\ufe0f",co="["+St+"]",De="["+fo+"]",Le="\\ud83c[\\udffb-\\udfff]",lo="(?:"+De+"|"+Le+")",jt="[^"+St+"]",Ct="(?:\\ud83c[\\udde6-\\uddff]){2}",It="[\\ud800-\\udbff][\\udc00-\\udfff]",ho="\\u200d",Et=lo+"?",Ft="["+so+"]?",po="(?:"+ho+"(?:"+[jt,Ct,It].join("|")+")"+Ft+Et+")*",yo=Ft+Et+po,vo="(?:"+[jt+De+"?",De,Ct,It,co].join("|")+")",go=RegExp(Le+"(?="+Le+")|"+vo+yo,"g");function mo(t){return t.match(go)||[]}function Ot(t){return io(t)?mo(t):Ya(t)}function _o(t){return t==null?"":Re(t)}var wo=/^\s+|\s+$/g;function bo(t,i,a){if(t=_o(t),t&&(a||i===void 0))return t.replace(wo,"");if(!t||!(i=Re(i)))return t;var u=Ot(t),h=Ot(i),l=Ja(u,h),v=Ga(u,h)+1;return Va(u,l,v).join("")}var ko=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,To=/,/,Ao=/(=.+)?(\s*)$/,So=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;function jo(t){return t=t.toString().replace(So,""),t=t.match(ko)[2].replace(" ",""),t=t?t.split(To):[],t=t.map(function(i){return bo(i.replace(Ao,""))}),t}function Bt(t,i){var a={};Er(t,function(u,h){var l,v=V(u),d=!v&&u.length===1||v&&u.length===0;if(Q(u))l=u.slice(0,-1),u=u[u.length-1],a[h]=l.concat(l.length>0?w:u);else if(d)a[h]=u;else{if(l=jo(u),u.length===0&&!v&&l.length===0)throw new Error("autoInject task functions require explicit parameters.");v||l.pop(),a[h]=l.concat(w)}function w(E,b){var O=wr(l,function(N){return E[N]});O.push(b),A(u).apply(null,O)}}),Be(a,i)}function rr(){this.head=this.tail=null,this.length=0}function Rt(t,i){t.length=1,t.head=t.tail=i}rr.prototype.removeLink=function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t},rr.prototype.empty=function(){for(;this.head;)this.shift();return this},rr.prototype.insertAfter=function(t,i){i.prev=t,i.next=t.next,t.next?t.next.prev=i:this.tail=i,t.next=i,this.length+=1},rr.prototype.insertBefore=function(t,i){i.prev=t.prev,i.next=t,t.prev?t.prev.next=i:this.head=i,t.prev=i,this.length+=1},rr.prototype.unshift=function(t){this.head?this.insertBefore(this.head,t):Rt(this,t)},rr.prototype.push=function(t){this.tail?this.insertAfter(this.tail,t):Rt(this,t)},rr.prototype.shift=function(){return this.head&&this.removeLink(this.head)},rr.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},rr.prototype.toArray=function(){for(var t=Array(this.length),i=this.head,a=0;a<this.length;a++)t[a]=i.data,i=i.next;return t},rr.prototype.remove=function(t){for(var i=this.head;i;){var a=i.next;t(i)&&this.removeLink(i),i=a}return this};function Dt(t,i,a){if(i==null)i=1;else if(i===0)throw new Error("Concurrency must not be zero");var u=A(t),h=0,l=[],v=!1;function d(O,N,W){if(W!=null&&typeof W!="function")throw new Error("task callback must be a function");if(b.started=!0,Q(O)||(O=[O]),O.length===0&&b.idle())return R(function(){b.drain()});for(var nr=0,X=O.length;nr<X;nr++){var ir={data:O[nr],callback:W||z};N?b._tasks.unshift(ir):b._tasks.push(ir)}v||(v=!0,R(function(){v=!1,b.process()}))}function w(O){return function(N){h-=1;for(var W=0,nr=O.length;W<nr;W++){var X=O[W],ir=qr(l,X,0);ir===0?l.shift():ir>0&&l.splice(ir,1),X.callback.apply(X,arguments),N!=null&&b.error(N,X.data)}h<=b.concurrency-b.buffer&&b.unsaturated(),b.idle()&&b.drain(),b.process()}}var E=!1,b={_tasks:new rr,concurrency:i,payload:a,saturated:z,unsaturated:z,buffer:i/4,empty:z,drain:z,error:z,started:!1,paused:!1,push:function(O,N){d(O,!1,N)},kill:function(){b.drain=z,b._tasks.empty()},unshift:function(O,N){d(O,!0,N)},remove:function(O){b._tasks.remove(O)},process:function(){if(!E){for(E=!0;!b.paused&&h<b.concurrency&&b._tasks.length;){var O=[],N=[],W=b._tasks.length;b.payload&&(W=Math.min(W,b.payload));for(var nr=0;nr<W;nr++){var X=b._tasks.shift();O.push(X),l.push(X),N.push(X.data)}h+=1,b._tasks.length===0&&b.empty(),h===b.concurrency&&b.saturated();var ir=tr(w(O));u(N,ir)}E=!1}},length:function(){return b._tasks.length},running:function(){return h},workersList:function(){return l},idle:function(){return b._tasks.length+h===0},pause:function(){b.paused=!0},resume:function(){b.paused!==!1&&(b.paused=!1,R(b.process))}};return b}function Lt(t,i){return Dt(t,1,i)}var br=Y(yr,1);function pr(t,i,a,u){u=lr(u||z);var h=A(a);br(t,function(l,v,d){h(i,l,function(w,E){i=E,d(w)})},function(l){u(l,i)})}function xe(){var t=wr(arguments,A);return function(){var i=e(arguments),a=this,u=i[i.length-1];typeof u=="function"?i.pop():u=z,pr(t,i,function(h,l,v){l.apply(a,h.concat(function(d){var w=e(arguments,1);v(d,w)}))},function(h,l){u.apply(a,[h].concat(l))})}}var xt=function(){return xe.apply(null,e(arguments).reverse())},Co=Array.prototype.concat,$r=function(t,i,a,u){u=u||z;var h=A(a);_r(t,i,function(l,v){h(l,function(d){return d?v(d):v(null,e(arguments,1))})},function(l,v){for(var d=[],w=0;w<v.length;w++)v[w]&&(d=Co.apply(d,v[w]));return u(l,d)})},Pt=Y($r,1/0),zt=Y($r,1),Ut=function(){var t=e(arguments),i=[null].concat(t);return function(){var a=arguments[arguments.length-1];return a.apply(this,i)}};function Fr(t){return t}function kr(t,i){return function(a,u,h,l){l=l||z;var v=!1,d;a(u,function(w,E,b){h(w,function(O,N){O?b(O):t(N)&&!d?(v=!0,d=i(!0,w),b(null,Ce)):b()})},function(w){w?l(w):l(null,v?d:i(!1))})}}function Kt(t,i){return i}var Hr=dr(kr(Fr,Kt)),Or=mr(kr(Fr,Kt)),Vr=Y(Or,1);function Nt(t){return function(i){var a=e(arguments,1);a.push(function(u){var h=e(arguments,1);typeof console=="object"&&(u?console.error&&console.error(u):console[t]&&Mr(h,function(l){console[t](l)}))}),A(i).apply(null,a)}}var Mt=Nt("dir");function qt(t,i,a){a=tr(a||z);var u=A(t),h=A(i);function l(d){if(d)return a(d);var w=e(arguments,1);w.push(v),h.apply(this,w)}function v(d,w){if(d)return a(d);if(!w)return a(null);u(l)}v(null,!0)}function Pe(t,i,a){a=tr(a||z);var u=A(t),h=function(l){if(l)return a(l);var v=e(arguments,1);if(i.apply(this,v))return u(h);a.apply(null,[null].concat(v))};u(h)}function $t(t,i,a){Pe(t,function(){return!i.apply(this,arguments)},a)}function Ht(t,i,a){a=tr(a||z);var u=A(i),h=A(t);function l(d){if(d)return a(d);h(v)}function v(d,w){if(d)return a(d);if(!w)return a(null);u(l)}h(v)}function Vt(t){return function(i,a,u){return t(i,u)}}function Gr(t,i,a){hr(t,Vt(A(i)),a)}function Br(t,i,a,u){Kr(i)(t,Vt(A(a)),u)}var Rr=Y(Br,1);function ze(t){return V(t)?t:o(function(i,a){var u=!0;i.push(function(){var h=arguments;u?R(function(){a.apply(null,h)}):a.apply(null,h)}),t.apply(this,i),u=!1})}function Jr(t){return!t}var Yr=dr(kr(Jr,Jr)),Dr=mr(kr(Jr,Jr)),Wr=Y(Dr,1);function Gt(t){return function(i){return i==null?void 0:i[t]}}function Io(t,i,a,u){var h=new Array(i.length);t(i,function(l,v,d){a(l,function(w,E){h[v]=!!E,d(w)})},function(l){if(l)return u(l);for(var v=[],d=0;d<i.length;d++)h[d]&&v.push(i[d]);u(null,v)})}function Eo(t,i,a,u){var h=[];t(i,function(l,v,d){a(l,function(w,E){w?d(w):(E&&h.push({index:v,value:l}),d())})},function(l){l?u(l):u(null,wr(h.sort(function(v,d){return v.index-d.index}),Gt("value")))})}function Ue(t,i,a,u){var h=Cr(i)?Io:Eo;h(t,i,A(a),u||z)}var Zr=dr(Ue),Lr=mr(Ue),Xr=Y(Lr,1);function Jt(t,i){var a=tr(i||z),u=A(ze(t));function h(l){if(l)return a(l);u(h)}h()}var Qr=function(t,i,a,u){u=u||z;var h=A(a);_r(t,i,function(l,v){h(l,function(d,w){return d?v(d):v(null,{key:w,val:l})})},function(l,v){for(var d={},w=Object.prototype.hasOwnProperty,E=0;E<v.length;E++)if(v[E]){var b=v[E].key,O=v[E].val;w.call(d,b)?d[b].push(O):d[b]=[O]}return u(l,d)})},Yt=Y(Qr,1/0),Wt=Y(Qr,1),Zt=Nt("log");function re(t,i,a,u){u=lr(u||z);var h={},l=A(a);yr(t,i,function(v,d,w){l(v,d,function(E,b){if(E)return w(E);h[d]=b,w()})},function(v){u(v,h)})}var Xt=Y(re,1/0),Qt=Y(re,1);function rn(t,i){return i in t}function en(t,i){var a=Object.create(null),u=Object.create(null);i=i||Fr;var h=A(t),l=o(function(d,w){var E=i.apply(null,d);rn(a,E)?R(function(){w.apply(null,a[E])}):rn(u,E)?u[E].push(w):(u[E]=[w],h.apply(null,d.concat(function(){var b=e(arguments);a[E]=b;var O=u[E];delete u[E];for(var N=0,W=O.length;N<W;N++)O[N].apply(null,b)})))});return l.memo=a,l.unmemoized=t,l}var ee;f?ee=process.nextTick:y?ee=setImmediate:ee=p;var tn=g(ee);function Ke(t,i,a){a=a||z;var u=Cr(i)?[]:{};t(i,function(h,l,v){A(h)(function(d,w){arguments.length>2&&(w=e(arguments,1)),u[l]=w,v(d)})},function(h){a(h,u)})}function nn(t,i){Ke(hr,t,i)}function an(t,i,a){Ke(Kr(i),t,a)}var Ne=function(t,i){var a=A(t);return Dt(function(u,h){a(u[0],h)},i,1)},on=function(t,i){var a=Ne(t,i);return a.push=function(u,h,l){if(l==null&&(l=z),typeof l!="function")throw new Error("task callback must be a function");if(a.started=!0,Q(u)||(u=[u]),u.length===0)return R(function(){a.drain()});h=h||0;for(var v=a._tasks.head;v&&h>=v.priority;)v=v.next;for(var d=0,w=u.length;d<w;d++){var E={data:u[d],priority:h,callback:l};v?a._tasks.insertBefore(v,E):a._tasks.push(E)}R(a.process)},delete a.unshift,a};function un(t,i){if(i=lr(i||z),!Q(t))return i(new TypeError("First argument to race must be an array of functions"));if(!t.length)return i();for(var a=0,u=t.length;a<u;a++)A(t[a])(i)}function te(t,i,a,u){var h=e(t).reverse();pr(h,i,a,u)}function ne(t){var i=A(t);return o(function(u,h){return u.push(function(v,d){if(v)h(null,{error:v});else{var w;arguments.length<=2?w=d:w=e(arguments,1),h(null,{value:w})}}),i.apply(this,u)})}function fn(t){var i;return Q(t)?i=wr(t,ne):(i={},Er(t,function(a,u){i[u]=ne.call(this,a)})),i}function sn(t,i,a,u){Ue(t,i,function(h,l){a(h,function(v,d){l(v,!d)})},u)}var cn=dr(sn),Me=mr(sn),ln=Y(Me,1);function hn(t){return function(){return t}}function ie(t,i,a){var u=5,h=0,l={times:u,intervalFunc:hn(h)};function v(b,O){if(typeof O=="object")b.times=+O.times||u,b.intervalFunc=typeof O.interval=="function"?O.interval:hn(+O.interval||h),b.errorFilter=O.errorFilter;else if(typeof O=="number"||typeof O=="string")b.times=+O||u;else throw new Error("Invalid arguments for async.retry")}if(arguments.length<3&&typeof t=="function"?(a=i||z,i=t):(v(l,t),a=a||z),typeof i!="function")throw new Error("Invalid arguments for async.retry");var d=A(i),w=1;function E(){d(function(b){b&&w++<l.times&&(typeof l.errorFilter!="function"||l.errorFilter(b))?setTimeout(E,l.intervalFunc(w)):a.apply(null,arguments)})}E()}var pn=function(t,i){i||(i=t,t=null);var a=A(i);return o(function(u,h){function l(v){a.apply(null,u.concat(v))}t?ie(t,l,h):ie(l,h)})};function yn(t,i){Ke(br,t,i)}var ae=dr(kr(Boolean,Fr)),xr=mr(kr(Boolean,Fr)),oe=Y(xr,1);function vn(t,i,a){var u=A(i);Nr(t,function(l,v){u(l,function(d,w){if(d)return v(d);v(null,{value:l,criteria:w})})},function(l,v){if(l)return a(l);a(null,wr(v.sort(h),Gt("value")))});function h(l,v){var d=l.criteria,w=v.criteria;return d<w?-1:d>w?1:0}}function gn(t,i,a){var u=A(t);return o(function(h,l){var v=!1,d;function w(){var E=t.name||"anonymous",b=new Error('Callback function "'+E+'" timed out.');b.code="ETIMEDOUT",a&&(b.info=a),v=!0,l(b)}h.push(function(){v||(l.apply(null,arguments),clearTimeout(d))}),d=setTimeout(w,i),u.apply(null,h)})}var Fo=Math.ceil,Oo=Math.max;function Bo(t,i,a,u){for(var h=-1,l=Oo(Fo((i-t)/(a||1)),0),v=Array(l);l--;)v[u?l:++h]=t,t+=a;return v}function ue(t,i,a,u){var h=A(a);_r(Bo(0,t,1),i,h,u)}var dn=Y(ue,1/0),mn=Y(ue,1);function _n(t,i,a,u){arguments.length<=3&&(u=a,a=i,i=Q(t)?[]:{}),u=lr(u||z);var h=A(a);hr(t,function(l,v,d){h(i,l,v,d)},function(l){u(l,i)})}function wn(t,i){var a=null,u;i=i||z,Rr(t,function(h,l){A(h)(function(v,d){arguments.length>2?u=e(arguments,1):u=d,a=v,l(!v)})},function(){i(a,u)})}function bn(t){return function(){return(t.unmemoized||t).apply(null,arguments)}}function qe(t,i,a){a=tr(a||z);var u=A(i);if(!t())return a(null);var h=function(l){if(l)return a(l);if(t())return u(h);var v=e(arguments,1);a.apply(null,[null].concat(v))};u(h)}function kn(t,i,a){qe(function(){return!t.apply(this,arguments)},i,a)}var Tn=function(t,i){if(i=lr(i||z),!Q(t))return i(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return i();var a=0;function u(l){var v=A(t[a++]);l.push(tr(h)),v.apply(null,l)}function h(l){if(l||a===t.length)return i.apply(null,arguments);u(e(arguments,1))}u([])},Ro={apply:n,applyEach:bt,applyEachSeries:kt,asyncify:P,auto:Be,autoInject:Bt,cargo:Lt,compose:xt,concat:Pt,concatLimit:$r,concatSeries:zt,constant:Ut,detect:Hr,detectLimit:Or,detectSeries:Vr,dir:Mt,doDuring:qt,doUntil:$t,doWhilst:Pe,during:Ht,each:Gr,eachLimit:Br,eachOf:hr,eachOfLimit:yr,eachOfSeries:br,eachSeries:Rr,ensureAsync:ze,every:Yr,everyLimit:Dr,everySeries:Wr,filter:Zr,filterLimit:Lr,filterSeries:Xr,forever:Jt,groupBy:Yt,groupByLimit:Qr,groupBySeries:Wt,log:Zt,map:Nr,mapLimit:_r,mapSeries:Oe,mapValues:Xt,mapValuesLimit:re,mapValuesSeries:Qt,memoize:en,nextTick:tn,parallel:nn,parallelLimit:an,priorityQueue:on,queue:Ne,race:un,reduce:pr,reduceRight:te,reflect:ne,reflectAll:fn,reject:cn,rejectLimit:Me,rejectSeries:ln,retry:ie,retryable:pn,seq:xe,series:yn,setImmediate:R,some:ae,someLimit:xr,someSeries:oe,sortBy:vn,timeout:gn,times:dn,timesLimit:ue,timesSeries:mn,transform:_n,tryEach:wn,unmemoize:bn,until:kn,waterfall:Tn,whilst:qe,all:Yr,allLimit:Dr,allSeries:Wr,any:ae,anyLimit:xr,anySeries:oe,find:Hr,findLimit:Or,findSeries:Vr,forEach:Gr,forEachSeries:Rr,forEachLimit:Br,forEachOf:hr,forEachOfSeries:br,forEachOfLimit:yr,inject:pr,foldl:pr,foldr:te,select:Zr,selectLimit:Lr,selectSeries:Xr,wrapSync:P};r.default=Ro,r.apply=n,r.applyEach=bt,r.applyEachSeries=kt,r.asyncify=P,r.auto=Be,r.autoInject=Bt,r.cargo=Lt,r.compose=xt,r.concat=Pt,r.concatLimit=$r,r.concatSeries=zt,r.constant=Ut,r.detect=Hr,r.detectLimit=Or,r.detectSeries=Vr,r.dir=Mt,r.doDuring=qt,r.doUntil=$t,r.doWhilst=Pe,r.during=Ht,r.each=Gr,r.eachLimit=Br,r.eachOf=hr,r.eachOfLimit=yr,r.eachOfSeries=br,r.eachSeries=Rr,r.ensureAsync=ze,r.every=Yr,r.everyLimit=Dr,r.everySeries=Wr,r.filter=Zr,r.filterLimit=Lr,r.filterSeries=Xr,r.forever=Jt,r.groupBy=Yt,r.groupByLimit=Qr,r.groupBySeries=Wt,r.log=Zt,r.map=Nr,r.mapLimit=_r,r.mapSeries=Oe,r.mapValues=Xt,r.mapValuesLimit=re,r.mapValuesSeries=Qt,r.memoize=en,r.nextTick=tn,r.parallel=nn,r.parallelLimit=an,r.priorityQueue=on,r.queue=Ne,r.race=un,r.reduce=pr,r.reduceRight=te,r.reflect=ne,r.reflectAll=fn,r.reject=cn,r.rejectLimit=Me,r.rejectSeries=ln,r.retry=ie,r.retryable=pn,r.seq=xe,r.series=yn,r.setImmediate=R,r.some=ae,r.someLimit=xr,r.someSeries=oe,r.sortBy=vn,r.timeout=gn,r.times=dn,r.timesLimit=ue,r.timesSeries=mn,r.transform=_n,r.tryEach=wn,r.unmemoize=bn,r.until=kn,r.waterfall=Tn,r.whilst=qe,r.all=Yr,r.allLimit=Dr,r.allSeries=Wr,r.any=ae,r.anyLimit=xr,r.anySeries=oe,r.find=Hr,r.findLimit=Or,r.findSeries=Vr,r.forEach=Gr,r.forEachSeries=Rr,r.forEachLimit=Br,r.forEachOf=hr,r.forEachOfSeries=br,r.forEachOfLimit=yr,r.inject=pr,r.foldl=pr,r.foldr=te,r.select=Zr,r.selectLimit=Lr,r.selectSeries=Xr,r.wrapSync=P,Object.defineProperty(r,"__esModule",{value:!0})}))});var Xe=U((ff,Ze)=>{(function(){"use strict";var r="\0",e=0,n=0,o=-1,s=!0,y=!0,f=4,p=4,g=2,c=function(m){m==null&&(m=1024);var S=function(C,F,L){for(var G=F;G<L;G++)C[G]=-G+1;if(0<T.array[T.array.length-1]){for(var or=T.array.length-2;0<T.array[or];)or--;C[F]=-or}},I=function(C,F,L){for(var G=F;G<L;G++)C[G]=-G-1},j=function(C){var F=C*g,L=$(k.signed,k.bytes,F);S(L,k.array.length,F),L.set(k.array),k.array=null,k.array=L;var G=$(T.signed,T.bytes,F);I(G,T.array.length,F),G.set(T.array),T.array=null,T.array=G},_=n+1,k={signed:s,bytes:f,array:$(s,f,m)},T={signed:y,bytes:p,array:$(y,p,m)};return k.array[n]=1,T.array[n]=n,S(k.array,n+1,k.array.length),I(T.array,n+1,T.array.length),{getBaseBuffer:function(){return k.array},getCheckBuffer:function(){return T.array},loadBaseBuffer:function(C){return k.array=C,this},loadCheckBuffer:function(C){return T.array=C,this},size:function(){return Math.max(k.array.length,T.array.length)},getBase:function(C){return k.array.length-1<C?-C+1:k.array[C]},getCheck:function(C){return T.array.length-1<C?-C-1:T.array[C]},setBase:function(C,F){k.array.length-1<C&&j(C),k.array[C]=F},setCheck:function(C,F){T.array.length-1<C&&j(C),T.array[C]=F},setFirstUnusedNode:function(C){_=C},getFirstUnusedNode:function(){return _},shrink:function(){for(var C=this.size()-1;!(0<=T.array[C]);)C--;k.array=k.array.subarray(0,C+2),T.array=T.array.subarray(0,C+2)},calc:function(){for(var C=0,F=T.array.length,L=0;L<F;L++)T.array[L]<0&&C++;return{all:F,unused:C,efficiency:(F-C)/F}},dump:function(){var C="",F="",L;for(L=0;L<k.array.length;L++)C=C+" "+this.getBase(L);for(L=0;L<T.array.length;L++)F=F+" "+this.getCheck(L);return console.log("base:"+C),console.log("chck:"+F),"base:"+C+" chck:"+F}}};function R(m){this.bc=c(m),this.keys=[]}R.prototype.append=function(m,S){return this.keys.push({k:m,v:S}),this},R.prototype.build=function(m,S){if(m==null&&(m=this.keys),m==null)return new P(this.bc);S==null&&(S=!1);var I=m.map(function(j){return{k:H(j.k+r),v:j.v}});return S?this.keys=I:this.keys=I.sort(function(j,_){for(var k=j.k,T=_.k,C=Math.min(k.length,T.length),F=0;F<C;F++)if(k[F]!==T[F])return k[F]-T[F];return k.length-T.length}),I=null,this._build(n,0,0,this.keys.length),new P(this.bc)},R.prototype._build=function(m,S,I,j){var _=this.getChildrenInfo(S,I,j),k=this.findAllocatableBase(_);this.setBC(m,_,k);for(var T=0;T<_.length;T=T+3){var C=_[T];if(C!==e){var F=_[T+1],L=_[T+2],G=k+C;this._build(G,S+1,F,L)}}},R.prototype.getChildrenInfo=function(m,S,I){var j=this.keys[S].k[m],_=0,k=new Int32Array(I*3);k[_++]=j,k[_++]=S;for(var T=S,C=S;T<S+I;T++){var F=this.keys[T].k[m];j!==F&&(k[_++]=T-C,k[_++]=F,k[_++]=T,j=F,C=T)}return k[_++]=T-C,k=k.subarray(0,_),k},R.prototype.setBC=function(m,S,I){var j=this.bc;j.setBase(m,I);var _;for(_=0;_<S.length;_=_+3){var k=S[_],T=I+k,C=-j.getBase(T),F=-j.getCheck(T);T!==j.getFirstUnusedNode()?j.setCheck(C,-F):j.setFirstUnusedNode(F),j.setBase(F,-C);var L=m;if(j.setCheck(T,L),k===e){var G=S[_+1],or=this.keys[G].v;or==null&&(or=0);var je=-or-1;j.setBase(T,je)}}},R.prototype.findAllocatableBase=function(m){for(var S=this.bc,I,j=S.getFirstUnusedNode();;){if(I=j-m[0],I<0){j=-S.getCheck(j);continue}for(var _=!0,k=0;k<m.length;k=k+3){var T=m[k],C=I+T;if(!this.isUnusedNode(C)){j=-S.getCheck(j),_=!1;break}}if(_)return I}},R.prototype.isUnusedNode=function(m){var S=this.bc,I=S.getCheck(m);return m===n?!1:I<0};function P(m){this.bc=m,this.bc.shrink()}P.prototype.contain=function(m){var S=this.bc;m+=r;for(var I=H(m),j=n,_=o,k=0;k<I.length;k++){var T=I[k];if(_=this.traverse(j,T),_===o)return!1;if(S.getBase(_)<=0)return!0;j=_}return!1},P.prototype.lookup=function(m){m+=r;for(var S=H(m),I=n,j=o,_=0;_<S.length;_++){var k=S[_];if(j=this.traverse(I,k),j===o)return o;I=j}var T=this.bc.getBase(j);return T<=0?-T-1:o},P.prototype.commonPrefixSearch=function(m){for(var S=H(m),I=n,j=o,_=[],k=0;k<S.length;k++){var T=S[k];if(j=this.traverse(I,T),j!==o){I=j;var C=this.traverse(j,e);if(C!==o){var F=this.bc.getBase(C),L={};F<=0&&(L.v=-F-1),L.k=V(x(S,0,k+1)),_.push(L)}continue}else break}return _},P.prototype.traverse=function(m,S){var I=this.bc.getBase(m)+S;return this.bc.getCheck(I)===m?I:o},P.prototype.size=function(){return this.bc.size()},P.prototype.calc=function(){return this.bc.calc()},P.prototype.dump=function(){return this.bc.dump()};var $=function(m,S,I){if(m)switch(S){case 1:return new Int8Array(I);case 2:return new Int16Array(I);case 4:return new Int32Array(I);default:throw new RangeError("Invalid newArray parameter element_bytes:"+S)}else switch(S){case 1:return new Uint8Array(I);case 2:return new Uint16Array(I);case 4:return new Uint32Array(I);default:throw new RangeError("Invalid newArray parameter element_bytes:"+S)}},x=function(m,S,I){var j=new ArrayBuffer(I),_=new Uint8Array(j,0,I),k=m.subarray(S,I);return _.set(k),_},H=function(m){for(var S=new Uint8Array(new ArrayBuffer(m.length*4)),I=0,j=0;I<m.length;){var _,k=m.charCodeAt(I++);if(k>=55296&&k<=56319){var T=k,C=m.charCodeAt(I++);if(C>=56320&&C<=57343)_=(T-55296)*1024+65536+(C-56320);else return null}else _=k;_<128?S[j++]=_:_<2048?(S[j++]=_>>>6|192,S[j++]=_&63|128):_<65536?(S[j++]=_>>>12|224,S[j++]=_>>6&63|128,S[j++]=_&63|128):_<1<<21&&(S[j++]=_>>>18|240,S[j++]=_>>12&63|128,S[j++]=_>>6&63|128,S[j++]=_&63|128)}return S.subarray(0,j)},V=function(m){for(var S="",I,j,_,k,T,C,F,L=0;L<m.length;)j=m[L++],j<128?I=j:j>>5===6?(_=m[L++],I=(j&31)<<6|_&63):j>>4===14?(_=m[L++],k=m[L++],I=(j&15)<<12|(_&63)<<6|k&63):(_=m[L++],k=m[L++],T=m[L++],I=(j&7)<<18|(_&63)<<12|(k&63)<<6|T&63),I<65536?S+=String.fromCharCode(I):(I-=65536,C=55296|I>>10,F=56320|I&1023,S+=String.fromCharCode(C,F));return S},A={builder:function(m){return new R(m)},load:function(m,S){var I=c(0);return I.loadBaseBuffer(m),I.loadCheckBuffer(S),new P(I)}};typeof Ze>"u"?window.doublearray=A:Ze.exports=A})()});var me=U((sf,Zn)=>{"use strict";var hu=function(r){for(var e=new Uint8Array(r.length*4),n=0,o=0;n<r.length;){var s,y=r.charCodeAt(n++);if(y>=55296&&y<=56319){var f=y,p=r.charCodeAt(n++);if(p>=56320&&p<=57343)s=(f-55296)*1024+65536+(p-56320);else return null}else s=y;s<128?e[o++]=s:s<2048?(e[o++]=s>>>6|192,e[o++]=s&63|128):s<65536?(e[o++]=s>>>12|224,e[o++]=s>>6&63|128,e[o++]=s&63|128):s<2097152&&(e[o++]=s>>>18|240,e[o++]=s>>12&63|128,e[o++]=s>>6&63|128,e[o++]=s&63|128)}return e.subarray(0,o)},pu=function(r){for(var e="",n,o,s,y,f,p,g,c=0;c<r.length;)o=r[c++],o<128?n=o:o>>5===6?(s=r[c++],n=(o&31)<<6|s&63):o>>4===14?(s=r[c++],y=r[c++],n=(o&15)<<12|(s&63)<<6|y&63):(s=r[c++],y=r[c++],f=r[c++],n=(o&7)<<18|(s&63)<<12|(y&63)<<6|f&63),n<65536?e+=String.fromCharCode(n):(n-=65536,p=55296|n>>10,g=56320|n&1023,e+=String.fromCharCode(p,g));return e};function Z(r){var e;if(r==null)e=1024*1024;else if(typeof r=="number")e=r;else if(r instanceof Uint8Array){this.buffer=r,this.position=0;return}else throw typeof r+" is invalid parameter type for ByteBuffer constructor";this.buffer=new Uint8Array(e),this.position=0}Z.prototype.size=function(){return this.buffer.length};Z.prototype.reallocate=function(){var r=new Uint8Array(this.buffer.length*2);r.set(this.buffer),this.buffer=r};Z.prototype.shrink=function(){return this.buffer=this.buffer.subarray(0,this.position),this.buffer};Z.prototype.put=function(r){this.buffer.length<this.position+1&&this.reallocate(),this.buffer[this.position++]=r};Z.prototype.get=function(r){return r==null&&(r=this.position,this.position+=1),this.buffer.length<r+1?0:this.buffer[r]};Z.prototype.putShort=function(r){if(65535<r)throw r+" is over short value";var e=255&r,n=(65280&r)>>8;this.put(e),this.put(n)};Z.prototype.getShort=function(r){if(r==null&&(r=this.position,this.position+=2),this.buffer.length<r+2)return 0;var e=this.buffer[r],n=this.buffer[r+1],o=(n<<8)+e;return o&32768&&(o=-(o-1^65535)),o};Z.prototype.putInt=function(r){if(4294967295<r)throw r+" is over integer value";var e=255&r,n=(65280&r)>>8,o=(16711680&r)>>16,s=(4278190080&r)>>24;this.put(e),this.put(n),this.put(o),this.put(s)};Z.prototype.getInt=function(r){if(r==null&&(r=this.position,this.position+=4),this.buffer.length<r+4)return 0;var e=this.buffer[r],n=this.buffer[r+1],o=this.buffer[r+2],s=this.buffer[r+3];return(s<<24)+(o<<16)+(n<<8)+e};Z.prototype.readInt=function(){var r=this.position;return this.position+=4,this.getInt(r)};Z.prototype.putString=function(r){for(var e=hu(r),n=0;n<e.length;n++)this.put(e[n]);this.put(0)};Z.prototype.getString=function(r){var e=[],n;for(r==null&&(r=this.position);!(this.buffer.length<r+1||(n=this.get(r++),n===0));)e.push(n);return this.position=r,pu(e)};Zn.exports=Z});var _e=U((cf,Xn)=>{"use strict";var Sr=me();function fr(){this.dictionary=new Sr(10*1024*1024),this.target_map={},this.pos_buffer=new Sr(10*1024*1024)}fr.prototype.buildDictionary=function(r){for(var e={},n=0;n<r.length;n++){var o=r[n];if(!(o.length<4)){var s=o[0],y=o[1],f=o[2],p=o[3],g=o.slice(4).join(",");(!isFinite(y)||!isFinite(f)||!isFinite(p))&&console.log(o);var c=this.put(y,f,p,s,g);e[c]=s}}return this.dictionary.shrink(),this.pos_buffer.shrink(),e};fr.prototype.put=function(r,e,n,o,s){var y=this.dictionary.position,f=this.pos_buffer.position;return this.dictionary.putShort(r),this.dictionary.putShort(e),this.dictionary.putShort(n),this.dictionary.putInt(f),this.pos_buffer.putString(o+","+s),y};fr.prototype.addMapping=function(r,e){var n=this.target_map[r];n==null&&(n=[]),n.push(e),this.target_map[r]=n};fr.prototype.targetMapToBuffer=function(){var r=new Sr,e=Object.keys(this.target_map).length;r.putInt(e);for(var n in this.target_map){var o=this.target_map[n],s=o.length;r.putInt(parseInt(n)),r.putInt(s);for(var y=0;y<o.length;y++)r.putInt(o[y])}return r.shrink()};fr.prototype.loadDictionary=function(r){return this.dictionary=new Sr(r),this};fr.prototype.loadPosVector=function(r){return this.pos_buffer=new Sr(r),this};fr.prototype.loadTargetMap=function(r){var e=new Sr(r);for(e.position=0,this.target_map={},e.readInt();!(e.buffer.length<e.position+1);)for(var n=e.readInt(),o=e.readInt(),s=0;s<o;s++){var y=e.readInt();this.addMapping(n,y)}return this};fr.prototype.getFeatures=function(r){var e=parseInt(r);if(isNaN(e))return"";var n=this.dictionary.getInt(e+6);return this.pos_buffer.getString(n)};Xn.exports=fr});var Qe=U((lf,Qn)=>{"use strict";function we(r,e){this.forward_dimension=r,this.backward_dimension=e,this.buffer=new Int16Array(r*e+2),this.buffer[0]=r,this.buffer[1]=e}we.prototype.put=function(r,e,n){var o=r*this.backward_dimension+e+2;if(this.buffer.length<o+1)throw"ConnectionCosts buffer overflow";this.buffer[o]=n};we.prototype.get=function(r,e){var n=r*this.backward_dimension+e+2;if(this.buffer.length<n+1)throw"ConnectionCosts buffer overflow";return this.buffer[n]};we.prototype.loadConnectionCosts=function(r){this.forward_dimension=r[0],this.backward_dimension=r[1],this.buffer=r};Qn.exports=we});var rt=U((hf,ri)=>{"use strict";function yu(r,e,n,o,s){this.class_id=r,this.class_name=e,this.is_always_invoke=n,this.is_grouping=o,this.max_length=s}ri.exports=yu});var et=U((pf,ti)=>{"use strict";var ei=me(),vu=rt();function gr(){this.map=[],this.lookup_table={}}gr.load=function(r){for(var e=new gr,n=[],o=new ei(r);o.position+1<o.size();){var s=n.length,y=o.get(),f=o.get(),p=o.getInt(),g=o.getString();n.push(new vu(s,g,y,f,p))}return e.init(n),e};gr.prototype.init=function(r){if(r!=null)for(var e=0;e<r.length;e++){var n=r[e];this.map[e]=n,this.lookup_table[n.class_name]=e}};gr.prototype.getCharacterClass=function(r){return this.map[r]};gr.prototype.lookup=function(r){var e=this.lookup_table[r];return e??null};gr.prototype.toBuffer=function(){for(var r=new ei,e=0;e<this.map.length;e++){var n=this.map[e];r.put(n.is_always_invoke),r.put(n.is_grouping),r.putInt(n.max_length),r.putString(n.class_name)}return r.shrink(),r.buffer};ti.exports=gr});var nt=U((yf,ni)=>{"use strict";var gu=et(),du=rt(),mu=Je(),tt="DEFAULT";function sr(){this.character_category_map=new Uint8Array(65536),this.compatible_category_map=new Uint32Array(65536),this.invoke_definition_map=null}sr.load=function(r,e,n){var o=new sr;return o.character_category_map=r,o.compatible_category_map=e,o.invoke_definition_map=gu.load(n),o};sr.parseCharCategory=function(r,e){var n=e[1],o=parseInt(e[2]),s=parseInt(e[3]),y=parseInt(e[4]);if(!isFinite(o)||o!==0&&o!==1)return console.log("char.def parse error. INVOKE is 0 or 1 in:"+o),null;if(!isFinite(s)||s!==0&&s!==1)return console.log("char.def parse error. GROUP is 0 or 1 in:"+s),null;if(!isFinite(y)||y<0)return console.log("char.def parse error. LENGTH is 1 to n:"+y),null;var f=o===1,p=s===1;return new du(r,n,f,p,y)};sr.parseCategoryMapping=function(r){var e=parseInt(r[1]),n=r[2],o=3<r.length?r.slice(3):[];return(!isFinite(e)||e<0||e>65535)&&console.log("char.def parse error. CODE is invalid:"+e),{start:e,default:n,compatible:o}};sr.parseRangeCategoryMapping=function(r){var e=parseInt(r[1]),n=parseInt(r[2]),o=r[3],s=4<r.length?r.slice(4):[];return(!isFinite(e)||e<0||e>65535)&&console.log("char.def parse error. CODE is invalid:"+e),(!isFinite(n)||n<0||n>65535)&&console.log("char.def parse error. CODE is invalid:"+n),{start:e,end:n,default:o,compatible:s}};sr.prototype.initCategoryMappings=function(r){var e;if(r!=null)for(var n=0;n<r.length;n++){var o=r[n],s=o.end||o.start;for(e=o.start;e<=s;e++){this.character_category_map[e]=this.invoke_definition_map.lookup(o.default);for(var y=0;y<o.compatible.length;y++){var f=this.compatible_category_map[e],p=o.compatible[y];if(p!=null){var g=this.invoke_definition_map.lookup(p);if(g!=null){var c=1<<g;f=f|c,this.compatible_category_map[e]=f}}}}}var R=this.invoke_definition_map.lookup(tt);if(R!=null)for(e=0;e<this.character_category_map.length;e++)this.character_category_map[e]===0&&(this.character_category_map[e]=1<<R)};sr.prototype.lookupCompatibleCategory=function(r){var e=[],n=r.charCodeAt(0),o;if(n<this.compatible_category_map.length&&(o=this.compatible_category_map[n]),o==null||o===0)return e;for(var s=0;s<32;s++)if(o<<31-s>>>31===1){var y=this.invoke_definition_map.getCharacterClass(s);if(y==null)continue;e.push(y)}return e};sr.prototype.lookup=function(r){var e,n=r.charCodeAt(0);return mu.isSurrogatePair(r)?e=this.invoke_definition_map.lookup(tt):n<this.character_category_map.length&&(e=this.character_category_map[n]),e==null&&(e=this.invoke_definition_map.lookup(tt)),this.invoke_definition_map.getCharacterClass(e)};ni.exports=sr});var it=U((vf,ai)=>{"use strict";var _u=_e(),wu=nt(),ii=me();function jr(){this.dictionary=new ii(10*1024*1024),this.target_map={},this.pos_buffer=new ii(10*1024*1024),this.character_definition=null}jr.prototype=Object.create(_u.prototype);jr.prototype.characterDefinition=function(r){return this.character_definition=r,this};jr.prototype.lookup=function(r){return this.character_definition.lookup(r)};jr.prototype.lookupCompatibleCategory=function(r){return this.character_definition.lookupCompatibleCategory(r)};jr.prototype.loadUnknownDictionaries=function(r,e,n,o,s,y){this.loadDictionary(r),this.loadPosVector(e),this.loadTargetMap(n),this.character_definition=wu.load(o,s,y)};ai.exports=jr});var at=U((gf,ui)=>{"use strict";var oi=Xe(),bu=_e(),ku=Qe(),Tu=it();function Pr(r,e,n,o){r!=null?this.trie=r:this.trie=oi.builder(0).build([{k:"",v:1}]),e!=null?this.token_info_dictionary=e:this.token_info_dictionary=new bu,n!=null?this.connection_costs=n:this.connection_costs=new ku(0,0),o!=null?this.unknown_dictionary=o:this.unknown_dictionary=new Tu}Pr.prototype.loadTrie=function(r,e){return this.trie=oi.load(r,e),this};Pr.prototype.loadTokenInfoDictionaries=function(r,e,n){return this.token_info_dictionary.loadDictionary(r),this.token_info_dictionary.loadPosVector(e),this.token_info_dictionary.loadTargetMap(n),this};Pr.prototype.loadConnectionCosts=function(r){return this.connection_costs.loadConnectionCosts(r),this};Pr.prototype.loadUnknownDictionaries=function(r,e,n,o,s,y){return this.unknown_dictionary.loadUnknownDictionaries(r,e,n,o,s,y),this};ui.exports=Pr});var si=U((df,fi)=>{"use strict";var be=require("path"),ke=Wn(),Au=at();function ot(r){this.dic=new Au,this.dic_path=r}ot.prototype.loadArrayBuffer=function(r,e){throw new Error("DictionaryLoader#loadArrayBuffer should be overwrite")};ot.prototype.load=function(r){var e=this.dic,n=this.dic_path,o=this.loadArrayBuffer;ke.parallel([function(s){ke.map(["base.dat.gz","check.dat.gz"],function(y,f){o(be.join(n,y),function(p,g){if(p)return f(p);f(null,g)})},function(y,f){if(y)return s(y);var p=new Int32Array(f[0]),g=new Int32Array(f[1]);e.loadTrie(p,g),s(null)})},function(s){ke.map(["tid.dat.gz","tid_pos.dat.gz","tid_map.dat.gz"],function(y,f){o(be.join(n,y),function(p,g){if(p)return f(p);f(null,g)})},function(y,f){if(y)return s(y);var p=new Uint8Array(f[0]),g=new Uint8Array(f[1]),c=new Uint8Array(f[2]);e.loadTokenInfoDictionaries(p,g,c),s(null)})},function(s){o(be.join(n,"cc.dat.gz"),function(y,f){if(y)return s(y);var p=new Int16Array(f);e.loadConnectionCosts(p),s(null)})},function(s){ke.map(["unk.dat.gz","unk_pos.dat.gz","unk_map.dat.gz","unk_char.dat.gz","unk_compat.dat.gz","unk_invoke.dat.gz"],function(y,f){o(be.join(n,y),function(p,g){if(p)return f(p);f(null,g)})},function(y,f){if(y)return s(y);var p=new Uint8Array(f[0]),g=new Uint8Array(f[1]),c=new Uint8Array(f[2]),R=new Uint8Array(f[3]),P=new Uint32Array(f[4]),$=new Uint8Array(f[5]);e.loadUnknownDictionaries(p,g,c,R,P,$),s(null)})}],function(s){r(s,e)})};fi.exports=ot});var hi=U((mf,li)=>{"use strict";var Su=require("fs"),ju=require("zlib"),ci=si();function ut(r){ci.apply(this,[r])}ut.prototype=Object.create(ci.prototype);ut.prototype.loadArrayBuffer=function(r,e){Su.readFile(r,function(n,o){if(n)return e(n);ju.gunzip(o,function(s,y){if(s)return e(s);var f=new Uint8Array(y);e(null,f.buffer)})})};li.exports=ut});var vi=U((_f,yi)=>{"use strict";var Cu=Yn(),Iu=hi();function pi(r){r.dicPath==null?this.dic_path="dict/":this.dic_path=r.dicPath}pi.prototype.build=function(r){var e=new Iu(this.dic_path);e.load(function(n,o){r(n,new Cu(o))})};yi.exports=pi});var di=U((wf,gi)=>{"use strict";var Eu=Qe();function ft(){this.lines=0,this.connection_cost=null}ft.prototype.putLine=function(r){if(this.lines===0){var e=r.split(" "),n=e[0],o=e[1];if(n<0||o<0)throw"Parse error of matrix.def";return this.connection_cost=new Eu(n,o),this.lines++,this}var s=r.split(" ");if(s.length!==3)return this;var y=parseInt(s[0]),f=parseInt(s[1]),p=parseInt(s[2]);if(y<0||f<0||!isFinite(y)||!isFinite(f)||this.connection_cost.forward_dimension<=y||this.connection_cost.backward_dimension<=f)throw"Parse error of matrix.def";return this.connection_cost.put(y,f,p),this.lines++,this};ft.prototype.build=function(){return this.connection_cost};gi.exports=ft});var _i=U((bf,mi)=>{"use strict";var Te=nt(),Fu=et(),Ou=/^(\w+)\s+(\d)\s+(\d)\s+(\d)/,Bu=/^(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/,Ru=/^(0x[0-9A-F]{4})\.\.(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/;function st(){this.char_def=new Te,this.char_def.invoke_definition_map=new Fu,this.character_category_definition=[],this.category_mapping=[]}st.prototype.putLine=function(r){var e=Ou.exec(r);if(e!=null){var n=this.character_category_definition.length,o=Te.parseCharCategory(n,e);if(o==null)return;this.character_category_definition.push(o);return}var s=Bu.exec(r);if(s!=null){var y=Te.parseCategoryMapping(s);this.category_mapping.push(y)}var f=Ru.exec(r);if(f!=null){var p=Te.parseRangeCategoryMapping(f);this.category_mapping.push(p)}};st.prototype.build=function(){return this.char_def.invoke_definition_map.init(this.character_category_definition),this.char_def.initCategoryMappings(this.category_mapping),this.char_def};mi.exports=st});var bi=U((kf,wi)=>{"use strict";var Du=Xe(),Lu=at(),xu=_e(),Pu=di(),zu=_i(),Uu=it();function cr(){this.tid_entries=[],this.unk_entries=[],this.cc_builder=new Pu,this.cd_builder=new zu}cr.prototype.addTokenInfoDictionary=function(r){var e=r.split(",");return this.tid_entries.push(e),this};cr.prototype.putCostMatrixLine=function(r){return this.cc_builder.putLine(r),this};cr.prototype.putCharDefLine=function(r){return this.cd_builder.putLine(r),this};cr.prototype.putUnkDefLine=function(r){return this.unk_entries.push(r.split(",")),this};cr.prototype.build=function(){var r=this.buildTokenInfoDictionary(),e=this.buildUnknownDictionary();return new Lu(r.trie,r.token_info_dictionary,this.cc_builder.build(),e)};cr.prototype.buildTokenInfoDictionary=function(){var r=new xu,e=r.buildDictionary(this.tid_entries),n=this.buildDoubleArray();for(var o in e){var s=e[o],y=n.lookup(s);r.addMapping(y,o)}return{trie:n,token_info_dictionary:r}};cr.prototype.buildUnknownDictionary=function(){var r=new Uu,e=r.buildDictionary(this.unk_entries),n=this.cd_builder.build();r.characterDefinition(n);for(var o in e){var s=e[o],y=n.invoke_definition_map.lookup(s);r.addMapping(y,o)}return r};cr.prototype.buildDoubleArray=function(){var r=0,e=this.tid_entries.map(function(o){var s=o[0];return{k:s,v:r++}}),n=Du.builder(1024*1024);return n.build(e)};wi.exports=cr});var Ti=U((Tf,ki)=>{"use strict";var Ku=vi(),Nu=bi(),Mu={builder:function(r){return new Ku(r)},dictionaryBuilder:function(){return new Nu}};ki.exports=Mu});var Si=U((Se,Ae)=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});var qu=(function(){function r(e,n){for(var o=0;o<n.length;o++){var s=n[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,o){return n&&r(e.prototype,n),o&&r(e,o),e}})(),$u=Ti(),Hu=Vu($u);function Vu(r){return r&&r.__esModule?r:{default:r}}function Gu(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var Ai=!1,Ju=typeof window<"u";!Ju&&typeof Ae<"u"&&Ae.exports&&(Ai=!0);var Yu=(function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.dictPath;Gu(this,r),this._analyzer=null,n?this._dictPath=n:Ai?this._dictPath=require.resolve("kuromoji").replace(/src(?!.*src).*/,"dict/"):this._dictPath="node_modules/kuromoji/dict/"}return qu(r,[{key:"init",value:function(){var n=this;return new Promise(function(o,s){var y=n;n._analyzer==null?Hu.default.builder({dicPath:n._dictPath}).build(function(f,p){if(f)return s(f);y._analyzer=p,o()}):s(new Error("This analyzer has already been initialized."))})}},{key:"parse",value:function(){var n=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return new Promise(function(s,y){if(o.trim()==="")return s([]);for(var f=n._analyzer.tokenize(o),p=0;p<f.length;p++)f[p].verbose={},f[p].verbose.word_id=f[p].word_id,f[p].verbose.word_type=f[p].word_type,f[p].verbose.word_position=f[p].word_position,delete f[p].word_id,delete f[p].word_type,delete f[p].word_position;s(f)})}}]),r})();Se.default=Yu;Ae.exports=Se.default});module.exports={Kuroshiro:Dn(),KuromojiAnalyzer:Si()};
