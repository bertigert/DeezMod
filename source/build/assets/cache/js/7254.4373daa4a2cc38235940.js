"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[7254],{"0oT0":(e,t,i)=>{i.d(t,{A:()=>r});var o=i("q1tI"),s=i("iyH+"),a=i("M31W");const r=e=>{const t={...e,...(0,a.$)()};return o.createElement(s.A,t)}},"4Rw2":(e,t,i)=>{i.d(t,{T:()=>s,c:()=>a});const o=i("Vd8Q").default.get("log_contexts"),s=e=>null!=e&&("number"==typeof e.ID||"string"==typeof e.ID)&&"string"==typeof e.TYPE,a=(e,t)=>String(e.ID)===String(t.ID)&&o[e.TYPE]===o[t.TYPE]},GkgI:(e,t,i)=>{i.d(t,{b:()=>n});var o=i("Wp0Y");let s={},a=!1;const r=()=>{s={full:{active:(0,o.AP)("successmessage_text_addedtoyourfavorites_web"),active_favorite_friend:(0,o.AP)("Suivi"),active_favorite_song:(0,o.AP)("successmessage_text_addedtoyourfavorites_web"),active_play:(0,o.AP)("À l'écoute"),active_play_artist:(0,o.AP)("Mix"),active_play_user:(0,o.AP)("FLOW"),active_shuffle_user:(0,o.AP)("favoritestab_action_shufflemymusic_web"),add:(0,o.AP)("contextualmenu_text_addtomyfavorites_web"),add_favorite_friend:(0,o.AP)("Suivre"),add_favorite_song:(0,o.AP)("Ajouter aux Coups de cœur"),add_dislike_song:(0,o.AP)("bantrack_action_dontrecommendthistrack_web"),add_dislike_artist:(0,o.AP)("banartist_action_dontrecommendthisartist_web"),add_play:(0,o.AP)("Écouter"),add_play_artist:(0,o.AP)("Mix"),add_play_user:(0,o.AP)("FLOW"),add_shuffle_user:(0,o.AP)("favoritestab_action_shufflemymusic_web"),default:(0,o.AP)("contextualmenu_text_addtomyfavorites_web"),default_favorite_friend:(0,o.AP)("Suivre"),default_favorite_song:(0,o.AP)("Ajouter aux Coups de cœur"),default_dislike_song:(0,o.AP)("bantrack_action_dontrecommendthistrack_web"),default_dislike_artist:(0,o.AP)("banartist_action_dontrecommendthisartist_web"),default_play:(0,o.AP)("Écouter"),default_play_artist:(0,o.AP)("Mix"),default_play_user:(0,o.AP)("FLOW"),default_shuffle_user:(0,o.AP)("favoritestab_action_shufflemymusic_web"),hover:(0,o.AP)("contextualmenu_text_deletefrommyfavorites_web"),hover_favorite_app:(0,o.AP)("Retirer de ma bibliothèque"),hover_favorite_friend:(0,o.AP)("Ne plus suivre"),hover_favorite_song:(0,o.AP)("Retirer des Coups de cœur"),hover_dislike_song:(0,o.AP)("banartist_action_allowinmyrecommendations_web"),hover_dislike_artist:(0,o.AP)("banartist_action_allowinmyrecommendations_web"),hover_play:(0,o.AP)("Pause"),hover_play_artist:(0,o.AP)("Mix"),hover_play_user:(0,o.AP)("FLOW"),hover_shuffle_user:(0,o.AP)("favoritestab_action_shufflemymusic_web"),paused_play:(0,o.AP)("Pause"),paused_play_artist:(0,o.AP)("Mix"),paused_play_user:(0,o.AP)("FLOW"),paused_shuffle_user:(0,o.AP)("favoritestab_action_shufflemymusic_web"),resume_play:(0,o.AP)("Reprendre"),resume_play_artist:(0,o.AP)("Mix"),resume_play_user:(0,o.AP)("FLOW"),resume_shuffle_user:(0,o.AP)("favoritestab_action_shufflemymusic_web")},standard:{active:(0,o.AP)("Ajouté"),add:(0,o.AP)("generic_action_add_web"),default:(0,o.AP)("generic_action_add_web"),default_play_small:(0,o.AP)("Écouter"),hover_play_small:(0,o.AP)("Pause"),paused_play_small:(0,o.AP)("Pause"),resume_play_small:(0,o.AP)("Reprendre"),active_play_small:(0,o.AP)("À l'écoute"),hover:(0,o.AP)("Retirer"),active_follow_user:(0,o.AP)("Suivi"),add_follow_user:(0,o.AP)("Suivre"),default_follow_user:(0,o.AP)("Suivre"),hover_follow_user:(0,o.AP)("Ne plus suivre"),default_download:(0,o.AP)("Télécharger"),active_download:(0,o.AP)("Téléchargé"),hover_download:(0,o.AP)("Retirer")}}};function n(e,t,i){!1===a&&(r(),a=!0);var o=i||e.wording;return"none"===o?"":s[o][t+"_"+e.action+"_"+e.type]?s[o][t+"_"+e.action+"_"+e.type]:s[o][t+"_"+e.action]?s[o][t+"_"+e.action]:s[o][t]}},cFUB:(e,t,i)=>{i.d(t,{Hj:()=>o,Hn:()=>r,bZ:()=>n,cW:()=>a,eH:()=>s});let o=function(e){return e.DOWNLOAD="download",e.FAVORITE="favorite",e.PLAY="play",e.PLAY_SMALL="play_small",e.SHUFFLE="shuffle",e.FOLLOW="follow",e}({}),s=function(e){return e.BLOCK="block",e.EMPTY="",e.LINK="link",e}({}),a=function(e){return e.DEFAULT="neutral",e.PRIMARY="primary",e.LIGHT="white",e}({}),r=function(e){return e.FULL="full",e.NONE="none",e.STANDARD="standard",e}({}),n=function(e){return e.ACTIVE="active",e.DEFAULT="default",e.HOVER="hover",e.RESUME="resume",e}({})},"iyH+":(e,t,i)=>{i.d(t,{$:()=>N,A:()=>V}),i("/eM8"),i("Dk60");var o=i("q1tI"),s=i("TRpf"),a=i("X6oL"),r=i("juqV"),n=i("HmE0"),l=i("TDRX"),c=i("Tyyv"),u=i("u7vQ"),_=i("fJgm"),d=i("nrKQ");const h=e=>e?{id:e.ID,t:e.TYPE}:{},p_follow=(e,t)=>new Promise(((i,o)=>{d.A.call({method:"friend.follow",data:{friend_id:e,ctxt:h(t)},success:()=>i(),error:o})})),p_unfollow=(e,t)=>new Promise(((i,o)=>{d.A.call({method:"friend.unfollow",data:{friend_id:e,ctxt:h(t)},success:()=>i(),error:o})}));var A,f,y=i("o+h5"),P=i("4Rw2"),v=i("TYt9"),m=i("GkgI"),b=i("Vynx"),E=i("tZCQ"),L=i("OPhi"),g=i("shsj"),w=i("AfN5"),k=i("1m5e"),C=i("U47Q"),S=i("WN1e"),H=i("DcKU"),F=i("AlG7"),O=i("7bxg"),T=i("P4bz"),D=i("eTJY"),x=i("Xf48"),R=i("cFUB"),I=i("5G9X"),M=i("h8EF");const j={[R.Hj.PLAY]:{default:k.S,active:k.S,hover:C.I,resume:k.S},[R.Hj.PLAY_SMALL]:{default:k.S,active:k.S,hover:C.I,resume:k.S},[R.Hj.SHUFFLE]:{default:S.R,active:S.R,hover:C.I,resume:S.R},[R.Hj.FAVORITE]:{default:H.M,active:F.C,hover:O.w,default_user:T.H,active_user:D.S,hover_user:O.w},[R.Hj.FOLLOW]:{default:T.H,active:D.S,hover:O.w},[R.Hj.DOWNLOAD]:{default:x.m,active:D.S,hover:O.w}};let N=(0,a.Ay)()(((f=class extends o.Component{constructor(e){super(e),this.state={hover:!1,loading:!1},this._onClick=this._onClick.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onPlayClick=this._onPlayClick.bind(this),this._onShuffleClick=this._onShuffleClick.bind(this),this._onFavoriteClick=this._onFavoriteClick.bind(this),this._onDownloadClick=this._onDownloadClick.bind(this)}render(){const{type:e,action:t,color:i,size:s,disabled:a,className:c}=this.props;if(!E.A.isAllowed("talk")&&e===I.Ay.Show&&t===R.Hj.FAVORITE)return null;const u=this._getStatus(),_=this._renderIcon(u);return s===R.eH.LINK?o.createElement("button",{className:(0,r.A)("btn","btn-link",c),onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,type:"button"},this._renderContent(u)):[R.Hj.DOWNLOAD,R.Hj.FAVORITE,R.Hj.PLAY_SMALL].includes(t)&&_?o.createElement(n.K0,{colorScheme:i,icon:_,isDisabled:a,onClick:this._onClick,variant:this._isPlayButton()?"contain":"ghost",onMouseEnter:t===R.Hj.FAVORITE?void 0:this._onMouseEnter,onMouseLeave:this._onMouseLeave,"aria-label":this._getWording(u),"data-testid":`${e}-${t}-button`}):o.createElement(n.$n,{colorScheme:i,leftIcon:_||void 0,isDisabled:a,width:s===R.eH.BLOCK?"full":"auto",onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,"aria-label":this._getWording(u),"data-testid":`${e}-${t}-button`},o.createElement(l.a,{fontFamily:"body"},this._renderContent(u)))}_renderContent(e){const{action:t,size:i}=this.props,s=[R.bZ.DEFAULT,R.bZ.ACTIVE,R.bZ.HOVER];return(t===R.Hj.SHUFFLE||this._isPlayButton())&&s.push(R.bZ.RESUME),s.map((t=>{const s=(0,r.A)("states-button-action",{"is-active":t===e}),a=(0,r.A)("states-button-label",{label:i===R.eH.LINK});return o.createElement("div",{className:s,key:t},o.createElement("span",{className:a},this._getWording(t)))}))}_renderIcon(e){const{action:t,color:i}=this.props;if((t===R.Hj.SHUFFLE||this._isPlayButton())&&(e===R.bZ.ACTIVE||e===R.bZ.HOVER))return o.createElement(c.r,{size:"medium",isPaused:e===R.bZ.HOVER,color:"primary"===i?"white":void 0});const{type:s,isPersisted:a}=this.props,n=`${e}${s===I.Ay.User&&t===R.Hj.FAVORITE?"_user":""}`;if(j[t]&&j[t][n]){const s=j[t]&&j[t][n];return o.createElement(s,{className:(0,r.A)({"color-primary":e===R.bZ.ACTIVE&&i!==R.cW.PRIMARY,"color-download":t===R.Hj.DOWNLOAD&&a&&e!==R.bZ.HOVER})})}return null}_onClick(){const{disabled:e,action:t,onClick:i}=this.props,{loading:o}=this.state;if(!e&&!o){if(i)return i(),void this._trackClick();this.setState({loading:!0}),this._handleAction(t).then((()=>{this._trackClick(),this.props.onToggleState&&this.props.onToggleState()})).finally((()=>{this.setState({loading:!1})}))}}_onFollowClick(){return this.props.isFollowed?p_unfollow(String(this.props.id),this.props.context):p_follow(String(this.props.id),this.props.context)}_onMouseEnter(){this.setState({hover:!0})}_onMouseLeave(){this.setState({hover:!1})}_onPlayClick(){return new Promise((e=>{const{context:t,dzPlayerOptions:i,id:o,items:s,type:a}=this.props;if(!u.Ay.hasAudioAds||u.Ay.getPlayerType()!==w.Cc.ADS&&u.Ay.getPlayerType()!==w.Cc.TRITON_AD){if(this._hasSameContext())return b.A.intent((0,v.G)(u.Ay)),u.Ay.control.togglePause(),void e();b.A.intent("play"),u.Ay.play({...i,context:t,data:s,id:o,radio:(null==i?void 0:i.radio)||"artist_smartradio"===t.TYPE||"profile_user_radio"===t.TYPE,type:a}),e()}}))}_onShuffleClick(){return new Promise((e=>{const{context:t,dzPlayerOptions:i,id:o,items:s}=this.props;if(this._hasSameContext())return b.A.intent((0,v.G)(u.Ay)),u.Ay.control.togglePause(),void e();b.A.intent("play"),u.Ay.play({...i,context:t,data:s,id:o,radio:!1,type:t.TYPE}),e()}))}_onFavoriteClick(){return new Promise((e=>{const{id:t,type:i,context:o}=this.props;_.A.toggle({id:t,type:i,context:o}),e()}))}_onDownloadClick(){const{id:e,type:t,isPersisted:i,currentAudioQuality:o,addToCache:s,removeFromCache:a}=this.props,r={id:e.toString(),type:t===w.Kk.PERSONAL_LOVED?y.qy:t,context:{}};return i?a({entity:r}):s({entity:r,quality:o})}_handleAction(e){switch(e){case R.Hj.PLAY:case R.Hj.PLAY_SMALL:return this._onPlayClick();case R.Hj.SHUFFLE:return this._onShuffleClick();case R.Hj.FAVORITE:return this._onFavoriteClick();case R.Hj.FOLLOW:return this._onFollowClick();case R.Hj.DOWNLOAD:return this._onDownloadClick();default:return Promise.resolve()}}_getStatus(){const{action:e,isFavorite:t,isPersisted:i,isPlayerPlaying:o,isPlayerPaused:s}=this.props;let a=R.bZ.DEFAULT;return e===R.Hj.FAVORITE&&t||e===R.Hj.FOLLOW&&this.props.isFollowed||e===R.Hj.DOWNLOAD&&i?a=R.bZ.ACTIVE:(this._isPlayButton()||e===R.Hj.SHUFFLE)&&this._hasSameContext()&&(s?a=R.bZ.RESUME:o&&(a=R.bZ.ACTIVE)),a===R.bZ.ACTIVE&&this.state.hover&&(a=R.bZ.HOVER),a}_hasSameContext(){const{context:e,currentPlayerContext:t}=this.props;return(0,P.T)(t)&&(0,P.c)(e,t)}_getWording(e){const{wordingType:t,action:i,type:o}=this.props;return t===R.Hn.NONE?"":(0,m.b)({action:i,type:o,wording:t},e)}_trackClick(){const{type:e,action:t,isPlayerPlaying:i,isPlayerPaused:o,isFavorite:s}=this.props;let a=t;t===R.Hj.FAVORITE&&(a=s?"dislike":"like");const r=window.location.pathname.split("/");if(r.includes("profile")&&(!i||o)){const e=this._isPlayButton()?"direct_play":t===R.Hj.SHUFFLE?"shuffle":null;if(!e)return;const i=Object.keys(M.bv),o=r[r.length-1],s=i.includes(o)?o:"home";(0,M.h4)({action:M.dJ.PLAY_CLICKED,payload:{path:s,play_type:e}})}if(!this.props.tracking||this._isPlayButton()&&(i||o))return;const n=this.props.tracking.getTrackingData(),l=n.pagecategory||n.pagename;l&&this.props.tracking.trackEvent({eventaction:`click-${a}-${e}`,event:"click",eventcategory:l,eventlabel:`${a}-${e}`})}_isPlayButton(){return this.props.action===R.Hj.PLAY||this.props.action===R.Hj.PLAY_SMALL}}).defaultProps={color:R.cW.DEFAULT,items:[],wordingType:R.Hn.STANDARD,size:R.eH.EMPTY,disabled:!1,isFollowed:!1,iconSize:"medium"},A=f))||A;const V=(0,s.Ng)((({cache:e,user:t,feedbacks:i,player:o},s)=>{const a={id:s.id,type:s.type===w.Kk.PERSONAL_LOVED?y.qy:s.type};return{isFavorite:(0,L.BA)(i,String(s.id),s.type),isPersisted:(0,g._B)(e,a),currentAudioQuality:t.currentAudioQuality,currentPlayerContext:(0,P.T)(o.music.context)?o.music.context:null,isPlayerPlaying:o.control.playing,isPlayerPaused:o.control.paused}}))(N)}}]);