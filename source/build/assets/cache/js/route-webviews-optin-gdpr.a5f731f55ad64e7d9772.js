"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[9700],{LmGy:(e,t,n)=>{n.d(t,{Tr:()=>o});var s=n("nKUr"),i=n("QqEF"),a=n("xi32"),r=n("IRKz");const o=(0,a.R)(((e,t)=>{const n=(0,i.k)();return(0,s.jsx)(r.B.tr,{...e,ref:t,__css:n.tr})}))},QqEF:(e,t,n)=>{n.d(t,{X:()=>d,k:()=>h});var s=n("nKUr"),i=n("p1Zg"),a=n("BdH7"),r=n("8EFB"),o=n("xi32"),l=n("JFGw"),c=n("IRKz");const[p,h]=(0,a.q)({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),d=(0,o.R)(((e,t)=>{const n=(0,l.o)("Table",e),{className:a,layout:o,...h}=(0,i.M)(e);return(0,s.jsx)(p,{value:n,children:(0,s.jsx)(c.B.table,{ref:t,__css:{tableLayout:o,...n.table},className:(0,r.cx)("chakra-table",a),...h})})}));d.displayName="Table"},RGaU:(e,t,n)=>{n.d(t,{k:()=>p});var s=n("nKUr"),i=n("TDRX"),a=n("AeFk"),r=n("AxvE");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=a.i7`
	100% {
		transform: rotate(360deg);
	}
`,p=e=>{var{thickness:t=4,size:n=32,trackColor:a=r.L.colors.neutral[20],thumbColor:p=r.L.colors.neutral[100],speed:h=600}=e,d=function(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n,s,i={},a=Object.keys(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["thickness","size","trackColor","thumbColor","speed"]);return(0,s.jsx)(i.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){o(e,t,n[t])}))}return e}({animation:`${c} ${h}ms infinite linear`,borderColor:a,borderRadius:"50%",borderStyle:"solid",borderTopColor:p,borderWidth:`${t}px`,display:"inline-block",height:`${n}px`,width:`${n}px`},d))}},TnRy:(e,t,n)=>{n.d(t,{N:()=>o});var s=n("nKUr"),i=n("QqEF"),a=n("xi32"),r=n("IRKz");const o=(0,a.R)(((e,t)=>{const n=(0,i.k)();return(0,s.jsx)(r.B.tbody,{...e,ref:t,__css:n.tbody})}))},Yrjs:(e,t,n)=>{n.d(t,{Tn:()=>a,fp:()=>i,ko:()=>s});const s="podcasts",i=5,a="optin_push"},Zy2V:(e,t,n)=>{n.d(t,{A:()=>g});var s,i=n("q1tI"),a=n("X6oL"),r=n("LmGy"),o=n("wAmb"),l=n("y7xR"),c=n("PF77"),p=n("5G9X"),h=n("QOhT");const d=(0,a.Ay)()(s=class extends i.Component{constructor(e){super(e)}render(){const{userShowOptin:e,channelList:t,insideApp:n,onUserShowOptinValueChange:s}=this.props;return i.createElement(r.Tr,null,i.createElement(o.Td,{pl:"spacing.2xs",display:"flex",alignItems:"center",gap:"spacing.s"},i.createElement(h.A,{type:p.Ay.Show,width:56,height:56,bordered:!0,data:{SHOW_ID:e.id,SHOW_NAME:e.name,SHOW_ART_MD5:e.imageMd5},alt:e.name,coverLink:!n})," ",i.createElement(l.D,{size:"sm"},e.name)),t.map((t=>i.createElement(o.Td,{key:`show-${e.id}-${t.name}`,textAlign:"center"},void 0!==e.channel[t.name]?i.createElement(c.S,{isChecked:e.channel[t.name],onChange:()=>{if(this.props.tracking){const n=(e.channel[t.name]?"uncheck_podcast_":"check_podcast_")+e.id;let s="notification-preferences_sms";"optin_push"===t.name?s="notification-preferences_notifications":"optin_mail"===t.name&&(s="notification-preferences_email"),this.props.tracking.trackEvent({event:"click",eventlabel:"podcasts",eventaction:n,eventcategory:s})}s(e.id,t.name,!e.channel[t.name])}}):null))))}})||s;var u=n("Wp0Y"),m=n("pVdW");const g=({userShowOptinList:e,channelList:t,onUserShowOptinValueChange:n,insideApp:s=!1})=>i.createElement(i.Fragment,null,i.createElement(r.Tr,null,i.createElement(o.Td,{pl:"spacing.2xs"},i.createElement(m.E,{fontWeight:"bold",fontSize:"md"},(0,u.AP)("optinpreferences_title_newepisodenotifications_web")),i.createElement(m.E,{color:"text.neutral.secondary.default",fontSize:"xs"},(0,u.AP)("optinpreferences_text_newreleasespodcastsisubscribeto_web"))),t.map((e=>i.createElement(o.Td,{key:`show-${e.name}`,className:"optin-col"})))),e.map((e=>i.createElement(d,{key:`show-${e.id}`,userShowOptin:e,onUserShowOptinValueChange:n,channelList:t,insideApp:s}))))},e4TI:(e,t,n)=>{n.d(t,{A:()=>_}),n("aRRr");var s,i=n("q1tI"),a=n("X6oL"),r=n("LmGy"),o=n("wAmb"),l=n("pVdW"),c=n("PF77");const p=(0,a.Ay)()(s=class extends i.Component{constructor(e){super(e)}render(){const{channelList:e,optin:t,group:n,onOptinValueChange:s,isWebview:a}=this.props;return a||"transactional"!==t.name?i.createElement(r.Tr,null,i.createElement(o.Td,{pl:"spacing.2xs"},i.createElement(l.E,{fontWeight:"bold",fontSize:"md"},t.label),i.createElement(l.E,{color:"text.neutral.secondary.default",fontSize:"xs"},t.description)),e.map((e=>i.createElement(o.Td,{key:`optin-${t.name}-${e.name}`,textAlign:"center"},void 0!==t.channel[e.name]?i.createElement(c.S,{"data-testid":`${n.name}-${t.name}-${e.name}`,isChecked:t.channel[e.name],onChange:()=>{if(this.props.tracking){const s=n.name,i=(t.channel[e.name]?"uncheck_":"check_")+t.name;let a="notification-preferences_sms";"optin_push"===e.name?a="notification-preferences_notifications":"optin_mail"===e.name&&(a="notification-preferences_email"),this.props.tracking.trackEvent({event:"click",eventlabel:s,eventaction:i,eventcategory:a})}s(t.name,e.name,!t.channel[e.name])}}):null)))):null}})||s;var h=n("y7xR"),d=n("QqEF"),u=n("nKUr"),m=n("xi32"),g=n("IRKz");const f=(0,m.R)(((e,t)=>{const n=(0,d.k)();return(0,u.jsx)(g.B.thead,{...e,ref:t,__css:n.thead})}));var v,w=n("NgX8"),E=n("TnRy");const _=({group:e,optinList:t,onOptinValueChange:n,channelList:s,displayChannelHeader:a=!0,isWebview:c,children:u})=>i.createElement("div",null,i.createElement(h.D,{pt:"spacing.xl"},e.label),e.description.length?i.createElement("p",null,e.description):null,i.createElement(d.X,{size:"sm"},a?i.createElement(f,null,i.createElement(r.Tr,null,v||(v=i.createElement(o.Td,{pl:"spacing.2xs",width:"700px"})),s.map((e=>i.createElement(o.Td,{key:`col-${e.name}`,textAlign:"center",w:"110px"},i.createElement(w.m,{label:e.description},i.createElement(l.E,{fontSize:"xs",noOfLines:2},e.label))))))):null,i.createElement(E.N,null,t.map((t=>i.createElement(p,{key:`optin-${t.name}`,optin:t,group:e,onOptinValueChange:n,channelList:s,isWebview:c}))),u)))},h6Gj:(e,t,n)=>{n.d(t,{J8:()=>o,Xg:()=>r,hw:()=>i,r8:()=>a}),n("/eM8");var s=n("nrKQ");const i=(e,t)=>new Promise(((n,i)=>{s.A.call({method:"shownotification.getShows",data:{START:e,NB:t},success:e=>n({userShowOptinList:e.data.map((e=>({id:e.SHOW_ID,name:e.SHOW_NAME,imageMd5:e.SHOW_ART_MD5,channel:{optin_push:!0}}))),nextShowsIndex:void 0!==e.next_cursor?Number(e.next_cursor):null}),error:i})})),a=e=>new Promise(((t,n)=>{s.A.call({method:"shownotification.subscribe",data:{SHOW_ID:e},success:t,error:n})})),r=e=>new Promise(((t,n)=>{s.A.call({method:"shownotification.unsubscribe",data:{SHOW_ID:e},success:t,error:n})})),o=()=>new Promise(((e,t)=>{s.A.call({method:"shownotification.unsubscribeAll",data:{},success:e,error:t})}))},juqV:(e,t,n)=>{function s(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=s(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.d(t,{A:()=>i});const i=function(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=s(e))&&(i&&(i+=" "),i+=t);return i}},ki90:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x}),n("aRRr");var s,i=n("lXQd"),a=n("q1tI"),r=n("X6oL");const o=({channel:e,onClick:t})=>a.createElement("button",{className:"notifications-btn",onClick:()=>t(e.name),type:"button"},e.label,s||(s=a.createElement("svg",{className:"svg-icon svg-icon-chevron-right",height:"12",viewBox:"0 0 12 12",width:"12"},a.createElement("g",null,a.createElement("path",{d:"M7.3,6,2.8,10.4a.9.9,0,0,0,0,1.3.8.8,0,0,0,1.3,0L9.3,6.6a.9.9,0,0,0,0-1.2L4.1.3A.9.9,0,0,0,2.8.3a.9.9,0,0,0,0,1.3Z"})))));var E,_,y,l=n("e4TI"),c=n("qPkO"),p=n("Zy2V"),h=n("RGaU"),d=n("HmE0"),u=n("LjZa"),m=n("Wp0Y"),g=n("juqV"),f=n("puIx"),v=n("Yrjs"),w=n("nrKQ"),b=n("h6Gj");const x=(0,r.Ay)()(E=class extends a.Component{constructor(e){super(e),this.state={loading:!0,channelList:[],groupList:[],optinList:[],selectedChannelIndex:0,displayMessage:null,showList:[],nextShowsIndex:null,loadingShows:!1},this.displayedMessageTimeout=void 0,this.onChannelChange=e=>{const t=this.state.channelList.findIndex((t=>t.name===e));if(-1!==t&&(this.setState({selectedChannelIndex:t}),this.props.tracking)){let t="notification-preferences_sms";"optin_push"===e?t="notification-preferences_notifications":"optin_mail"===e&&(t="notification-preferences_email"),this.props.tracking.trackEvent({event:"click",eventaction:"open-channel",eventcategory:t})}},this.displayMessage=e=>{this.displayedMessageTimeout&&clearTimeout(this.displayedMessageTimeout),this.setState({displayMessage:e}),this.displayedMessageTimeout=setTimeout((()=>{this.setState({displayMessage:null}),this.displayedMessageTimeout=null}),5e3)},this.onOptinValueChange=(e,t,n)=>{const s=[...this.state.optinList],i=s.find((t=>t.name===e)),a=this.state.selectedChannelIndex;if(void 0===i||void 0===this.state.channelList[a]||this.state.channelList[a].name!==t)return;const r=this.state.channelList[a].name;void 0!==i.channel[r]&&(i.channel[r]=n,this.setState({optinList:s}),((e,t,n,s,i)=>{w.A.call({method:"user.setOptins",data:{SERVICE_NAME:e,OPTIN:[{name:t,channel:n}]},success:s,error:i})})(this.serviceName,i.name,i.channel,(()=>this.displayMessage(n&&void 0!==i.channels_requiring_validation&&i.channels_requiring_validation.includes(r)?f.l.EMAIL_SENT:f.l.OPTIN_UPDATED)),(()=>this.displayMessage(f.l.SAVE_FAILED))))},this.onUserShowOptinValueChange=(e,t,n)=>{const{showList:s}=this.state;this.setState({showList:s.map((s=>(s.id===e&&(s.channel[t]=n),s)))});const i=()=>this.displayMessage(f.l.OPTIN_UPDATED),a=()=>this.displayMessage(f.l.SAVE_FAILED);n?(0,b.r8)(e).then(i).catch(a):(0,b.Xg)(e).then(i).catch(a)},this.onViewMoreShowsClick=()=>{const{showList:e,nextShowsIndex:t}=this.state;null!==t&&(this.setState({loadingShows:!0}),(0,b.hw)(t,v.fp).then((t=>this.setState({showList:[...e,...t.userShowOptinList],nextShowsIndex:t.nextShowsIndex,loadingShows:!1}))).catch((()=>this.setState({loadingShows:!1}))),this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"podcast",eventaction:"view-more",eventcategory:"notification-preferences_notifications"}))},this.renderShowGroup=e=>{const{showList:t,nextShowsIndex:n,loadingShows:s,selectedChannelIndex:i}=this.state,r=t.filter((t=>void 0!==t.channel[e.name]));return void 0===this.state.channelList[i]||this.state.channelList[i].name!==v.Tn?null:a.createElement(a.Fragment,null,r.length?a.createElement(p.A,{userShowOptinList:r,channelList:[e],onUserShowOptinValueChange:this.onUserShowOptinValueChange,insideApp:this.insideApp}):null,s?_||(_=a.createElement(h.k,null)):null,s||null===n?null:a.createElement(d.$n,{onClick:this.onViewMoreShowsClick,size:"sm",variant:"outline","data-testid":"show-more-btn"},(0,m.AP)("Plus")))},this.renderGroups=e=>{const{groupList:t,optinList:n}=this.state,s=n.filter((t=>void 0!==t.channel[e.name]));return a.createElement("div",{className:"webview-gdpr-container",key:`channel-${e.name}`},a.createElement("h2",{className:"heading-2"},e.label),a.createElement("p",{className:"description"},e.description),t.map((t=>{const n=s.filter((e=>e.group===t.name));return n.length?a.createElement(a.Fragment,{key:`grp-${t.name}`},a.createElement(l.A,{group:t,optinList:n,onOptinValueChange:this.onOptinValueChange,channelList:[e],displayChannelHeader:!1,isWebview:!0},t.name===v.ko?this.renderShowGroup(e):null)):null})))},this.displayedMessageTimeout=null}componentDidMount(){var e,t,n,s;e=this.serviceName,t=this.displayAll,n=e=>{this.setState({loading:!1,...e}),this.props.tracking&&this.props.tracking.trackEvent({event:"onDisplay",eventvalue:e.showList.length,eventlabel:"podcast",eventaction:"list-display",eventcategory:"notification-preferences_notifications"})},s=u.A,w.A.call({method:"user.getOptins",data:{SERVICE_NAME:e,DISPLAY_ALL:t},success:e=>n({channelList:e.channel,groupList:e.group,optinList:e.optin,showList:e.shows.list.map((e=>({id:e.SHOW_ID,name:e.SHOW_NAME,imageMd5:e.SHOW_ART_MD5,channel:{optin_push:!0}}))),nextShowsIndex:void 0!==e.shows.next_cursor?Number(e.shows.next_cursor):null}),error:s})}componentDidUpdate(e,t){this.state.selectedChannelIndex!==t.selectedChannelIndex&&window.scrollTo(0,0)}componentWillUnmount(){this.displayedMessageTimeout&&clearTimeout(this.displayedMessageTimeout)}get displayAll(){return["true","1"].includes((0,i.A)(this.props,"location.query.all"))}get insideApp(){return["true","1"].includes((0,i.A)(this.props,"location.query.inside_app"))}get insideIOS(){return["true","1"].includes((0,i.A)(this.props,"location.query.ios"))}get serviceName(){return(0,i.A)(this.props,"location.query.service_name","deezer")}render(){const{loading:e,channelList:t,groupList:n,optinList:s,selectedChannelIndex:i,displayMessage:r}=this.state;if(e)return y||(y=a.createElement("div",{className:"webview-gdpr-loader"},a.createElement(h.k,null)));if(0===t.length||0===n.length||0===s.length)return a.createElement("div",null,(0,m.AP)("404errorpage_text_somethingwentwrongtwiththispage_web"));const l=["webview-gdpr"],p=["webview-gdpr-footer"];return this.insideApp&&this.insideIOS&&(l.push("webview-gdpr--ios"),p.push("webview-gdpr-footer--ios")),"deezer"!==this.serviceName&&l.push(`webview-gdpr--${this.serviceName}`),a.createElement("div",{id:"webview-gdpr",className:(0,g.A)(l)},t.map(((e,t)=>t===i?this.renderGroups(e):a.createElement(o,{key:`btn-${e.name}`,channel:e,onClick:this.onChannelChange}))),a.createElement("footer",{className:(0,g.A)(p)},null!==r?a.createElement(c.A,{messageType:r}):null))}})||E},kqs6:(e,t,n)=>{n.d(t,{x:()=>i});var s=n("nKUr");const i=(0,n("QSQl").w)({displayName:"CameraIcon",viewBox:"0 0 24 24",pathSmall:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M9 13.5c0-1.927 1.073-3 3-3s3 1.073 3 3-1.073 3-3 3-3-1.073-3-3Zm1.333 0c0 1.184.483 1.667 1.667 1.667 1.184 0 1.667-.483 1.667-1.667 0-1.184-.483-1.667-1.667-1.667-1.184 0-1.667.483-1.667 1.667Z",clipRule:"evenodd"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M9 7.5H5.503c-.47 0-.871.26-.951.62-.3 1.43-.53 3.13-.55 5.06-.02 2.11.23 4.15.57 5.7.08.36.48.62.95.62h12.993c.47 0 .87-.26.95-.62.721-2.94.711-7.87-.02-10.76-.08-.36-.48-.62-.95-.62H15v-3H9v3Zm4.67-1.67h-3.34V7.5h3.34V5.83Zm4.576 3c.272 1.266.42 2.934.424 4.654.003 1.718-.139 3.397-.407 4.686H5.783a25.346 25.346 0 0 1-.452-4.977c.017-1.639.194-3.102.435-4.363h12.48Z",clipRule:"evenodd"})],pathMedium:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M8 14c0-2.569 1.431-4 4-4s4 1.431 4 4c0 2.568-1.431 4-4 4s-4-1.432-4-4Zm2 0c0 1.457.542 2 2 2s2-.543 2-2c0-1.458-.542-2-2-2s-2 .542-2 2Z",clipRule:"evenodd"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M1.002 13.573c-.028 2.814.316 5.534.784 7.6.11.48.66.827 1.308.827h17.864c.647 0 1.197-.347 1.307-.827.991-3.92.977-10.493-.027-14.346-.11-.48-.66-.827-1.308-.827H16V2H8v4H3.066c-.647 0-1.197.347-1.307.827a33.526 33.526 0 0 0-.757 6.746ZM20.459 8c.346 1.641.537 3.774.54 5.979.005 2.204-.176 4.35-.517 6.021h-16.9a32.614 32.614 0 0 1-.58-6.406c.022-2.092.247-3.967.558-5.594h16.9ZM10 4h4v2h-4V4Z",clipRule:"evenodd"})]});i.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"CameraIcon"}},puIx:(e,t,n)=>{n.d(t,{l:()=>s});let s=function(e){return e[e.OPTIN_UPDATED=0]="OPTIN_UPDATED",e[e.EMAIL_SENT=1]="EMAIL_SENT",e[e.SAVE_FAILED=2]="SAVE_FAILED",e}({})},qPkO:(e,t,n)=>{n.d(t,{A:()=>r});var s=n("q1tI"),i=n("Wp0Y"),a=n("puIx");const r=({messageType:e})=>e===a.l.OPTIN_UPDATED?s.createElement("div",{className:"notifications-success"},s.createElement("p",null,(0,i.WI)("settingspage_text_preferencesupdatedwithin48hrs_web","settingspage_text_preferencesupdatedwithin48hrs_web",{sprintf:[String(48)],count:48}))):e===a.l.EMAIL_SENT?s.createElement("div",{className:"notifications-success"},s.createElement("p",null,(0,i.AP)("settingspage_text_emailsenttoconfirmchoices_web"))):e===a.l.SAVE_FAILED?s.createElement("div",{className:"notifications-error"},s.createElement("p",null,(0,i.AP)("settingspage_text_errorpreferencesnotsavedtryagain_web"))):null},wAmb:(e,t,n)=>{n.d(t,{Td:()=>o});var s=n("nKUr"),i=n("QqEF"),a=n("xi32"),r=n("IRKz");const o=(0,a.R)((({isNumeric:e,...t},n)=>{const a=(0,i.k)();return(0,s.jsx)(r.B.td,{...t,ref:n,__css:a.td,"data-is-numeric":e})}))}}]);