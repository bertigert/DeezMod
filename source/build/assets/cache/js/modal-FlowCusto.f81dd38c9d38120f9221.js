"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[4017],{Dmvo:(e,t,a)=>{a.d(t,{A:()=>c,q:()=>d});var n=a("q1tI"),i=a("HmE0"),l=a("u7vQ"),r=a("H/eQ"),o=a("fkXJ"),s=a("Wp0Y");const d="flow_tuner_skip_alert",c=({playerContext:e,openModalFlowTuner:t,shouldSkip:a})=>{let d=0,c=null,u=!1;function m(){"next"!==l.Ay.previousSkipAction||u||(d++,1===d?c=setTimeout(()=>{u||(d=0),clearTimeout(c),c=null},9e4):d>=3&&(c&&clearTimeout(c),u=!0,(0,o.A)({title:(0,s.AP)("flowtunerskiptriggerpopup_title_notsatisfiedwithflow_web"),body:(0,s.AP)("flowtunerskiptriggerpopup_subtitle_selectpreferredgenres_web"),status:"info",action:e=>n.createElement(i.$n,{variant:"outline",size:"small",onClick:()=>{t(),e()}},(0,s.AP)("flowtuner_action_tunethisflow_web"))})))}n.useEffect(()=>{if(!a)return d=0,u=!1,r.A.subscribe(r.A.player.trackSkipped,m),()=>{a||(c&&clearTimeout(c),r.A.unsubscribe(r.A.player.trackSkipped,m))}},[a,e.ID])}},LTto:(e,t,a)=>{a.d(t,{A:()=>v});var n=a("WKgy"),i=a("+9dH"),l=a("q1tI"),r=a("TRpf"),o=a("Zlrv"),s=a("TqF5"),d=a("Wp0Y");const c=({onClick:e,...t})=>{const a=(0,r.wA)();return l.createElement(o.s_,(0,i.A)({id:"modal-close",onClick:t=>{null==e||e(t),a((0,s.Oo)())},"aria-label":(0,d.AP)("Fermer")},t))};c.displayName="Close";const u=c;var m,p=a("9yOc"),g=a("jiu+"),f=a("LSdk"),x=a("PBDT"),E=a("juqV"),y=a("CV49");var k=a("nHPd");n.A.addReducers({modal:s.Ay});const v={Close:u,Layout:function({children:e}){return p.A.is("mobile")||p.A.is("tablet")?l.createElement(o.aF,{isOpen:!0,size:"full"},l.createElement("div",{className:"modal-container"},l.createElement("div",{className:"modal-dialog modal-small"},m||(m=l.createElement("div",{className:"modal-header-partner"},l.createElement("span",{className:"cell"},l.createElement(g.QQ,null,l.createElement(f.T,null))))),e))):l.createElement(o.aF,{isOpen:!0,size:"full"},l.createElement(x.o,{flexDirection:"column",mt:"spacing.3xl"},e))},Body:e=>l.createElement(y.c,(0,i.A)({"data-testid":"modal_body",className:(0,E.A)("modal-body",e.className)},e),e.children),Header:({children:e,...t})=>l.createElement(k.r,(0,i.A)({"data-testid":"modal_header"},t),e),Footer:({children:e,...t})=>l.createElement(o.jl,t,e)}},nlaB:(e,t,a)=>{a.r(t),a.d(t,{default:()=>se});var n=a("q1tI"),i=a("TDRX"),l=a("LTto"),r=a("xFHe"),o=a("CdHq"),s=a("1aqa"),d=a("y7xR"),c=a("pVdW");const u=JSON.parse('{"v":"5.9.0","fr":60,"ip":0,"op":601,"w":768,"h":275,"nm":"Gradient Bkg Lottie","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Shape Layer 3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":-150,"s":[390,187.5,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":150,"s":[768.5,187.5,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":449,"s":[390,187.5,0],"to":[0,0,0],"ti":[0,0,0]},{"t":749,"s":[768.5,187.5,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":60,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":360,"s":[80,80,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":659,"s":[100,100,100]},{"t":959,"s":[80,80,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[375,375],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,1,0.314,0.239,0.5,1,0.314,0.239,0.999,1,0.314,0.239,0,0.5,0.5,0.25,1,0],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[187.764,0],"ix":6},"t":2,"h":{"a":0,"k":0,"ix":7},"a":{"a":0,"k":0,"ix":8},"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":903,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Shape Layer 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":-380,"s":[0.5,187.5,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":-80,"s":[375.5,187.5,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":219,"s":[0.5,187.5,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":519,"s":[375.5,187.5,0],"to":[0,0,0],"ti":[0,0,0]},{"t":819,"s":[0.5,187.5,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":-60,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":240,"s":[80,80,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":539,"s":[100,100,100]},{"t":839,"s":[80,80,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[375,375],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.847,0.173,0.416,0.5,0.847,0.173,0.416,0.999,0.847,0.173,0.416,0,0.5,0.5,0.25,1,0],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[187.764,0],"ix":6},"t":2,"h":{"a":0,"k":0,"ix":7},"a":{"a":0,"k":0,"ix":8},"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":903,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[0.5,187.5,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":300,"s":[375.5,187.5,0],"to":[0,0,0],"ti":[0,0,0]},{"t":599,"s":[0.5,187.5,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":-240,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":60,"s":[80,80,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":359,"s":[100,100,100]},{"t":659,"s":[80,80,100]}],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[375,375],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":1,"bm":0,"g":{"p":3,"k":{"a":0,"k":[0,0.635,0.22,1,0.5,0.635,0.22,1,1,0.635,0.22,1,0,0.5,0.5,0.25,1,0],"ix":9}},"s":{"a":0,"k":[0,0],"ix":5},"e":{"a":0,"k":[187.764,0],"ix":6},"t":2,"h":{"a":0,"k":0,"ix":7},"a":{"a":0,"k":0,"ix":8},"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":903,"st":0,"bm":0}],"markers":[]}'),m={flowId:"",isFlowDefault:!1,includedGenresLoaded:!1,suggestedGenresLoaded:!1,includedGenres:[],suggestedGenres:[],dispatch:()=>{throw new Error("useFlowCustoContextDispatch must be used within a FlowCustoProvider")}},p=(0,n.createContext)(void 0),g=(e=m,t)=>{switch(t.type){case"ADD_INCLUDED_GENRES":return{...e,includedGenres:[...e.includedGenres,...t.payload],suggestedGenres:e.suggestedGenres.filter(e=>!t.payload.find(t=>t.id===e.id)),includedGenresLoaded:!0};case"ADD_SUGGESTED_GENRES":return{...e,suggestedGenres:[...e.suggestedGenres,...t.payload],suggestedGenresLoaded:!0};case"TOGGLE_INCLUDED_GENRE":return{...e,includedGenres:e.includedGenres.map(e=>e.id===t.id?{...e,isEnabled:!e.isEnabled,isEditedByUser:!0}:e)};default:return e}},f=()=>{const e=(0,n.useContext)(p);if(!e)throw new Error("useFlowCustoContext must be used within a FlowCustoProvider");return e},x=({children:e,value:t})=>{const[a,i]=(0,n.useReducer)(g,m),l={...a,flowId:t.flowId,isFlowDefault:"default"===t.flowId};return n.createElement(p.Provider,{value:{...l,dispatch:i}},e)};var E,y=a("Wp0Y"),w=a("A2sV");const k=()=>{var e,t,a,l;const{flowId:m,isFlowDefault:p}=f(),{data:g}=(0,w.hhP)({variables:{flowConfigId:m}}),{View:x}=(0,r.useLottie)({animationData:u,loop:!0,style:{position:"absolute",inset:"50% 0 0",height:"275px",width:"768px"}});return n.createElement(o.s,{height:"275px",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"spacing.m",position:"relative",overflow:"hidden"},x,!p&&n.createElement(s.Y,{backgroundColor:"background.neutral.secondary.default",marginBottom:"spacing.xl",borderRadius:"rounded",src:null==g||null===(e=g.flowConfig)||void 0===e||null===(e=e.visuals)||void 0===e||null===(e=e.dynamicPageIcon)||void 0===e?void 0:e.urls[0],alt:`Cover for flow ${null==g||null===(t=g.flowConfig)||void 0===t?void 0:t.title}`,size:"size.2xl"}),n.createElement(d.D,{variant:"heading.l"},null!=g&&null!==(a=g.flowConfig)&&void 0!==a&&a.title&&!p?(0,y.AP)("flowtuner_title_tuneXflow_web",{sprintf:[g.flowConfig.title]}):(0,y.AP)("flowtuner_title_tuneflow_web")),n.createElement(c.E,{variant:"body.m.default",opacity:.7},null!=g&&null!==(l=g.flowConfig)&&void 0!==l&&l.title&&!p?(0,y.AP)("flowtuner_subtitle_selectgenresforXflow_web",{sprintf:[g.flowConfig.title]}):(0,y.AP)("flowtuner_subtitle_selectgenresforflow_web")),E||(E=n.createElement(i.a,{backgroundColor:"background.neutral.primary.default",borderRadius:"50% 50% 50% 50% / 100% 100% 0% 0%",height:"25px",position:"absolute",bottom:0,left:0,right:0})))};var b=a("TRpf"),h=a("5G9X"),v=a("p/gB"),C=a("fkXJ"),_=a("LOQS");const A=()=>{_.A.log({type:"cdp",eventName:"flow_tuner_used",customAttributes:{action:"cancel"}})};var D=a("Fzox"),G=a("xobL"),I=a("TqF5"),F=a("HmE0"),B=a("AY3M"),S=a("GWHm"),T=a("u7vQ"),P={name:"1h9wpjt",styles:"& > div{justify-content:flex-end;}"};const N=()=>{const e=(0,b.wA)(),{userId:t}=(0,D.G)(e=>({userId:String((0,G.F6)(e.user))})),{flowId:a,isFlowDefault:i,includedGenres:r}=f(),[o]=(0,w.IxQ)(),s=i?h.Ay.Flow:h.Ay.MultiFlow,{play:d}=(0,S.A)({id:a,context:{ID:i?t:a,TYPE:(0,v.Pe)(s,B.pN)}}),c=(0,n.useCallback)(()=>{_.A.log({type:"cdp",eventName:"flow_tuner_used",customAttributes:{action:"save"}});const t=r.map(e=>({clusterId:e.id,isEnabled:e.isEnabled,isEditedByUser:e.isEditedByUser}));o({variables:{flowConfigId:a,clusters:t},onCompleted:t=>{var a;if("UpdateFlowConfigClustersError"===(null===(a=t.updateFlowConfigClusters)||void 0===a?void 0:a.__typename))return(0,C.A)({body:(0,y.AP)("errormessage_text_anerroroccurredpleasetryagain_web")});T.Ay.control.pause(),d(!0),e((0,I.Oo)())},onError:e=>{(0,C.A)({body:`Failed to save changes: ${e.message}`})}})},[r]);return n.createElement(l.A.Footer,{css:P,position:"absolute",zIndex:20,bottom:0,left:0,right:0,bgColor:"inherit"},n.createElement(F.$n,{variant:"ghost",onClick:()=>{A(),e((0,I.Oo)())}},(0,y.AP)("generic_action_cancel_web")),n.createElement(F.$n,{variant:"contain",onClick:c},(0,y.AP)("Enregistrer")))};var L,z=a("+9dH"),R=(a("WpbS"),a("aIaO")),j=a("9OcB"),O=a("oh0j"),U=a("Au7y");const V=({id:e,isEnabled:t})=>{var a,l;const{data:r}=(0,U.I3)({fragment:w.lDW,fragmentName:"FlowConfigClusterConfiguration",from:{__typename:"FlowConfigClusterConfiguration",id:e}}),{dispatch:s,includedGenres:u}=f();return r.cluster?n.createElement(o.s,{flexDirection:"column",gap:"spacing.s",marginBottom:"spacing.m",position:"relative"},n.createElement(o.s,{justifyContent:"center",marginBottom:"calc(-1 * var(--tempo-space-spacing-2xl))"},null===(a=r.cluster.artists)||void 0===a?void 0:a.map((e,t)=>{var a;return e?n.createElement(i.a,{marginStart:t>0?"calc(-1 * var(--tempo-space-spacing-l))":0,key:e.id,zIndex:1===t?2:1},n.createElement(j.A,{borderRadius:"rounded",src:(null===(a=e.picture)||void 0===a||null===(a=a.medium)||void 0===a?void 0:a[0])||"",size:"size.2xl",type:h.Ay.Artist})):null})),n.createElement(o.s,{padding:"spacing.l",paddingTop:"spacing.3xl",backgroundColor:"background.neutral.secondary.default",borderRadius:"s",flexDirection:"column",justifyContent:"space-between",height:"176px"},n.createElement(i.a,null,n.createElement(d.D,{variant:"heading.xs",noOfLines:2,marginBottom:"spacing.xs"},r.cluster.title),n.createElement(c.E,{variant:"body.2xs.default",noOfLines:2,color:"text.neutral.secondary.default"},null===(l=r.cluster.artists)||void 0===l?void 0:l.map((e,t)=>e?n.createElement("span",{key:e.id},t>0?", ":"",e.name):null))),n.createElement(O.d,{isChecked:t,onChange:()=>{if(1===u.filter(e=>e.isEnabled).length&&t)return(0,C.A)({body:(0,y.AP)("flowtunertoastmessage_text_lastgenredisabled_web")});s({type:"TOGGLE_INCLUDED_GENRE",id:e})},zIndex:20})),!t&&(L||(L=n.createElement(i.a,{position:"absolute",height:"100%",width:"100%",backgroundColor:"background.neutral.primary.default",borderRadius:"s",opacity:.3,zIndex:10})))):null};var q,H=a("3KoG"),W=a("arV3");const Y=({marginStart:e})=>n.createElement(H.Q,{size:"size.2xl",marginStart:e}),Q=()=>q||(q=n.createElement(o.s,{flexDirection:"column",gap:"spacing.s",marginBottom:"spacing.m",position:"relative"},n.createElement(o.s,{justifyContent:"center",marginBottom:"calc(-1 * var(--tempo-space-spacing-2xl))"},n.createElement(Y,null),n.createElement(Y,{marginStart:"calc(-1 * var(--tempo-space-spacing-l))"}),n.createElement(Y,{marginStart:"calc(-1 * var(--tempo-space-spacing-l))"})),n.createElement(o.s,{padding:"spacing.l",paddingTop:"spacing.3xl",backgroundColor:"background.neutral.secondary.default",borderRadius:"s",flexDirection:"column",justifyContent:"space-between",height:"176px"},n.createElement(i.a,null,n.createElement(W.E,{height:"size.xs",width:"50%",mb:"spacing.s"}),n.createElement(W.E,{height:"size.xs"})),n.createElement(O.d,{isChecked:!1,zIndex:20,disabled:!0})))),$=()=>{var e,t;const{flowId:a,includedGenres:l,includedGenresLoaded:r,dispatch:s,isFlowDefault:u}=f(),m=(0,b.wA)(),{userId:p}=(0,D.G)(e=>({userId:String((0,G.F6)(e.user))})),g=l.some(e=>e.isEditedByUser),x=u?h.Ay.Flow:h.Ay.MultiFlow,{play:E}=(0,S.A)({id:a,context:{ID:u?p:a,TYPE:(0,v.Pe)(x,B.pN)}}),{data:k,loading:A,fetchMore:T}=(0,w.Ew)({fetchPolicy:"cache-and-network",variables:{flowConfigId:a,filter:w.DPj.CONSIDERED,first:50,cursor:null},onCompleted:e=>{s({type:"ADD_INCLUDED_GENRES",payload:e.flowConfig?e.flowConfig.clusterConfigurations.edges.reduce((e,t)=>(t.node&&e.push({id:t.node.id,isEnabled:Boolean(t.node.isEnabled),isEditedByUser:Boolean(t.node.isEditedByUser)}),e),[]):[]})}}),[P]=(0,w.G98)({variables:{flowConfigId:a},onCompleted:e=>{if("ResetFlowConfigClustersError"===e.resetFlowConfigClusters.__typename)return(0,C.A)({body:(0,y.AP)("errormessage_text_anerroroccurredpleasetryagain_web"),status:"error"});E(!0),m((0,I.Oo)())}}),N=A||!r;return n.useEffect(()=>{var e,t;null!=k&&null!==(e=k.flowConfig)&&void 0!==e&&e.clusterConfigurations.pageInfo.hasNextPage&&T({variables:{cursor:null==k||null===(t=k.flowConfig)||void 0===t?void 0:t.clusterConfigurations.pageInfo.endCursor}})},[T,null==k||null===(e=k.flowConfig)||void 0===e?void 0:e.clusterConfigurations.pageInfo.endCursor,null==k||null===(t=k.flowConfig)||void 0===t?void 0:t.clusterConfigurations.pageInfo.hasNextPage]),n.createElement(i.a,{paddingY:"spacing.s",textAlign:"start"},n.createElement(o.s,{justify:"space-between",align:"center"},n.createElement(d.D,{variant:"heading.m"},(0,y.AP)("algointeractionstab_title_included_web")),n.createElement(F.$n,{variant:"ghost",size:"small",onClick:()=>{_.A.log({type:"cdp",eventName:"flow_tuner_used",customAttributes:{action:"reset"}}),P()},disabled:!g},(0,y.AP)("generic_action_reset_web"))),N&&n.createElement(R.x,{marginTop:"spacing.m",gap:"spacing.s",gridTemplateColumns:"repeat(auto-fill, minmax(210px, 1fr))",justifyContent:"center"},Array.from({length:3}).map((e,t)=>n.createElement(Q,{key:`considered_cluster_skeleton_${t}`}))),!N&&(0===l.length?n.createElement(c.E,{variant:"body.l.default",color:"text.neutral.secondary.default",maxWidth:"85%"},(0,y.AP)("flowtuneremptystate_text_notenoughstreamstocustomize_web")):n.createElement(R.x,{marginTop:"spacing.m",gap:"spacing.s",gridTemplateColumns:"repeat(auto-fill, minmax(210px, 1fr))",justifyContent:"center"},l.map(e=>n.createElement(V,(0,z.A)({key:e.id},e))))))};var X,J=a("7Gye"),M=a("Sb6s");const K=({id:e})=>{var t,a;const{data:l}=(0,M.I)({fragment:w.lDW,fragmentName:"FlowConfigClusterConfiguration",from:{__typename:"FlowConfigClusterConfiguration",id:e}}),{dispatch:r}=f();return l.cluster?n.createElement(o.s,{gap:"spacing.s",marginBottom:"spacing.m",backgroundColor:"background.neutral.secondary.default",borderRadius:"s",marginLeft:"20px"},n.createElement(o.s,{flexDirection:"column",justifyContent:"center",alignItems:"center",marginLeft:"-20px",height:"86px"},null===(t=l.cluster.artists)||void 0===t?void 0:t.map((e,t)=>{var a;return e?n.createElement(i.a,{width:"40px",marginTop:t>0?"-10px":0,key:e.id,zIndex:1===t?2:1},n.createElement(j.A,{borderRadius:"rounded",src:(null===(a=e.picture)||void 0===a||null===(a=a.medium)||void 0===a?void 0:a[0])||"",type:h.Ay.Artist})):null})),n.createElement(o.s,{padding:"spacing.l",flexDirection:"row",justifyContent:"space-between",flex:"1"},n.createElement(o.s,{flexDirection:"column",justifyContent:"center",flex:"1"},n.createElement(d.D,{variant:"heading.xs",noOfLines:2,marginBottom:"spacing.xs"},l.cluster.title),n.createElement(c.E,{variant:"body.2xs.default",noOfLines:2,color:"text.neutral.secondary.default"},null===(a=l.cluster.artists)||void 0===a?void 0:a.map((e,t)=>e?n.createElement("span",{key:e.id},t>0?", ":"",e.name):null))),n.createElement(F.K0,{variant:"ghost","aria-label":"Toggle cluster",icon:X||(X=n.createElement(J.c,null)),alignSelf:"flex-end",onClick:()=>(e=>{r({type:"ADD_INCLUDED_GENRES",payload:[{id:e,isEnabled:!0,isEditedByUser:!0}]})})(e)}))):null};var Z;const ee=({marginTop:e})=>n.createElement(H.Q,{boxSize:"38px",flexShrink:0,marginTop:e}),te=()=>Z||(Z=n.createElement(o.s,{gap:"spacing.s",marginBottom:"spacing.m",backgroundColor:"background.neutral.secondary.default",borderRadius:"s",marginLeft:"20px"},n.createElement(o.s,{flexDirection:"column",justifyContent:"center",alignItems:"center",marginLeft:"-20px",height:"86px"},n.createElement(ee,null),n.createElement(ee,{marginTop:"-10px"}),n.createElement(ee,{marginTop:"-10px"})),n.createElement(o.s,{padding:"spacing.l",flexDirection:"row",justifyContent:"space-between",flex:"1"},n.createElement(o.s,{flexDirection:"column",justifyContent:"center",flex:"1"},n.createElement(W.E,{height:"size.xs",width:"50%",mb:"spacing.s"}),n.createElement(W.E,{height:"size.xs"})),n.createElement(F.K0,{variant:"ghost","aria-label":"","aria-hidden":!0,icon:n.createElement(J.c,null),alignSelf:"flex-end",disabled:!0})))),ae=()=>{const{flowId:e,suggestedGenres:t,suggestedGenresLoaded:a,dispatch:l}=f(),{loading:r}=(0,w.Ew)({variables:{flowConfigId:e,filter:w.DPj.NOT_CONSIDERED,first:50,cursor:null},onCompleted:e=>{l({type:"ADD_SUGGESTED_GENRES",payload:e.flowConfig?e.flowConfig.clusterConfigurations.edges.reduce((e,t)=>(t.node&&e.push({id:t.node.id,isEnabled:Boolean(t.node.isEnabled),isEditedByUser:Boolean(t.node.isEditedByUser)}),e),[]):[]})}}),o=r||!a;return n.createElement(i.a,{paddingY:"spacing.s",textAlign:"start"},n.createElement(d.D,{variant:"heading.m"},(0,y.AP)("flowtuner_title_youmayalsolike_web")),n.createElement(R.x,{marginTop:"spacing.xl",gap:"spacing.l",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",justifyContent:"flex-start"},o?Array.from({length:3}).map((e,t)=>n.createElement(te,{key:`not_considered_cluster_skeleton_${t}`})):t.length>0?t.map(({id:e})=>n.createElement(K,{key:e,id:e})):null))};var ne,ie,le,re,oe=a("Dmvo");const se=({flowId:e})=>(n.useEffect(()=>{(e=>{_.A.log({type:"cdp",eventName:"screen_view",customAttributes:{screen_view_name:"tune_my_flow",screen_view_id_type:"flow_config",screen_view_id:e}})})(e)},[e]),n.useEffect(()=>{localStorage.getItem(oe.q)||localStorage.setItem(oe.q,"true")},[]),n.createElement(i.a,{role:"dialog",id:"flow_custo_modal",backgroundColor:"background.neutral.primary.default",overflowY:"scroll",maxHeight:"80vh",marginBottom:"80px"},n.createElement(x,{value:{flowId:e}},ne||(ne=n.createElement(l.A.Close,{zIndex:1,onClick:A})),ie||(ie=n.createElement(k,null)),le||(le=n.createElement(l.A.Body,{overflow:"visible"},n.createElement($,null),n.createElement(ae,null))),re||(re=n.createElement(N,null)))))}}]);