"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[3212],{"2+Bo":(e,t,n)=>{n.r(t),n.d(t,{LinkPage:()=>N,default:()=>z}),n("/eM8");var a,r,i,s,o,l,c,d,m,p,u=n("q1tI"),g=n("X6oL"),h=n("Ty5D"),_=n("Wp0Y"),b=n("FSqQ"),E=n("oqWs"),v=n("Cl2C"),f=n("Rm4k"),y=n("y+AQ"),x=n("BUPU"),k=n("r2ys"),A=n("5pmF"),w=n("Zah6"),C=(n("gkSg"),n("f4Bz"),n("6XPn")),S=n("D0rv"),P=n("iooo"),T=n("E6Gc"),I=n("TDRX");let N=(0,g.Ay)((({match:e})=>({partner_name:e.params.slug})),{dispatchOnMount:!0})(a=class extends u.Component{constructor(e){super(e),this.slug=void 0,this.token=void 0,this.api=void 0,this.repository=void 0,this.slug=this.props.match.params.slug,this.token=this.props.location.query.token,this.api=new S.A,this.repository=new C.A(this.api),this.state={partner:void 0,error:void 0,isFetching:!1,linked:!1}}async componentDidMount(){try{this._handleFetchStart();const e=await this.repository.findOneBySlug(this.slug);this._handleFetchEnd(),this._handlePartner(e);const t=await this.repository.linkSubscriber(this.token,e.legacyId);this._handleLinkSubscriber(t)}catch(e){this._handleError(e),this._handleFetchEnd()}}render(){const{partner:e,error:t,isFetching:n,linked:a}=this.state;return n?r||(r=u.createElement(b.A,null)):e&&t?u.createElement("div",{id:"activate__link"},i||(i=u.createElement(T.Q,null)),u.createElement(E.A,null,u.createElement(v.A,{partner:e}),u.createElement(f.A,null,(0,_.AP)("uajerrormessage_title_alreadylinkedtopayingsub_web")),u.createElement(y.A,null,(0,_.AP)("uajerrormessage_text_chooseotherorcreatenewaccount_web",{sprintf:[e.brandName,(0,_.AP)("deezerplans_title_deezerfree_web")]})),u.createElement(I.a,{marginTop:4},u.createElement(y.A,null,(0,_.AP)("uajlogin_text_signuporloginwithplanX_web",{sprintf:[(0,_.AP)("deezerplans_title_deezerfree_web")]}))),u.createElement("a",{href:`/activate/${this.slug}/validate?token=${this.token}`},u.createElement(x.A,{marginTop:24,"data-testid":"activate-link-create-account"},(0,_.AP)("generic_action_chooseanotheraccount_web")))),s||(s=u.createElement(A.A,null)),o||(o=u.createElement(k.A,null)),l||(l=u.createElement(w.A,null))):e&&a?u.createElement("div",{id:"activate__link"},c||(c=u.createElement(T.Q,null)),u.createElement(E.A,null,u.createElement(v.A,{partner:e}),u.createElement(f.A,{"data-testid":"offer-activated-header"},(0,_.AP)("uajcongrats_title_yourofferXisnowactivated_web",{sprintf:[e.brandName]})),u.createElement(y.A,{"data-testid":"offer-activated-text"},(0,_.AP)("uajcongrats_text_enjoyallyourfavmusicnow_web")),u.createElement("a",{href:"/activate/success",onClick:()=>{this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"start-playing",eventaction:"click",eventcategory:"partner-activation",partner_name:this.slug})}},u.createElement(x.A,{marginTop:24,"data-testid":"activate-link-create-account"},(0,_.AP)("generic_action_listennow_web")))),d||(d=u.createElement(A.A,null)),m||(m=u.createElement(k.A,null)),p||(p=u.createElement(w.A,null))):null}_handleFetchStart(){this.setState({isFetching:!0})}_handleFetchEnd(){this.setState({isFetching:!1})}_handlePartner(e){this.setState({partner:e})}_handleLinkSubscriber(e){this.setState({linked:e})}_handleError(e){const{history:t}=this.props;this.setState({error:e}),t.push((0,P.jd)(`/activate/${this.slug}/not_eligible_account`))}})||a;const z=(0,h.y)(N)},"58Rl":(e,t,n)=>{n.r(t),n.d(t,{ValidatePage:()=>S,default:()=>P}),n("/eM8");var a,r,i,s,o,l,c=n("q1tI"),d=n("Ty5D"),m=n("X6oL"),p=n("Wp0Y"),u=n("iooo"),g=n("FSqQ"),h=n("oqWs"),_=n("Cl2C"),b=n("Rm4k"),E=n("y+AQ"),v=n("BUPU"),f=n("5pmF"),y=n("r2ys"),x=n("Zah6"),k=n("E6Gc"),A=(n("gkSg"),n("6XPn")),w=n("D0rv"),C=n("yiM3");let S=(0,m.Ay)((({match:e})=>({partner_name:e.params.slug})),{dispatchOnMount:!0})(a=class extends c.Component{constructor(e){super(e),this.slug=void 0,this.token=void 0,this.api=void 0,this.repository=void 0,this.slug=this.props.match.params.slug,this.token=this.props.location.query.token,this.api=new w.A,this.repository=new A.A(this.api),this.state={partner:void 0,error:void 0,isFetching:!1}}async componentDidMount(){try{this._handleFetchStart();const e=await this.repository.findOneBySlug(this.slug);this._handlePartner(e),await this.repository.validateActivationLink(this.token,e.legacyId)}catch(e){this._handleError(e)}finally{this._handleFetchEnd()}}buildActivationUrl(e){return this.state.partner?(0,C.t)({route:e,query:{partner:this.state.partner.id,template:"activation_journey"},redirect:`/activate/${this.slug}/link?token=${this.token}`}):"/404"}render(){const{partner:e,error:t,isFetching:n}=this.state;return t?null:n?r||(r=c.createElement(g.A,null)):e?c.createElement("div",{id:"activate__validate"},i||(i=c.createElement(k.Q,null)),c.createElement(h.A,null,c.createElement(_.A,{partner:e}),c.createElement(b.A,null,(0,p.AP)("uajlogin_title_laststeptoactivateoffer_web")),c.createElement(E.A,null,(0,p.AP)("uajlogin_text_signuporloginwithplanX_web",{sprintf:[(0,p.AP)("deezerplans_title_deezerfree_web")]})),c.createElement(v.A,{as:"a",href:this.buildActivationUrl("register"),"data-testid":"activate-validate-create-account",marginTop:24},(0,p.AP)("S'inscrire")),c.createElement(v.A,{as:"a",href:this.buildActivationUrl("login"),variant:"outline","data-testid":"activate-validate-log-in",reversed:!0,marginTop:6},(0,p.AP)("Connexion"))),s||(s=c.createElement(f.A,null)),o||(o=c.createElement(y.A,null)),l||(l=c.createElement(x.A,null))):null}_handleFetchStart(){this.setState({isFetching:!0})}_handleFetchEnd(){this.setState({isFetching:!1})}_handlePartner(e){this.setState({partner:e})}_handleError(e){this.setState({error:e});const t=this.state.partner&&this.state.partner.activationLink,n=this.state.partner&&this.state.partner.brandName;this.props.history.push((0,u.jd)(`/activate/error?error=${e.name}&activationLink=${t}&partnerName=${n}`))}})||a;const P=(0,d.y)(S)},"5pmF":(e,t,n)=>{n.d(t,{A:()=>x});var a=n("q1tI"),r=n("TRpf"),i=n("xobL"),s=(n("/eM8"),n("Vd8Q"));const o=s.default.get("host_website_ssl"),l=s.default.get("host_cookie"),c=`https://${s.default.get("host_common_assets_ssl")}/js/gdpr-appliance.js`,d=s.default.get("bot_crawler"),m=new RegExp(d,"i");var g=n("zKOv"),h=n("vGT4"),_=n("39Zz"),b=n("uHHB"),E=n("G04z"),v=n("ebSJ"),f=n("y7Wb");const y=({locale:e,darkMode:t,userId:n})=>{const{dispatch:i}=(0,h.b)(),s=(0,r.wA)();return(0,a.useEffect)((()=>{window.location.pathname.includes("register")&&(0,v.A)(_.J)&&((0,b.A)(_.J,"",0),(0,b.A)("euconsent-v2","",0)),window.onDzrGDPRReady=a=>{(async(e,t)=>{const{lang:n="en_US",darkMode:a=!1,onConsentUpdate:r,userID:i="0"}=t||{};window.consentScreenApi=await e({cookieDomain:l,darkMode:a,gatewayHost:o,isWebview:!1,lang:n,onConsentUpdate:r,userID:i})})(a,{lang:e,darkMode:t,userID:n,onConsentUpdate:e=>{var t;i((t=e,{type:g.X,value:t})),(0,E.u)().setConsent(e),s((0,f.j$)())}})},((e="dzr-gdpr-script")=>{if(m.test(navigator.userAgent))return;if(document.getElementById(e))return;const t=document.createElement("script");t.async=!0,t.crossOrigin="anonymous",t.defer=!0,t.id=e,t.src=c,document.head.appendChild(t)})("gdpr-web-script")}),[]),(0,a.useEffect)((()=>{var a;null===(a=window.consentScreenApi)||void 0===a||a.update({darkMode:t,userID:n,lang:e})}),[t,e,n]),null},x=()=>{const e=(0,r.d4)((e=>(0,i.JK)(e.user))),t=(0,r.d4)((e=>(0,i.NF)(e.user))),n=(0,r.d4)((e=>(0,i.F6)(e.user).toString()));return a.createElement(y,{darkMode:t,userId:n,locale:e})}},"6A/S":(e,t,n)=>{n.r(t),n.d(t,{default:()=>P}),n("EV0h"),n("gS5K");var a,r,i,s,o,l,c,d,m,p,u,g=n("q1tI"),h=n("X6oL"),_=n("Wp0Y"),b=n("yiM3"),E=n("Vd8Q"),v=n("oqWs"),f=n("Cl2C"),y=n("Rm4k"),x=n("miiT"),k=n("BUPU"),A=n("5pmF"),w=n("r2ys"),C=n("Zah6"),S=n("E6Gc");n("gkSg"),n("f4Bz");const P=(0,h.Ay)()(a=class extends g.Component{constructor(e){super(e),this.activationLink=void 0,this.error=void 0,this.partnerName=void 0,this.error=this.props.location.query.error,this.activationLink=this.props.location.query.activationLink,this.partnerName=this.props.location.query.partnerName}render(){if(this.partnerName&&"SUBSCRIPTION_ALREADY_LINKED"===this.error){const e=new URL("https://link.deezer.com/");return e.searchParams.set("dest",`https://${E.default.get("host_website_ssl")}/home?origin=activation-journey&utm_source=uaj-${this.partnerName}&utm_medium=deezer-website&utm_campaign=subscription-already-linked`),e.searchParams.set("owf",(0,b.t)({route:"login",redirect:`https://${E.default.get("host_website_ssl")}`,query:{origin:"activation-journey",utm_source:`uaj-${this.partnerName}`,utm_medium:"deezer-website",utm_campaign:"subscription-already-linked",redirect_uri:`${E.default.get("host_website_ssl")}`}})),g.createElement("div",{id:"activate__error"},r||(r=g.createElement(S.Q,null)),g.createElement(v.A,null,i||(i=g.createElement(f.A,null)),g.createElement(y.A,{"data-testid":"activate-link-error-message"},(0,_.AP)("uajcongrats_title_yourofferXisnowactivated_web",{sprintf:[this.partnerName]})),g.createElement(x.A,null,(0,_.AP)("Merci de vous connecter à votre compte Deezer")),g.createElement("a",{href:e.href,onClick:()=>{var e;this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"login",eventaction:"click",eventcategory:"partner-activation",partner_name:null===(e=this.activationLink)||void 0===e?void 0:e.split("/")[2]})}},g.createElement(k.A,{"data-testid":"activate-link-error-resend-cta"},(0,_.AP)("Connexion")))),s||(s=g.createElement(A.A,null)),o||(o=g.createElement(w.A,null)),l||(l=g.createElement(C.A,null)))}return g.createElement("div",{id:"activate__error"},c||(c=g.createElement(S.Q,null)),g.createElement(v.A,null,d||(d=g.createElement(f.A,null)),g.createElement(y.A,{"data-testid":"activate-link-error-message"},(0,_.AP)("uajerrormessage_title_activationlinknotvalidanymore_web")),g.createElement(x.A,null,(0,_.AP)("uajerrormessage_text_toreceivenewlinkclickbelow_web")),g.createElement("a",{href:this.activationLink||"/"},g.createElement(k.A,{"data-testid":"activate-link-error-resend-cta"},(0,_.AP)("uajerrormessage_title_getnewactivationlink_web")))),m||(m=g.createElement(A.A,null)),p||(p=g.createElement(w.A,null)),u||(u=g.createElement(C.A,null)))}})||a},"6XPn":(e,t,n)=>{n.d(t,{A:()=>r}),n("/eM8");const a=class{constructor({id:e,legacyId:t,name:n,brandName:a,activationLink:r,texts:i,partnerLogos:s,activationPageBackgroundUrl:o,activationPagePartnerLogoUrl:l,activationTypes:c,countryCodes:d,helpRedirectUrl:m,disclaimer:p}){this.id=void 0,this.legacyId=void 0,this.name=void 0,this.brandName=void 0,this.activationLink=void 0,this.texts=void 0,this.partnerLogos=void 0,this.activationPageBackgroundUrl=void 0,this.activationPagePartnerLogoUrl=void 0,this.activationTypes=void 0,this.countryCodes=void 0,this.helpRedirectUrl=void 0,this.disclaimer=void 0,this.PARTNER_LOGO_THEME_LIGHT="white",this.PARTNER_LOGO_THEME_DARK="dark",this.PARTNER_LOGO_DEFAULT_SIZE=48,this.PARTNER_LOGO_SIZE_96=96,this.id=e,this.legacyId=t,this.name=n,this.brandName=a,this.activationLink=r,this.texts=i,this.partnerLogos=s,this.activationPageBackgroundUrl=o,this.activationPagePartnerLogoUrl=l,this.activationTypes=c,this.countryCodes=d,this.helpRedirectUrl=m,this.disclaimer=p}},r=class{constructor(e){this.api=void 0,this.api=e}async findAll(){return(await this.api.fetchAll()).map((e=>new a(e)))}async findOneBySlug(e){const t=await this.api.fetchOneBySlug(e);return new a(t)}async validateSubscriptionBySms(e,t,n,a){await this.api.validateSubscriptionBySms(e,t,n,a)}validateSubscriptionByCode(e,t,n){return this.api.validateSubscriptionByCode(e,t,n)}validateSubscriptionByEmail(e,t,n){return this.api.validateSubscriptionByEmail(e,t,n)}async validateActivationLink(e,t){return await this.api.validateActivationLink(e,t)}async linkSubscriber(e,t){return await this.api.linkSubscriber(e,t)}}},BUPU:(e,t,n)=>{n.d(t,{A:()=>s});var a=n("+9dH"),r=n("HmE0"),i=n("q1tI");const s=({children:e,reversed:t,marginTop:n=0,...s})=>i.createElement(r.$n,(0,a.A)({type:"submit",alignItems:"center",backgroundColor:t?"white":"background.accent.primary.default",border:t?"1px solid background.accent.primary.default":"0",borderRadius:"md",color:t?"background.accent.primary.default":"white",display:"flex",fontSize:"sm",fontWeight:"600",justifyContent:"center",lineHeight:6,minWidth:{base:"100%",md:"350px"},paddingY:"spacing.l",paddingX:"spacing.xl",textAlign:"center",textTransform:"uppercase",marginTop:n},s),e)},Cl2C:(e,t,n)=>{n.d(t,{A:()=>p});var a,r=n("+9dH"),i=n("TDRX"),s=n("ej6z"),o=n("LSdk"),l=n("siwx"),c=n("q1tI");const d=e=>c.createElement(i.a,{as:"svg",viewBox:"0 0 1164 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Deezer logo",sx:{width:e.width,height:e.height,marginTop:e.marginTop,...e.sx},"data-testid":"activate-landing-deezer-logo"},a||(a=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M382.887 200H218.197V0H382.887V54.026H295.866V77.1428H377.692V121.299H295.866V145.974H382.887V200ZM566.28 200H401.59V0H566.28V54.026H479.259V77.1428H561.085V121.299H479.259V145.974H566.28V200ZM1164 200C1152.78 169.418 1137.08 136.787 1115.97 100.21C1140.66 92.9688 1155.43 77.4026 1155.43 53.5065C1155.43 17.1429 1121.92 0 1068.92 0H959.824V200H1037.75V117.27C1055.07 146.429 1067.82 173.943 1076.2 200H1164ZM1037.75 89.3506V54.026H1064.77C1076.2 54.026 1082.69 60.2597 1082.69 71.6883C1082.69 83.1169 1076.2 89.3506 1064.77 89.3506H1037.75ZM941.122 200H776.432V0H941.122V54.026H854.101V77.1428H935.927V121.299H854.101V145.974H941.122V200ZM584.985 54.026H665.395C632.034 81.3195 604.577 112.234 583.427 145.974V200H760.326V145.974H671.908C692.169 116.499 720.481 87.148 760.326 54.026V0H584.985V54.026ZM-0.00146484 3.60461e-06H100.268C162.351 3.60461e-06 206.251 41.2987 206.251 100C206.251 158.701 162.351 200 100.268 200H-0.00146484V3.60461e-06ZM77.9278 145.974H96.1113C115.594 145.974 125.984 132.987 125.984 100C125.984 67.013 115.594 54.026 96.1113 54.026H77.9278V145.974Z",fill:"black"})));var m=n("tZCQ");const p=({children:e,partner:t,...n})=>c.createElement(i.a,(0,r.A)({display:"flex",marginBottom:{base:12,md:20}},n),c.createElement(i.a,{paddingY:0,paddingX:4},c.createElement(s.N,{href:"/"},m.A.isAllowed("revamp2023")?c.createElement(d,{height:{base:4,md:6},marginTop:{base:"spacing.s",md:"spacing.m"},"data-testid":"activate-landing-deezer-logo"}):c.createElement(o.T,{height:{base:6,md:10},marginTop:{base:"6px",md:"spacing.s"},"data-testid":"activate-landing-deezer-logo"}))),t&&c.createElement(i.a,{paddingY:0,paddingX:4,borderLeft:"1px solid",borderColor:"border.neutral.primary.default"},c.createElement(l._,{src:t.partnerLogos[t.PARTNER_LOGO_THEME_LIGHT][t.PARTNER_LOGO_DEFAULT_SIZE],"data-testid":"activate-landing-partner-logo",alt:t.brandName,height:{base:8,md:12}})))},D0rv:(e,t,n)=>{n.d(t,{A:()=>r}),n("/eM8");var a=n("nrKQ");const r=class{fetchAll(){return new Promise(((e,t)=>{a.A.call({method:"activate.getPartners",data:{},success:t=>{e(t)},error:e=>{t(e)}})}))}fetchOneBySlug(e){return new Promise(((t,n)=>{a.A.call({method:"activate.getPartnersActivationPageData",data:{PARTNER_SLUG:e},success:e=>{t(e)},error:e=>{n(e)}})}))}validateSubscriptionBySms(e,t,n,r){return new Promise(((i,s)=>{a.A.call({method:"activate.validateSubscription",data:{MSISDN:e,ACTIVATION_TYPE:"msisdn",PARTNER_ID:t,PARTNER_LEGACY_ID:n,COUNTRY:r},success:e=>{i(e)},error:e=>{s(e)}})}))}validateSubscriptionByCode(e,t,n){return new Promise(((r,i)=>{a.A.call({method:"activate.validateSubscriptionCode",data:{CODE:e,ACTIVATION_TYPE:"code",PARTNER_ID:t,PARTNER_LEGACY_ID:n},success:e=>{r(e)},error:e=>{i(e)}})}))}validateSubscriptionByEmail(e,t,n){return new Promise(((r,i)=>{a.A.call({method:"activate.validateSubscriptionEmail",data:{EMAIL:e,ACTIVATION_TYPE:"email",PARTNER_ID:t,PARTNER_LEGACY_ID:n},success:e=>{r(e)},error:e=>{i(e)}})}))}validateActivationLink(e,t){return new Promise(((n,r)=>{a.A.call({method:"activate.validateActivationLink",data:{TOKEN:e,PARTNER_LEGACY_ID:t},success:e=>{n(e)},error:e=>{r(e)}})}))}linkSubscriber(e,t){return new Promise(((n,r)=>{a.A.call({method:"activate.linkSubscriber",data:{TOKEN:e,PARTNER_LEGACY_ID:t},success:e=>{n(e)},error:e=>{r(e)}})}))}}},E6Gc:(e,t,n)=>{n.d(t,{Q:()=>s,l:()=>i});var a=n("q1tI"),r=n("MaGs");const i=e=>{const{setColorMode:t}=(0,r.G6)();(0,a.useEffect)((()=>{t(e)}),[t,e])},s=({children:e})=>(i("light"),a.createElement(a.Fragment,null,e))},FSqQ:(e,t,n)=>{n.d(t,{A:()=>s});var a,r=n("q1tI"),i=n("juqV");class s extends r.Component{render(){const{className:e}=this.props;let t=(0,i.A)("loader-container",e);return r.createElement("div",{className:t,"data-testid":"loader"},a||(a=r.createElement("div",{className:"loader animate-spin"})))}}},QSbk:(e,t,n)=>{n.d(t,{M4:()=>d,gf:()=>c,ri:()=>m}),n("/eM8");var a=n("Vd8Q"),r=n("YEdj"),i=n("zuHY");const s=(0,i.VF)((0,i.ny)(i.MG));let o=null;const l=()=>{if(o)return o;const e=a.default.get("host_authent");return o=new s({tokenOutputType:i.NP.PAYLOAD,refreshTokenOutputType:i.NP.COOKIE,host:e,customFetch:(e,t)=>{const n=new Headers({Accept:"application/json"});return n.append("Origin",`https://${a.default.get("host_website_ssl")}`),(0,r.A6)(e,{...t,headers:n,credentials:"include"})},requestDelay:15}),o},c=async e=>{let t;try{t=await l().getToken()}catch(n){t=e?await l().loginWithArl().catch((async()=>await l().getToken())):await l().loginAsAnonymous()}if(null===t)throw new Error("Could not log user to new Auth");return t},d=()=>{l().invalidateCurrentToken()},m=async()=>{l().logout()}},QVzS:(e,t,n)=>{n.d(t,{A:()=>l});var a=n("bDF2");const r=(e,t,n,r="")=>{document.getElementById(e)&&document.getElementById(e).addEventListener("click",(function(){(0,a.R2)({eventcategory:t,eventaction:n,eventlabel:r})}))};var i=n("Vd8Q");const s=e=>{const t=`;domain=${i.default.get("host_cookie")}`;document.cookie=e+"="+t+"; path=/"+("https:"===document.location.protocol?";SameSite=None; secure":"")},o={init:function(){document.onclick=function(e){"burger_menu_button"!==e.target.id&&"line"!==e.target.className||o.toggleMobileMenu()};const e=document.getElementById("burger-logout-btn");e&&(e.onclick=()=>{s("familyUserId"),s("euconsent-v2"),location.href="/logout.php"})},toggleMobileMenu:function(){"burger-menu burger-menu-hidden"===document.getElementById("burger_menu").className?(document.getElementById("burger_menu").classList.remove("burger-menu-hidden"),document.getElementById("burger_menu").classList.add("burger-menu-visible"),document.getElementById("burger_menu_button").classList.add("burger-icon-active"),document.body.classList.add("disabled-scroll"),o.trackElementClick("open-menu")):(document.getElementById("burger_menu").classList.remove("burger-menu-visible"),document.getElementById("burger_menu").classList.add("burger-menu-hidden"),document.getElementById("burger_menu_button").classList.remove("burger-icon-active"),document.body.classList.remove("disabled-scroll"))},trackElementClick:function(e){const t=(0,a.bg)();t&&(0,a.R2)({eventcategory:t,eventaction:e})},initTracking(e){[{key:"launch",action:"download-app",menu:!0},{key:"download",action:"download-app",menu:!0},{key:"login",action:"login-button",menu:!1},{key:"signup",action:"signup-button",menu:!1},{key:"offers",action:"plans-button",menu:!1},{key:"explore",action:"channels-explore-button",menu:!1}].forEach((({key:t,action:n,menu:a})=>{r(`burger-${t}-link`,e,n,a?"menu":"")}))}},l=o},Rm4k:(e,t,n)=>{n.d(t,{A:()=>s});var a=n("+9dH"),r=n("y7xR"),i=n("q1tI");const s=({children:e,...t})=>i.createElement(r.D,(0,a.A)({"data-testid":"activate-common-heading",fontSize:{base:"4xl",md:"6xl"},fontWeight:"bold",marginBottom:12},t),e)},Xuhg:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ve}),n("/eM8");var a=n("q1tI"),r=n("mwIZ"),i=n.n(r),s=n("X6oL"),o=n("E6Gc"),l=n("FSqQ"),c=(n("gkSg"),n("f4Bz"),n("6XPn")),d=n("D0rv"),m=n("Wp0Y"),p=n("oqWs"),u=n("Cl2C"),g=n("Rm4k"),h=n("miiT"),_=n("/tpP");const b=({steps:e})=>a.createElement(_.t,{hasLine:!0,discSize:70},e.map(((e,t)=>a.createElement(_.E,{key:t,"data-testid":`activate-landing-steps-${t}`},e))));var E=n("r2ys"),v=n("Zah6"),f=n("+9dH"),y=n("TDRX");const x=({children:e,...t})=>a.createElement(y.a,(0,f.A)({borderRadius:"sm",marginBottom:4,paddingY:4,paddingX:5,backgroundColor:"rgb(223 60 60 / 8%)",color:"text.feedback.error.default"},t),e),k=({children:e,...t})=>a.createElement(y.a,(0,f.A)({borderRadius:"4px",marginBottom:"4",padding:"4",backgroundColor:"green.100",color:"green.500"},t),e);var A,w,C,S,P,T=n("5pmF"),I=n("yCtO"),N=n("ej6z"),z=n("pVdW"),L=n("siwx"),R=n("y7xR"),D=n("nRPM");class M extends a.Component{render(){const{heading:e,subheading:t,partner:n,success:r,error:i,formMessagesPosition:s,steps:o,children:l}=this.props,c=a.createElement(a.Fragment,null,i&&i.message&&a.createElement(x,{"data-testid":"activate-landing-error-message"},i.message),r&&r.message&&a.createElement(k,{"data-testid":"activate-landing-success-message"},r.message));return a.createElement(y.a,{bg:"white",paddingX:{base:4,sm:0}},a.createElement(p.A,null,a.createElement(u.A,{partner:n}),a.createElement(g.A,{"data-testid":"activate-landing-success-message"},e),a.createElement(h.A,null,t),"top"===s&&c,l,"bottom"===s&&c,n.helpRedirectUrl&&a.createElement(y.a,{fontSize:{base:"md",md:"lg"},marginBottom:"4",marginTop:"10"},a.createElement(N.N,{"data-testid":"partner-help-link",href:n.helpRedirectUrl,isExternal:!0,color:"text.accent.primary.default",_hover:{textDecoration:"underline"}},n.texts.activate.help_redirect)),n.disclaimer&&a.createElement(y.a,{fontSize:{base:"md",md:"lg"},marginBottom:"4",marginTop:"10",color:"text.accent.onLight.default",_hover:{textDecoration:"underline"},dangerouslySetInnerHTML:{__html:n.disclaimer},sx:{a:{color:"text.accent.primary.default",_hover:{textDecoration:"underline"}}}}),a.createElement(N.N,{alignItems:"center",display:{base:"flex",md:"none"},href:"#activate__steps",position:"relative",zIndex:"100"},A||(A=a.createElement(I.e,{mr:3})),a.createElement(z.E,{color:"text.accent.secondary.default",fontSize:"sm"},(0,m.AP)("generic_title_howdoesitwork_web"))),a.createElement(L._,{src:n.activationPageBackgroundUrl?n.activationPageBackgroundUrl:D,objectFit:"cover",paddingTop:16,margin:"-36px",minWidth:"100vw",display:{base:"block",md:"none"}}),a.createElement(y.a,{as:"a",href:"#activate__steps",alignItems:"center",position:"absolute",bottom:"0",display:{base:"none",lg:"flex"}},w||(w=a.createElement(I.e,{mr:3})),a.createElement(z.E,{color:"text.accent.secondary.default",fontSize:"sm"},(0,m.AP)("generic_title_howdoesitwork_web")))),a.createElement(R.D,{id:"activate__steps",color:"text.accent.onLight.default",fontSize:{base:"2xl",md:"4xl"},fontWeight:"bold",marginBottom:8,marginTop:{base:8,md:0},textAlign:"center"},n.texts.activate.step_title),a.createElement(y.a,{paddingX:{base:0,md:16},paddingTop:8,paddingBottom:16},a.createElement(b,{steps:o})),C||(C=a.createElement(T.A,null)),S||(S=a.createElement(E.A,null)),P||(P=a.createElement(v.A,null)))}}M.defaultProps={formMessagesPosition:"bottom"};const F=M;var H=n("QIHo"),O=n("c+bj");const B=n.p+"js/Activate/components/landing/phone-input/international.82041fd7caf50574116c.svg";var j;const U=O.A,W=a.forwardRef((function({name:e,value:t,onChange:n},r){return a.createElement("div",{className:"activate__landing__phone-input__country-select--container",ref:r},a.createElement("div",{className:"react-phone-number-input__icon"},a.createElement("img",{alt:t,className:"react-phone-number-input__icon-image",src:t?`https://flagicons.lipis.dev/flags/4x3/${t.toLowerCase()}.svg`:""})),a.createElement("label",{className:"activate__landing__phone-input__label",htmlFor:"custom-select"},t?`+${(0,H.Ko)(t)}`:j||(j=a.createElement("img",{src:B,className:"activate__landing__phone-input__country-select__intertional-icon"}))),a.createElement("select",{id:"custom-select",name:e,value:t,onChange:e=>n(e.target.value||void 0),className:"activate__landing__phone-input__country-select__select"},a.createElement("option",{value:""},O.A.ZZ),(0,H.X6)().map((e=>a.createElement("option",{key:e,value:e},U[e]," +",(0,H.Ko)(e))))))}));var X=n("juqV");n("ZN3Q");const V=({partner:e,value:t,initialCountryCode:n,countryCode:r,error:i,handleSubmit:o,onChange:l,onCountryChange:c})=>{const d=(0,s.z1)();return a.createElement("div",{className:"activate__landing__phone-input--container"},a.createElement("form",{onSubmit:o},a.createElement(H.Ay,{countrySelectComponent:W,"data-testid":"activate-landing-phone-input",className:(0,X.A)("activate__landing__phone-input",i&&"activate__landing__phone-input--error"),addInternationalOption:!1,defaultCountry:r||n,value:t,onChange:e=>l(e),onCountryChange:e=>{try{c(e)}catch(e){}}}),a.createElement("button",{"data-testid":"activate-landing-cta",onClick:()=>{d.trackEvent({event:"click",eventlabel:"send-link",eventaction:"click",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]})},type:"submit",className:(0,X.A)("activate__landing__send-button",t&&"valid"),disabled:Boolean(!t)},e.texts.activate.input_cta)))},G={ERROR_GENERATING_ACTIVATION_LINK:()=>"Error generating activation link",ERROR_SHORTENING_LINK:()=>"Error shortening link",ERROR_SENDING_ACTIVATION_CODE:()=>"Error sending activation code",PARTNER_NOT_FOUND:()=>"Partner not found",UNEXPECTED_ERROR:()=>"Unexpected error",GATEWAY_ERROR:()=>"Gateway error"},$={INVALID_MSISDN:e=>(0,m.AP)("uajerrormessage_text_enteravalidphonenumber_web",e),SUBSCRIPTION_NOT_FOUND:e=>(0,m.AP)("uajerrormessage_text_enternumberassociatedwithoffer_web",e),SUBSCRIPTION_DEACTIVATED:e=>(0,m.AP)("uajerrormessage_text_enternumberassociatedwithoffer_web",e),SUBSCRIPTION_EXPIRED:e=>(0,m.AP)("uajerrormessage_text_enternumberassociatedwithoffer_web",e)},q={SUBSCRIPTION_NOT_FOUND:e=>(0,m.AP)("uajerrormessage_text_enterecodeassociatedwithoffer_web",e),SUBSCRIPTION_DEACTIVATED:e=>(0,m.AP)("uajerrormessage_text_enterecodeassociatedwithoffer_web",e),SUBSCRIPTION_EXPIRED:e=>(0,m.AP)("uajerrormessage_text_enterecodeassociatedwithoffer_web",e)},Q={SUBSCRIPTION_NOT_FOUND:e=>(0,m.AP)("uajerrormessage_text_enteremailassociatedwithoffer_web",e),SUBSCRIPTION_DEACTIVATED:e=>(0,m.AP)("uajerrormessage_text_enteremailassociatedwithoffer_web",e),SUBSCRIPTION_EXPIRED:e=>(0,m.AP)("uajerrormessage_text_enteremailassociatedwithoffer_web",e)},Y=(e,t,n)=>{if(G[e])return G[e](t);if("msisdn"===n&&$[e])return $[e](t);if("code"===n&&q[e])return q[e](t);if("email"===n&&q[e])return Q[e](t);throw new Error},K={LINK_SENT:"",LINK_RESENT:(0,m.AP)("generic_text_newlinksentviaSMS_web")},Z=({children:e,onClick:t,...n})=>a.createElement(y.a,(0,f.A)({color:"text.accent.primary.default",cursor:"pointer",fontSize:"md",marginBottom:4,onClick:t},n),e);var J,ee=n("Ty5D"),te=n("iooo"),ne=n("Qyje"),ae=n.n(ne);function re({partnerName:e,errorName:t}){return(0,te.jd)(`/activate/error?${ae().stringify({error:t,partnerName:e})}`)}let ie=(0,s.Ay)()(J=class extends a.Component{constructor(e){super(e),this.initialCountryCode=void 0,this._onCountryChange=e=>{this.setState({countryCode:e})},this._onPhoneNumberChange=e=>{this.setState({phoneNumber:e})},this._handleResendSmsLink=async()=>{const{partner:e,repository:t}=this.props;try{if(e&&this.state.countryCode){await t.validateSubscriptionBySms(this.state.phoneNumber,e.id,e.legacyId,this.state.countryCode);const n={name:"LINK_RESENT",message:(0,m.AP)("generic_text_newlinksentviaSMS_web")};this._handleSuccess(n)}}catch(e){this._handleError(e)}},this._handleChangePhoneNumber=()=>{const{partner:e,history:t}=this.props;this.setState({phoneNumber:"",success:void 0,error:void 0}),t.push((0,te.jd)(`${e.activationLink}`))},this._handleSubmit=async e=>{const{partner:t,repository:n,history:a}=this.props;e.preventDefault();try{t&&this.state.countryCode&&(await n.validateSubscriptionBySms(this.state.phoneNumber,t.id,t.legacyId,this.state.countryCode),a.push((0,te.jd)(`${t.activationLink}/sent_activation_link_success`)))}catch(e){this._handleError(e)}},this.initialCountryCode=e.partner.countryCodes&&e.partner.countryCodes[0],this.state={phoneNumber:"",countryCode:this.initialCountryCode,success:void 0,error:void 0}}componentDidMount(){const e=this.props.location.pathname.split("/");if("sent_activation_link_success"===e[e.length-1]){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}componentDidUpdate(e){const t=this.props.location.pathname.split("/"),n="sent_activation_link_success"===t[t.length-1];if(e.location.pathname!==this.props.location.pathname&&n){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}render(){const{partner:e}=this.props,{phoneNumber:t,countryCode:n,success:r,error:i}=this.state,s=Boolean(r);let o=e.texts.activate.title,l=e.texts.activate.subtitle;return s&&(o=(0,m.AP)("uajlandingpage_title_activationlinksent_web"),l=(0,m.AP)("uajlandingpage_text_clickonlinksentviaSMStocomplete_web",{sprintf:[t]})),a.createElement(F,{heading:o,subheading:l,partner:e,success:r,error:i,formMessagesPosition:s?"top":"bottom",steps:[e.texts.activate.step_1,e.texts.activate.step_2,e.texts.activate.step_3]},s?a.createElement(a.Fragment,null,a.createElement(Z,{"data-testid":"activate-landing-success-resend-link",onClick:()=>{this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"resend-link",eventaction:"click",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]}),this._handleResendSmsLink()}},(0,m.AP)("generic_action_resendSMS_web")),a.createElement(Z,{"data-testid":"activate-landing-success-change-phone",onClick:()=>{this._handleChangePhoneNumber()}},(0,m.AP)("Changer le numéro de téléphone"))):a.createElement(V,{partner:e,initialCountryCode:this.initialCountryCode,countryCode:n,value:t,error:i,handleSubmit:this._handleSubmit,onChange:this._onPhoneNumberChange,onCountryChange:this._onCountryChange}))}_handleError(e){const{partner:t,history:n}=this.props;if(this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:e.name,eventaction:"onError",eventcategory:"partner-activation",partner_name:t.activationLink.split("/")[2]}),"SUBSCRIPTION_ALREADY_LINKED"===e.name){const a=re({errorName:e.name,partnerName:t.brandName});return void n.push(a)}let a={};t&&(a={sprintf:[t.brandName]});const r=Y(e.name,a,"msisdn");this.setState({error:{name:e.name,message:r}})}_handleSuccess(e){const t=K[e.name];this.setState({error:void 0,success:{name:e.name,message:t}})}})||J;const se=(0,ee.y)(ie);var oe=n("XkdG"),le=n("HmE0");class ce extends a.Component{constructor(...e){super(...e),this.state={code:"",error:void 0},this._handleCodeChange=e=>{this.setState({code:e.target.value})},this._handleSubmit=async e=>{const{partner:t,repository:n}=this.props,{code:a}=this.state;e.preventDefault();try{if(t&&a){const e=await n.validateSubscriptionByCode(a,t.id,t.legacyId);if(!e)return void this._handleError({name:"UNEXPECTED_ERROR",message:""});this._handleSuccess(e)}}catch(e){this._handleError(e)}}}render(){const{partner:e}=this.props,{code:t,error:n}=this.state;return a.createElement(F,{heading:e.texts.activate.title,subheading:e.texts.activate.subtitle,partner:e,error:n,steps:[e.texts.activate.step_1,e.texts.activate.step_2]},a.createElement(y.a,{marginBottom:"4",maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},a.createElement("form",{onSubmit:this._handleSubmit},a.createElement(oe.p,{"data-testid":"activate-landing-code-input",value:t,placeholder:e.texts.activate.input_placeholder,onChange:this._handleCodeChange,_invalid:{borderColor:"border.accent.primary.default"},bg:"white",borderRadius:"full",boxShadow:"md",fontSize:"lg",p:6,mb:{base:6,md:0},w:"full",_hover:{bg:"white"},_focus:{bg:"white",outline:"none",border:"none"},_active:{outline:"none",border:"none"}}),a.createElement(le.$n,{"data-testid":"activate-landing-cta",fontFamily:"unset",type:"submit",disabled:Boolean(!t),alignItems:"center",bg:t?"background.accent.primary.default":"background.accent.secondary.default",borderColor:t?"border.accent.primary.default":"border.accent.secondary.default",borderRadius:"full",color:t?"white":"lightGrey.700",display:"flex",fontSize:"xs",fontWeight:"semibold",paddingX:4,paddingY:2,height:{base:10,md:8},minHeight:{base:10,md:8},maxHeight:{base:10,md:8},textTransform:"uppercase",position:{base:"initial",md:"absolute"},right:6,textAlign:"center",top:"50%",transform:{base:"none",md:"translateY(-50%)"},w:{base:"full",md:"auto"},_hover:{borderColor:t?"border.accent.primary.default":"border.accent.secondary.default"},_focus:{borderColor:t?"border.accent.primary.default":"border.accent.secondary.default"},zIndex:"overlay"},e.texts.activate.input_cta))))}_handleError(e){const{partner:t,history:n}=this.props;if("SUBSCRIPTION_ALREADY_LINKED"===e.name){const a=re({errorName:e.name,partnerName:t.brandName});return void n.push(a)}let a={};t&&(a={sprintf:[t.brandName]});const r=Y(e.name,a,"code");this.setState({error:{name:e.name,message:r}})}_handleSuccess(e){window.location.replace(e)}}const de=(0,ee.y)(ce);var me;let pe=(0,s.Ay)()(me=class extends a.Component{constructor(...e){super(...e),this.state={email:"",success:void 0,error:void 0},this._handleEmailChange=e=>{this.setState({email:e.target.value})},this._handleChangeEmail=()=>{const{partner:e,history:t}=this.props;this.setState({email:"",success:void 0,error:void 0}),t.push((0,te.jd)(`${e.activationLink}`))},this._handleSubmit=async e=>{const{partner:t,repository:n,history:a}=this.props;e.preventDefault();try{t&&this.state.email&&(await n.validateSubscriptionByEmail(this.state.email,t.id,t.legacyId),a.push((0,te.jd)(`${t.activationLink}/sent_activation_link_success`)))}catch(e){this._handleError(e)}}}componentDidMount(){const e=this.props.location.pathname.split("/");if("sent_activation_link_success"===e[e.length-1]){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}componentDidUpdate(e){const t=this.props.location.pathname.split("/"),n="sent_activation_link_success"===t[t.length-1];if(e.location.pathname!==this.props.location.pathname&&n){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}render(){const{partner:e}=this.props,{email:t,success:n,error:r}=this.state,i=Boolean(n);let s=e.texts.activate.title,o=e.texts.activate.subtitle;return i&&(s=(0,m.AP)("uajlandingpage_title_activationlinksent_web"),o=(0,m.AP)("uajlandingpage_text_clickonlinksentviaemailtocomplete_web",{sprintf:[t]})),a.createElement(F,{heading:s,subheading:o,partner:e,error:r,steps:[e.texts.activate.step_1,e.texts.activate.step_2,e.texts.activate.step_3]},i?a.createElement(a.Fragment,null,a.createElement(Z,{"data-testid":"activate-landing-success-change-phone",onClick:()=>{this._handleChangeEmail()}},(0,m.AP)("generic_action_changeemailaddress_web"))):a.createElement(a.Fragment,null,a.createElement(y.a,{marginBottom:"4",maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},a.createElement("form",{onSubmit:this._handleSubmit},a.createElement(oe.p,{value:t,placeholder:e.texts.activate.input_placeholder,onChange:this._handleEmailChange,_invalid:{borderColor:"accent.main"},bg:"white",borderRadius:"full",border:"none",borderColor:"transparent",boxShadow:"md",fontSize:"lg",p:6,mb:{base:6,md:0},w:"full",_hover:{bg:"white"},_focus:{bg:"white",outline:"none",border:"none"},_active:{outline:"none",border:"none"}}),a.createElement(le.$n,{"data-testid":"activate-landing-cta",fontFamily:"unset",type:"submit",disabled:Boolean(!t),alignItems:"center",bg:t?"accent.main":"lightGrey.100",borderColor:t?"accent.main":"lightGrey.700",borderRadius:"full",color:t?"white":"lightGrey.700",display:"flex",fontSize:"xs",fontWeight:"semibold",paddingX:4,paddingY:2,height:{base:10,md:8},minHeight:{base:10,md:8},maxHeight:{base:10,md:8},textTransform:"uppercase",position:{base:"initial",md:"absolute"},right:6,textAlign:"center",top:"50%",transform:{base:"none",md:"translateY(-50%)"},w:{base:"full",md:"auto"},_hover:{borderColor:t?"accent.main":"lightGrey.700"},_focus:{borderColor:t?"accent.main":"lightGrey.700"},zIndex:"overlay"},e.texts.activate.input_cta)))))}_handleError(e){const{partner:t,history:n}=this.props;if(this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:e.name,eventaction:"onError",eventcategory:"partner-activation",partner_name:t.activationLink.split("/")[2]}),"SUBSCRIPTION_ALREADY_LINKED"===e.name){const a=re({errorName:e.name,partnerName:t.brandName});return void n.push(a)}let a={};t&&(a={sprintf:[t.brandName]});const r=Y(e.name,a,"email");this.setState({error:{name:e.name,message:r}})}_handleSuccess(e){const t=K[e.name];this.setState({error:void 0,success:{name:e.name,message:t}})}})||me;const ue=(0,ee.y)(pe);var ge,he,_e,be,Ee;const ve=(0,s.Ay)((({match:e})=>({partner_name:e.params.slug})),{dispatchOnMount:!0})(ge=class extends a.Component{constructor(e){super(e),this.slug=void 0,this.api=void 0,this.repository=void 0,this.isComponentMounted=void 0,this.slug=this.props.match.params.slug,this.api=new d.A,this.repository=new c.A(this.api),this.isComponentMounted=!1,this.state={partner:void 0,isFetching:!1}}async componentDidMount(){this.isComponentMounted=!0;try{this._handleFetchStart();const e=await this.repository.findOneBySlug(this.slug);this._handleFetchEnd(),this._handlePartner(e)}catch(e){this._handleFetchEnd()}}componentWillUnmount(){this.isComponentMounted=!1}render(){const{partner:e,isFetching:t}=this.state;if(t||!e)return he||(he=a.createElement(l.A,null));const n=i()(e,"activationTypes.0");if("msisdn"===n)return a.createElement(a.Fragment,null,_e||(_e=a.createElement(o.Q,null)),a.createElement(se,{partner:e,repository:this.repository}));if("code"===n)return a.createElement(a.Fragment,null,be||(be=a.createElement(o.Q,null)),a.createElement(de,{partner:e,repository:this.repository}));if("email"===n)return a.createElement(a.Fragment,null,Ee||(Ee=a.createElement(o.Q,null)),a.createElement(ue,{partner:e,repository:this.repository}));throw new Error(`The partner uses an unsupported activation type - only "code", "msisdn" and "email" are supported - "${n}" was supplied`)}_handleFetchEnd(){this.isComponentMounted&&this.setState({isFetching:!1})}_handlePartner(e){this.isComponentMounted&&this.setState({partner:e})}_handleFetchStart(){this.isComponentMounted&&this.setState({isFetching:!0})}})||ge},Zah6:(e,t,n)=>{n.d(t,{A:()=>h});var a,r=n("+9dH"),i=n("q1tI"),s=n("TRpf"),o=n("TqF5"),l=n("Zlrv"),c=n("nspE"),d=n("PvuB"),m=n("WKgy"),p=n("Qi9J");const u=e=>{switch(e){case"small":return"lg";case"medium":return"xl";default:return"3xl"}};class g extends i.Component{constructor(e){super(e),this._open=this._open.bind(this),this._close=this._close.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onOutsideMouseDown=this._onOutsideMouseDown.bind(this),this._contentRef=i.createRef()}componentDidMount(){document.addEventListener("keydown",this._onKeyDown),document.addEventListener("mousedown",this._onOutsideMouseDown),document.addEventListener("touchstart",this._onOutsideMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("mousedown",this._onOutsideMouseDown),document.removeEventListener("touchstart",this._onOutsideMouseDown)}render(){const{isOpen:e,data:t,name:n,size:s,variant:o,testid:m,background:g}=this.props;if(!e)return null;const h=(0,p.C)(n);return h?i.createElement(l.aF,{isOpen:e,variant:null!=o?o:"foundation",size:u(s),isCentered:!0,onClose:this._close,closeOnOverlayClick:!this.props.disableClosingAction},a||(a=i.createElement(c.m,null)),i.createElement(d.$,{ref:this._contentRef,"data-testid":m,background:g||void 0},i.createElement(i.Suspense,{fallback:null},i.createElement(h,(0,r.A)({},t,{name:n}))))):null}_onKeyDown(e){const{isOpen:t,disableClosingAction:n}=this.props;t&&!n&&27===e.keyCode&&this._close()}_onOutsideMouseDown(e){const{isOpen:t,disableClosingAction:n}=this.props;t&&!n&&"HTML"!==e.target.tagName&&e.target.contains(this._contentRef.current)&&(e.stopPropagation(),this._close())}_close(){this.props.closeModal(!0)}_open(){this.props.openModal()}}g.defaultProps={size:"large",addRadius:!1},m.A.addReducers({modal:o.Ay});const h=(0,s.Ng)((({modal:e})=>({name:e.name,data:e.props,disableClosingAction:e.disableClosingAction,isOpen:""!==e.name,size:e.size,classNameClose:e.classNameClose,addRadius:e.addRadius,variant:e.variant,testid:e.testid,background:e.background})),{closeModal:o.Oo,openModal:o.qf})(g)},b5wE:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ne}),n("/eM8");var a=n("q1tI"),r=n("TRpf"),i=n("5pmF"),s=n("r2ys"),o=n("Zah6"),l=n("FSqQ"),c=n("nrKQ");let d=function(e){return e.Premium="premium",e.PremiumXFamily="premium x family",e.Family="family",e}({});const m_getGiftPageData=e=>new Promise(((t,n)=>{c.A.call({method:"redeem.getGiftPageData",data:{SLUG:e},success:e=>{t(e)},error:e=>{n(e)}})})),m_checkCodeValidity=e=>new Promise(((t,n)=>{c.A.call({method:"premium_checkCodeValidity",data:{CODE:e},success:e=>{t(e)},error:e=>{const t=e.payload.GIFT_CODE_ERROR;n(t)}})})),m_redeemGiftCode=e=>new Promise(((t,n)=>{c.A.call({method:"gift_redeemCode",data:{CODE:e},success:e=>{t(e)},error:e=>{n(e)}})}));var p=n("TDRX"),u=n("y7xR"),g=n("Wp0Y"),h=n("pVdW");const _={premium:{name:(0,g.AP)("deezerplans_title_deezerpremium_web"),headline:[a.createElement("p",{key:0},(0,g.AP)("Sans engagement."))],content:[a.createElement(h.E,{key:0},(0,g.AP)("fnacdartylandingpage_text_listenadfreedwnldfavoriteslistenoffline_web")),a.createElement(h.E,{key:1},(0,g.AP)("fnacdartylandingpage_text_overXmilliontrackspodcastsliveradioalldevices_web",{sprintf:[73],count:73}))]},family:{name:(0,g.AP)("deezerplans_title_deezerfamily_web"),headline:[a.createElement("p",{key:0},(0,g.AP)("Sans engagement."))],content:[a.createElement(h.E,{key:0},(0,g.AP)("newofferscardsusp_text_musicforeveryone_web")),a.createElement(h.E,{key:1},(0,g.AP)("newofferscardsusp_text_getXaccountsallbenefitsofXplan_web",{sprintf:[6,(0,g.AP)("deezerplans_title_deezerpremium_web")],count:6,offername:(0,g.AP)("deezerplans_title_deezerpremium_web")})),a.createElement(h.E,{key:2},(0,g.AP)("newofferscardsusp_text_listenmultipledevices_web"))]}},b=({offerType:e})=>a.createElement(p.a,{maxWidth:{base:"100%",md:"255px"},marginLeft:{base:0,md:"16"},marginTop:{base:8,md:0}},a.createElement(p.a,{alignItems:"center",borderRadius:"md",color:"white",display:"flex",fontSize:"xl",fontWeight:"700",justifyContent:"center",lineHeight:6,marginBottom:"spacing.2xl",maxWidth:"180px",paddingY:"spacing.m",paddingX:"spacing.l",background:"premium"===e?"linear-gradient(69.06deg, #B84FDD -26.76%, #4965F4 44.6%, #2EFB74 132.54%)":"linear-gradient(246.32deg, #FF3737 -47.6%, #FF5D31 9.71%, #FF842A 67.97%, #FAFE3A 126.23%)"},_[e].name),a.createElement(u.D,{color:"darkGrey.900",fontSize:"xl",marginBottom:"spacing.l"},_[e].headline),a.createElement(h.E,{color:"lightGrey.900",fontSize:"md"},_[e].content));var E,v;const f=()=>a.createElement(p.a,{alignItems:"center",backgroundColor:"border.accent.onContent.default",display:"flex",justifyContent:"center",paddingY:{base:"spacing.2xl",md:24},paddingX:{base:"spacing.2xl",md:0},flexDirection:{base:"column",md:"row"},marginBottom:{base:0,md:"auto"}},a.createElement(u.D,{fontSize:"4xl",maxWidth:{base:"none",md:"500px"},marginBottom:{base:"spacing.3xl",md:0},minWidth:{base:0,md:"auto"},paddingTop:{base:"spacing.2xl",md:0},width:{base:"100%",md:"auto"},dangerouslySetInnerHTML:{__html:(0,g.AP)("fnacdartylandingpage_title_planXorplanYchoose_web",{sprintf:[(0,g.AP)("deezerplans_title_deezerpremium_web"),(0,g.AP)("deezerplans_title_deezerfamily_web")]})}}),a.createElement(p.a,{marginLeft:{base:0,md:"spacing.3xl"},paddingBottom:{base:"spacing.2xl",md:0}},a.createElement(p.a,{display:"flex",flexDirection:{base:"column",md:"row"}},a.createElement(p.a,{maxWidth:{base:"100%",md:"255px"}},E||(E=a.createElement(b,{offerType:"premium"}))),a.createElement(p.a,{marginLeft:{base:0,md:16},marginTop:{base:"spacing.2xl",md:0},maxWidth:{base:"100%",md:"255px"}},v||(v=a.createElement(b,{offerType:"family"}))))));n("aRRr");const y="Deezer Premium",x={premium:{label:"Premium",illustration:"@deezer/images/unlogged/redeem/deezer-premium-illustration.png",blocks:[{label:(0,g.AP)("deezerpremiumlandingpage_title_playondemand_web"),description:a.createElement(a.Fragment,null,a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_millionstrackpodcastradioandmore_web")}}),a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_adfreeskipcraftowncollection_web")}}))},{label:(0,g.AP)("specialofferlandingpage_subtitle_offlinelistening_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_dwnldfavmusicpodcastsanytmeanywh_web")}})},{label:(0,g.AP)("deezerpremiumlandingpage_title_meetyourmusicmatchmaker_web"),description:a.createElement(a.Fragment,null,a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_youlistenyoulovewelearn_web")}}),a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_mostpersonalizedreco_web")}}))},{label:(0,g.AP)("deezerpremiumlandingpage_title_tuneintoyourfavoritehosts_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_evergrowcatalogdedicatedshowstab_web")}})},{label:(0,g.AP)("deezerpremiumlandingpage_title_neverstopdiscovering_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_identifysongsaveasfavddtoplaylst_web")}})},{label:(0,g.AP)("deezerpremiumlandingpage_title_syncupyourlife_web"),description:a.createElement(a.Fragment,null,a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerfamilylandingpage_text_switchbetweendevicesorsync_web")}}),a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerfamilylandingpage_text_connectsmartwatchorcarsystem_web")}}))}]},hifi:{label:"Hifi",illustration:"@deezer/images/unlogged/redeem/deezer-hifi-illustration.png",blocks:[{label:(0,g.AP)("generic_title_planXbenefits_web",{sprintf:[y]}),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("sonyredeemcodepage_text_playanytrackanytimenoadsoffline_web")}})},{label:(0,g.AP)("generic_title_highfidelitysound_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerhifilandingpage_text_listenflacmusicinhifisound_web")}})},{label:(0,g.AP)("deezerfamilylandingpage_title_crossdevicelistening_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerhifilandingpage_text_streamflacmusicaccrossalldevices_web")}})},{label:(0,g.AP)("generic_title_millionofflactracks_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("sonyredeemcodepage_text_expansivecatalogflactracks_web")}})},{label:(0,g.AP)("generic_title_highendsoundsystemcompatibility_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("sonyredeemcodepage_text_enjoycristalclearmusic_web")}})},{label:(0,g.AP)("generic_title_deluxemusicexperience_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("sonyredeemcodepage_text_excluaccess360rawith360bydeezer_web")}})}]},family:{label:"Family",illustration:"@deezer/images/unlogged/redeem/deezer-family-illustration.png",blocks:[{label:(0,g.WI)("deezerfamilylandingpage_title_Xindividualprofiles_web","deezerfamilylandingpage_title_Xindividualprofiles_web",{sprintf:["6"],count:6}),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.WI)("deezerfamilylandingpage_text_getXindivprofilesfamilymusicplan_web","deezerfamilylandingpage_text_getXindivprofilesfamilymusicplan_web",{sprintf:["6"],count:6})}})},{label:(0,g.AP)("yearlyoffer_action_saveonplanX_web",{sprintf:[y]}),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerfamilylandingpage_text_playforwholefamilypriceof2planX_web",{sprintf:[y]})}})},{label:(0,g.AP)("deezerfamilylandingpage_title_kidprofiles_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerfamilylandingpage_text_keepcontrolkidfriendlycontent_web",{sprintf:["Deezer Family"]})}})},{label:(0,g.AP)("generic_title_planXbenefits_web",{sprintf:[y]}),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerfamilylandingpage_text_listenwithoutlimits_web",{sprintf:[y]})}})},{label:(0,g.AP)("deezerfamilylandingpage_title_crossdevicelistening_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.WI)("deezerfamilylandingpage_text_connectuptoXdevices_web","deezerfamilylandingpage_text_connectuptoXdevices_web",{sprintf:["13"],count:13})}})},{label:(0,g.AP)("deezerfamilylandingpage_title_tailormadefeatures_web"),description:a.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.WI)("deezerfamilylandingpage_text_enjoysongcatcherflowlyricsv2_web","deezerfamilylandingpage_text_enjoysongcatcherflowlyricsv2_web",{sprintf:["6"],count:6})}})}]}};var k=n("u37T"),A=n("siwx");const w={premium:{desktop:n.p+"images/unlogged/redeem/deezer-premium-illustration.43a79f40a2d9f43a82fd.png",mobile:n.p+"images/unlogged/redeem/deezer-premium-illustration-mobile.0060a50c26ba48492815.png"},family:{desktop:n.p+"images/unlogged/redeem/deezer-family-illustration.bbc752d3e936cfd3466d.png",mobile:n.p+"images/unlogged/redeem/deezer-family-illustration-mobile.5684e8387393db06dfe4.png"},hifi:{desktop:n.p+"images/unlogged/redeem/deezer-hifi-illustration.06dd9f25c629fd2675ea.png",mobile:n.p+"images/unlogged/redeem/deezer-hifi-illustration-mobile.16b40f9d4531d4b268e4.png"}},C=({id:e,offerType:t})=>{const n=x[t],r=(0,k.A)({base:w[t].mobile,sm:w[t].desktop});return n?a.createElement(p.a,{display:"flex",flexDirection:{base:"column-reverse",sm:"row"},marginBottom:{base:0,sm:24},paddingTop:{base:"spacing.2xl",sm:36},id:e},a.createElement(A._,{objectFit:"cover",backgroundColor:"white",src:r,height:{base:"340px",sm:"300px"},marginTop:{base:0,sm:"spacing.3xl"},marginBottom:{base:"spacing.2xl",sm:0},minWidth:{base:0,sm:"550px"},width:{base:"100%",sm:"550px"}}),a.createElement(p.a,{marginLeft:{base:0,sm:"spacing.3xl"},padding:{base:"spacing.2xl",sm:0}},a.createElement(u.D,{fontSize:{base:"5xl",sm:"6xl"},marginBottom:{base:"spacing.3xl",sm:16},maxWidth:{base:"none",sm:"500px"},minWidth:{base:0,sm:"auto"},width:{base:"100%",sm:"auto"}},(0,g.AP)("generic_title_whychooseplanX_web",{sprintf:[`Deezer ${n.label}`]})),a.createElement(p.a,{display:{base:"block",sm:"flex"},flexWrap:"wrap"},n.blocks.map((({label:e,description:t})=>a.createElement(p.a,{key:e,flex:{base:"1",sm:"1 0 30%"},marginBottom:"spacing.2xl",marginRight:{base:0,sm:16},maxWidth:{base:"none",sm:"300px"},width:{base:"100%",sm:"auto"}},a.createElement(u.D,{fontSize:"xl",marginBottom:"spacing.l"},e),a.createElement(h.E,null,t))))))):null};var S=n("ej6z"),P=n("LSdk");const T=({brandName:e,logoUrl:t})=>a.createElement(p.a,{display:"flex",marginBottom:{base:"spacing.3xl",md:16}},a.createElement(p.a,{alignItems:"center",display:"flex",paddingRight:"spacing.l",paddingLeft:0},a.createElement(S.N,{href:"/","data-testid":"deezer-logo"},a.createElement(P.T,{height:{base:6,md:8}}))),t?a.createElement(p.a,{alignItems:"center",display:"flex",paddingLeft:"spacing.l",paddingRight:0,borderLeft:"1px solid black"},a.createElement(A._,{height:{base:8,md:12},alt:e,src:t,"data-testid":"partner-logo"})):null);var I=n("Qyje"),N=n.n(I),z=n("XkdG"),L=n("HmE0"),R=n("yiM3");const D=({placeholder:e,redirectPage:t})=>{const[n,r]=(0,a.useState)(),[i,s]=(0,a.useState)(""),o=(0,a.useCallback)((async e=>{try{await m_checkCodeValidity(e)}catch(e){r(e)}try{const t=await m_redeemGiftCode(e);window.location.assign(t.REDIRECT_URL)}catch(e){const n=e;if("USER_NOT_LOGGED"===n.name){const e=`${window.location.href.split(/[?#]/)[0]}?autoSubmit=true&code=${i}`;return void window.location.replace((0,R.t)({route:"signup"===t?"register":"login",redirect:e,query:{template:"activation_journey"}}))}const a=n.response.error[n.name];r(a)}}),[i]);return(0,a.useEffect)((()=>{const{autoSubmit:e,code:t}=N().parse(window.location.search,{ignoreQueryPrefix:!0});t&&s(t),e&&o(t)}),[o]),a.createElement(a.Fragment,null,a.createElement(p.a,{maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},a.createElement("form",{onSubmit:e=>{e.preventDefault(),o(i)}},a.createElement(z.p,{placeholder:e,_placeholder:{fontSize:"sm"},value:i,onChange:e=>{s(e.target.value)},mb:{base:"spacing.m",md:0},"data-testid":"redeem-textfield"}),a.createElement(L.$n,{type:"submit",fontSize:"xs",paddingX:"spacing.l",paddingY:"spacing.s",height:{base:10,md:8},minHeight:{base:10,md:8},maxHeight:{base:10,md:8},textTransform:"uppercase",position:{base:"initial",md:"absolute"},right:2,top:"50%",transform:{base:"none",md:"translateY(-50%)"},w:{base:"full",md:"auto"},zIndex:"overlay","data-testid":"redeem-submit-button"},(0,g.AP)("Valider mon code")))),a.createElement(p.a,{maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},n?a.createElement(p.a,{borderRadius:"4px",marginY:"spacing.l",padding:"spacing.l spacing.xl",backgroundColor:"background.accent.onDark.default",color:"text.feedback.error.default",width:"100%","data-testid":"error-container"},n):null))};var M=n("Vd8Q");function F(e){return`https://${M.default.get("host_img_url_ssl")}/${e}`}var H,O,B,j,U=n("+9dH"),W=n("nzlo");function X(e){return a.createElement(W.A,(0,U.A)({name:"chevron-down"},e),H||(H=a.createElement("path",{d:"M6.013 8.998a.6.6 0 0 0 .416-.169l2.661-2.1 2.662-2.102c.654-.517-.12-1.498-.775-.981l-2.483 1.96-2.482 1.96-4.99-3.921c-.656-.515-1.428.468-.773.983L5.597 8.83a.6.6 0 0 0 .416.168"})))}const V=({data:e,whyChooseId:t})=>a.createElement(p.a,{display:"flex",marginLeft:"auto",marginRight:"auto",minHeight:{base:"none",md:"800px"},width:"100%",flexDirection:{base:"column",md:"row"},height:{base:"auto",md:"800px"},marginBottom:{base:"spacing.2xl",md:0}},a.createElement(p.a,{display:"flex",flex:"1",flexDirection:"column",height:"100%",justifyContent:"space-between",margin:"0 auto",minHeight:"800px",marginLeft:{base:0,sm:36,md:36,lg:"250px"},marginRight:{base:0,sm:24,md:24,lg:24},maxWidth:{base:"none",sm:"none",md:"none",lg:"none"},minWidth:{base:0,sm:"450px"},paddingX:"spacing.2xl",paddingY:"spacing.3xl",width:{base:"100%",sm:"100%",md:"100%",lg:"100%"}},a.createElement(p.a,{maxWidth:"600px"},a.createElement(T,{brandName:e.partnerName,logoUrl:F(e.partnerLogo)}),a.createElement(u.D,{fontSize:{base:"4xl",md:"6xl"},marginBottom:"spacing.2xl","data-testid":"redeem-header"},e.mainTitle),a.createElement(h.E,{fontSize:"lg",marginBottom:"spacing.2xl","data-testid":"redeem-heading-text"},e.subtitle),a.createElement(D,{placeholder:e.placeholderText,redirectPage:e.redirectPage}),O||(O=a.createElement(p.a,{height:"1px",marginY:"spacing.m",width:"100%"})),a.createElement(h.E,{fontSize:"xs",dangerouslySetInnerHTML:{__html:e.codeHelperText.replace(/<a/g,'<a style="color: #a238ff;"')}}),B||(B=a.createElement(p.a,{height:"1px",marginY:"spacing.m",width:"100%"})),a.createElement(h.E,{fontSize:"xs",dangerouslySetInnerHTML:{__html:e.helpContactText.replace(/<a/g,'<a style="color: #a238ff;"')}})),e.offerType===d.PremiumXFamily?null:a.createElement(p.a,{as:"a",display:{base:"none",md:"flex"},alignItems:"center",marginBottom:"spacing.2xl",marginTop:"spacing.l",href:`#${t}`,"data-testid":"why-choose-section"},j||(j=a.createElement(p.a,{display:"inline",marginRight:"spacing.m"},a.createElement(X,null))),a.createElement(h.E,{fontSize:"xs"},function(e){const t=x[e];return(0,g.AP)("generic_title_whychooseplanX_web",{sprintf:[`Deezer ${t.label}`]})}(e.offerType)))),a.createElement(A._,{src:F(e.backgroundImage),alt:`${e.partnerName}-illustration`,backgroundColor:"white",maxWidth:{base:"none",md:"600px"},minHeight:{base:"300px",md:"800px"},minWidth:{base:0,md:"400px"},objectFit:"cover",height:{base:"100%",md:"auto"},maxHeight:{base:"600px",md:"none"},width:{base:"100%",md:"auto"}})),G=({partnerName:e,bannerBg:t,redirectTo:n,country:r})=>t?a.createElement(S.N,{href:n},a.createElement(p.a,{as:"img",src:F(t),alt:`${e}-promotional-banner`,mb:24,maxH:"750px",maxW:"100%",minW:"100%",objectFit:"cover",display:{base:"none",md:"block"}})):a.createElement(p.a,{bgImage:`url("@deezer/images/unlogged/redeem/${r}/player.jpg")`,bgPos:"center",bgRepeat:"no-repeat",bgSize:"contain",h:{base:"270px",md:"370px",lg:"490px",xl:"704px"},mb:24}),$=({title:e,placeholder:t,redirectPage:n})=>a.createElement(p.a,{display:"flex",flexDir:"column",alignItems:"center",justifyContent:"center",mb:{base:"spacing.2xl",md:24},mt:{base:"spacing.2xl",md:24},textAlign:"center",p:{base:"spacing.2xl",md:0}},a.createElement(u.D,{fontSize:{base:"3xl",md:"4xl"},mb:{base:"spacing.2xl",md:16},maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},w:"100%"},e),a.createElement(D,{placeholder:t,redirectPage:n})),q=({termsAndConditions:e})=>e?a.createElement(p.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:{base:"spacing.2xl",md:"spacing.3xl"},textAlign:"center",backgroundColor:"lightGrey.50",width:"100%"},a.createElement(h.E,{color:"lightGrey.900",fontSize:"sm",lineHeight:"18px",maxWidth:"650px",minWidth:{base:0,md:"400px"},width:"100%"},e)):null;var Q,Y,K,Z,J,ee=n("E6Gc");const te="why-choose-section",ne=(0,r.Ng)((e=>({userCountry:e.user.COUNTRY})))((e=>{const[t,n]=(0,a.useState)();(0,ee.l)("light");const r=e.match.params.slug,c=e.userCountry;return(0,a.useEffect)((()=>{(async()=>{const e=await m_getGiftPageData(r);n(e)})()}),[r]),t?a.createElement(p.a,{bg:"white",fontSize:"sm",w:"100%"},a.createElement(V,{data:t,whyChooseId:te}),t.offerType===d.PremiumXFamily?Y||(Y=a.createElement(f,null)):a.createElement(C,{id:te,offerType:t.offerType}),a.createElement(G,{partnerName:t.partnerName,bannerBg:t.partnershipImage,redirectTo:t.backgroundUrl,country:c}),a.createElement($,{title:t.subtitle,placeholder:t.placeholderText,redirectPage:t.redirectPage}),a.createElement(q,{termsAndConditions:t.termsAndConditions}),K||(K=a.createElement(i.A,null)),Z||(Z=a.createElement(s.A,null)),J||(J=a.createElement(o.A,null))):Q||(Q=a.createElement(l.A,null))}))},f4Bz:()=>{},gkSg:()=>{},miiT:(e,t,n)=>{n.d(t,{A:()=>s});var a=n("+9dH"),r=n("pVdW"),i=n("q1tI");const s=({children:e,...t})=>i.createElement(r.E,(0,a.A)({as:"h2",fontSize:{base:"md",md:"lg"},marginBottom:8,"data-testid":"activate-landing-subheader"},t),e)},nRPM:(e,t,n)=>{e.exports=n.p+"images/unlogged/activate/default-background-image.b6d734fa19525c8605cf.png"},nzlo:(e,t,n)=>{n.d(t,{A:()=>o});var a=n("+9dH"),r=n("q1tI"),i=n("juqV");class s extends r.Component{render(){const{children:e,className:t,name:n,size:s,viewBox:o,title:l,...c}=this.props,d={className:(0,i.A)("svg-icon",{[`svg-icon-${n}`]:n&&""!==n},t),focusable:"false",height:"auto"===s?"1em":s,role:"img",width:"auto"===s?"1em":s,viewBox:o,"aria-hidden":l?"false":"true"};return"boxSize"in c&&delete c.boxSize,r.createElement("svg",(0,a.A)({},d,c),l?r.createElement("title",null,l):null,e)}}s.defaultProps={className:void 0,name:void 0,size:"12",viewBox:"0 0 12 12",title:void 0};const o=s},oqWs:(e,t,n)=>{n.d(t,{A:()=>c});var a=n("+9dH"),r=n("TDRX"),i=n("CdHq"),s=n("siwx"),o=n("q1tI"),l=n("nRPM");const c=({children:e,...t})=>o.createElement(r.a,(0,a.A)({backgroundColor:"white",minHeight:"730px",position:"relative"},t),o.createElement(s._,{src:l,position:"absolute",top:"0",right:"0",objectFit:"contain",display:{base:"none",md:"block"}}),o.createElement(i.s,{direction:{base:"column",md:"row"},justifyContent:"center",alignItems:"center",padding:{base:"80px 20px",md:"40px 15px"},boxSizing:"border-box",margin:"0 auto",position:"relative",zIndex:"2",width:{base:"100%",md:"780px",lg:"1050px",xl:"1270px"}},o.createElement(r.a,{margin:"0 auto",maxWidth:"100%",marginRight:{base:0,md:"400px"}},e)))},r2ys:(e,t,n)=>{n.d(t,{A:()=>s});var a=n("q1tI"),r=n("uHHB"),i=n("vGT4");const s=()=>{const{state:e}=(0,i.b)(),t=(e=>null==e?void 0:e.settings)(e);return(0,a.useEffect)((()=>{const{consentString:e,statistics:n=0,targetedAdvertising:a=0}=t||{};window.sas&&window.sas.cmd.push((()=>{window.sas.setGdprConsentData(e)})),(0,r.A)("consentStatistics",n.toString(),100),(0,r.A)("consentMarketing",a.toString(),100)}),[t]),null}},"y+AQ":(e,t,n)=>{n.d(t,{A:()=>s});var a=n("+9dH"),r=n("q1tI"),i=n("pVdW");const s=({children:e,...t})=>r.createElement(i.E,(0,a.A)({"data-testid":"activate-common-paragraph"},t),e)},yBQW:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ke}),n("/eM8");var a,r=n("q1tI"),i=n("Wp0Y"),s=n("X6oL"),o=n("TRpf"),l=n("QVzS"),c=n("iooo"),d=n("2qhg"),m=n("yiM3"),p=n("bDF2");class u extends r.PureComponent{render(){return r.createElement(r.Fragment,null,a||(a=r.createElement("div",{className:"burger-icon",id:"burger_menu_button"},r.createElement("span",{className:"line"}),r.createElement("span",{className:"line"}),r.createElement("span",{className:"line"}))),r.createElement("div",{className:"burger-menu burger-menu-hidden",id:"burger_menu"},r.createElement("div",null,r.createElement("div",{className:"nav-collapse",id:"backstage_navigation_collapse"},r.createElement("ul",{className:"nav"},this._renderMenuContent())))))}_renderMenuContent(){return 0!==d.default.current()?r.createElement(r.Fragment,null,r.createElement("li",{className:"nav-item"},r.createElement("a",{href:"/open_app",className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("download-app","menu")},(0,i.AP)("Lancer Deezer"))),this._renderManageMySubscription(),this._renderMenuDefaultItems(),r.createElement("li",{className:"nav-item"},r.createElement("a",{role:"button",className:"nav-main-link backstage-header-link",onClick:()=>d.default.logout()},(0,i.AP)("Déconnexion")))):r.createElement(r.Fragment,null,r.createElement("li",{className:"nav-item"},r.createElement("a",{href:(0,m.t)({route:"login"}),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("login-button")},(0,i.AP)("Connexion"))),r.createElement("li",{className:"nav-item"},r.createElement("a",{href:(0,m.t)({route:"register"}),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("signup-button")},(0,i.AP)("Inscription"))),this._renderMenuDefaultItems())}_renderManageMySubscription(){if(0!==d.default.getOfferId())return r.createElement("li",{className:"nav-item"},r.createElement("a",{href:(0,c.jd)("/payment/go.php?subscription=1"),className:"nav-main-link backstage-head er-link",onClick:()=>this._trackElementClick("manage-subscription-button","menu")},(0,i.AP)("Gérer mon abonnement")))}_renderMenuDefaultItems(){return r.createElement(r.Fragment,null,r.createElement("li",{className:"nav-item"},r.createElement("a",{href:this._getOpenAppUrl(),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("download-app","menu")},(0,i.AP)("Télécharger l'application"))),r.createElement("li",{className:"nav-item"},r.createElement("a",{href:(0,c.jd)("/offers"),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("plans-button")},(0,i.AP)("Offres"))),r.createElement("li",{className:"nav-item"},r.createElement("a",{href:(0,c.jd)("/channels/explore"),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("channels-explore-button")},(0,i.AP)("Explorer tous nos Univers"))))}_getOpenAppUrl(){const e=(0,c.Uv)(location.href),t=Object.entries(e).filter((([e])=>0===e.indexOf("utm"))).map((([e,t])=>`${e}=${t}`)).join("&");return"/open_app?page=home&source=MF_MenuDownloadApp"+(t.length?`&${t}`:"")}_trackElementClick(e,t=""){const n=(0,p.bg)();n&&(0,p.R2)({eventcategory:n,eventaction:e,eventlabel:t})}}const g=u;var h,_,b=n("xobL"),E=n("TDRX"),v=n("CdHq"),f=n("ej6z"),y=n("LSdk"),x=n("HmE0"),k=n("eOc8");let A=(0,s.Ay)({eventcategory:"header"})(h=class extends r.PureComponent{constructor(e){super(e),l.A.init()}render(){return r.createElement(E.a,{width:"100%",height:{base:"60px",md:"80px"},bg:"background.neutral.primary.default",boxShadow:"0 3px 0 0 rgba(0, 0, 0, .06)",position:"fixed",top:0,zIndex:2e3},r.createElement(v.s,{height:"100%",alignItems:"center",paddingX:{base:"spacing.xl",md:"122px"},justifyContent:{base:"flex-start",md:"space-between"}},r.createElement(E.a,null,r.createElement(f.N,{href:"/"},r.createElement(y.T,{height:{base:8,md:10}}))),r.createElement(v.s,{width:"100%",paddingRight:"spacing.xl",justifyContent:"flex-end",className:"hidden-phone"},r.createElement(E.a,{display:{base:"none",md:"flex"}},r.createElement(E.a,{marginX:"spacing.xl",fontSize:"large",fontWeight:"bold"},r.createElement(f.N,{href:(0,c.jd)("/download/?direct_dl&utm_source=device&utm_campaign=mkg-desktop_app&utm_medium=player-obj_download&utm_content=feature-desktop_app"),onClick:this.props.tracking?this._onTrackingClick.bind(this,"download-button"):null,_hover:{color:"text.accent.primary.hovered"},_focus:{color:"text.accent.primary.pressed"}},(0,i.AP)("Télécharger"))),r.createElement(E.a,{marginX:"spacing.xl",fontSize:"large",fontWeight:"bold"},r.createElement(f.N,{href:(0,c.jd)("/offers"),onClick:this.props.tracking?this._onTrackingClick.bind(this,"plans-button"):null,_hover:{color:"text.accent.primary.hovered"},_focus:{color:"text.accent.primary.pressed"}},(0,i.AP)("Offres"))))),this._renderUnloggedButtons()),_||(_=r.createElement(g,null)))}_renderUnloggedButtons(){return this.props.userConnected?this.props.isFreemiumCountry||!this.props.isFreemiumCountry&&this.props.isPremiumUser?r.createElement("div",{className:"cell cell-profile hidden-phone"},r.createElement(x.$n,{as:"a",boxSizing:"border-box",id:"topbar-player-button",href:"/",variant:"outline",size:"md"},(0,i.AP)("Ouvrir le player"))):null:r.createElement(E.a,{className:"cell cell-profile hidden-phone"},r.createElement(k.B,{direction:"row",spacing:2},r.createElement(x.$n,{as:"a",boxSizing:"border-box",id:"topbar-login-button",href:(0,m.t)({route:"login",comeback:!0}),variant:"outline",size:"medium",onClick:this.props.tracking?this._onTrackingClick.bind(this,"login-button"):null},(0,i.AP)("Connexion")),r.createElement(x.$n,{as:"a",boxSizing:"border-box",id:"topbar-register-button",href:(0,m.t)({route:"register",comeback:!0}),size:"medium",onClick:this.props.tracking?this._onTrackingClick.bind(this,"signup-button"):null},(0,i.AP)("Inscription"))))}_onTrackingClick(e){this.props.tracking.trackEvent({event:"click",eventaction:e})}})||h;const w=(0,o.Ng)((({user:e})=>({userConnected:(0,b.UJ)(e),isFreemiumCountry:(0,b.zC)(e),isPremiumUser:(0,b.ki)(e)})))(A);var C=n("+9dH"),S=n("siwx");const P=n.p+"images/unlogged/activate/shape-desktop.88b54a27e1b17b893bfd.svg",T=n.p+"images/unlogged/activate/partners-list-default-background-image.fc374887665b1902570f.png",I=n.p+"images/unlogged/activate/partners-list-mobile-background-image.fc931d9cd2f942ffc53c.png",N=({children:e,...t})=>r.createElement(E.a,(0,C.A)({backgroundColor:"#FDFCFE",minHeight:"540px",position:"relative"},t),r.createElement(S._,{src:T,position:"absolute",top:"0",right:"0",objectFit:"contain",maxHeight:"780px",display:{base:"none",md:"block"}}),r.createElement(S._,{src:P,position:"absolute",top:"0",right:"400px",objectFit:"contain",maxHeight:"610px",display:{base:"none",md:"block"}}),r.createElement(v.s,{direction:{base:"column",md:"row"},justifyContent:"center",alignItems:"center",padding:{base:"45px 20px",md:"40px 15px"},boxSizing:"border-box",margin:"0 auto",position:"relative",zIndex:"2",width:{base:"100%",md:"580px",lg:"850px",xl:"1070px"}},r.createElement(E.a,{margin:{base:"unset",md:"0 auto"},marginRight:{base:"unset",md:"400px"}},e)),r.createElement(S._,{src:I,width:"100%",objectFit:"contain",display:{base:"block",md:"none"}}));var z,L,R=n("Rm4k"),D=n("y+AQ"),M=n("VkUI"),F=n("pVdW"),H=n("6vqc");const O=({partner:e,index:t,...n})=>{const a=(0,s.z1)();if(/sync/.test(e.activationLink))return r.createElement(E.a,{gap:3,display:"flex",cursor:"pointer",alignItems:"center",onClick:()=>{a.trackEvent({event:"click",eventlabel:e.activationLink.split("/")[2],eventaction:"choose-partner",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]}),(e=>{M.default.open(`/${e}`)})(e.activationLink)},"data-testid":`activate-partnerlist-partner-${t}`},r.createElement(S._,{maxHeight:8,alt:e.brandName,src:e.partnerLogos[e.PARTNER_LOGO_THEME_LIGHT][e.PARTNER_LOGO_DEFAULT_SIZE]}),r.createElement(F.E,{fontSize:"base",fontWeight:"600"},e.brandName),z||(z=r.createElement(H.v,null)));const i=(0,c.jd)(e.activationLink);return r.createElement(f.N,(0,C.A)({gap:3,display:"flex",cursor:"pointer",alignItems:"center",onClick:()=>{a.trackEvent({event:"click",eventlabel:e.activationLink.split("/")[2],eventaction:"choose-partner",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]})},href:i,"data-testid":`activate-partnerlist-partner-${t}`},n),r.createElement(S._,{maxHeight:8,display:"flex",cursor:"pointer",alignItems:"center",alt:e.brandName,src:e.partnerLogos[e.PARTNER_LOGO_THEME_LIGHT][e.PARTNER_LOGO_DEFAULT_SIZE]}),r.createElement(F.E,{fontSize:"base",fontWeight:"600"},e.brandName),L||(L=r.createElement(H.v,null)))},B=({partners:e})=>r.createElement(E.a,{display:"flex",flexDirection:"column",paddingLeft:{base:6,md:8}},e.map(((e,t)=>r.createElement(E.a,{marginTop:0!==t?8:0,key:t},r.createElement(O,{index:t,key:e.id,partner:e})))));var j=n("x9/P"),U=n("RhP2"),W=n("quyQ"),X=n("mbHV"),V=n("ssO+"),G=n("2Av+"),$=n("HrDX"),q=n("QJeV"),Q=n("/b/U"),Y=n("nrKQ"),K=n("z+LD"),Z=n("Q8Ug");const J=({groups:e})=>{const{trackEvent:t}=(0,s.z1)(),n=e=>()=>{var n;e&&("cookie-preference"===e&&(null===(n=window.consentScreenApi)||void 0===n||n.openPreferences(2,"purposes")),t({event:"click",eventaction:`click-${e}-link`,eventcategory:"footer",eventlabel:"footer-social-link"}))};return r.createElement(V.iq,{"data-cy":"footer-links"},null==e?void 0:e.map((e=>r.createElement(V.kI,{key:e.title,label:e.to?r.createElement(V.$u,{href:e.to,onClick:n(e.key)},e.title):e.title},e.entries.map((e=>{const{to:t,key:a,label:i}=e;return t?r.createElement(V.f6,{href:t,key:a,onClick:n(a)},i):r.createElement(V.f6,{as:"button",key:a,onClick:n(a)},i)}))))))};var ee,te=n("Vd8Q");const ne={facebook:r.createElement(G.i,null),instagram:r.createElement($.o,null),youtube:r.createElement(q.V,null),twitter:r.createElement(Q.u,null)},ae=()=>{const e=(0,o.d4)((({user:e})=>(0,b.Z0)(e))),{availableLanguages:t,socialLinks:n,footerSections:a}=(()=>{const[e,t]=(0,r.useState)({socialLinks:[],availableLanguages:[],footerSections:[]});return(0,r.useEffect)((()=>{Y.A.call({method:"deezer.getUnloggedData",success:t,error:K.A.error})}),[t]),e})(),{trackEvent:i}=(0,s.z1)(),l=e=>{i({event:"click",eventaction:"download-app",eventcategory:"footer",eventlabel:`${e}-logo`})},c=(0,Z._C)(e);return r.createElement(V.pX,{"data-cy":"footer"},r.createElement(j.W,null,r.createElement(U.b,{"data-cy":"app-store",target:"_blank",onClick:()=>l("apple"),locale:c,assetsUrl:`https://${te.default.get("host_assets_ssl")}`}),r.createElement(W.x,{"data-cy":"google-play-store",target:"_blank",onClick:()=>l("google"),locale:c,assetsUrl:`https://${te.default.get("host_assets_ssl")}`})),r.createElement(J,{groups:a}),r.createElement(V.CI,{logo:ee||(ee=r.createElement(f.N,{href:"/","data-cy":"deezer-logo","aria-label":"deezer site"},r.createElement(y.T,null))),socialIcons:r.createElement(V.WR,null,n&&n.map((e=>r.createElement(V.Lo,{key:e.name,"aria-label":e.name,href:e.url,icon:ne[e.name]})))),languageSelector:t.length>1&&r.createElement(X.l,{variant:"filled",value:e,onChange:e=>{const t=/\/[a-z]{2}\//,n=`${e.target.value}`;t.test(location.pathname)?location.href=location.href.replace(t,`/${n}/`):location.pathname=n+location.pathname}},t.map((e=>r.createElement("option",{key:e.label,value:e.value},e.label))))}))};var re,ie,se=n("FSqQ");class oe extends r.Component{render(){return r.createElement("div",{className:"modal",id:"modal",role:"dialog","aria-hidden":"true",style:{display:"none"}},re||(re=r.createElement("div",{className:"modal-backdrop"})),ie||(ie=r.createElement("div",{className:"modal-wrapper"})))}}const le=oe;var ce,de,me,pe,ue,ge,he,_e,be=n("5pmF"),Ee=n("r2ys"),ve=n("Zah6"),fe=n("E6Gc"),ye=(n("gkSg"),n("f4Bz"),n("D0rv")),xe=n("6XPn");const ke=(0,s.Ay)()(ce=class extends r.Component{constructor(e){super(e),this.api=void 0,this.repository=void 0,this.isComponentMounted=void 0,this._renderPartnersList=()=>{const{isFetching:e,error:t,partners:n}=this.state;return e?de||(de=r.createElement(se.A,null)):t?r.createElement(r.Fragment,null,r.createElement(R.A,null,(0,i.AP)("generic_text_sorryoffernotavailable_web")),r.createElement(D.A,null,(0,i.AP)("Vous allez maintenant être redirigé vers la page de connexion."))):r.createElement(r.Fragment,null,r.createElement(R.A,null,(0,i.AP)("uaj_title_selectyourpartner_web")),r.createElement(B,{partners:n}))},this.api=new ye.A,this.repository=new xe.A(this.api),this.isComponentMounted=!1,this.state={partners:[],error:null,isFetching:!1}}async componentDidMount(){this.isComponentMounted=!0;try{this._handleFetchStart();const e=await this.repository.findAll();this._handleFetchEnd(),this._handlePartners(e)}catch(e){this._handleFetchEnd(),this._handleError(e)}}componentWillUnmount(){this.isComponentMounted=!1}render(){return r.createElement(fe.Q,null,me||(me=r.createElement(w,null)),r.createElement(E.a,{mt:{base:"60px",md:"80px"}},r.createElement(N,null,this._renderPartnersList())),pe||(pe=r.createElement(le,null)),ue||(ue=r.createElement(be.A,null)),ge||(ge=r.createElement(Ee.A,null)),he||(he=r.createElement(ve.A,null)),_e||(_e=r.createElement(ae,null)))}_handleFetchStart(){this.isComponentMounted&&this.setState({isFetching:!0})}_handleFetchEnd(){this.isComponentMounted&&this.setState({isFetching:!1})}_handlePartners(e){this.isComponentMounted&&this.setState({partners:e})}_handleError(e){this.isComponentMounted&&(this.setState({error:e}),setTimeout((()=>{window.location.replace("/")}),5e3))}})||ce}}]);