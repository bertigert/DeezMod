"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[1443],{"1EyH":(e,t,r)=>{r.d(t,{BB:()=>a,Sx:()=>s,UC:()=>n});const s=e=>/[\u2000-\u2BFF]/.test(e),a=e=>/[\u{10000}-\u{10FFFF}]/u.test(e),n=e=>!!e.match(/^[_0-9a-z-+]+[_.0-9a-z-+]*@([0-9a-z-]+\.)+[a-z]{2,13}$/i)},"5U+Y":(e,t,r)=>{r.d(t,{D3:()=>c,D6:()=>n,K9:()=>a,d0:()=>o,fB:()=>l,wz:()=>s});const s=8,a=50,n=2,o=50,l=16,c=150},"Dqj/":(e,t,r)=>{r.r(t),r.d(t,{default:()=>E}),r("/eM8");var s,a=r("q1tI"),n=r("TRpf"),o=r("Wp0Y"),l=r("nrKQ"),c=r("TqF5"),_=r("H/eQ"),i=r("JPzp"),d=r("m4fd"),u=r("Zlrv"),m=r("CV49"),w=r("nHPd"),A=r("IZLt");const p=(0,o.AP)("formerrormessage_text_onlyuselettersnumberspunctuation_web");function E(){const e=(0,n.wA)(),[t,r]=(0,a.useState)("");return a.createElement(a.Fragment,null,s||(s=a.createElement(u.s_,null)),a.createElement(w.r,null,(0,o.AP)("Modification du mot de passe")),a.createElement(m.c,null,a.createElement(d.A,{error:t,onSubmit:function(t){l.A.call({method:"deezer.updatePassword",data:{password:t},success:async t=>{if(t)return await(0,i.d)(t.arl),_.A.trigger(_.A.user.updatePassword),void e((0,c.Oo)());r(p)},error:e=>{var t,s,a;let n=p;new A.A({error:null!==(t=null!==(s=null==e?void 0:e.message)&&void 0!==s?s:null==e||null===(a=e.response)||void 0===a?void 0:a.error[e.name])&&void 0!==t?t:null==e?void 0:e.name,journey_type:"update-password",gateway_method:"deezer.updatePassword",server_payload:null==e?void 0:e.response}).send(),"Session not secured"===e.response.error[e.name]&&(n=(0,o.AP)("errormessage_text_codetimedoutrequestnewcode_web")),r(n)}})}})))}},EYlq:(e,t,r)=>{r.d(t,{u:()=>a});var s=r("Wp0Y");const a=e=>{switch(e){case"invalid_msisdn":return(0,s.AP)("errormessage_text_invalidphonenumber_web");case"sms_login_limit":return(0,s.AP)("SMScoderesentconfirmationscreen_text_allattemptsused_web");case"internal_error":case"swap_limit":default:return(0,s.AP)("errormessage_text_anerroroccurredpleasetryagain_web");case"invalid_code":case"invalid_code_wrong":return(0,s.AP)("errormessage_text_invalidcode_web");case"code_too_short":return(0,s.AP)("errormessage_text_codeincomplete_web");case"code_too_long":return(0,s.AP)("errormessage_text_codetoomanydigits_web");case"phone_already_used":return(0,s.AP)("Ce numéro est déjà utilisé.")}}},H9G8:(e,t,r)=>{r.d(t,{CZ:()=>i,Ee:()=>d,Hf:()=>l,In:()=>A,RQ:()=>u,SY:()=>c,U9:()=>m,aS:()=>w,jQ:()=>o,qb:()=>_,r_:()=>p,vM:()=>E});var s=r("Wp0Y"),a=r("5U+Y"),n=r("guCc");class o extends Error{constructor(e){super(e),this.name=n.U.FORM_ERROR}}class l extends o{constructor(){super((0,s.AP)("formerrormessage_text_emailaddressformatnotvalid_web")),this.name=n.U.EMAIL_NOT_VALID}}class c extends o{constructor(e){super((0,s.AP)("errormessage_text_domainnnamenotallowed_web",{sprintf:[e]})),this.name=n.U.EMAIL_DOMAIN_NOT_VALID}}class _ extends o{constructor(){super((0,s.AP)("errormessage_title_accountalrdyassociatedwithemail_web")),this.name=n.U.EMAIL_ALREADY_USED}}class i extends o{constructor(){super((0,s.WI)("formerrormessage_text_passwordnotenoughchars_web","formerrormessage_text_passwordnotenoughchars_web",{sprintf:[a.wz],count:a.wz})),this.name=n.U.PASSWORD_TOO_SHORT}}class d extends o{constructor(){super((0,s.WI)("formerrormessage_text_passwordtoomanychars_web","formerrormessage_text_passwordtoomanychars_web",{sprintf:[a.K9],count:a.K9})),this.name=n.U.PASSWORD_TOO_LONG}}class u extends o{constructor(){super((0,s.AP)("errormessage_text_passwordnbeginendwithspace_web")),this.name=n.U.PASSWORD_HAS_TRAILLING_WHITESPACE}}class m extends o{constructor(){super((0,s.WI)("formerrormessage_text_usernamenotenoughchars_web","formerrormessage_text_usernamenotenoughchars_web",{sprintf:[a.D6],count:a.D6})),this.name=n.U.BLOGNAME_TOO_SHORT}}class w extends o{constructor(){super((0,s.WI)("formerrormessage_text_usernametoomanychars_web","formerrormessage_text_usernametoomanychars_web",{sprintf:[a.d0],count:a.d0})),this.name=n.U.BLOGNAME_TOO_LONG}}class A extends o{constructor(){super((0,s.AP)("errormessage_text_usernamecannotcontainsemojis_web")),this.name=n.U.BLOGNAME_HAS_SPECIAL_CHARS}}class p extends o{constructor(e){super((0,s.WI)("agerestrictionerrormessage_text_mustbeXyearsentervaliddate_web","agerestrictionerrormessage_text_mustbeXyearsentervaliddate_web",{sprintf:[e],count:e})),this.name=n.U.MIN_LEGAL_AGE}}class E extends o{constructor(){super((0,s.AP)("errormessage_text_ageisinvalid_web")),this.name=n.U.AGE_INVALID}}},JPzp:(e,t,r)=>{r.d(t,{d:()=>a}),r("/eM8");var s=r("nrKQ");const a=e=>new Promise(((t,r)=>{s.A.call({method:"userAuth.loginByArl",data:{ARL:e},success:t,error:r})}))},SEJg:(e,t,r)=>{r.d(t,{_:()=>a});var s=r("nKUr");const a=(0,r("QSQl").w)({displayName:"CheckCircleFilledIcon",viewBox:"0 0 24 24",pathSmall:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 12c0-5.138 2.862-8 8-8 5.137 0 8 2.862 8 8 0 5.137-2.863 8-8 8-5.138 0-8-2.863-8-8Zm7.109.996 2.905-4.303 1.104.746-3.732 5.53-3.248-2.723.856-1.023 2.115 1.773Z",clipRule:"evenodd"})],pathMedium:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M1 12C1 4.936 4.936 1 12 1s11 3.936 11 11-3.936 11-11 11S1 19.064 1 12Zm10.456 1.45L15.813 7l1.658 1.12-5.599 8.288L7 12.326l1.284-1.533 3.172 2.658Z",clipRule:"evenodd"})]});a.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"CheckCircleFilledIcon"}},Votb:(e,t,r)=>{r.d(t,{z:()=>n});var s=r("nKUr"),a=r("eOc8");const n=(0,r("xi32").R)(((e,t)=>(0,s.jsx)(a.B,{align:"center",...e,direction:"row",ref:t})));n.displayName="HStack"},guCc:(e,t,r)=>{r.d(t,{U:()=>s,m:()=>a});let s=function(e){return e.AGE_INVALID="FORM_ERROR_AGE_INVALID",e.BLOGNAME_HAS_SPECIAL_CHARS="FORM_ERROR_BLOGNAME_HAS_SPECIAL_CHARS",e.BLOGNAME_TOO_LONG="FORM_ERROR_BLOGNAME_TOO_LONG",e.BLOGNAME_TOO_SHORT="FORM_ERROR_BLOGNAME_TOO_SHORT",e.EMAIL_ALREADY_USED="FORM_ERROR_EMAIL_ALREADY_USED",e.EMAIL_DOMAIN_NOT_VALID="FORM_ERROR_EMAIL_DOMAIN_NOT_VALID",e.EMAIL_NOT_VALID="FORM_ERROR_EMAIL_NOT_VALID",e.FORM_ERROR="FORM_ERROR",e.MIN_LEGAL_AGE="FORM_ERROR_MIN_LEGAL_AGE",e.PASSWORD_HAS_TRAILLING_WHITESPACE="FORM_ERROR_PASSWORD_HAS_TRAILLING_WHITESPACE",e.PASSWORD_TOO_LONG="FORM_ERROR_PASSWORD_TOO_LONG",e.PASSWORD_TOO_SHORT="FORM_ERROR_PASSWORD_TOO_SHORT",e}({}),a=function(e){return e[e.TOO_WEAK=0]="TOO_WEAK",e[e.WEAK=1]="WEAK",e[e.MEDIUM=2]="MEDIUM",e[e.STRONG=3]="STRONG",e}({})},m4fd:(e,t,r)=>{r.d(t,{A:()=>M});var s,a,I,n=r("q1tI"),o=r("CdHq"),l=r("eOc8"),c=r("80JK"),_=r("8WIx"),i=r("XkdG"),d=r("3BUG"),u=r("jysG"),m=r("TDRX"),w=r("pVdW"),A=r("HmE0"),p=r("IRKz"),E=r("0mGY"),O=r("Wp0Y"),g=r("FVVF"),f=r("Votb"),R=r("SEJg"),h=r("3bOE"),b=r("zerP"),S=r("guCc");function x({password:e}){const{level:t,color:r}=(e=>{switch((0,b.sR)(e)){case S.m.STRONG:return{level:(0,O.AP)("securitylevel_title_strong_web"),color:"text.feedback.success.default"};case S.m.MEDIUM:return{level:(0,O.AP)("securitylevel_title_medium_web"),color:"text.feedback.warning.default"};case S.m.WEAK:return{level:(0,O.AP)("securitylevel_title_weak_web"),color:"text.feedback.error.default"};default:return{level:(0,O.AP)("securitylevel_title_tooweak_web"),color:"text.feedback.error.default"}}})(e);if(!e)return null;const l=[{regex:/^.{8,}$/,text:(0,O.WI)("passwordrequirements_text_atleastXcharacters_web","passwordrequirements_text_atleastXcharacters_web",{count:8,sprintf:["8"]})},{regex:/.*[a-zA-Z].*/,text:(0,O.AP)("passwordrequirements_text_atleastoneletter_web")},{regex:/.*\d.*/,text:(0,O.AP)("passwordrequirements_text_atleastonenumber_web")}];return n.createElement(o.s,{direction:"row",justifyContent:"space-between",borderRadius:"s",py:"spacing.m",mt:"spacing.s",px:"spacing.l",bg:"background.neutral.tertiary.default"},n.createElement(g.T,{me:"spacing.l",alignItems:"flex-start"},n.createElement(w.E,{variant:"body.l.default"},(0,O.AP)("passwordrequirements_title_yourpasswordmustinclude_web")),l.map(((t,r)=>{const o=t.regex.test(e);return n.createElement(f.z,{key:t.text+r,color:o?"text.feedback.success.default":"text.neutral.primary.default",spacing:"spacing.xs"},o?s||(s=n.createElement(R._,{animation:"300ms bounce-scale",color:"icon.feedback.success.default"})):a||(a=n.createElement(h.k,{color:"icon.neutral.primary.disabled"})),n.createElement("span",null,t.text))}))),n.createElement(w.E,{variant:"body.l.default",textAlign:"end",flex:"1",color:r},t))}const v=(0,p.B)(m.a,{baseStyle:{maxWidth:"400px",w:"100%"}});v.defaultProps={as:"form"};const M=({ctaLabel:e=(0,O.AP)("Enregistrer"),defaultPassword:t="",defaultPasswordConfirm:r="",email:s,error:a,isLoading:p=!1,onSubmit:g})=>{const[f,R]=(0,n.useState)(t),[h,S]=(0,n.useState)(r),[M,P]=(0,n.useState)(""),[L,y]=(0,n.useState)(""),[D,T]=(0,n.useState)(!1);return n.createElement(o.s,{alignItems:"center",justifyContent:"center",w:"100%",mb:"4"},n.createElement(v,{onSubmit:e=>{e.preventDefault();try{(0,b.BE)(f)}catch(e){return void P(e.message)}h===f?g(f,h):y((0,O.AP)("passwordsecurity_text_newpasswordsneedtobethesame_web"))},id:"password-change-form"},n.createElement(l.B,{direction:"column",spacing:"6"},s&&n.createElement(c.MJ,{id:"email-readonly",isReadOnly:!0},n.createElement(_.l,{cursor:"default"},(0,O.AP)("generic_title_emailaddress_web")),n.createElement(i.p,{type:"email",value:s,isDisabled:!0})),n.createElement(c.MJ,{isInvalid:Boolean(M)},n.createElement(_.l,{cursor:"default"},(0,O.AP)("Votre nouveau mot de passe")),n.createElement(d.y,{autoComplete:"new-password","data-testid":"new_password",id:"reset_new_password",name:"password",onChange:e=>{R(e.target.value),P(""),y("")},value:f,onShowPasswordChange:T,showPassword:D}),n.createElement(x,{password:f}),n.createElement(u.Wt,null,M)),n.createElement(c.MJ,{isInvalid:Boolean(L)},n.createElement(_.l,{cursor:"default"},(0,O.AP)("Vérification du mot de passe")),n.createElement(d.y,{autoComplete:"new-password","data-testid":"new_password_confirmation",id:"reset_new_confirm",name:"passwordConfirm",onChange:e=>{S(e.target.value),P(""),y("")},value:h,onShowPasswordChange:T,showPassword:D}),n.createElement(u.Wt,null,L)),a&&n.createElement(m.a,{backgroundColor:"var(--background-feedback-error-default)",borderRadius:"s",display:"flex",padding:"spacing.s",alignItems:"center",gap:"spacing.s",color:"white"},I||(I=n.createElement(E.o,null)),n.createElement(w.E,null,a)),n.createElement(A.$n,{"data-testid":"new_password_save_button",isDisabled:p,isLoading:p,type:"submit"},e))))}},zerP:(e,t,r)=>{r.d(t,{$O:()=>A,A$:()=>i,BE:()=>m,Hx:()=>p,PJ:()=>d,iE:()=>w,sR:()=>u}),r("WpbS"),r("/eM8");var s=r("nrKQ"),a=r("1EyH"),n=r("kSUS"),o=r("guCc"),l=r("H9G8"),c=r("5U+Y"),_=r("EYlq");const i=async(e,t=!1)=>{if(e=e.trim(),!(0,a.UC)(e))throw new l.Hf;const r=await s.A.callAsync({method:"deezer.emailCheck",data:{EMAIL:e}});if(!r.domain_validity)throw new l.SY(r.domain);if(r.availability)return t&&r.suggestion?{success:!0,suggestion:r.suggestion}:{success:!0};throw new l.qb},d=(0,n.A)(((e,t,r,s)=>i(e,t).then(r).catch(s)),400),u=e=>{const t=[/.*[A-Z]+.*/,/.*[a-z]+.*/,/.*[0-9]+.*/,/.*[^A-Za-z0-9]+.*/];if([/.*[0-9]+.*/,/.*[a-zA-Z]+.*/,/^.{8,}$/].reduce(((t,r)=>t&&r.test(e)),!0)){const r=t.reduce(((t,r)=>t+(r.test(e)?1:0)),0);return r>3?o.m.STRONG:r>2?o.m.MEDIUM:r>1?o.m.WEAK:o.m.TOO_WEAK}return o.m.TOO_WEAK},m=e=>{if(e!==e.trim())throw new l.RQ;if(e.length>c.K9)throw new l.Ee;if(e.length<c.wz)throw new l.CZ;return!0},w=e=>{if((e=e.trim()).length<c.D6)throw new l.U9;if(e.length>c.d0)throw new l.aS;if((0,a.Sx)(e)||(0,a.BB)(e))throw new l.In;return!0},A=e=>{if("string"==typeof e){if(!/^\d+$/.test(e.toString()))throw new l.vM;e=parseInt(e,10)}if(e<c.fB)throw new l.r_(c.fB);if(e>c.D3)throw new l.vM;return!0},p=e=>{if(0===e.length)throw new l.jQ((0,_.u)("invalid_code"));if(e.length<6)throw new l.jQ((0,_.u)("code_too_short"));if(e.length>6)throw new l.jQ((0,_.u)("code_too_long"));return!0}}}]);