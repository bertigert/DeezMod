"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[1278],{"3gOz":(e,t,n)=>{n.d(t,{A:()=>c});var i=n("q1tI"),a=n("TRpf"),l=n("juqV"),r=n("kSUS");const o=23.26;class s extends i.Component{constructor(e){super(e),this._containerRef=null,this._containerWidth=0,this._wrapperRef=null,this._childrenRef=null,this._scrollOffset=0,this._scrollWidth=0,this._frameId=null,this._isLastLoop=!1,this._hasScrollingMarquee=!1,this._onResize=(0,r.A)(this._measureText.bind(this),100),this._onMouseEnter=(0,r.A)(this._start.bind(this),1e3),this.state={isTruncated:!1}}componentDidMount(){this._measureText(),window.addEventListener("resize",this._onResize,!1)}UNSAFE_componentWillReceiveProps(){this._measureText()}componentWillUnmount(){this._clear(),window.removeEventListener("resize",this._onResize)}render(){const{langDirection:e,isCentered:t}=this.props,{isTruncated:n}=this.state;let a={className:(0,l.A)("marquee-wrapper",{"is-centered":t&&!n}),ref:e=>this._wrapperRef=e};return n&&(a.onMouseEnter=()=>this._onMouseEnter(),a.onMouseLeave=()=>this._stop(),a.style=this._getWrapperStyle(0)),i.createElement("div",{className:"marquee",dir:e,ref:e=>this._containerRef=e},i.createElement("div",a,this._renderContent(),this._renderContent(!1)))}_renderContent(e=!0){const{children:t,langDirection:n}=this.props,{isTruncated:a}=this.state;if(!e&&!a)return null;if(e)return i.createElement("div",{className:"marquee-content",ref:e=>this._childrenRef=e},t);const l={paddingLeft:"ltr"===n?"24px":null,paddingRight:"rtl"===n?"24px":null};return i.createElement("div",{className:"marquee-content",style:l},t)}_measureText(){if(!this._childrenRef||!this._containerRef)return;const e=this._childrenRef.offsetWidth>this._containerRef.offsetWidth;this.state.isTruncated!==e&&this.setState({isTruncated:e},(()=>{this._clear()}))}_start(){const{onScrollStart:e}=this.props;this._isLastLoop&&(this._isLastLoop=!1),this._isScrolling()||(this._scrollWidth=this._childrenRef.offsetWidth,this._containerWidth=this._containerRef.offsetWidth,"function"==typeof e&&e(),this._frameId=window.requestAnimationFrame(this._move.bind(this)))}_stop(){this._onMouseEnter.cancel(),this._isScrolling()&&(this._isLastLoop=!0)}_move(){if(this._frameId=window.requestAnimationFrame(this._move.bind(this)),this._scrollOffset=Math.ceil(this._scrollOffset+.8),this._scrollOffset>this._scrollWidth+24&&(this._scrollOffset=0),this._moveTo(this._scrollOffset),0===this._scrollOffset&&this._isLastLoop){const{onScrollEnd:e}=this.props;"function"==typeof e&&e(),this._clear()}}_moveTo(e){if(!this._wrapperRef)return;if(!1===this.state.isTruncated)return void this._setStyle(this._containerRef,this._getGradientStyle());this._setStyle(this._wrapperRef,this._getWrapperStyle(this._getTranslateOffset(e)));const t=.23260000000000003*this._containerWidth;if(this._isScrolling()||0!==e){if(e<t&&!this._hasScrollingMarquee){const n=e*o/t;this._setStyle(this._containerRef,this._getGradientStyle(n))}else if(!this._isLastLoop&&e>t)this._hasScrollingMarquee=!0;else if(this._isLastLoop){const n=this._scrollWidth+24-e;if(this._isLastLoop&&n<t){const e=t?n*o/t:0;this._setStyle(this._containerRef,this._getGradientStyle(e))}}}else this._setStyle(this._containerRef,this._getGradientStyle(0))}_clear(){this._isScrolling()&&window.cancelAnimationFrame(this._frameId),this._moveTo(0),this._frameId=null,this._isLastLoop=!1,this._hasScrollingMarquee=!1,this._scrollOffset=0}_setStyle(e,t){e.style&&Object.assign(e.style,t)}_getWrapperStyle(e){return{transform:`translate3d(${e}px, 0px, 0px)`,willChange:"transform"}}_getGradientStyle(e){const{langDirection:t}=this.props;return void 0===e?{"-webkit-mask-image":"","mask-image":""}:0===e?{"-webkit-mask-image":`linear-gradient(\n\t\t\t\t\t${"ltr"===t?270:90}deg,\n\t\t\t\t\trgba(0 0 0 / 0%) 0%,\n\t\t\t\t\trgba(0 0 0 / 0%) 2.42%,\n\t\t\t\t\trgba(0 0 0 / 100%) 23.26%\n\t\t\t\t)`,"mask-image":`linear-gradient(\n\t\t\t\t\t${"ltr"===t?270:90}deg,\n\t\t\t\t\trgba(0 0 0 / 0%) 0%,\n\t\t\t\t\trgba(0 0 0 / 0%) 2.42%,\n\t\t\t\t\trgba(0 0 0 / 100%) 23.26%\n\t\t\t\t)`}:{"-webkit-mask-image":`linear-gradient(\n\t\t\t\t270deg,\n\t\t\t\ttransparent 2.42%,\n\t\t\t\trgba(0 0 0 / 100%) ${"rtl"===t?e:o}%,\n\t\t\t\trgba(0 0 0 / 100%) ${"ltr"===t?100-e:76.74}%,\n\t\t\t\ttransparent 97.58%\n\t\t\t)`,"mask-image":`linear-gradient(\n\t\t\t\t270deg,\n\t\t\t\ttransparent 2.42%,\n\t\t\t\trgba(0 0 0 / 100%) ${"rtl"===t?e:o}%,\n\t\t\t\trgba(0 0 0 / 100%) ${"ltr"===t?100-e:76.74}%,\n\t\t\t\ttransparent 97.58%\n\t\t\t)`}}_getTranslateOffset(e){const{langDirection:t}=this.props;return 0!==e&&"ltr"===t?e-2*e:e}_isScrolling(){return null!==this._frameId}}s.defaultProps={isCentered:!1,onScrollStart:()=>{},onScrollEnd:()=>{}};const c=(0,a.Ng)((({user:e})=>({langDirection:e.DIRECTION})))(s)},"5xmB":(e,t,n)=>{n.d(t,{B:()=>o,A:()=>s});var i=n("q1tI"),a=n("juqV"),l=n("Wp0Y");const r={img:"wPuzu",text:"sIMmz",nocontent:"k4rH3",private:"OXBI2",recommendation:"IMAtw"};let o=function(e){return e.NO_CONTENT="nocontent",e.PRIVATE="private",e.RECOMMENDATION="recommendation",e}({});const s=({img:e=o.NO_CONTENT,wording:t=(0,l.AP)("Aucun résultat."),className:n})=>i.createElement("div",{className:(0,a.A)(r.root,n)},i.createElement("div",{className:(0,a.A)(r.img,r[e])}),i.createElement("div",{className:r.text},t))},ZnRe:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ke});var i,a=n("q1tI"),l=n("WBQ7"),r=n("aEwM"),o=n("w/ZN"),s=n("Wp0Y"),c=n("CdHq"),d=n("y7xR"),u=n("pVdW");const m=({isForMe:e=!1})=>a.createElement(c.s,{alignItems:"center",direction:"column",mt:"6rem"},i||(i=a.createElement(o.i,{mb:"spacing.l",color:"icon.neutral.secondary.default",boxSize:"12",scale:3})),a.createElement(d.D,{as:"p",fontWeight:"bold",fontSize:"lg",mb:"spacing.s"},e?(0,s.AP)("genericemptystate_title_itsabitemptyhere_web"):(0,s.AP)("genericerrormessage_title_oops_web")),a.createElement(u.E,{fontSize:"sm",color:"text.neutral.secondary.default","data-testid":e?"concert-error-message-forme":"concert-error-message-all-concert"},e?(0,s.AP)("concerthubemptystate_text_keeplikingforrecommendations_web"):(0,s.AP)("errormessage_title_noconcertsfoundaroundyourlocation_web")));var v,_=n("A2sV"),h=n("ailv"),g=(n("/eM8"),n("TDRX")),f=n("0sL9"),E=n("SGue"),p=n("lhvF"),b=n("CrR0"),C=n("+RX7"),y=n("/eXD"),A=n("wZBD"),w=n("uN8A"),T=n("brAN"),L=n("wdFl"),R=n("GkjM"),I=n("3gOz");const S=({artistId:e,url:t,onClick:n,name:i,location:l,startDate:r,isLiveStream:o,cover:d,isNotified:u,toggleNotification:m,hideCalendar:_=!1})=>a.createElement(g.a,null,a.createElement(f.V,null,a.createElement(R.A,{"data-testid":"picture-link",to:t,onClick:n},a.createElement(E.Y,{src:d,alt:i,border:"none"},o&&a.createElement(p.Q,null,a.createElement(b.U,{"data-testid":"btn-notification",onClick:()=>{m(u)},"aria-label":"Love",icon:a.createElement(T.$,{"data-testid":"BellOutlinedIcon",color:u?"icon.accent.primary.default":"current"})})),!_&&a.createElement(C.V,{date:r,size:{base:"md"},position:"absolute",top:"2",right:"2","data-testid":"thumbnail-calendar"}))),a.createElement(R.A,{to:`artist/${e}`,"data-testid":"thumbnail-artist-link"},a.createElement(y.r,{title:i},i)),o?a.createElement(c.s,{alignItems:"center"},v||(v=a.createElement(A.J,{me:"1",variant:"live"},a.createElement(L.J,null))),a.createElement(R.A,{to:t},a.createElement(w.f,null,(0,s.AP)("concerthub_title_liveondeezer_web")))):a.createElement(I.A,null,a.createElement(R.A,{to:t},a.createElement(w.f,{"data-testid":"thumbnail-date-location"},l)))));var D=n("esNd"),M=n("fkXJ"),x=n("xobL"),N=n("TRpf"),O=n("ta6e"),k=n("siwx"),F=n("nDZ7"),$=n("sLq1"),P=n("HmE0");const z=({artistId:e,url:t,onClick:n,name:i,location:l,startDate:r,cover:o})=>{const m=(e=>{const t=new Date,n=e.getTime()-t.getTime();return Math.floor(n/864e5)})(r);return a.createElement(O.Z,{margin:"spacing.s",gridColumn:"span 3",gridRow:"span 2",width:"auto",maxHeight:"530px"},a.createElement(O.Z.Image,null,a.createElement(R.A,{to:t,onClick:n},a.createElement(k._,{"data-testid":"concert_highlight_cover",src:o,alt:i,objectFit:"cover",width:"100%"})),a.createElement(O.Z.Overlay,{top:"spacing.s",right:"spacing.s",zIndex:2,"data-testid":"concert_highlight_calendar"},a.createElement(C.V,{date:r,position:"relative",top:"spacing.s",right:"spacing.s",alignSelf:"flex-end",size:{base:"md",lg:"lg"}})),a.createElement(O.Z.Overlay,{top:"0",bottom:"0",left:"0",right:"0",zIndex:2,pointerEvents:"none"},a.createElement(F.N,null,a.createElement(d.D,{variant:"heading.l",pointerEvents:"auto","data-testid":"concert_highlight_title"},a.createElement(R.A,{color:"text.accent.onDark.default",to:`artist/${e}`},i)),a.createElement(u.E,{variant:"body.s.default",noOfLines:1,pointerEvents:"auto","data-testid":"concert_highlight_subtitle"},a.createElement(R.A,{to:t,color:"text.accent.onDark.default"},l))))),a.createElement(O.Z.Container,null,a.createElement(O.Z.Footer,null,a.createElement(c.s,{justifyContent:"space-between",w:"100%",alignItems:"center"},a.createElement(c.s,{gap:"1",alignItems:"center"},m>=0&&m<=30?a.createElement($.K,{color:"text.neutral.primary.default","data-testid":"concert_highlight_countdown"},a.createElement($.t,null,m>0?(0,s.AP)("concerthub_title_inXdays_web",{sprintf:[m],count:m}).toLocaleUpperCase():(0,s.AP)("concerthub_action_ontoday_web"))):null),a.createElement(P.$n,{as:R.A,to:t,"data-testid":"concert_highlight_details"},(0,s.AP)("generic_action_seemore_web"))))))};var B,W,V=n("Zlrv"),Y=n("nspE"),U=n("PvuB"),q=n("nHPd"),X=n("Votb"),H=n("mmFw"),Z=n("FVVF"),j=n("CV49"),G=n("eOc8"),K=n("G9z+"),J=n("XuBo"),Q=n("cfsa");const ee=({isModalOpen:e,closeModal:t,concerts:n=[],name:i,cover:l="",isLiveStream:r,dateFormatter:o})=>{var c;return n&&0!==n.length?a.createElement(V.aF,{isOpen:e,onClose:t,isCentered:!0,size:"3xl"},B||(B=a.createElement(Y.m,null)),a.createElement(U.$,{padding:"spacing.xl"},a.createElement(q.r,{textAlign:"center",flexDir:"row",gap:"spacing.s",alignItems:"center"},a.createElement(X.z,{px:"spacing.l"},a.createElement(H.e,{"data-testId":"concert-modal-avatar",src:l}),a.createElement(Z.T,{alignItems:"flex-start",gap:0},a.createElement(u.E,{"data-testId":"concert-modal-title",variant:"heading.s",noOfLines:1,textAlign:"left"},i),a.createElement(u.E,{color:"text.neutral.secondary.default",variant:"body.s.default",noOfLines:2},(0,s.AP)("concerthub_text_Xconcertshappening_web",{sprintf:[n.length],count:n.length})))),W||(W=a.createElement(V.s_,{"data-testId":"concert-modal-close"}))),a.createElement(j.c,null,a.createElement(G.B,{direction:"column",textAlign:"left"},a.createElement(K.B8,{spacing:"spacing.s"},n.map((e=>{const n=e.node;if(!n)return;const l=`/concert/${n.id}`,m=r?(0,s.AP)("concerthub_title_liveondeezer_web"):n.cityName?`${n.venue}, ${n.cityName}`:n.venue;return a.createElement(R.A,{"data-testId":"concert-modal-link",key:null==n?void 0:n.id,role:"button",className:(0,J.cx)(Q.A.element,{}),to:{pathname:l},onClick:()=>{t()}},a.createElement(g.a,{flex:"1",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},a.createElement(g.a,{display:"flex",flexDirection:"row",alignItems:"center"},a.createElement(C.V,{"data-testId":"concert-modal-calendar",date:new Date(null==n?void 0:n.startDate),size:"md",minW:"40px",maxW:"40px"}),c||(c=a.createElement(d.D,{variant:"heading.xs",noOfLines:2,ml:"spacing.l",pr:"spacing.l","data-testId":"concert-modal-link-name"},i))),a.createElement(u.E,{variant:"body.s.default",color:"text.neutral.secondary.default",noOfLines:2,pr:"spacing.l","data-testId":"concert-modal-link-venue"},m),a.createElement(u.E,{variant:"body.s.default",color:"text.neutral.secondary.default",noOfLines:2,"data-testId":"concert-modal-link-date"},o.formatEventDateTime(n.startDate))))}))))))):null};class te{constructor(e="en"){this.language=void 0,this.dayMonthFormatter=void 0,this.dayMonthLongFormatter=void 0,this.timeFormatter=void 0,this.dayOnlyFormatter=void 0,this.language=e,this.dayMonthFormatter=new Intl.DateTimeFormat(e,{day:"2-digit",month:"long"}),this.dayMonthLongFormatter=new Intl.DateTimeFormat(e,{day:"numeric",month:"long"}),this.timeFormatter=new Intl.DateTimeFormat(e,{hour:"numeric",minute:"2-digit",hour12:!0}),this.dayOnlyFormatter=new Intl.DateTimeFormat(e,{day:"2-digit"})}formatConcertDate(e,t=!1,n=!0){if(!e)return"";const i=e instanceof Date?e:new Date(e),a=(new Date).getFullYear(),l=i.getFullYear(),r=this.dayMonthFormatter.format(i),o=n&&a<l?` ${l}`:"";let s="";return t&&(s=` • ${this.timeFormatter.format(i)}`),`${r}${o}${s}`}formatDateRange(e,t){if(!e||!t)return"";const n=e instanceof Date?e:new Date(e),i=t instanceof Date?t:new Date(t),a=(new Date).getFullYear(),l=n.getFullYear(),r=i.getFullYear(),o=`${this.dayMonthFormatter.format(n)}${l!==a?` ${l}`:""}`;let s;return s=n.getMonth()===i.getMonth()&&l===r?this.dayOnlyFormatter.format(i):`${this.dayMonthFormatter.format(i)}${r!==a?` ${r}`:""}`,`${o} - ${s}`}formatConcertLocation({startDate:e,endDate:t=null,venue:n,cityName:i="",numberOfEvents:a=1,isLiveStream:l=!1}){let r,o;return r=t&&a>1?this.formatDateRange(e,t):this.formatConcertDate(e),o=l?(0,s.AP)("concerthub_title_liveondeezer_web"):a>1?`${(0,s.AP)("concerthub_text_Xconcerts_web",{sprintf:[a],count:a})} • ${n}${i?`, ${i}`:""}`:i?`${n}, ${i}`:n,`${r} • ${o}`}formatEventDateTime(e){if(!e)return"";const t=e instanceof Date?e:new Date(e),n=(new Date).getFullYear(),i=t.getFullYear(),a=this.dayMonthLongFormatter.format(t),l=this.timeFormatter.format(t);return n<i?`${l} • ${a} ${i} `:`${l} • ${a}`}}const ne=e=>new te(e),ie=({concert:e,index:t,locationName:n})=>{var i;const l=e.liveEvents.edges.length,[r,o]=(0,a.useState)(!1),[c]=(0,_.BMS)(),[d]=(0,_.oih)(),u=(0,N.d4)((e=>e)),m=(0,x.Z0)(u.user),v=(0,a.useMemo)((()=>ne(m)),[m]);if(!e.liveEvents.edges[0].node)return null;const{startDate:g,contributors:f,venue:E,types:p,id:b,hasSubscribedToNotification:C,name:y,cityName:A}=e.liveEvents.edges[0].node,w=(0,D.rL)(f.edges),T=w[0].node;if(!(E&&p&&null!=T&&T.name&&b))return null;const L=new Date(g),R=null==T||null===(i=T.picture)||void 0===i||null===(i=i.large)||void 0===i?void 0:i[0],I=w.some((e=>{var t;return null===(t=e.concertContributorMetadata)||void 0===t?void 0:t.roles.isMain})),O=w.map((e=>{var t,n,i;return I?null!==(n=e.concertContributorMetadata)&&void 0!==n&&n.roles.isMain?null===(i=e.node)||void 0===i?void 0:i.name:"":null===(t=e.node)||void 0===t?void 0:t.name})).filter(Boolean).join(", "),k=null==T?void 0:T.id,F=!0===p.isLivestreamConcert||!0===p.isLivestreamFestival,$=p.isFestival||p.isLivestreamFestival;let P;if(l>1){const t=e.liveEvents.edges[l-1].node;if(t){const e=new Date(t.startDate);P=v.formatConcertLocation({startDate:L,endDate:e,venue:E,cityName:A||"",numberOfEvents:l,isLiveStream:F})}}else P=v.formatConcertLocation({startDate:L,venue:E,cityName:A||"",isLiveStream:F});const B=`/concert/${b}`,W=()=>{(0,h.uV)({screen_view_name:h.Xw.CONCERT_HUB_FOR_YOU,screen_view_id_type:h.v5.CITY,screen_view_id:n||"around_me",action:h.rc.CLICK_CONCERT,item_type:(0,h.U$)(p),item_id:b,concert_ranking:t}),l>1&&o(!0)};return a.createElement(a.Fragment,null,0===t?a.createElement(z,{artistId:k,url:l>1?"":B,onClick:W,name:$?y:O,location:P||"",startDate:L,cover:R}):a.createElement(S,{artistId:k,url:l>1?"":B,name:$?y:O,startDate:L,location:P||"",isLiveStream:F,cover:R,onClick:W,isNotified:C,toggleNotification:async()=>{if(C)return(0,M.A)({body:(0,s.AP)("livestreammodule_action_cancelreminder_web")}),d({optimisticResponse:{__typename:"Mutation",unsubscribeToLiveEventNotification:{__typename:"LiveEventMutationUnsubscribeToNotificationOutput",status:!1,liveEvent:{__typename:"LiveEvent",id:b,hasSubscribedToNotification:!1}}},variables:{eventId:b}});(0,h.uV)({screen_view_name:h.Xw.CONCERT_HUB_FOR_YOU,screen_view_id_type:h.v5.CITY,screen_view_id:n||"around_me",action:h.rc.REMINDER,item_type:(0,h.U$)(p),item_id:b,concert_ranking:t}),await c({optimisticResponse:{__typename:"Mutation",subscribeToLiveEventNotification:{__typename:"LiveEventMutationSubscribeToNotificationOutput",status:!0,liveEvent:{__typename:"LiveEvent",id:b,hasSubscribedToNotification:!0}}},variables:{eventId:b}}),(0,M.A)({body:(0,s.AP)("livestreammodule_action_setreminder_web")})},hideCalendar:l>1}),l>1&&a.createElement(ee,{isModalOpen:r,closeModal:()=>o(!1),concerts:e.liveEvents.edges,name:$?y:O,cover:R,isLiveStream:F,dateFormatter:ne(m)}))};var ae=n("3ns7"),le=n("MgyK"),re=n("XiLM"),oe=n("Ti9p"),se=n("9vg6"),ce=n("7yJB"),de=n("zgkh"),ue=n("yJYf"),me=n("kSUS"),ve=n("Z9kq"),_e=n("ZDlI"),he=n("RGaU"),ge=n("lI2z"),fe=n("eTJY");const Ee=(0,n("Al8Q").A)(K.ck,{target:"e1mrnejz0"})({name:"ohw6c9",styles:"border-radius:var(--tempo-space-1);padding:0 var(--tempo-space-2);&:hover{cursor:pointer;background-color:var(--tempo-colors-background-accent-on-light-default);}"});var pe;const Ce=(0,a.memo)((({index:e,name:t,countryCode:n,longitude:i,latitude:l,selection:r,onClick:o})=>a.createElement(Ee,{key:e,onClick:()=>o({name:t,countryCode:n,longitude:i,latitude:l})},a.createElement(c.s,{justifyContent:"space-between",alignItems:"center"},a.createElement("div",null,a.createElement(u.E,{fontSize:"md",noOfLines:1},t),a.createElement(u.E,{fontSize:"sm",color:"text.neutral.secondary.default",noOfLines:1},n)),a.createElement("div",null,(null==r?void 0:r.longitude)===i&&(null==r?void 0:r.latitude)===l&&(pe||(pe=a.createElement(fe.S,{boxSize:"6",color:"icon.accent.primary.default"}))))))));var ye;const Ae=({hasValue:e,isSearching:t,hasResults:n,inputText:i,results:l,onClick:r,selection:o})=>e?t?ye||(ye=a.createElement(c.s,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center"},a.createElement(he.k,null))):n?a.createElement(K.B8,{spacing:3},l.map((({name:e,countryCode:t,longitude:n,latitude:i},l)=>a.createElement(Ce,{key:`${l}_${e}`,selection:o,index:l,name:e,countryCode:t,longitude:n,latitude:i,onClick:r})))):a.createElement(ge.A,{value:i}):null,we=({value:e,options:t,onChange:n,onSearch:i,onClose:l,loading:r,isClosed:o})=>{var c;const[d,u]=(0,a.useState)(""),[m,v]=(0,a.useState)(e||void 0),[_,h]=(0,a.useState)(!1),g=(0,a.useRef)((0,me.A)((e=>{(null==e?void 0:e.length)>1&&i(e),h(!1)}),400)).current;(0,a.useEffect)((()=>{o&&E()}),[o]),(0,a.useEffect)((()=>()=>g.cancel()),[g]);const E=()=>{u("")},p=null==t||null===(c=t.map((({name:e})=>e)))||void 0===c?void 0:c.filter((e=>e.toLowerCase().includes(d.toLowerCase()))),b=Boolean(d),C=(null==p?void 0:p.length)>0,y=r||_,A=null==t?void 0:t.filter((({name:e})=>p.includes(e)));return a.createElement(a.Fragment,null,a.createElement(ve.D,{placeholder:(0,s.AP)("searchfielddescription_text_enteracity_web"),onChange:({target:{value:e}})=>{h(!0),(e=>{u(e)})(e),g(e)},value:d,"data-testid":"input_city"}),a.createElement(_e.m,{paddingY:"4",paddingX:"0",height:"362px",overflowY:"auto"},a.createElement(Ae,{hasResults:C,hasValue:b,isSearching:y,results:d?A:[],inputText:d,onClick:({name:e,countryCode:t,longitude:i,latitude:a})=>{u(e),v({longitude:i,latitude:a}),n({name:e,countryCode:t,longitude:i,latitude:a}),l()},selection:m})))};var Te;const Le=({location:e,changeLocation:t})=>{var n;const[i,l]=(0,a.useState)(!0),[r,{data:o,loading:c}]=(0,_.N6A)(),m=null==o||null===(n=o.search)||void 0===n||null===(n=n.results)||void 0===n||null===(n=n.cities)||void 0===n||null===(n=n.edges)||void 0===n?void 0:n.map((({node:e})=>{var t,n;return{countryCode:null==e?void 0:e.countryCode,longitude:null==e||null===(t=e.coordinates)||void 0===t?void 0:t.longitude,latitude:null==e||null===(n=e.coordinates)||void 0===n?void 0:n.latitude,name:null==e?void 0:e.name}})),v=e&&m?m.find((({latitude:t,longitude:n})=>e.latitude===t&&e.longitude===n)):void 0,[h,g]=(0,a.useState)(v||e),f=(0,a.useCallback)((async e=>{await r({variables:{city:e},fetchPolicy:"cache-and-network"})}),[r]);return a.createElement(re.A,{placement:"bottom-start",onOpen:()=>l(!1),onClose:()=>l(!0)},(({onClose:e})=>a.createElement(a.Fragment,null,a.createElement(oe.W,null,a.createElement(le.v,{isMultiSelect:!0,isActive:!0,"data-testid":"location_filter"},a.createElement(u.E,{color:"text.neutral.primary.default"},null!=h&&h.name?h.name:(0,s.AP)("concerthub_action_aroundyou_web")))),a.createElement(se.h,{borderRadius:"2xl",width:"375px"},Te||(Te=a.createElement(ce.R,null)),a.createElement(de.D,{display:"flex",justifyContent:"space-between",alignItems:"center"},a.createElement(d.D,{variant:"heading.s"},(0,s.AP)("generic_title_city_web")),a.createElement(P.$n,{"data-testid":"city-selector-reset-button",onClick:()=>(e=>{t(null),g(null),e()})(e),variant:"outline",size:"small",isDisabled:!h},(0,s.AP)("generic_action_reset_web"))),a.createElement(ue.e,{paddingX:2},a.createElement(we,{value:h,onClose:e,isClosed:i,options:m,onChange:e=>(g(e),t(e)),onSearch:f,loading:c}))))))},Re=({children:e})=>a.createElement(g.a,{className:"container",pb:0},e),Ie=({location:e,changeLocation:t,activeChipAllConcert:n,setActiveChipAllConcert:i})=>a.createElement("div",{"data-testid":"masthead-concerts"},a.createElement(Re,null,a.createElement(d.D,{mb:"spacing.xl",as:"h1",fontSize:"6xl","data-testid":"masthead-title",noOfLines:2},(0,s.AP)("generic_title_concerts_web")),a.createElement(Le,{location:e,changeLocation:t}),a.createElement(le.v,{mx:"spacing.s",isActive:!n,onClick:()=>{i(!1)},"data-testid":"concert-filter-for-you"},(0,s.AP)("generic_title_foryou_web")),a.createElement(le.v,{"data-testid":"concert-filter-all-concert",isActive:n,onClick:()=>{i(!0)}},(0,s.AP)("concerthub_action_allconcerts_web"))));var Se,De=n("5nwK"),Me=n("arV3"),xe=n("OxTW");const Ne=()=>a.createElement(a.Fragment,null,a.createElement("div",{className:"container"},a.createElement("div",{className:"thumbnail-grid thumbnail-grid-responsive"},[...Array(20).keys()].map((e=>a.createElement("div",{key:e,className:"thumbnail-col"},Se||(Se=a.createElement(De.E,{className:"picture-img"},a.createElement(Me.E,{height:"inherit",mb:"-10px",mt:"5"}),a.createElement(xe.r,{mt:"4",noOfLines:2,spacing:"2"})))))))));var Oe;const ke=()=>{var e,t,n,i,o;const[s,c]=(0,a.useState)(l.default.get("concert_hub_location")),[d,u]=(0,a.useState)(!1),v={latitude:null==s?void 0:s.latitude,longitude:null==s?void 0:s.longitude,first:20,after:null,order:_.KuJ.RECOMMENDED,excludeOrigins:[_.rqF.FALLBACK]};d&&(v.excludeOrigins=[],v.order=_.KuJ.CONCERT_DATE);const{data:g,loading:f,error:E,fetchMore:p}=(0,_.p9C)({fetchPolicy:"cache-and-network",variables:v}),b=(0,a.useCallback)((()=>{var e;return p({variables:{...v,after:null==g||null===(e=g.liveEventsRecommendedClusters)||void 0===e||null===(e=e.pageInfo)||void 0===e?void 0:e.endCursor},updateQuery:(e,{fetchMoreResult:t})=>{var n,i,a,l,r;return t?{...t,liveEventsRecommendedClusters:{...t.liveEventsRecommendedClusters,edges:[...null!==(n=null===(i=e.liveEventsRecommendedClusters)||void 0===i?void 0:i.edges)&&void 0!==n?n:[],...null!==(a=null===(l=t.liveEventsRecommendedClusters)||void 0===l?void 0:l.edges)&&void 0!==a?a:[]],pageInfo:null===(r=t.liveEventsRecommendedClusters)||void 0===r?void 0:r.pageInfo}}:e}})}),[s,g,p,d]),C=(0,a.useCallback)((e=>(l.default.set("concert_hub_location",e),c(e),(0,h.uV)({screen_view_name:h.Xw.CONCERT_HUB_FOR_YOU,screen_view_id_type:h.v5.CITY,screen_view_id:(null==e?void 0:e.name)||"around_me",action:h.rc.SEARCH,item_type:h.SP.CONCERT,item_id:(null==e?void 0:e.name)||"around_me"}))),[]);if(E)throw E;const y=null==g||null===(e=g.liveEventsRecommendedClusters)||void 0===e||null===(e=e.edges.filter(Boolean))||void 0===e?void 0:e.filter((({node:e})=>e)),A=null==g||null===(t=g.liveEventsRecommendedClusters)||void 0===t||null===(t=t.pageInfo)||void 0===t?void 0:t.hasNextPage,w=!(null!=y&&y.length)&&!A||s&&(null==g||null===(n=g.liveEventsRecommendedClusters)||void 0===n?void 0:n.edges)&&0===(null==g||null===(i=g.liveEventsRecommendedClusters)||void 0===i||null===(i=i.edges)||void 0===i?void 0:i.length)&&!(null!=g&&null!==(o=g.liveEventsRecommendedClusters)&&void 0!==o&&null!==(o=o.edges)&&void 0!==o&&null!==(o=o[0])&&void 0!==o&&null!==(o=o.node)&&void 0!==o&&null!==(o=o.liveEvents.edges)&&void 0!==o&&null!==(o=o[0])&&void 0!==o&&null!==(o=o.node)&&void 0!==o&&o.id);return a.createElement(a.Fragment,null,a.createElement(Ie,{changeLocation:C,location:s,activeChipAllConcert:d,setActiveChipAllConcert:u}),f&&(Oe||(Oe=a.createElement(Ne,null))),!f&&w?a.createElement(m,{isForMe:!d}):a.createElement("div",{className:"container"},a.createElement(r.A,{hasMore:A,loadMore:b},a.createElement(ae.kK,{gap:"spacing.s"},null==y?void 0:y.map((({node:e},t)=>e&&a.createElement(ie,{concert:e,index:t,key:`${e.liveEvents.edges[0].cursor}`,locationName:null==s?void 0:s.name})))))))}},aEwM:(e,t,n)=>{n.d(t,{A:()=>s});var i,a=n("q1tI"),l=n("KVgY"),r=n("RGaU"),o=n("5xmB");const s=({placeholder:e,hasMore:t,loadMore:n,children:s})=>s?"function"==typeof n?a.createElement(l.A,{hasMore:t,loadMore:n,loader:i||(i=a.createElement(r.k,{key:"loader"}))},s):a.createElement(a.Fragment,null,s):a.createElement(o.A,e)},ailv:(e,t,n)=>{n.d(t,{SP:()=>a,U$:()=>c,Xw:()=>r,rc:()=>l,uV:()=>s,v5:()=>o});var i=n("LOQS");let a=function(e){return e.CONCERT="concert",e.CONCERT_WITH_LIVESTREAM="concert_with_livestream",e.FESTIVAL="festival",e.FESTIVAL_WITH_LIVESTREAM="festival_with_livestream",e}({}),l=function(e){return e.CLICK_CONCERT="click_concert",e.BUY_TICKET="buy_ticket",e.SEARCH="search",e.REMINDER="put_concert_reminder",e}({}),r=function(e){return e.CONCERT_HUB_FOR_YOU="concert_hub_for_you",e.CONCERT_DETAIL="concert_detail",e.ARTIST="artist",e.VIEW_ALL="view_all_concerts",e.ALBUM="album",e}({}),o=function(e){return e.CITY="city",e.CONCERT="concert",e.ARTIST="artist",e.ALBUM="album",e}({});const s=e=>{i.A.log({type:"cdp",eventName:"concert_hub_used",customAttributes:e})},c=e=>null!=e&&e.isConcert?a.CONCERT:null!=e&&e.isFestival?a.FESTIVAL:null!=e&&e.isLivestreamConcert?a.CONCERT_WITH_LIVESTREAM:null!=e&&e.isLivestreamFestival?a.FESTIVAL_WITH_LIVESTREAM:void 0},cfsa:(e,t,n)=>{n.d(t,{A:()=>i});const i={element:"ZzbWE"}},esNd:(e,t,n)=>{n.d(t,{$g:()=>o,rL:()=>c,v6:()=>r}),n("W8Tb");var i=n("Wp0Y"),a=n("5G9X");const l=12;function r(e,t=!1){const n=null==e?void 0:e.map((e=>{var n;return null==e||null===(n=e.node)||void 0===n||null===(n=n.albums)||void 0===n||null===(n=n.edges)||void 0===n?void 0:n.map((n=>{var a,l,r,o,s,c;if(null!=n&&n.node)return{ART_ID:null==e||null===(a=e.node)||void 0===a?void 0:a.id,ART_NAME:t?"":null==e||null===(l=e.node)||void 0===l?void 0:l.name,ALB_ID:n.node.id,ALB_TITLE:n.node.displayTitle,ALB_DATE:n.node.releaseDate,MD5_ORIGIN:null===(r=n.node.cover)||void 0===r?void 0:r.id,ALB_PICTURE:null===(o=n.node.cover)||void 0===o?void 0:o.md5,__TYPE__:"album",target:`/album/${n.node.id}`,layout_parameters:{cta:{label:(0,i.AP)("Écouter"),type:"play"},override:{pictures:[{type:"cover",md5:null===(s=n.node.cover)||void 0===s?void 0:s.md5}],subtitle:null==e||null===(c=e.node)||void 0===c?void 0:c.name,title:n.node.displayTitle}}}})).filter(Boolean)}));return[].concat(...n).sort(((e,t)=>e.ALB_DATE>t.ALB_DATE?-1:e.ALB_DATE<t.ALB_DATE?1:0)).slice(0,l)}function o(e){return null==e?void 0:e.map((e=>{var t,n,i,l;return{ART_ID:null==e||null===(t=e.node)||void 0===t?void 0:t.id,ART_NAME:null==e||null===(n=e.node)||void 0===n?void 0:n.name,ROLE:s(e),ART_PICTURE:null==e||null===(i=e.node)||void 0===i||null===(i=i.picture)||void 0===i?void 0:i.md5,__TYPE__:a.Ay.ArtistLineUp,type:a.Ay.ArtistLineUp,layout_parameters:{override:{pictures:[{type:"artist",md5:null==e||null===(l=e.node)||void 0===l||null===(l=l.picture)||void 0===l?void 0:l.md5}]}}}})).filter(Boolean).slice(0,l)}function s(e){var t;if(null!=e&&null!==(t=e.concertContributorMetadata)&&void 0!==t&&null!==(t=t.roles)&&void 0!==t&&t.isMain)return e.concertContributorMetadata.roles.isMain?(0,i.AP)("eventpage_title_headliner_web"):(0,i.AP)("eventpage_title_openingact_web")}function c(e,t){if(!e)return[];const n=[...e].sort(((e,t)=>e.node&&t.node?t.node.fansCount-e.node.fansCount:0)).sort(((e,t)=>e.node&&t.node?e.node.isFavorite===t.node.isFavorite?0:e.node.isFavorite?-1:1:0)).sort(((e,t)=>{var n,i,a;return e.node&&t.node?(null===(n=e.concertContributorMetadata)||void 0===n?void 0:n.roles.isMain)===(null===(i=t.concertContributorMetadata)||void 0===i?void 0:i.roles.isMain)?0:null!==(a=e.concertContributorMetadata)&&void 0!==a&&a.roles.isMain?-1:1:0}));if(t){const e=n.findIndex((({node:e})=>(null==e?void 0:e.id)===t));if(e>=0){const t=n[e];n.splice(e,1),n.unshift(t)}}return n}},lI2z:(e,t,n)=>{n.d(t,{A:()=>c});var i,a=n("q1tI"),l=n("w/ZN"),r=n("Wp0Y"),o=n("CdHq"),s=n("y7xR");const c=({value:e})=>a.createElement(o.s,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center"},i||(i=a.createElement(l.i,{mb:"spacing.l",color:"icon.neutral.secondary.default",boxSize:"12",scale:"3"})),a.createElement(s.D,{as:"p",fontSize:"lg",fontWeight:"semibold",pb:"spacing.m"},(0,r.AP)("emptystate_title_noresultsforXsearchterm_web",{sprintf:[e]})))}}]);