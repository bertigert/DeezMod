"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[3212],{"+cwK":(e,t,a)=>{a.r(t),a.d(t,{ValidatePage:()=>D,default:()=>M}),a("/eM8"),a("gS5K");var n=a("q1tI"),i=a("Ty5D"),r=a("X6oL"),o=a("Wp0Y"),s=a("iooo"),l=a("FSqQ"),c=a("oqWs"),d=a("Cl2C"),m=a("Rm4k"),p=a("y+AQ"),u=a("BUPU"),g=a("5pmF"),h=a("r2ys"),b=a("Zah6"),E=a("E6Gc"),f=a("TDRX"),_=a("HmE0"),v=a("RYij");const y=({partner:e,registerHref:t,loginHref:a,origin:i})=>{let r="";const s=(0,o.AP)("uajlogin_text_signuporloginwithplanX_web",{sprintf:[(0,o.AP)("deezerplans_title_deezerfree_web")]}),l="activation-link-partner"===i;r=l?"Ton offre Deezer est prête à être activée !":"Connecte-toi pour finaliser l'activation";const c=l?2:4,d=l?1:3,m=l?[{headline:"Link a free account to your offer",subline:"by sign up or log in to Deezer",icon:{component:"HumanCircleIcon",color:"icon.neutral.primary.default",size:"medium"}},{headline:"Your offer is activated!",subline:"Download Deezer app to start listening music",icon:{component:"DeezerLogoIcon",color:"icon.neutral.primary.default",size:"medium"}}]:void 0,p=l?"2 steps to activate your offer":void 0;return n.createElement(v.A,{heading:r,subheading:s,partner:e,steps:[],currentStep:d,progressLabel:"Link a free account to your offer",bannerTitle:"Verify your account status",bannerText:"You have to use a freemium account to activate your offer.",totalStepsOverride:c,stepperStepsOverride:m,stepperHeadingOverride:p,hideStepper:!l},n.createElement(f.a,{display:"flex",flexDirection:{base:"column",md:"row"},gap:"spacing.s",width:{base:"100%",md:"auto"}},n.createElement(_.$n,{as:"a",width:{base:"100%",md:"fit-content"},href:t,"data-testid":"activate-validate-create-account"},(0,o.AP)("S'inscrire")),n.createElement(_.$n,{as:"a",width:{base:"100%",md:"fit-content"},variant:"outline",href:a,"data-testid":"activate-validate-log-in"},(0,o.AP)("Connexion"))))};var x,k,A,S,w,C,I,P,N=a("hXd+"),L=(a("gkSg"),a("6XPn")),T=a("D0rv"),R=a("yiM3"),z=a("fyOZ");let D=(0,r.Ay)(({match:e})=>({partner_name:e.params.slug}),{dispatchOnMount:!0})(x=class extends n.Component{constructor(e){super(e),this.slug=void 0,this.token=void 0,this.api=void 0,this.repository=void 0,this.slug=this.props.match.params.slug,this.token=this.props.location.query.token,this.api=new T.A,this.repository=new L.A(this.api),this.state={partner:void 0,error:void 0,isFetching:!1}}async componentDidMount(){try{this._handleFetchStart();const e=await this.repository.findOneBySlug(this.slug);this._handlePartner(e),await this.repository.validateActivationLink(this.token,e.legacyId)}catch(e){this._handleError(e)}finally{this._handleFetchEnd()}}buildActivationUrl(e){if(!this.state.partner)return"/404";const t=new URLSearchParams(this.props.location.search),a=(0,N.z)(this.props.location)?"&version=2":"",n=t.get("origin"),i=n?`&origin=${encodeURIComponent(n)}`:"";return(0,R.t)({route:e,query:{partner:this.state.partner.id,template:"activation_journey"},redirect:`/activate/${this.slug}/link?token=${this.token}${a}${i}`})}render(){const{partner:e,error:t,isFetching:a}=this.state;return t?null:a?k||(k=n.createElement(l.A,null)):e?(0,N.z)(this.props.location)?n.createElement(n.Fragment,null,A||(A=n.createElement(E.sA,null)),n.createElement(y,{partner:e,registerHref:this.buildActivationUrl("register"),loginHref:this.buildActivationUrl("login"),origin:new URLSearchParams(this.props.location.search).get("origin")}),S||(S=n.createElement(z.A,null))):n.createElement("div",{id:"activate__validate"},w||(w=n.createElement(E.Qr,null)),n.createElement(c.A,null,n.createElement(d.A,{partner:e}),n.createElement(m.A,null,(0,o.AP)("uajlogin_title_laststeptoactivateoffer_web")),n.createElement(p.A,null,(0,o.AP)("uajlogin_text_signuporloginwithplanX_web",{sprintf:[(0,o.AP)("deezerplans_title_deezerfree_web")]})),n.createElement(u.A,{as:"a",href:this.buildActivationUrl("register"),"data-testid":"activate-validate-create-account",marginTop:24},(0,o.AP)("S'inscrire")),n.createElement(u.A,{as:"a",href:this.buildActivationUrl("login"),variant:"outline","data-testid":"activate-validate-log-in",reversed:!0,marginTop:6},(0,o.AP)("Connexion"))),C||(C=n.createElement(g.A,null)),I||(I=n.createElement(h.A,null)),P||(P=n.createElement(b.A,null))):null}_handleFetchStart(){this.setState({isFetching:!0})}_handleFetchEnd(){this.setState({isFetching:!1})}_handlePartner(e){this.setState({partner:e})}_handleError(e){var t,a;this.setState({error:e});const n=null===(t=this.state.partner)||void 0===t?void 0:t.activationLink,i=null===(a=this.state.partner)||void 0===a?void 0:a.brandName,r=(0,N.z)(this.props.location)?"&version=2":"";this.props.history.push((0,s.jd)(`/activate/error?error=${e.name}&activationLink=${n}&partnerName=${i}${r}`))}})||x;const M=(0,i.y)(D)},"0hVS":(e,t,a)=>{a.r(t),a.d(t,{default:()=>ke}),a("/eM8");var n,i=a("q1tI"),r=a("Wp0Y"),o=a("X6oL"),s=a("TRpf"),l=a("QVzS"),c=a("iooo"),d=a("2qhg"),m=a("yiM3"),p=a("bDF2");class u extends i.PureComponent{render(){return i.createElement(i.Fragment,null,n||(n=i.createElement("div",{className:"burger-icon",id:"burger_menu_button"},i.createElement("span",{className:"line"}),i.createElement("span",{className:"line"}),i.createElement("span",{className:"line"}))),i.createElement("div",{className:"burger-menu burger-menu-hidden",id:"burger_menu"},i.createElement("div",null,i.createElement("div",{className:"nav-collapse",id:"backstage_navigation_collapse"},i.createElement("ul",{className:"nav"},this._renderMenuContent())))))}_renderMenuContent(){return 0!==d.default.current()?i.createElement(i.Fragment,null,i.createElement("li",{className:"nav-item"},i.createElement("a",{href:"/open_app",className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("download-app","menu")},(0,r.AP)("Lancer Deezer"))),this._renderManageMySubscription(),this._renderMenuDefaultItems(),i.createElement("li",{className:"nav-item"},i.createElement("a",{role:"button",className:"nav-main-link backstage-header-link",onClick:()=>d.default.logout()},(0,r.AP)("Déconnexion")))):i.createElement(i.Fragment,null,i.createElement("li",{className:"nav-item"},i.createElement("a",{href:(0,m.t)({route:"login"}),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("login-button")},(0,r.AP)("Connexion"))),i.createElement("li",{className:"nav-item"},i.createElement("a",{href:(0,m.t)({route:"register"}),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("signup-button")},(0,r.AP)("Inscription"))),this._renderMenuDefaultItems())}_renderManageMySubscription(){if(0!==d.default.getOfferId())return i.createElement("li",{className:"nav-item"},i.createElement("a",{href:(0,c.jd)("/payment/go.php?subscription=1"),className:"nav-main-link backstage-head er-link",onClick:()=>this._trackElementClick("manage-subscription-button","menu")},(0,r.AP)("Gérer mon abonnement")))}_renderMenuDefaultItems(){return i.createElement(i.Fragment,null,i.createElement("li",{className:"nav-item"},i.createElement("a",{href:this._getOpenAppUrl(),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("download-app","menu")},(0,r.AP)("Télécharger l'application"))),i.createElement("li",{className:"nav-item"},i.createElement("a",{href:(0,c.jd)("/offers"),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("plans-button")},(0,r.AP)("Offres"))),i.createElement("li",{className:"nav-item"},i.createElement("a",{href:(0,c.jd)("/channels/explore"),className:"nav-main-link backstage-header-link",onClick:()=>this._trackElementClick("channels-explore-button")},(0,r.AP)("Explorer tous nos Univers"))))}_getOpenAppUrl(){const e=(0,c.Uv)(location.href),t=Object.entries(e).filter(([e])=>0===e.indexOf("utm")).map(([e,t])=>`${e}=${t}`).join("&");return"/open_app?page=home&source=MF_MenuDownloadApp"+(t.length?`&${t}`:"")}_trackElementClick(e,t=""){const a=(0,p.bg)();a&&(0,p.R2)({eventcategory:a,eventaction:e,eventlabel:t})}}const g=u;var h,b,E=a("xobL"),f=a("TDRX"),_=a("CdHq"),v=a("ej6z"),y=a("LSdk"),x=a("HmE0"),k=a("eOc8");let A=(0,o.Ay)({eventcategory:"header"})(h=class extends i.PureComponent{constructor(e){super(e),l.A.init()}render(){return i.createElement(f.a,{width:"100%",height:{base:"60px",md:"80px"},bg:"background.neutral.primary.default",boxShadow:"0 3px 0 0 rgba(0, 0, 0, .06)",position:"fixed",top:0,zIndex:2e3},i.createElement(_.s,{height:"100%",alignItems:"center",paddingX:{base:"spacing.xl",md:"122px"},justifyContent:{base:"flex-start",md:"space-between"}},i.createElement(f.a,null,i.createElement(v.N,{href:"/"},i.createElement(y.T,{height:{base:8,md:10}}))),i.createElement(_.s,{width:"100%",paddingRight:"spacing.xl",justifyContent:"flex-end",className:"hidden-phone"},i.createElement(f.a,{display:{base:"none",md:"flex"}},i.createElement(f.a,{marginX:"spacing.xl",fontSize:"large",fontWeight:"bold"},i.createElement(v.N,{href:(0,c.jd)("/download/?direct_dl&utm_source=device&utm_campaign=mkg-desktop_app&utm_medium=player-obj_download&utm_content=feature-desktop_app"),onClick:this.props.tracking?this._onTrackingClick.bind(this,"download-button"):null,_hover:{color:"text.accent.primary.hovered"},_focus:{color:"text.accent.primary.pressed"}},(0,r.AP)("Télécharger"))),i.createElement(f.a,{marginX:"spacing.xl",fontSize:"large",fontWeight:"bold"},i.createElement(v.N,{href:(0,c.jd)("/offers"),onClick:this.props.tracking?this._onTrackingClick.bind(this,"plans-button"):null,_hover:{color:"text.accent.primary.hovered"},_focus:{color:"text.accent.primary.pressed"}},(0,r.AP)("Offres"))))),this._renderUnloggedButtons()),b||(b=i.createElement(g,null)))}_renderUnloggedButtons(){return this.props.userConnected?this.props.isFreemiumCountry||!this.props.isFreemiumCountry&&this.props.isPremiumUser?i.createElement("div",{className:"cell cell-profile hidden-phone"},i.createElement(x.$n,{as:"a",boxSizing:"border-box",id:"topbar-player-button",href:"/",variant:"outline",size:"md"},(0,r.AP)("Ouvrir le player"))):null:i.createElement(f.a,{className:"cell cell-profile hidden-phone"},i.createElement(k.B,{direction:"row",spacing:2},i.createElement(x.$n,{as:"a",boxSizing:"border-box",id:"topbar-login-button",href:(0,m.t)({route:"login",comeback:!0}),variant:"outline",size:"medium",onClick:this.props.tracking?this._onTrackingClick.bind(this,"login-button"):null},(0,r.AP)("Connexion")),i.createElement(x.$n,{as:"a",boxSizing:"border-box",id:"topbar-register-button",href:(0,m.t)({route:"register",comeback:!0}),size:"medium",onClick:this.props.tracking?this._onTrackingClick.bind(this,"signup-button"):null},(0,r.AP)("Inscription"))))}_onTrackingClick(e){this.props.tracking.trackEvent({event:"click",eventaction:e})}})||h;const S=(0,s.Ng)(({user:e})=>({userConnected:(0,E.UJ)(e),isFreemiumCountry:(0,E.zC)(e),isPremiumUser:(0,E.ki)(e)}))(A);var w=a("+9dH"),C=a("siwx");a.p,a.p,a.p;var I,P,N=a("Rm4k"),L=a("E6Gc"),T=a("y+AQ"),R=a("VkUI"),z=a("MaGs"),D=a("pVdW"),M=a("6vqc");const H=({partner:e,index:t,...a})=>{const n=(0,o.z1)(),{colorMode:r}=(0,z.G6)(),s="dark"===r?e.PARTNER_LOGO_THEME_DARK:e.PARTNER_LOGO_THEME_LIGHT,l=e.partnerLogos[s]?s:e.PARTNER_LOGO_THEME_LIGHT;if(/sync/.test(e.activationLink))return i.createElement(f.a,{gap:3,display:"flex",cursor:"pointer",alignItems:"center",onClick:()=>{n.trackEvent({event:"click",eventlabel:e.activationLink.split("/")[2],eventaction:"choose-partner",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]}),(e=>{R.default.open(`/${e}`)})(e.activationLink)},"data-testid":`activate-partnerlist-partner-${t}`},i.createElement(C._,{maxHeight:8,alt:e.brandName,src:e.partnerLogos[l][e.PARTNER_LOGO_DEFAULT_SIZE]}),i.createElement(D.E,{fontSize:"base",fontWeight:"600"},e.brandName),I||(I=i.createElement(M.v,null)));const d=(0,c.jd)(e.activationLink);return i.createElement(v.N,(0,w.A)({gap:3,display:"flex",cursor:"pointer",alignItems:"center",onClick:()=>{n.trackEvent({event:"click",eventlabel:e.activationLink.split("/")[2],eventaction:"choose-partner",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]})},href:d,"data-testid":`activate-partnerlist-partner-${t}`},a),i.createElement(C._,{maxHeight:8,display:"flex",cursor:"pointer",alignItems:"center",alt:e.brandName,src:e.partnerLogos[l][e.PARTNER_LOGO_DEFAULT_SIZE]}),i.createElement(D.E,{fontSize:"base",fontWeight:"600"},e.brandName),P||(P=i.createElement(M.v,null)))},F=({partners:e})=>i.createElement(f.a,{display:"flex",flexDirection:"column",paddingLeft:{base:6,md:8}},e.map((e,t)=>i.createElement(f.a,{marginTop:0!==t?8:0,key:t},i.createElement(H,{index:t,key:e.id,partner:e}))));a("x9/P"),a("RhP2"),a("quyQ"),a("mbHV"),a("ssO+");var B=a("2Av+"),O=a("HrDX"),j=a("QJeV"),U=a("/b/U");a("nrKQ"),a("z+LD"),a("Q8Ug"),a("Vd8Q"),B.i,O.o,j.V,U.u;var G,W,X=a("FSqQ");class $ extends i.Component{render(){return i.createElement("div",{className:"modal",id:"modal",role:"dialog","aria-hidden":"true",style:{display:"none"}},G||(G=i.createElement("div",{className:"modal-backdrop"})),W||(W=i.createElement("div",{className:"modal-wrapper"})))}}const V=$;var Y=a("5pmF"),K=a("r2ys"),q=a("Zah6");const Z=({children:e,minHeight:t="540px",...a})=>i.createElement(f.a,(0,w.A)({backgroundColor:"background.neutral.primary.default",minHeight:t,position:"relative"},a),i.createElement(_.s,{direction:{base:"column",md:"row"},justifyContent:"center",alignItems:"center",paddingY:{base:"48px",lg:"64px"},paddingX:{base:"20px",md:"15px"},boxSizing:"border-box",margin:"0 auto",position:"relative",zIndex:"2",width:{base:"100%",md:"580px",lg:"850px",xl:"1070px"}},i.createElement(f.a,{margin:{base:"unset",md:"0 auto"}},e)));var Q=a("y7xR");const J=({children:e,...t})=>i.createElement(Q.D,(0,w.A)({"data-testid":"activate-common-heading",fontSize:{base:"4xl",md:"6xl"},fontWeight:"bold",marginBottom:12},t),e),ee=({children:e,...t})=>i.createElement(D.E,(0,w.A)({"data-testid":"activate-common-paragraph"},t),e);var te,ae;const ne=({partner:e,index:t,...a})=>{const n=(0,o.z1)(),{colorMode:r}=(0,z.G6)(),s="dark"===r?e.PARTNER_LOGO_THEME_DARK:e.PARTNER_LOGO_THEME_LIGHT,l=e.partnerLogos[s]?s:e.PARTNER_LOGO_THEME_LIGHT;if(/sync/.test(e.activationLink))return i.createElement(f.a,{width:"362px",height:"64px",borderRadius:"xs",padding:"8px",bg:"background.neutral.secondary.default",display:"flex",justifyContent:"space-between",cursor:"pointer",alignItems:"center",onClick:()=>{n.trackEvent({event:"click",eventlabel:e.activationLink.split("/")[2],eventaction:"choose-partner",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]}),(e=>{R.default.open(`/${e}`)})(e.activationLink)},"data-testid":`activate-partnerlist-partner-${t}`},i.createElement(f.a,{display:"flex",gap:3,alignItems:"center"},i.createElement(C._,{maxHeight:8,alt:e.brandName,src:e.partnerLogos[l][e.PARTNER_LOGO_DEFAULT_SIZE]}),i.createElement(D.E,{fontSize:"base",fontWeight:"600"},e.brandName)),te||(te=i.createElement(M.v,null)));const d=(0,c.jd)(e.activationLink);return i.createElement(v.N,(0,w.A)({width:"362px",height:"64px",borderRadius:"xs",paddingY:"8px",paddingLeft:"8px",paddingRight:"16px",bg:"background.neutral.secondary.default",display:"flex",justifyContent:"space-between",cursor:"pointer",alignItems:"center",textDecoration:"none",_hover:{textDecoration:"none"},onClick:()=>{n.trackEvent({event:"click",eventlabel:e.activationLink.split("/")[2],eventaction:"choose-partner",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]})},href:d,"data-testid":`activate-partnerlist-partner-${t}`},a),i.createElement(f.a,{display:"flex",gap:3,alignItems:"center"},i.createElement(f.a,{display:"flex",width:"80px",height:"48px",paddingY:"4px",paddingX:"8px",justifyContent:"center",alignItems:"center",borderRadius:"xs",bg:"background.neutral.primary.default"},i.createElement(C._,{maxHeight:8,alt:e.brandName,src:e.partnerLogos[l][e.PARTNER_LOGO_DEFAULT_SIZE]})),i.createElement(D.E,{fontSize:"base",fontWeight:"600"},e.brandName)),ae||(ae=i.createElement(M.v,null)))},ie=({partners:e})=>i.createElement(f.a,{display:"flex",flexDirection:"column",gap:"spacing.l"},e.map((e,t)=>i.createElement(ne,{index:t,key:e.id,partner:e})));var re,oe=a("g2yj");const se=()=>i.createElement(i.Fragment,null,i.createElement(f.a,{bg:"background.neutral.secondary.default",textAlign:"center",width:"100%",height:"176px",marginTop:{base:"60px",md:"80px"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"8px",position:"relative"},i.createElement(Q.D,{textAlign:"center",color:"text.neutral.primary.default",variant:{base:"heading.l",md:"heading.xl"}},(0,r.AP)("uaj_title_selectyourpartner_web")),i.createElement(Q.D,{mt:"spacing.s",variant:"heading.s",textAlign:"center",color:"text.neutral.secondary.default"},(0,r.AP)("uaj_subtitle_selectyourpartner_web")),i.createElement(f.a,{position:"absolute",bottom:{base:"-8px",md:"-16px"},left:"0",width:"100%",zIndex:"1",color:"background.neutral.primary.default"},re||(re=i.createElement(oe.A,null)))));var le,ce;const de=({partners:e,isFetching:t,error:a})=>t?le||(le=i.createElement(X.A,null)):a?i.createElement(Z,{minHeight:"auto"},i.createElement(i.Fragment,null,i.createElement(J,null,(0,r.AP)("generic_text_sorryoffernotavailable_web")),i.createElement(ee,null,(0,r.AP)("Vous allez maintenant être redirigé vers la page de connexion.")))):i.createElement(i.Fragment,null,ce||(ce=i.createElement(se,null)),i.createElement(f.a,null,i.createElement(Z,{minHeight:"auto"},i.createElement(f.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"362px",margin:"0 auto",gap:"spacing.l"},i.createElement(ie,{partners:e})))));var me,pe,ue,ge,he,be,Ee,fe,_e,ve=a("fyOZ"),ye=(a("gkSg"),a("f4Bz"),a("D0rv")),xe=a("6XPn");const ke=(0,o.Ay)()(me=class extends i.Component{constructor(e){super(e),this.api=void 0,this.repository=void 0,this.isComponentMounted=void 0,this._renderPartnersList=()=>{const{isFetching:e,error:t,partners:a}=this.state;return e?pe||(pe=i.createElement(X.A,null)):t?i.createElement(i.Fragment,null,i.createElement(N.A,null,(0,r.AP)("generic_text_sorryoffernotavailable_web")),i.createElement(T.A,null,(0,r.AP)("Vous allez maintenant être redirigé vers la page de connexion."))):i.createElement(i.Fragment,null,i.createElement(N.A,null,(0,r.AP)("uaj_title_selectyourpartner_web")),i.createElement(F,{partners:a}))},this.api=new ye.A,this.repository=new xe.A(this.api),this.isComponentMounted=!1,this.state={partners:[],error:null,isFetching:!1}}async componentDidMount(){this.isComponentMounted=!0;try{this._handleFetchStart();const e=await this.repository.findAll();this._handleFetchEnd(),this._handlePartners(e)}catch(e){this._handleFetchEnd(),this._handleError(e)}}componentWillUnmount(){this.isComponentMounted=!1}render(){const{partners:e,error:t,isFetching:a}=this.state;return i.createElement(i.Fragment,null,ue||(ue=i.createElement(L.sA,null)),ge||(ge=i.createElement(S,null)),i.createElement(de,{partners:e,isFetching:a,error:t}),he||(he=i.createElement(V,null)),be||(be=i.createElement(Y.A,null)),Ee||(Ee=i.createElement(K.A,null)),fe||(fe=i.createElement(q.A,null)),_e||(_e=i.createElement(ve.A,null)))}_handleFetchStart(){this.isComponentMounted&&this.setState({isFetching:!0})}_handleFetchEnd(){this.isComponentMounted&&this.setState({isFetching:!1})}_handlePartners(e){this.isComponentMounted&&this.setState({partners:e})}_handleError(e){this.isComponentMounted&&(this.setState({error:e}),setTimeout(()=>{window.location.replace("/")},5e3))}})||me},"5pmF":(e,t,a)=>{a.d(t,{A:()=>x});var n=a("q1tI"),i=a("TRpf"),r=a("xobL"),o=(a("/eM8"),a("Vd8Q"));const s=o.default.get("host_website_ssl"),l=o.default.get("host_cookie"),c=`https://${o.default.get("host_common_assets_ssl")}/js/gdpr-appliance.js`,d=o.default.get("bot_crawler"),m=new RegExp(d,"i");var g=a("zKOv"),h=a("vGT4"),b=a("39Zz"),E=a("uHHB"),f=a("G04z"),_=a("ebSJ"),v=a("y7Wb");const y=({locale:e,darkMode:t,userId:a})=>{const{dispatch:r}=(0,h.b)(),o=(0,i.wA)();return(0,n.useEffect)(()=>{window.location.pathname.includes("register")&&(0,_.A)(b.J)&&((0,E.A)(b.J,"",0),(0,E.A)("euconsent-v2","",0)),window.onDzrGDPRReady=n=>{(async(e,t)=>{const{lang:a="en_US",darkMode:n=!1,onConsentUpdate:i,userID:r="0"}=t||{};window.consentScreenApi=await e({cookieDomain:l,darkMode:n,gatewayHost:s,isWebview:!1,lang:a,onConsentUpdate:i,userID:r})})(n,{lang:e,darkMode:t,userID:a,onConsentUpdate:e=>{var t;r((t=e,{type:g.X,value:t})),(0,f.u)().setConsent(e),o((0,v.j$)())}})},((e="dzr-gdpr-script")=>{if(m.test(navigator.userAgent))return;if(document.getElementById(e))return;const t=document.createElement("script");t.async=!0,t.crossOrigin="anonymous",t.defer=!0,t.id=e,t.src=c,document.head.appendChild(t)})("gdpr-web-script")},[]),(0,n.useEffect)(()=>{var n;null===(n=window.consentScreenApi)||void 0===n||n.update({darkMode:t,userID:a,lang:e})},[t,e,a]),null},x=()=>{const e=(0,i.d4)(e=>(0,r.JK)(e.user)),t=(0,i.d4)(e=>(0,r.NF)(e.user)),a=(0,i.d4)(e=>(0,r.F6)(e.user).toString());return n.createElement(y,{darkMode:t,userId:a,locale:e})}},"6XPn":(e,t,a)=>{a.d(t,{A:()=>i}),a("/eM8");const n=class{constructor({id:e,legacyId:t,name:a,brandName:n,activationLink:i,texts:r,partnerLogos:o,activationPageBackgroundUrl:s,activationPagePartnerLogoUrl:l,activationTypes:c,countryCodes:d,helpRedirectUrl:m,disclaimer:p}){this.id=void 0,this.legacyId=void 0,this.name=void 0,this.brandName=void 0,this.activationLink=void 0,this.texts=void 0,this.partnerLogos=void 0,this.activationPageBackgroundUrl=void 0,this.activationPagePartnerLogoUrl=void 0,this.activationTypes=void 0,this.countryCodes=void 0,this.helpRedirectUrl=void 0,this.disclaimer=void 0,this.PARTNER_LOGO_THEME_LIGHT="white",this.PARTNER_LOGO_THEME_DARK="black",this.PARTNER_LOGO_DEFAULT_SIZE=48,this.PARTNER_LOGO_SIZE_96=96,this.id=e,this.legacyId=t,this.name=a,this.brandName=n,this.activationLink=i,this.texts=r,this.partnerLogos=o,this.activationPageBackgroundUrl=s,this.activationPagePartnerLogoUrl=l,this.activationTypes=c,this.countryCodes=d,this.helpRedirectUrl=m,this.disclaimer=p}},i=class{constructor(e){this.api=void 0,this.api=e}async findAll(){return(await this.api.fetchAll()).map(e=>new n(e))}async findOneBySlug(e){const t=await this.api.fetchOneBySlug(e);return new n(t)}async validateSubscriptionBySms(e,t,a,n){await this.api.validateSubscriptionBySms(e,t,a,n)}validateSubscriptionByCode(e,t,a){return this.api.validateSubscriptionByCode(e,t,a)}validateSubscriptionByEmail(e,t,a){return this.api.validateSubscriptionByEmail(e,t,a)}async validateActivationLink(e,t){return await this.api.validateActivationLink(e,t)}async linkSubscriber(e,t){return await this.api.linkSubscriber(e,t)}}},"7cH/":(e,t,a)=>{e.exports=a.p+"images/landings/shared/success.6bd1807e7ff8e055320e.png"},BUPU:(e,t,a)=>{a.d(t,{A:()=>o});var n=a("+9dH"),i=a("HmE0"),r=a("q1tI");const o=({children:e,reversed:t,marginTop:a=0,...o})=>r.createElement(i.$n,(0,n.A)({type:"submit",alignItems:"center",backgroundColor:t?"white":"background.accent.primary.default",border:t?"1px solid background.accent.primary.default":"0",borderRadius:"md",color:t?"background.accent.primary.default":"white",display:"flex",fontSize:"sm",fontWeight:"600",justifyContent:"center",lineHeight:6,minWidth:{base:"100%",md:"350px"},paddingY:"spacing.l",paddingX:"spacing.xl",textAlign:"center",textTransform:"uppercase",marginTop:a},o),e)},Cl2C:(e,t,a)=>{a.d(t,{A:()=>d});var n,i=a("+9dH"),r=a("TDRX"),o=a("ej6z"),s=a("siwx"),l=a("q1tI");const c=e=>l.createElement(r.a,{as:"svg",viewBox:"0 0 1164 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Deezer logo",sx:{width:e.width,height:e.height,marginTop:e.marginTop,...e.sx},"data-testid":"activate-landing-deezer-logo"},n||(n=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M382.887 200H218.197V0H382.887V54.026H295.866V77.1428H377.692V121.299H295.866V145.974H382.887V200ZM566.28 200H401.59V0H566.28V54.026H479.259V77.1428H561.085V121.299H479.259V145.974H566.28V200ZM1164 200C1152.78 169.418 1137.08 136.787 1115.97 100.21C1140.66 92.9688 1155.43 77.4026 1155.43 53.5065C1155.43 17.1429 1121.92 0 1068.92 0H959.824V200H1037.75V117.27C1055.07 146.429 1067.82 173.943 1076.2 200H1164ZM1037.75 89.3506V54.026H1064.77C1076.2 54.026 1082.69 60.2597 1082.69 71.6883C1082.69 83.1169 1076.2 89.3506 1064.77 89.3506H1037.75ZM941.122 200H776.432V0H941.122V54.026H854.101V77.1428H935.927V121.299H854.101V145.974H941.122V200ZM584.985 54.026H665.395C632.034 81.3195 604.577 112.234 583.427 145.974V200H760.326V145.974H671.908C692.169 116.499 720.481 87.148 760.326 54.026V0H584.985V54.026ZM-0.00146484 3.60461e-06H100.268C162.351 3.60461e-06 206.251 41.2987 206.251 100C206.251 158.701 162.351 200 100.268 200H-0.00146484V3.60461e-06ZM77.9278 145.974H96.1113C115.594 145.974 125.984 132.987 125.984 100C125.984 67.013 115.594 54.026 96.1113 54.026H77.9278V145.974Z",fill:"black"}))),d=({children:e,partner:t,...a})=>l.createElement(r.a,(0,i.A)({display:"flex",marginBottom:{base:12,md:20}},a),l.createElement(r.a,{paddingY:0,paddingX:4},l.createElement(o.N,{href:"/"},l.createElement(c,{height:{base:4,md:6},marginTop:{base:"spacing.s",md:"spacing.m"},"data-testid":"activate-landing-deezer-logo"}))),t&&l.createElement(r.a,{paddingY:0,paddingX:4,borderLeft:"1px solid",borderColor:"border.neutral.primary.default"},l.createElement(s._,{src:t.partnerLogos[t.PARTNER_LOGO_THEME_LIGHT][t.PARTNER_LOGO_DEFAULT_SIZE],"data-testid":"activate-landing-partner-logo",alt:t.brandName,height:{base:8,md:12}})))},D0rv:(e,t,a)=>{a.d(t,{A:()=>i}),a("/eM8");var n=a("nrKQ");const i=class{fetchAll(){return new Promise((e,t)=>{n.A.call({method:"activate.getPartners",data:{},success:t=>{e(t)},error:e=>{t(e)}})})}fetchOneBySlug(e){return new Promise((t,a)=>{n.A.call({method:"activate.getPartnersActivationPageData",data:{PARTNER_SLUG:e},success:e=>{t(e)},error:e=>{a(e)}})})}validateSubscriptionBySms(e,t,a,i){return new Promise((r,o)=>{n.A.call({method:"activate.validateSubscription",data:{MSISDN:e,ACTIVATION_TYPE:"msisdn",PARTNER_ID:t,PARTNER_LEGACY_ID:a,COUNTRY:i},success:e=>{r(e)},error:e=>{o(e)}})})}validateSubscriptionByCode(e,t,a){return new Promise((i,r)=>{n.A.call({method:"activate.validateSubscriptionCode",data:{CODE:e,ACTIVATION_TYPE:"code",PARTNER_ID:t,PARTNER_LEGACY_ID:a},success:e=>{i(e)},error:e=>{r(e)}})})}validateSubscriptionByEmail(e,t,a){return new Promise((i,r)=>{n.A.call({method:"activate.validateSubscriptionEmail",data:{EMAIL:e,ACTIVATION_TYPE:"email",PARTNER_ID:t,PARTNER_LEGACY_ID:a},success:e=>{i(e)},error:e=>{r(e)}})})}validateActivationLink(e,t){return new Promise((a,i)=>{n.A.call({method:"activate.validateActivationLink",data:{TOKEN:e,PARTNER_LEGACY_ID:t},success:e=>{a(e)},error:e=>{i(e)}})})}linkSubscriber(e,t){return new Promise((a,i)=>{n.A.call({method:"activate.linkSubscriber",data:{TOKEN:e,PARTNER_LEGACY_ID:t},success:e=>{a(e)},error:e=>{i(e)}})})}}},E6Gc:(e,t,a)=>{a.d(t,{Qr:()=>o,lI:()=>r,sA:()=>s});var n=a("q1tI"),i=a("MaGs");const r=e=>{const{setColorMode:t}=(0,i.G6)();(0,n.useEffect)(()=>{t(e)},[t,e])},o=({children:e})=>(r("light"),n.createElement(n.Fragment,null,e)),s=({children:e})=>(r("dark"),n.createElement(n.Fragment,null,e))},FSqQ:(e,t,a)=>{a.d(t,{A:()=>o});var n,i=a("q1tI"),r=a("juqV");class o extends i.Component{render(){const{className:e}=this.props;let t=(0,r.A)("loader-container",e);return i.createElement("div",{className:t,"data-testid":"loader"},n||(n=i.createElement("div",{className:"loader animate-spin"})))}}},"L+Jq":(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ie}),a("EV0h"),a("gS5K");var n,i,r,o=a("q1tI"),s=a("X6oL"),l=a("Wp0Y"),c=a("yiM3"),d=a("Vd8Q"),m=a("oqWs"),p=a("Cl2C"),u=a("Rm4k"),g=a("miiT"),h=a("BUPU"),b=a("5pmF"),E=a("r2ys"),f=a("Zah6"),_=a("E6Gc"),v=a("6XPn"),y=a("D0rv"),x=a("TDRX"),k=a("siwx"),A=a("mmFw"),S=a("pVdW"),w=a("wZBD"),C=a("HmE0"),I=a("pmZX"),P=a("TRpf"),N=a("xobL"),L=a("RYij"),T=a("7cH/"),R=a("g2yj");const z=({partner:e,ctaHref:t,onCtaClick:a})=>{const s=(0,P.d4)(e=>e.user),c=(0,N.Mn)(s)||"",d=(0,N.hS)(s)||"",m=(0,N.Ck)(s)||"";return o.createElement(o.Fragment,null,o.createElement(L.A,{heading:"Good news: your %s offer is already activated!",centerHeading:!0,subheading:"",partner:e,steps:[],currentStep:null,hideStepper:!0,progressLabel:"Activation confirmed"},o.createElement(x.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.2xl"},o.createElement(k._,{src:T,alt:"generic_text_success_web",objectFit:"contain",width:{base:"174px",md:"217px"},height:{base:"96px",md:"120px"}}))),o.createElement(x.a,{position:"relative",top:{base:"-8px",md:"-16px"},left:"0",width:"100%",zIndex:"1",color:"background.neutral.primary.default"},n||(n=o.createElement(R.A,null))),o.createElement(x.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.2xl",maxWidth:"35rem",marginX:"auto",paddingTop:"spacing.2xl",paddingBottom:"spacing.3xl",paddingX:"spacing.l"},o.createElement(x.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.s",width:"100%"},o.createElement(x.a,{width:"100%",maxWidth:"28rem",display:"flex",alignItems:"center",gap:"spacing.m",bg:"background.neutral.secondary.default",borderRadius:"xs",paddingX:"spacing.l",paddingY:"spacing.m"},o.createElement(A.e,{size:"size.l",variant:"neutral",name:c}),o.createElement(x.a,{display:"flex",flexDirection:"column",gap:"spacing.s"},o.createElement(x.a,{display:"flex",flexDirection:"column"},o.createElement(S.E,{color:"text.neutral.primary.default",fontWeight:700},`Logged as ${c}`),o.createElement(S.E,{color:"text.neutral.secondary.default",fontSize:"sm"},d)),o.createElement(x.a,{display:"flex",alignItems:"center",gap:"spacing.s"},o.createElement(w.J,{display:"inline-flex",alignItems:"center",gap:"spacing.xs",bg:"background.accent.primary.default",borderRadius:"xs",paddingX:"spacing.xs",paddingY:"spacing.2xs"},i||(i=o.createElement(I.h,{color:"icon.accent.onDark.default",size:"small"})),o.createElement(x.a,{fontWeight:600,color:"text.accent.onDark.default",fontSize:"xs"},m||"Premium")))))),r||(r=o.createElement(S.E,{color:"text.neutral.secondary.default",textAlign:"center"},"Unlimited music is waiting for you: download the Deezer app and start streaming!")),o.createElement(C.$n,{as:"a",href:t,marginTop:"spacing.s",onClick:a},(0,l.AP)("generic_action_listennow_web"))))};var D,M,H,F,B=a("w/ZN");const O=({partner:e,ctaHref:t,onCtaClick:a})=>o.createElement(o.Fragment,null,o.createElement(L.A,{heading:"Your activation link isn't valid anymore",centerHeading:!0,subheading:"",partner:e,steps:[],currentStep:null,hideStepper:!0,progressLabel:"Activation help",headingTopSlot:D||(D=o.createElement(x.a,{width:"64px",height:"64px",padding:"spacing.xs",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"full",backgroundColor:"background.neutral.tertiary.default"},o.createElement(B.i,{color:"icon.neutral.primary.default",size:"medium"})))},M||(M=o.createElement(o.Fragment,null))),o.createElement(x.a,{position:"relative",top:{base:"-8px",md:"-16px"},left:"0",width:"100%",zIndex:"1",color:"background.neutral.primary.default"},H||(H=o.createElement(R.A,null))),o.createElement(x.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.2xl",maxWidth:"35rem",marginX:"auto",paddingBottom:"spacing.2xl"},o.createElement(x.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.s",width:"100%"},F||(F=o.createElement(S.E,{color:"text.neutral.secondary.default",textAlign:"center"},"Unfortunately, the link you used is expired.")),o.createElement(S.E,{color:"text.neutral.secondary.default",textAlign:"center"},`Good news, your ${null==e?void 0:e.brandName} is still available!  Click on the button below to generate a new activation link.`)),o.createElement(C.$n,{as:"a",href:t||"/",marginTop:"spacing.s",onClick:a},"Ask a new activation link")));a("/eM8");var j,U,G,W=a("m90r");const X=({partner:e,ctaHref:t,onCtaClick:a})=>{const n=(0,P.d4)(e=>e.user),i=(0,N.Mn)(n)||"",r=(0,N.hS)(n)||"",s=(0,N.Ck)(n)||"",l=(0,N.id)(n)||0,[,c]=o.useState("");o.useEffect(()=>{let e=!0;return(async()=>{try{var t,a;const n=await(0,W.Eb)(),i=(0,W.PB)(n,l?[l]:void 0),r=null!==(t=null==i?void 0:i.freeMonths)&&void 0!==t?t:0,o=null==i||null===(a=i.offer)||void 0===a||null===(a=a.subscription_period_collection)||void 0===a||null===(a=a.initial)||void 0===a?void 0:a.price_by_month;if(!e)return;if(o){const e=(e=>e.replace(/&nbsp;/g," ").replace(/&euro;/g,"€").replace(/&amp;/g,"&"))(o);c(r>0?`${1===r?"1 month free":`${r} months free`}, then ${e}`:`${e}`)}else c("")}catch(t){if(!e)return;c("")}})(),()=>{e=!1}},[l]);const d=null==e?void 0:e.partnerLogos[null==e?void 0:e.PARTNER_LOGO_THEME_LIGHT][null==e?void 0:e.PARTNER_LOGO_DEFAULT_SIZE];return o.createElement(o.Fragment,null,o.createElement(L.A,{heading:"Good news: your %s offer is already activated!",centerHeading:!0,subheading:"",partner:e,steps:[],currentStep:null,hideStepper:!0,progressLabel:"Activation confirmed"},o.createElement(x.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.2xl"},o.createElement(k._,{src:T,alt:"generic_text_success_web",objectFit:"contain",width:{base:"174px",md:"217px"},height:{base:"96px",md:"120px"}}))),o.createElement(x.a,{position:"relative",top:{base:"-8px",md:"-16px"},left:"0",width:"100%",zIndex:"1",color:"background.neutral.primary.default"},j||(j=o.createElement(R.A,null))),o.createElement(x.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.2xl",maxWidth:"35rem",marginX:"auto",paddingBottom:"spacing.2xl"},o.createElement(x.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.s",width:"100%"},o.createElement(x.a,{width:"100%",maxWidth:"28rem",display:"flex",alignItems:"center",gap:"spacing.m",bg:"background.neutral.secondary.default",borderRadius:"xs",paddingX:"spacing.l",paddingY:"spacing.m"},o.createElement(A.e,{size:"size.l",variant:"neutral",name:i}),o.createElement(x.a,{display:"flex",flexDirection:"column",gap:"spacing.s"},o.createElement(x.a,{display:"flex",flexDirection:"column"},o.createElement(S.E,{color:"text.neutral.primary.default",fontWeight:700},`Logged as ${i}`),o.createElement(S.E,{color:"text.neutral.secondary.default",fontSize:"sm"},r)),o.createElement(x.a,{display:"flex",alignItems:"center",gap:"spacing.s"},o.createElement(w.J,{display:"inline-flex",alignItems:"center",gap:"spacing.xs",bg:"background.accent.primary.default",borderRadius:"xs",paddingX:"spacing.xs",paddingY:"spacing.2xs",paddingLeft:"spacing.s"},U||(U=o.createElement(I.h,{color:"icon.accent.onDark.default",size:"small"})),o.createElement(x.a,{fontWeight:600,color:"text.accent.onDark.default",fontSize:"xs"},s||"Premium")),o.createElement(k._,{src:d,alt:(null==e?void 0:e.brandName)||"",height:"1.25rem",objectFit:"contain"}))))),G||(G=o.createElement(S.E,{color:"text.neutral.secondary.default",textAlign:"center"},"Unlimited music is waiting for you: download the Deezer app and start streaming!")),o.createElement(C.$n,{as:"a",href:t,marginTop:"spacing.s",onClick:a},"Continue")))};var $,V,Y,K,q,Z,Q=a("y7xR"),J=a("2qhg");const ee=({partner:e,registerHref:t,loginHref:a})=>{const n=(0,P.d4)(e=>e.user),i=(0,N.Mn)(n)||"",r=(0,N.hS)(n)||"",s=(0,N.Ck)(n)||"",l=`Ton offre Deezer ${e.brandName} ne peut pas être activée sur ce compte`;return o.createElement(o.Fragment,null,o.createElement(L.A,{heading:l,centerHeading:!0,subheading:"",partner:e,steps:[],currentStep:null,hideStepper:!0,progressLabel:"Account not eligible",headingTopSlot:$||($=o.createElement(x.a,{width:"64px",height:"64px",padding:"spacing.xs",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"full",backgroundColor:"background.neutral.tertiary.default"},o.createElement(B.i,{color:"icon.neutral.primary.default",size:"medium"})))},V||(V=o.createElement(o.Fragment,null))),o.createElement(x.a,{position:"relative",top:{base:"-8px",md:"-16px"},left:"0",width:"100%",zIndex:"1",color:"background.neutral.primary.default"},Y||(Y=o.createElement(R.A,null))),o.createElement(x.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.2xl",maxWidth:"35rem",marginX:"auto",paddingBottom:"spacing.2xl"},o.createElement(x.a,{width:"100%",maxWidth:"28rem",display:"flex",alignItems:"center",gap:"spacing.m",bg:"background.neutral.secondary.default",borderRadius:"xs",paddingX:"spacing.l",paddingY:"spacing.m"},o.createElement(A.e,{size:"size.l",variant:"neutral",name:i}),o.createElement(x.a,{display:"flex",flexDirection:"column",gap:"spacing.xxxs",width:"100%"},o.createElement(S.E,{color:"text.neutral.primary.default",fontWeight:700},`Logged as ${i}`),o.createElement(S.E,{color:"text.neutral.secondary.default",fontSize:"sm"},r),o.createElement(x.a,{display:"flex",alignItems:"center",gap:"spacing.s",marginTop:"spacing.xs"},o.createElement(x.a,{display:"inline-flex",alignItems:"center",gap:"spacing.xs",bg:"background.accent.primary.default",borderRadius:"xs",paddingX:"spacing.s",paddingY:"spacing.xs"},K||(K=o.createElement(I.h,{color:"icon.accent.onDark.default",size:"small"})),o.createElement(S.E,{fontWeight:700,color:"text.accent.onDark.default",fontSize:"xs"},s||"Premium"))))),q||(q=o.createElement(S.E,{color:"text.neutral.secondary.default",textAlign:"center",maxWidth:"35rem"},"Ton compte est déjà lié à un abonnement payant. Tu dois utiliser un compte Deezer sans abonnement en cours pour activer ton offre.")),o.createElement(x.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.xs"},o.createElement(Q.D,{color:"text.neutral.primary.default",textAlign:"center",as:"h3",variant:"heading.m"},`Rassure-toi, ton offre Deezer ${e.brandName} est toujours disponible !`),Z||(Z=o.createElement(S.E,{color:"text.neutral.secondary.default",textAlign:"center",maxWidth:"35rem"},"Pour en profiter, tu peux créer un nouveau compte ou te connecter à un compte Deezer Gratuit déjà existant."))),o.createElement(x.a,{display:"flex",flexDirection:{base:"column",md:"row"},gap:"spacing.s"},o.createElement(C.$n,{onClick:()=>{J.default.logout(),window.location.href=t},variant:"outline"},"Créer un compte"),o.createElement(C.$n,{onClick:()=>{J.default.logout(),window.location.href=a},variant:"outline"},"Se connecter"))))};var te,ae,ne,ie,re,oe,se,le,ce,de,me,pe,ue,ge,he,be,Ee,fe,_e,ve,ye,xe,ke,Ae,Se,we=a("hXd+"),Ce=(a("gkSg"),a("f4Bz"),a("fyOZ"));const Ie=(0,s.Ay)()(te=class extends o.Component{constructor(e){super(e),this.activationLink=void 0,this.error=void 0,this.partnerName=void 0,this.api=void 0,this.repository=void 0,this.error=this.props.location.query.error,this.activationLink=this.props.location.query.activationLink,this.partnerName=this.props.location.query.partnerName,this.api=new y.A,this.repository=new v.A(this.api),this.state={}}componentDidMount(){(0,we.z)(this.props.location)&&this.partnerName&&this.repository.findAll().then(e=>{const t=e.find(e=>e.brandName.toLowerCase()===this.partnerName.toLowerCase());t&&this.setState({partner:t})}).catch(()=>{})}render(){const e=(0,we.z)(this.props.location);if(e&&"PARTNER_NOT_FOUND"===this.error)return o.createElement(o.Fragment,null,ae||(ae=o.createElement(_.sA,null)),o.createElement(O,{partner:this.state.partner,ctaHref:this.activationLink||"/"}),ne||(ne=o.createElement(Ce.A,null)));if(e&&"NOT_ELIGIBLE_ACCOUNT"===this.error&&this.state.partner){const e=`/register?origin=activation-journey&partner=${this.state.partner.id}`,t="/login?origin=activation-journey";return o.createElement(o.Fragment,null,ie||(ie=o.createElement(_.sA,null)),o.createElement(ee,{partner:this.state.partner,registerHref:e,loginHref:t}),re||(re=o.createElement(Ce.A,null)))}if(e&&this.partnerName&&"SUBSCRIPTION_ALREADY_LINKED"!==this.error&&this.state.partner)return o.createElement(o.Fragment,null,oe||(oe=o.createElement(_.sA,null)),o.createElement(z,{partner:this.state.partner,ctaHref:"/activate/success"}),se||(se=o.createElement(Ce.A,null)));if(e&&"SUBSCRIPTION_ALREADY_LINKED"===this.error){const e=new URL("https://dzr.page.link");return e.searchParams.set("link",`https://www.deezer.com/login?origin=activation-journey&utm_source=uaj-${this.partnerName||""}&utm_medium=deezer-website&utm_campaign=subscription-already-linked`),e.searchParams.set("apn","deezer.android.app"),e.searchParams.set("amv","6190600"),e.searchParams.set("isi","292738169"),e.searchParams.set("ibi","com.deezer.Deezer"),e.searchParams.set("efr","1"),e.searchParams.set("ofl",(0,c.t)({route:"login",redirect:`https://${d.default.get("host_website_ssl")}`,query:{origin:"activation-journey",utm_source:`uaj-${this.partnerName||""}`,utm_medium:"deezer-website",utm_campaign:"subscription-already-linked"}})),o.createElement(o.Fragment,null,le||(le=o.createElement(_.sA,null)),o.createElement(X,{partner:this.state.partner,ctaHref:e.href}),ce||(ce=o.createElement(Ce.A,null)))}if(e&&("SHORLINK_NOT_FOUND"===this.error||!this.error))return o.createElement(o.Fragment,null,de||(de=o.createElement(_.sA,null)),o.createElement(O,{partner:this.state.partner,ctaHref:this.activationLink||"/"}));if(this.partnerName&&"SUBSCRIPTION_ALREADY_LINKED"===this.error){const e=new URL("https://link.deezer.com/");return e.searchParams.set("dest",`https://${d.default.get("host_website_ssl")}/home?origin=activation-journey&utm_source=uaj-${this.partnerName}&utm_medium=deezer-website&utm_campaign=subscription-already-linked`),e.searchParams.set("owf",(0,c.t)({route:"login",redirect:`https://${d.default.get("host_website_ssl")}`,query:{origin:"activation-journey",utm_source:`uaj-${this.partnerName}`,utm_medium:"deezer-website",utm_campaign:"subscription-already-linked",redirect_uri:`${d.default.get("host_website_ssl")}`}})),o.createElement("div",{id:"activate__error"},me||(me=o.createElement(_.Qr,null)),o.createElement(m.A,null,pe||(pe=o.createElement(p.A,null)),o.createElement(u.A,{"data-testid":"activate-link-error-message"},(0,l.AP)("uajcongrats_title_yourofferXisnowactivated_web",{sprintf:[this.partnerName]})),o.createElement(g.A,null,(0,l.AP)("Merci de vous connecter à votre compte Deezer")),o.createElement("a",{href:e.href,onClick:()=>{var e;this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"login",eventaction:"click",eventcategory:"partner-activation",partner_name:null===(e=this.activationLink)||void 0===e?void 0:e.split("/")[2]})}},o.createElement(h.A,{"data-testid":"activate-link-error-resend-cta"},(0,l.AP)("Connexion")))),ue||(ue=o.createElement(b.A,null)),ge||(ge=o.createElement(E.A,null)),he||(he=o.createElement(f.A,null)))}return"SHORLINK_NOT_FOUND"===this.error?o.createElement("div",{id:"activate__error"},be||(be=o.createElement(_.Qr,null)),o.createElement(m.A,null,Ee||(Ee=o.createElement(p.A,null)),o.createElement(u.A,{"data-testid":"activate-link-error-message"},(0,l.AP)("uajerrormessage_title_activationlinknotvalidanymore_web")),o.createElement(g.A,null,(0,l.AP)("uajerrormessage_text_toreceivenewlinkclickbelow_web")),o.createElement("a",{href:this.activationLink||"/"},o.createElement(h.A,{"data-testid":"activate-link-error-resend-cta"},(0,l.AP)("uajerrormessage_title_getnewactivationlink_web")))),fe||(fe=o.createElement(b.A,null)),_e||(_e=o.createElement(E.A,null)),ve||(ve=o.createElement(f.A,null))):o.createElement("div",{id:"activate__error"},ye||(ye=o.createElement(_.Qr,null)),o.createElement(m.A,null,xe||(xe=o.createElement(p.A,null)),o.createElement(u.A,{"data-testid":"activate-link-error-message"},(0,l.AP)("uajerrormessage_title_activationlinknotvalidanymore_web")),o.createElement(g.A,null,(0,l.AP)("uajerrormessage_text_toreceivenewlinkclickbelow_web")),o.createElement("a",{href:this.activationLink||"/"},o.createElement(h.A,{"data-testid":"activate-link-error-resend-cta"},(0,l.AP)("uajerrormessage_title_getnewactivationlink_web")))),ke||(ke=o.createElement(b.A,null)),Ae||(Ae=o.createElement(E.A,null)),Se||(Se=o.createElement(f.A,null)))}})||te},QSbk:(e,t,a)=>{a.d(t,{M4:()=>d,gf:()=>c,ri:()=>m}),a("/eM8");var n=a("Vd8Q"),i=a("YEdj"),r=a("zuHY");const o=(0,r.VF)((0,r.ny)(r.MG));let s=null;const l=()=>{if(s)return s;const e=n.default.get("host_authent");return s=new o({tokenOutputType:r.NP.PAYLOAD,refreshTokenOutputType:r.NP.COOKIE,host:e,customFetch:(e,t)=>{const a=new Headers({Accept:"application/json"});return a.append("Origin",`https://${n.default.get("host_website_ssl")}`),(0,i.A6)(e,{...t,headers:a,credentials:"include"})},requestDelay:15}),s},c=async e=>{let t;try{t=await l().getToken()}catch(a){t=e?await l().loginWithArl().catch(async()=>await l().getToken()):await l().loginAsAnonymous()}if(null===t)throw new Error("Could not log user to new Auth");return t},d=()=>{l().invalidateCurrentToken()},m=async()=>{d(),l().logout()}},QVzS:(e,t,a)=>{a.d(t,{A:()=>l});var n=a("bDF2");const i=(e,t,a,i="")=>{document.getElementById(e)&&document.getElementById(e).addEventListener("click",function(){(0,n.R2)({eventcategory:t,eventaction:a,eventlabel:i})})};var r=a("Vd8Q");const o=e=>{const t=`;domain=${r.default.get("host_cookie")}`;document.cookie=e+"="+t+"; path=/"+("https:"===document.location.protocol?";SameSite=None; secure":"")},s={init:function(){document.onclick=function(e){"burger_menu_button"!==e.target.id&&"line"!==e.target.className||s.toggleMobileMenu()};const e=document.getElementById("burger-logout-btn");e&&(e.onclick=()=>{o("familyUserId"),o("euconsent-v2"),location.href="/logout.php"})},toggleMobileMenu:function(){"burger-menu burger-menu-hidden"===document.getElementById("burger_menu").className?(document.getElementById("burger_menu").classList.remove("burger-menu-hidden"),document.getElementById("burger_menu").classList.add("burger-menu-visible"),document.getElementById("burger_menu_button").classList.add("burger-icon-active"),document.body.classList.add("disabled-scroll"),s.trackElementClick("open-menu")):(document.getElementById("burger_menu").classList.remove("burger-menu-visible"),document.getElementById("burger_menu").classList.add("burger-menu-hidden"),document.getElementById("burger_menu_button").classList.remove("burger-icon-active"),document.body.classList.remove("disabled-scroll"))},trackElementClick:function(e){const t=(0,n.bg)();t&&(0,n.R2)({eventcategory:t,eventaction:e})},initTracking(e){[{key:"launch",action:"download-app",menu:!0},{key:"download",action:"download-app",menu:!0},{key:"login",action:"login-button",menu:!1},{key:"signup",action:"signup-button",menu:!1},{key:"offers",action:"plans-button",menu:!1},{key:"explore",action:"channels-explore-button",menu:!1}].forEach(({key:t,action:a,menu:n})=>{i(`burger-${t}-link`,e,a,n?"menu":"")})}},l=s},RYij:(e,t,a)=>{a.d(t,{A:()=>F});var n=a("q1tI"),i=a("+9dH"),r=a("TDRX"),o=a("ej6z"),s=a("LSdk"),l=a("siwx");const c=({children:e,partner:t,...a})=>n.createElement(r.a,(0,i.A)({as:"header",bg:"background.neutral.primary.default",borderBottom:"1px solid",borderBottomColor:"divider.neutral.primary.default"},a),n.createElement(r.a,{display:"flex",alignItems:"center",gap:"spacing.l",paddingY:"spacing.l",paddingX:{base:"16px",md:"160px"},maxWidth:"90rem",marginX:"auto",minHeight:"80px"},n.createElement(r.a,{paddingY:0,paddingX:0},n.createElement(o.N,{href:"/"},n.createElement(s.T,{height:{base:8,md:10},"data-testid":"activate-landing-deezer-logo"}))),t&&n.createElement(r.a,{paddingY:0,paddingLeft:{base:"spacing.m",md:"spacing.l"},borderLeft:"1px solid",borderColor:"border.neutral.primary.default"},n.createElement(l._,{src:t.partnerLogos[t.PARTNER_LOGO_THEME_LIGHT][t.PARTNER_LOGO_DEFAULT_SIZE],"data-testid":"activate-landing-partner-logo",alt:t.brandName,height:{base:8,md:12},objectFit:"contain",maxWidth:{base:"120px",md:"200px"}}))));var d,m=a("pVdW"),p=a("y7xR"),u=a("Mi9D");const g=({currentStep:e,totalSteps:t})=>{const a=Array.from({length:Math.max(t,0)},(t,a)=>{const i=a<e;return n.createElement(r.a,{key:`step-segment-${a}`,flex:1,height:"2",borderRadius:"full",bg:i?"background.accent.primary.default":"background.neutral.tertiary.default"})});return n.createElement(r.a,{display:"flex",gap:"spacing.s",width:"100%"},a)},h=({title:e,text:t})=>e||t?n.createElement(r.a,{bg:"background.neutral.secondary.default",borderRadius:"md",paddingX:"spacing.l",paddingY:"spacing.m",width:"100%"},n.createElement(r.a,{display:"flex",alignItems:"center",gap:"spacing.s"},d||(d=n.createElement(u.x,{color:"icon.neutral.primary.default"})),n.createElement(m.E,{fontWeight:700,color:"text.neutral.primary.default",fontSize:"md"},e)),t&&n.createElement(m.E,{marginTop:"spacing.xs",color:"text.neutral.secondary.default",fontSize:"sm"},t)):null,b=({partner:e,currentStep:t,totalSteps:a,progressLabel:i,heading:o,subheading:s,headingInlineSlot:l,headingTopSlot:c,centerHeading:d,bannerTitle:u,bannerText:b,children:E})=>{const f=`${t}/${a} ${i||""}`;return n.createElement(r.a,{borderBottom:t&&4!==t?"1px solid":"none",borderColor:"border.neutral.primary.default",paddingX:{base:"spacing.l",md:"spacing.2xl"},paddingTop:{base:"spacing.2xl",md:"64px"},"data-name":"hero",paddingBottom:t&&4!==t?{base:"spacing.3xl",md:"64px"}:{base:"8px",md:"16px"}},n.createElement(r.a,{width:"100%",maxWidth:"35rem",marginX:"auto"},t&&n.createElement(r.a,null,n.createElement(g,{currentStep:t,totalSteps:a}),n.createElement(m.E,{color:"text.neutral.secondary.default",marginTop:"spacing.s"},f)),n.createElement(r.a,{marginTop:t?"spacing.2xl":void 0},c&&n.createElement(r.a,{display:"flex",justifyContent:d?"center":"flex-start",marginBottom:"spacing.l"},c),n.createElement(p.D,{textAlign:d?"center":"left",as:"h1",variant:{base:"heading.l",md:"heading.xl"},color:"text.neutral.primary.default"},e?o.replace("{partner}",e.brandName):o),l&&n.createElement(r.a,{marginTop:"spacing.2xl"},l),n.createElement(m.E,{variant:{base:"body.l",md:"body.l.default"},color:"text.neutral.secondary.default",marginTop:l?"spacing.2xl":"spacing.s"},s)),n.createElement(r.a,{marginTop:"spacing.2xl"},n.createElement(h,{title:u,text:e?null==b?void 0:b.replace("{partner}",e.brandName):b})),n.createElement(r.a,{marginTop:"spacing.2xl"},E)))};var E,f,_=a("r2ys"),v=a("Zah6"),y=a("5pmF"),x=a("88+3"),k=a("o4K4"),A=a("/2jZ"),S=a("rOm2");const w=e=>{const{icon:t,headline:a,isFirst:i,isLast:o,inProgress:s}=e;return n.createElement(r.a,{display:"flex",alignItems:"center",flexDirection:"column",width:"256px"},n.createElement(r.a,{bg:"background.neutral.tertiary.disabled",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"spacing.xl",height:"64px",width:"100%",position:"relative"},i&&(E||(E=n.createElement(r.a,{left:0,position:"absolute",zIndex:100,bg:"background.neutral.secondary.default",width:"128px",height:"64px"}))),n.createElement(r.a,{position:"absolute",zIndex:200,bg:s?"#A238FF":"background.neutral.tertiary.default",borderRadius:"100%",display:"flex",padding:"spacing.s",alignItems:"center",justifyContent:"center",width:"64px",height:"64px"},t),o&&(f||(f=n.createElement(r.a,{right:0,position:"absolute",zIndex:100,bg:"background.neutral.secondary.default",width:"128px",height:"64px"})))),n.createElement(m.E,{fontWeight:"bold",textAlign:"center",color:"text.neutral.primary.default",variant:"heading.m",marginBottom:"spacing.s"},a))},C=({component:e,size:t})=>{switch(e){case"PhoneIcon":return n.createElement(x.E,{color:"icon.accent.onDark.default",size:t});case"LinkIcon":return n.createElement(k.q,{color:"icon.accent.onDark.default",size:t});case"HumanCircleIcon":return n.createElement(A.v,{color:"icon.accent.onDark.default",size:t});case"DeezerLogoIcon":return n.createElement(S.o,{color:"icon.accent.onDark.default",size:t});default:return null}},I=({heading:e,steps:t,currentStep:a=1})=>n.createElement(r.a,{bg:"background.neutral.secondary.default",display:"flex",alignItems:"center",flexDirection:"column",paddingY:"spacing.3xl"},n.createElement(p.D,{variant:{base:"display.2xs",sm:"display.s",md:"display.s",lg:"display.s",xl:"display.s","2xl":"display.s"},lineHeight:"32px",textAlign:"center",marginBottom:"spacing.2xl"},e),n.createElement(r.a,{display:"flex"},t.map((e,i)=>n.createElement(w,{key:i,isFirst:0===i,isLast:i===t.length-1,inProgress:i===a-1,icon:C(e.icon),headline:e.headline,subline:e.subline}))));var P,N;const L=e=>{const{icon:t,headline:a,isFirst:i,isLast:o,inProgress:s}=e;return n.createElement(r.a,{display:"flex",alignItems:"center"},n.createElement(r.a,{bg:"background.neutral.tertiary.disabled",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"64px",width:"64px",height:"96px",position:"relative",marginRight:"spacing.l"},i&&(P||(P=n.createElement(r.a,{top:0,position:"absolute",zIndex:100,bg:"background.neutral.secondary.default",minWidth:"64px",width:"64px",height:"spacing.3xl"}))),n.createElement(r.a,{position:"absolute",zIndex:200,bg:s?"#A238FF":"background.neutral.tertiary.default",borderRadius:"100%",display:"flex",padding:"spacing.s",alignItems:"center",justifyContent:"center",minWidth:"64px",width:"64px",height:"64px"},t),o&&(N||(N=n.createElement(r.a,{bottom:0,position:"absolute",zIndex:100,bg:"background.neutral.secondary.default",minWidth:"64px",width:"64px",height:"spacing.3xl"})))),n.createElement(r.a,null,n.createElement(m.E,{fontWeight:"bold",color:"text.neutral.primary.default",variant:"heading.m"},a)))},T=({component:e,size:t})=>{switch(e){case"PhoneIcon":return n.createElement(x.E,{color:"icon.accent.onDark.default",size:t});case"LinkIcon":return n.createElement(k.q,{color:"icon.accent.onDark.default",size:t});case"HumanCircleIcon":return n.createElement(A.v,{color:"icon.accent.onDark.default",size:t});case"DeezerLogoIcon":return n.createElement(S.o,{color:"icon.accent.onDark.default",size:t});default:return null}},R=({heading:e,steps:t,currentStep:a=1})=>n.createElement(r.a,{bg:"background.neutral.secondary.default",display:"flex",flexDirection:"column",paddingY:"spacing.3xl",alignItems:"center",paddingX:"spacing.l"},n.createElement(p.D,{variant:{base:"display.2xs",sm:"display.s",md:"display.s",lg:"display.s",xl:"display.s","2xl":"display.s"},lineHeight:"32px",textAlign:"center",marginBottom:"spacing.2xl"},e),n.createElement(r.a,{display:"flex",flexDirection:"column",alignItems:"start",width:"100%",position:"relative"},t.map((e,i)=>n.createElement(L,{key:i,isFirst:0===i,isLast:i===t.length-1,inProgress:i===a-1,icon:T(e.icon),headline:e.headline})))),z=({heading:e,steps:t,currentStep:a})=>a?n.createElement(n.Fragment,null,n.createElement(r.a,{display:{base:"none",md:"block"}},n.createElement(I,{heading:e,steps:t,currentStep:a})),n.createElement(r.a,{display:{base:"block",md:"none"}},n.createElement(R,{heading:e,steps:t,currentStep:a}))):null;var D,M,H;const F=({heading:e,subheading:t,partner:a,currentStep:i,progressLabel:s,bannerTitle:l,bannerText:d,children:m,headingInlineSlot:p,headingTopSlot:u,totalStepsOverride:g,stepperStepsOverride:h,stepperHeadingOverride:E,centerHeading:f,hideStepper:x})=>{var k,A;const S=[{headline:"Enter your phone number",subline:"to receive an activation link by SMS",icon:{component:"PhoneIcon",color:"icon.neutral.primary.default",size:"medium"}},{headline:"Open your activation link",subline:"received by SMS",icon:{component:"LinkIcon",color:"icon.neutral.primary.default",size:"medium"}},{headline:"Link a free account to your offer",subline:"by sign up or log in to Deezer",icon:{component:"HumanCircleIcon",color:"icon.neutral.primary.default",size:"medium"}},{headline:"Your offer is activated!",subline:"Download Deezer app to start listening music",icon:{component:"DeezerLogoIcon",color:"icon.neutral.primary.default",size:"medium"}}],w="number"==typeof g?g:S.length,C=h&&h.length>0?h:S;return n.createElement(r.a,{bg:i&&4!==i?"background.neutral.primary.default":"background.neutral.secondary.default"},n.createElement(c,{partner:a}),n.createElement(r.a,null,n.createElement(b,{partner:a,currentStep:i,totalSteps:w,heading:e,subheading:t,progressLabel:s,bannerTitle:l,bannerText:d,headingInlineSlot:p,headingTopSlot:u,centerHeading:f},m),(null==a?void 0:a.helpRedirectUrl)&&n.createElement(r.a,{fontSize:{base:"md",md:"lg"},marginBottom:"4",marginTop:{base:6,md:10},paddingX:{base:"spacing.l",md:"spacing.2xl",lg:"spacing.4xl"},maxWidth:"90rem",marginX:"auto"},n.createElement(o.N,{"data-testid":"partner-help-link",href:null==a?void 0:a.helpRedirectUrl,isExternal:!0,color:"text.accent.primary.default",_hover:{textDecoration:"underline"}},null==a||null===(k=a.texts)||void 0===k||null===(k=k.activate)||void 0===k?void 0:k.help_redirect)),(null==a?void 0:a.disclaimer)&&n.createElement(r.a,{fontSize:{base:"md",md:"lg"},marginBottom:"4",marginTop:{base:6,md:10},paddingX:{base:"spacing.l",md:"spacing.2xl",lg:"spacing.4xl"},maxWidth:"90rem",marginX:"auto",color:"text.accent.onLight.default",_hover:{textDecoration:"underline"},dangerouslySetInnerHTML:{__html:null==a?void 0:a.disclaimer},sx:{a:{color:"text.accent.primary.default",_hover:{textDecoration:"underline"}}}})),a&&!x&&2!==i&&n.createElement(z,{heading:null!=E?E:null===(A=a.texts)||void 0===A||null===(A=A.activate)||void 0===A?void 0:A.step_title,steps:C,currentStep:i}),D||(D=n.createElement(y.A,null)),M||(M=n.createElement(_.A,null)),H||(H=n.createElement(v.A,null)))}},Rm4k:(e,t,a)=>{a.d(t,{A:()=>o});var n=a("+9dH"),i=a("y7xR"),r=a("q1tI");const o=({children:e,...t})=>r.createElement(i.D,(0,n.A)({"data-testid":"activate-common-heading",fontSize:{base:"4xl",md:"6xl"},fontWeight:"bold",marginBottom:12},t),e)},Zah6:(e,t,a)=>{a.d(t,{A:()=>h});var n,i=a("+9dH"),r=a("q1tI"),o=a("TRpf"),s=a("TqF5"),l=a("Zlrv"),c=a("nspE"),d=a("PvuB"),m=a("WKgy"),p=a("Qi9J");const u=e=>{switch(e){case"small":return"lg";case"medium":return"xl";default:return"3xl"}};class g extends r.Component{constructor(e){super(e),this._open=this._open.bind(this),this._close=this._close.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onOutsideMouseDown=this._onOutsideMouseDown.bind(this),this._contentRef=r.createRef()}componentDidMount(){document.addEventListener("keydown",this._onKeyDown),document.addEventListener("mousedown",this._onOutsideMouseDown),document.addEventListener("touchstart",this._onOutsideMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("mousedown",this._onOutsideMouseDown),document.removeEventListener("touchstart",this._onOutsideMouseDown)}render(){const{isOpen:e,data:t,name:a,size:o,variant:s,testid:m,background:g,padding:h}=this.props;if(!e)return null;const b=(0,p.C)(a);return b?r.createElement(l.aF,{isOpen:e,variant:null!=s?s:"foundation",size:u(o),isCentered:!0,onClose:this._close,closeOnOverlayClick:!this.props.disableClosingAction},n||(n=r.createElement(c.m,null)),r.createElement(d.$,{ref:this._contentRef,"data-testid":m,background:g||void 0,padding:h||void 0},r.createElement(r.Suspense,{fallback:null},r.createElement(b,(0,i.A)({},t,{name:a}))))):null}_onKeyDown(e){const{isOpen:t,disableClosingAction:a}=this.props;t&&!a&&27===e.keyCode&&this._close()}_onOutsideMouseDown(e){const{isOpen:t,disableClosingAction:a}=this.props;t&&!a&&"HTML"!==e.target.tagName&&e.target.contains(this._contentRef.current)&&(e.stopPropagation(),this._close())}_close(){this.props.closeModal(!0)}_open(){this.props.openModal()}}g.defaultProps={size:"large",addRadius:!1},m.A.addReducers({modal:s.Ay});const h=(0,o.Ng)(({modal:e})=>({name:e.name,data:e.props,disableClosingAction:e.disableClosingAction,isOpen:""!==e.name,size:e.size,classNameClose:e.classNameClose,addRadius:e.addRadius,variant:e.variant,testid:e.testid,background:e.background,padding:e.padding}),{closeModal:s.Oo,openModal:s.qf})(g)},f4Bz:()=>{},fyOZ:(e,t,a)=>{a.d(t,{A:()=>f});var n,i=a("q1tI"),r=a("LSdk"),o=a("ej6z"),s=a("mbHV"),l=a("ssO+"),c=a("2Av+"),d=a("HrDX"),m=a("/b/U"),p=a("QJeV"),u=a("nrKQ"),g=a("z+LD"),h=a("TRpf"),b=a("xobL");const E={facebook:i.createElement(c.i,null),instagram:i.createElement(d.o,null),youtube:i.createElement(p.V,null),twitter:i.createElement(m.u,null)},f=()=>{const e=(0,h.d4)(({user:e})=>(0,b.Z0)(e)),{availableLanguages:t,socialLinks:a}=(()=>{const[e,t]=(0,i.useState)({socialLinks:[],availableLanguages:[],footerSections:[]});return(0,i.useEffect)(()=>{u.A.call({method:"deezer.getUnloggedData",success:t,error:g.A.error})},[t]),e})();return i.createElement(l.pX,{"data-cy":"footer",style:{marginTop:0}},i.createElement(l.CI,{logo:n||(n=i.createElement(o.N,{href:"/","data-cy":"deezer-logo","aria-label":"deezer site"},i.createElement(r.T,null))),socialIcons:i.createElement(l.WR,null,a&&a.map(e=>i.createElement(l.Lo,{key:e.name,"aria-label":e.name,href:e.url,icon:E[e.name]}))),languageSelector:t.length>1&&i.createElement(s.l,{variant:"filled",value:e,onChange:e=>{const t=/\/[a-z]{2}\//,a=`${e.target.value}`;t.test(location.pathname)?location.href=location.href.replace(t,`/${a}/`):location.pathname=a+location.pathname}},t.map(e=>i.createElement("option",{key:e.label,value:e.value},e.label)))}))}},g2yj:(e,t,a)=>{a.d(t,{A:()=>o});var n=a("+9dH"),i=a("TDRX"),r=a("q1tI");const o=({color:e="currentColor",style:t={},className:a,...o})=>r.createElement(i.a,(0,n.A)({className:a,style:t,position:"relative",width:"100%",height:"32px"},o),r.createElement(i.a,{as:"svg",width:"100%",height:"32",viewBox:"0 0 1440 32",preserveAspectRatio:"none",display:{base:"block",lg:"none"},style:{width:"100%",height:"32px",...t}},r.createElement("ellipse",{cx:"720",cy:"16",rx:"900",ry:"16",fill:e})),r.createElement(i.a,{as:"svg",width:"100%",height:"32",viewBox:"0 0 1440 32",preserveAspectRatio:"none",display:{base:"none",lg:"block",xl:"none"},style:{width:"100%",height:"32px",...t}},r.createElement("ellipse",{cx:"720",cy:"15",rx:"720",ry:"16",fill:e})),r.createElement(i.a,{as:"svg",width:"100%",height:"32",viewBox:"0 0 1440 32",preserveAspectRatio:"none",display:{base:"none",xl:"block"},style:{width:"100%",height:"32px",...t}},r.createElement("ellipse",{cx:"720",cy:"12",rx:"720",ry:"16",fill:e})))},gkSg:()=>{},gvcj:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ct}),a("/eM8");var n=a("q1tI"),i=a("mwIZ"),r=a.n(i),o=a("X6oL"),s=a("E6Gc"),l=a("FSqQ"),c=a("fyOZ"),d=(a("gkSg"),a("f4Bz"),a("6XPn")),m=a("D0rv"),p=a("Wp0Y"),u=a("oqWs"),g=a("Cl2C"),h=a("Rm4k"),b=a("miiT"),E=a("/tpP");const f=({steps:e})=>n.createElement(E.t,{hasLine:!0,discSize:70},e.map((e,t)=>n.createElement(E.E,{key:t,"data-testid":`activate-landing-steps-${t}`},e)));var _=a("r2ys"),v=a("Zah6"),y=a("+9dH"),x=a("TDRX");const k=({children:e,...t})=>n.createElement(x.a,(0,y.A)({borderRadius:"sm",marginBottom:4,paddingY:4,paddingX:5,backgroundColor:"rgb(223 60 60 / 8%)",color:"text.feedback.error.default"},t),e),A=({children:e,...t})=>n.createElement(x.a,(0,y.A)({borderRadius:"4px",marginBottom:"4",padding:"4",backgroundColor:"green.100",color:"green.500"},t),e);var S,w,C,I,P,N=a("5pmF"),L=a("yCtO"),T=a("ej6z"),R=a("pVdW"),z=a("siwx"),D=a("y7xR"),M=a("nRPM");class H extends n.Component{render(){const{heading:e,subheading:t,partner:a,success:i,error:r,formMessagesPosition:o,steps:s,children:l}=this.props,c=n.createElement(n.Fragment,null,r&&r.message&&n.createElement(k,{"data-testid":"activate-landing-error-message"},r.message),i&&i.message&&n.createElement(A,{"data-testid":"activate-landing-success-message"},i.message));return n.createElement(x.a,{bg:"white",paddingX:{base:4,sm:0}},n.createElement(u.A,null,n.createElement(g.A,{partner:a}),n.createElement(h.A,{"data-testid":"activate-landing-success-message"},e),n.createElement(b.A,null,t),"top"===o&&c,l,"bottom"===o&&c,a.helpRedirectUrl&&n.createElement(x.a,{fontSize:{base:"md",md:"lg"},marginBottom:"4",marginTop:"10"},n.createElement(T.N,{"data-testid":"partner-help-link",href:a.helpRedirectUrl,isExternal:!0,color:"text.accent.primary.default",_hover:{textDecoration:"underline"}},a.texts.activate.help_redirect)),a.disclaimer&&n.createElement(x.a,{fontSize:{base:"md",md:"lg"},marginBottom:"4",marginTop:"10",color:"text.accent.onLight.default",_hover:{textDecoration:"underline"},dangerouslySetInnerHTML:{__html:a.disclaimer},sx:{a:{color:"text.accent.primary.default",_hover:{textDecoration:"underline"}}}}),n.createElement(T.N,{alignItems:"center",display:{base:"flex",md:"none"},href:"#activate__steps",position:"relative",zIndex:"100"},S||(S=n.createElement(L.e,{mr:3})),n.createElement(R.E,{color:"text.accent.secondary.default",fontSize:"sm"},(0,p.AP)("generic_title_howdoesitwork_web"))),n.createElement(z._,{src:a.activationPageBackgroundUrl?a.activationPageBackgroundUrl:M,objectFit:"cover",paddingTop:16,margin:"-36px",minWidth:"100vw",display:{base:"block",md:"none"}}),n.createElement(x.a,{as:"a",href:"#activate__steps",alignItems:"center",position:"absolute",bottom:"0",display:{base:"none",lg:"flex"}},w||(w=n.createElement(L.e,{mr:3})),n.createElement(R.E,{color:"text.accent.secondary.default",fontSize:"sm"},(0,p.AP)("generic_title_howdoesitwork_web")))),n.createElement(D.D,{id:"activate__steps",color:"text.accent.onLight.default",fontSize:{base:"2xl",md:"4xl"},fontWeight:"bold",marginBottom:8,marginTop:{base:8,md:0},textAlign:"center"},a.texts.activate.step_title),n.createElement(x.a,{paddingX:{base:0,md:16},paddingTop:8,paddingBottom:16},n.createElement(f,{steps:s})),C||(C=n.createElement(N.A,null)),I||(I=n.createElement(_.A,null)),P||(P=n.createElement(v.A,null)))}}H.defaultProps={formMessagesPosition:"bottom"};const F=H;var B=a("QIHo"),O=a("c+bj");const j=a.p+"js/Activate/components/landing/phone-input/international.82041fd7caf50574116c.svg";var U;const G=O.A,W=n.forwardRef(function({name:e,value:t,onChange:a},i){return n.createElement("div",{className:"activate__landing__phone-input__country-select--container",ref:i},n.createElement("div",{className:"react-phone-number-input__icon"},n.createElement("img",{alt:t,className:"react-phone-number-input__icon-image",src:t?`https://flagicons.lipis.dev/flags/4x3/${t.toLowerCase()}.svg`:""})),n.createElement("label",{className:"activate__landing__phone-input__label",htmlFor:"custom-select"},t?`+${(0,B.Ko)(t)}`:U||(U=n.createElement("img",{src:j,className:"activate__landing__phone-input__country-select__intertional-icon"}))),n.createElement("select",{id:"custom-select",name:e,value:t,onChange:e=>a(e.target.value||void 0),className:"activate__landing__phone-input__country-select__select"},n.createElement("option",{value:""},O.A.ZZ),(0,B.X6)().map(e=>n.createElement("option",{key:e,value:e},G[e]," +",(0,B.Ko)(e)))))});var X=a("juqV");a("ZN3Q");const $=({partner:e,value:t,initialCountryCode:a,countryCode:i,error:r,handleSubmit:s,onChange:l,onCountryChange:c})=>{const d=(0,o.z1)();return n.createElement("div",{className:"activate__landing__phone-input--container"},n.createElement("form",{onSubmit:s},n.createElement(B.Ay,{countrySelectComponent:W,"data-testid":"activate-landing-phone-input",className:(0,X.A)("activate__landing__phone-input",r&&"activate__landing__phone-input--error"),addInternationalOption:!1,defaultCountry:i||a,value:t,onChange:e=>l(e),onCountryChange:e=>{try{c(e)}catch(e){}}}),n.createElement("button",{"data-testid":"activate-landing-cta",onClick:()=>{d.trackEvent({event:"click",eventlabel:"send-link",eventaction:"click",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]})},type:"submit",className:(0,X.A)("activate__landing__send-button",t&&"valid"),disabled:Boolean(!t)},e.texts.activate.input_cta)))},V={ERROR_GENERATING_ACTIVATION_LINK:()=>"Error generating activation link",ERROR_SHORTENING_LINK:()=>"Error shortening link",ERROR_SENDING_ACTIVATION_CODE:()=>"Error sending activation code",PARTNER_NOT_FOUND:()=>"Partner not found",UNEXPECTED_ERROR:()=>"Unexpected error",GATEWAY_ERROR:()=>"Gateway error"},Y={INVALID_MSISDN:e=>(0,p.AP)("uajerrormessage_text_enteravalidphonenumber_web",e),SUBSCRIPTION_NOT_FOUND:e=>(0,p.AP)("uajerrormessage_text_enternumberassociatedwithoffer_web",e),SUBSCRIPTION_DEACTIVATED:e=>(0,p.AP)("uajerrormessage_text_enternumberassociatedwithoffer_web",e),SUBSCRIPTION_EXPIRED:e=>(0,p.AP)("uajerrormessage_text_enternumberassociatedwithoffer_web",e)},K={SUBSCRIPTION_NOT_FOUND:e=>(0,p.AP)("uajerrormessage_text_enterecodeassociatedwithoffer_web",e),SUBSCRIPTION_DEACTIVATED:e=>(0,p.AP)("uajerrormessage_text_enterecodeassociatedwithoffer_web",e),SUBSCRIPTION_EXPIRED:e=>(0,p.AP)("uajerrormessage_text_enterecodeassociatedwithoffer_web",e)},q={SUBSCRIPTION_NOT_FOUND:e=>(0,p.AP)("uajerrormessage_text_enteremailassociatedwithoffer_web",e),SUBSCRIPTION_DEACTIVATED:e=>(0,p.AP)("uajerrormessage_text_enteremailassociatedwithoffer_web",e),SUBSCRIPTION_EXPIRED:e=>(0,p.AP)("uajerrormessage_text_enteremailassociatedwithoffer_web",e)},Z=(e,t,a)=>{if(V[e])return V[e](t);if("msisdn"===a&&Y[e])return Y[e](t);if("code"===a&&K[e])return K[e](t);if("email"===a&&K[e])return q[e](t);throw new Error},Q={LINK_SENT:"",LINK_RESENT:(0,p.AP)("generic_text_newlinksentviaSMS_web")},J=({children:e,onClick:t,...a})=>n.createElement(x.a,(0,y.A)({color:"text.accent.primary.default",cursor:"pointer",fontSize:"md",marginBottom:4,onClick:t},a),e);var ee,te=a("Ty5D"),ae=a("iooo"),ne=a("Qyje"),ie=a.n(ne);function re({partnerName:e,errorName:t}){return(0,ae.jd)(`/activate/error?${ie().stringify({error:t,partnerName:e})}`)}let oe=(0,o.Ay)()(ee=class extends n.Component{constructor(e){super(e),this.initialCountryCode=void 0,this._onCountryChange=e=>{this.setState({countryCode:e})},this._onPhoneNumberChange=e=>{this.setState({phoneNumber:e})},this._handleResendSmsLink=async()=>{const{partner:e,repository:t}=this.props;try{if(e&&this.state.countryCode){await t.validateSubscriptionBySms(this.state.phoneNumber,e.id,e.legacyId,this.state.countryCode);const a={name:"LINK_RESENT",message:(0,p.AP)("generic_text_newlinksentviaSMS_web")};this._handleSuccess(a)}}catch(e){this._handleError(e)}},this._handleChangePhoneNumber=()=>{const{partner:e,history:t}=this.props;this.setState({phoneNumber:"",success:void 0,error:void 0}),t.push((0,ae.jd)(`${e.activationLink}`))},this._handleSubmit=async e=>{const{partner:t,repository:a,history:n}=this.props;e.preventDefault();try{t&&this.state.countryCode&&(await a.validateSubscriptionBySms(this.state.phoneNumber,t.id,t.legacyId,this.state.countryCode),n.push((0,ae.jd)(`${t.activationLink}/sent_activation_link_success`)))}catch(e){this._handleError(e)}},this.initialCountryCode=e.partner.countryCodes&&e.partner.countryCodes[0],this.state={phoneNumber:"",countryCode:this.initialCountryCode,success:void 0,error:void 0}}componentDidMount(){const e=this.props.location.pathname.split("/");if("sent_activation_link_success"===e[e.length-1]){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}componentDidUpdate(e){const t=this.props.location.pathname.split("/"),a="sent_activation_link_success"===t[t.length-1];if(e.location.pathname!==this.props.location.pathname&&a){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}render(){const{partner:e}=this.props,{phoneNumber:t,countryCode:a,success:i,error:r}=this.state,o=Boolean(i);let s=e.texts.activate.title,l=e.texts.activate.subtitle;return o&&(s=(0,p.AP)("uajlandingpage_title_activationlinksent_web"),l=(0,p.AP)("uajlandingpage_text_clickonlinksentviaSMStocomplete_web",{sprintf:[t]})),n.createElement(F,{heading:s,subheading:l,partner:e,success:i,error:r,formMessagesPosition:o?"top":"bottom",steps:[e.texts.activate.step_1,e.texts.activate.step_2,e.texts.activate.step_3]},o?n.createElement(n.Fragment,null,n.createElement(J,{"data-testid":"activate-landing-success-resend-link",onClick:()=>{this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"resend-link",eventaction:"click",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]}),this._handleResendSmsLink()}},(0,p.AP)("generic_action_resendSMS_web")),n.createElement(J,{"data-testid":"activate-landing-success-change-phone",onClick:()=>{this._handleChangePhoneNumber()}},(0,p.AP)("Changer le numéro de téléphone"))):n.createElement($,{partner:e,initialCountryCode:this.initialCountryCode,countryCode:a,value:t,error:r,handleSubmit:this._handleSubmit,onChange:this._onPhoneNumberChange,onCountryChange:this._onCountryChange}))}_handleError(e){const{partner:t,history:a}=this.props;if(this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:e.name,eventaction:"onError",eventcategory:"partner-activation",partner_name:t.activationLink.split("/")[2]}),"SUBSCRIPTION_ALREADY_LINKED"===e.name){const n=re({errorName:e.name,partnerName:t.brandName});return void a.push(n)}let n={};t&&(n={sprintf:[t.brandName]});const i=Z(e.name,n,"msisdn");this.setState({error:{name:e.name,message:i}})}_handleSuccess(e){const t=Q[e.name];this.setState({error:void 0,success:{name:e.name,message:t}})}})||ee;const se=(0,te.y)(oe);var le=a("XkdG"),ce=a("HmE0");class de extends n.Component{constructor(...e){super(...e),this.state={code:"",error:void 0},this._handleCodeChange=e=>{this.setState({code:e.target.value})},this._handleSubmit=async e=>{const{partner:t,repository:a}=this.props,{code:n}=this.state;e.preventDefault();try{if(t&&n){const e=await a.validateSubscriptionByCode(n,t.id,t.legacyId);if(!e)return void this._handleError({name:"UNEXPECTED_ERROR",message:""});this._handleSuccess(e)}}catch(e){this._handleError(e)}}}render(){const{partner:e}=this.props,{code:t,error:a}=this.state;return n.createElement(F,{heading:e.texts.activate.title,subheading:e.texts.activate.subtitle,partner:e,error:a,steps:[e.texts.activate.step_1,e.texts.activate.step_2]},n.createElement(x.a,{marginBottom:"4",maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},n.createElement("form",{onSubmit:this._handleSubmit},n.createElement(le.p,{"data-testid":"activate-landing-code-input",value:t,placeholder:e.texts.activate.input_placeholder,onChange:this._handleCodeChange,_invalid:{borderColor:"border.accent.primary.default"},bg:"white",borderRadius:"full",boxShadow:"md",fontSize:"lg",p:6,mb:{base:6,md:0},w:"full",_hover:{bg:"white"},_focus:{bg:"white",outline:"none",border:"none"},_active:{outline:"none",border:"none"}}),n.createElement(ce.$n,{"data-testid":"activate-landing-cta",fontFamily:"unset",type:"submit",disabled:Boolean(!t),alignItems:"center",bg:t?"background.accent.primary.default":"background.accent.secondary.default",borderColor:t?"border.accent.primary.default":"border.accent.secondary.default",borderRadius:"full",color:t?"white":"lightGrey.700",display:"flex",fontSize:"xs",fontWeight:"semibold",paddingX:4,paddingY:2,height:{base:10,md:8},minHeight:{base:10,md:8},maxHeight:{base:10,md:8},textTransform:"uppercase",position:{base:"initial",md:"absolute"},right:6,textAlign:"center",top:"50%",transform:{base:"none",md:"translateY(-50%)"},w:{base:"full",md:"auto"},_hover:{borderColor:t?"border.accent.primary.default":"border.accent.secondary.default"},_focus:{borderColor:t?"border.accent.primary.default":"border.accent.secondary.default"},zIndex:"overlay"},e.texts.activate.input_cta))))}_handleError(e){const{partner:t,history:a}=this.props;if("SUBSCRIPTION_ALREADY_LINKED"===e.name){const n=re({errorName:e.name,partnerName:t.brandName});return void a.push(n)}let n={};t&&(n={sprintf:[t.brandName]});const i=Z(e.name,n,"code");this.setState({error:{name:e.name,message:i}})}_handleSuccess(e){window.location.replace(e)}}const me=(0,te.y)(de);var pe;let ue=(0,o.Ay)()(pe=class extends n.Component{constructor(...e){super(...e),this.state={email:"",success:void 0,error:void 0},this._handleEmailChange=e=>{this.setState({email:e.target.value})},this._handleChangeEmail=()=>{const{partner:e,history:t}=this.props;this.setState({email:"",success:void 0,error:void 0}),t.push((0,ae.jd)(`${e.activationLink}`))},this._handleSubmit=async e=>{const{partner:t,repository:a,history:n}=this.props;e.preventDefault();try{t&&this.state.email&&(await a.validateSubscriptionByEmail(this.state.email,t.id,t.legacyId),n.push((0,ae.jd)(`${t.activationLink}/sent_activation_link_success`)))}catch(e){this._handleError(e)}}}componentDidMount(){const e=this.props.location.pathname.split("/");if("sent_activation_link_success"===e[e.length-1]){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}componentDidUpdate(e){const t=this.props.location.pathname.split("/"),a="sent_activation_link_success"===t[t.length-1];if(e.location.pathname!==this.props.location.pathname&&a){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}render(){const{partner:e}=this.props,{email:t,success:a,error:i}=this.state,r=Boolean(a);let o=e.texts.activate.title,s=e.texts.activate.subtitle;return r&&(o=(0,p.AP)("uajlandingpage_title_activationlinksent_web"),s=(0,p.AP)("uajlandingpage_text_clickonlinksentviaemailtocomplete_web",{sprintf:[t]})),n.createElement(F,{heading:o,subheading:s,partner:e,error:i,steps:[e.texts.activate.step_1,e.texts.activate.step_2,e.texts.activate.step_3]},r?n.createElement(n.Fragment,null,n.createElement(J,{"data-testid":"activate-landing-success-change-phone",onClick:()=>{this._handleChangeEmail()}},(0,p.AP)("generic_action_changeemailaddress_web"))):n.createElement(n.Fragment,null,n.createElement(x.a,{marginBottom:"4",maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},n.createElement("form",{onSubmit:this._handleSubmit},n.createElement(le.p,{value:t,placeholder:e.texts.activate.input_placeholder,onChange:this._handleEmailChange,_invalid:{borderColor:"accent.main"},bg:"white",borderRadius:"full",border:"none",borderColor:"transparent",boxShadow:"md",fontSize:"lg",p:6,mb:{base:6,md:0},w:"full",_hover:{bg:"white"},_focus:{bg:"white",outline:"none",border:"none"},_active:{outline:"none",border:"none"}}),n.createElement(ce.$n,{"data-testid":"activate-landing-cta",fontFamily:"unset",type:"submit",disabled:Boolean(!t),alignItems:"center",bg:t?"accent.main":"lightGrey.100",borderColor:t?"accent.main":"lightGrey.700",borderRadius:"full",color:t?"white":"lightGrey.700",display:"flex",fontSize:"xs",fontWeight:"semibold",paddingX:4,paddingY:2,height:{base:10,md:8},minHeight:{base:10,md:8},maxHeight:{base:10,md:8},textTransform:"uppercase",position:{base:"initial",md:"absolute"},right:6,textAlign:"center",top:"50%",transform:{base:"none",md:"translateY(-50%)"},w:{base:"full",md:"auto"},_hover:{borderColor:t?"accent.main":"lightGrey.700"},_focus:{borderColor:t?"accent.main":"lightGrey.700"},zIndex:"overlay"},e.texts.activate.input_cta)))))}_handleError(e){const{partner:t,history:a}=this.props;if(this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:e.name,eventaction:"onError",eventcategory:"partner-activation",partner_name:t.activationLink.split("/")[2]}),"SUBSCRIPTION_ALREADY_LINKED"===e.name){const n=re({errorName:e.name,partnerName:t.brandName});return void a.push(n)}let n={};t&&(n={sprintf:[t.brandName]});const i=Z(e.name,n,"email");this.setState({error:{name:e.name,message:i}})}_handleSuccess(e){const t=Q[e.name];this.setState({error:void 0,success:{name:e.name,message:t}})}})||pe;const ge=(0,te.y)(ue);a("gS5K");var Se,we,he=a("RYij"),be=a("Votb"),Ee=a("SEJg"),fe=a("wgyF"),_e=a("ISqf"),ve=a("ffbo"),ye=a("go2a"),xe=a("Swh8"),ke=a("wq/M"),Ae=a("7bxg");const Ce=({countryList:e,value:t,onChange:a,debounceMs:i=500,isInvalid:r=!1})=>{const o=(0,n.useRef)(null),{filter:s,setFilter:l,clearFilter:c,filteredList:d,isFiltering:m}=((e,t=300)=>{const[a,i]=(0,n.useState)(""),[r,o]=(0,n.useState)(""),s=(0,n.useCallback)(e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),[]),l=(0,n.useCallback)(e=>{const t="string"==typeof e?e:e.target.value;i(t)},[]),c=(0,n.useCallback)(()=>{i(""),o("")},[]);(0,n.useEffect)(()=>{const e=setTimeout(()=>{o(a)},t);return()=>clearTimeout(e)},[a,t]);const d=(0,n.useMemo)(()=>e.map(e=>({...e,normalizedName:s(e.name),normalizedCode:s(e.code),normalizedIso:s(e.iso)})),[e,s]),m=(0,n.useMemo)(()=>{const t=s(r);return t?d.filter(e=>e.normalizedName.includes(t)||e.normalizedCode.includes(t)||e.normalizedIso.includes(t)).map(({normalizedName:e,normalizedCode:t,normalizedIso:a,...n})=>n):e},[d,r,s,e]),p=a.length>0;return{filter:a,setFilter:l,clearFilter:c,filteredList:m,isFiltering:p,resultCount:m.length}})(e,i),{selectedFlag:p,handleSelect:u,selected:g}=(({value:e,onChange:t,countryList:a})=>{const[i,r]=(0,n.useState)(e);(0,n.useEffect)(()=>{r(e)},[e]);const o=(0,n.useCallback)(e=>{t(e),r(e)},[t]),s=(0,n.useMemo)(()=>{var e;return null===(e=a.find(({code:e})=>e===i))||void 0===e?void 0:e.flag},[a,i]);return{selected:i,handleSelect:o,selectedFlag:s}})({onChange:a,countryList:e,value:t}),h=(0,n.useMemo)(()=>d.slice(0,50),[d]);(0,n.useEffect)(()=>{if(e.length>5&&o.current){const e=setTimeout(()=>{var e;null===(e=o.current)||void 0===e||e.focus()},100);return()=>clearTimeout(e)}},[e.length]);const b=e.find(e=>e.code===g),E=b?`${b.name} ${b.code}`:"Select country";return n.createElement(x.a,{w:"fit-content"},n.createElement(fe.W,null,n.createElement(_e.I,{as:ce.$n,variant:"outline",borderRadius:"s",borderColor:r?"red.500":"transparent",backgroundColor:"background.neutral.tertiary.default",w:"fit-content",justifyContent:"flex-start","aria-label":E,title:E,"aria-invalid":!!r||void 0},n.createElement(be.z,{w:"fit-content",justifyContent:"space-between"},n.createElement(R.E,{fontSize:"xl","aria-hidden":"true",color:"text.neutral.primary.default"},p||"🌍"),n.createElement(R.E,{color:"text.neutral.primary.default"},g),Se||(Se=n.createElement(x.a,{w:"16px",h:"16px",display:"flex",alignItems:"center",justifyContent:"center"},n.createElement(L.e,{color:"icon.neutral.secondary.default",size:"small",maxHeight:"1rem"}))))),n.createElement(ve.c,{maxW:"14rem",p:0},e.length>5&&n.createElement(x.a,{borderBottomWidth:"1px",p:2},n.createElement(ye.M,{size:"sm"},n.createElement(le.p,{ref:o,value:s,onChange:l,placeholder:"Search country...","aria-label":"Search countries","aria-describedby":"search-results-count"}),m&&n.createElement(xe.t,null,n.createElement(ce.K0,{"aria-label":"Clear search",size:"xs",variant:"ghost",onClick:c},we||(we=n.createElement(Ae.w,{size:"small",maxHeight:"0.5rem"})))))),n.createElement(x.a,{maxH:"12rem",overflowY:"auto",role:"listbox","aria-label":"Country list"},h.map(({code:e,flag:t,name:a,iso:i})=>{const r=e===g;return n.createElement(ke.D,{key:`${i}-${e}`,onClick:()=>u(e),role:"option","aria-selected":r,"aria-label":`${a} ${e}`},n.createElement(be.z,{w:"100%",spacing:"spacing.xs"},n.createElement(R.E,{fontSize:"xl",lineHeight:"5","aria-hidden":"true"},t),n.createElement(R.E,{color:"text.neutral.primary.default",w:"2.5rem",textAlign:"right",fontSize:"sm",flexShrink:0},e),n.createElement(R.E,{noOfLines:1,fontSize:"sm",color:"text.neutral.primary.default"},a)))})))))},Ie=({id:e,onChange:t,value:a,isInvalid:i=!1})=>{const r=a,o=(0,n.useCallback)(e=>{t(e.target.value)},[t]);return n.createElement(le.p,{id:e,minHeight:"51px",type:"tel",value:r,onChange:o,placeholder:"12345678",paddingY:"24px",paddingX:"12px",inputMode:"numeric",border:"1px solid",borderColor:i?"red.500":"transparent",_focus:{borderColor:i?"red.500":void 0},_invalid:{borderColor:"red.500"},borderRadius:"s","aria-invalid":!!i||void 0,maxWidth:"15rem"})};function Pe(e){const t=e.toUpperCase().split("").map(e=>127397+e.charCodeAt(0));return String.fromCodePoint(...t)}a("W8Tb");const Ne=[{iso:"AF",name:"Afghanistan",code:"+93"},{iso:"AL",name:"Albania",code:"+355"},{iso:"DZ",name:"Algeria",code:"+213"},{iso:"AS",name:"American Samoa",code:"+1"},{iso:"AD",name:"Andorra",code:"+376"},{iso:"AO",name:"Angola",code:"+244"},{iso:"AI",name:"Anguilla",code:"+1"},{iso:"AG",name:"Antigua and Barbuda",code:"+1"},{iso:"AR",name:"Argentina",code:"+54"},{iso:"AM",name:"Armenia",code:"+374"},{iso:"AW",name:"Aruba",code:"+297"},{iso:"AU",name:"Australia",code:"+61"},{iso:"AT",name:"Austria",code:"+43"},{iso:"AZ",name:"Azerbaijan",code:"+994"},{iso:"BS",name:"Bahamas",code:"+1"},{iso:"BH",name:"Bahrain",code:"+973"},{iso:"BD",name:"Bangladesh",code:"+880"},{iso:"BB",name:"Barbados",code:"+1"},{iso:"BY",name:"Belarus",code:"+375"},{iso:"BE",name:"Belgium",code:"+32"},{iso:"BZ",name:"Belize",code:"+501"},{iso:"BJ",name:"Benin",code:"+229"},{iso:"BM",name:"Bermuda",code:"+1"},{iso:"BT",name:"Bhutan",code:"+975"},{iso:"BO",name:"Bolivia",code:"+591"},{iso:"BQ",name:"Bonaire, Sint Eustatius and Saba",code:"+599"},{iso:"BA",name:"Bosnia and Herzegovina",code:"+387"},{iso:"BW",name:"Botswana",code:"+267"},{iso:"BR",name:"Brazil",code:"+55"},{iso:"IO",name:"British Indian Ocean Territory",code:"+246"},{iso:"VG",name:"British Virgin Islands",code:"+1"},{iso:"BN",name:"Brunei",code:"+673"},{iso:"BG",name:"Bulgaria",code:"+359"},{iso:"BF",name:"Burkina Faso",code:"+226"},{iso:"BI",name:"Burundi",code:"+257"},{iso:"KH",name:"Cambodia",code:"+855"},{iso:"CM",name:"Cameroon",code:"+237"},{iso:"CA",name:"Canada",code:"+1"},{iso:"CV",name:"Cape Verde",code:"+238"},{iso:"KY",name:"Cayman Islands",code:"+1"},{iso:"CF",name:"Central African Republic",code:"+236"},{iso:"TD",name:"Chad",code:"+235"},{iso:"CL",name:"Chile",code:"+56"},{iso:"CN",name:"China",code:"+86"},{iso:"CX",name:"Christmas Island",code:"+61"},{iso:"CC",name:"Cocos (Keeling) Islands",code:"+61"},{iso:"CO",name:"Colombia",code:"+57"},{iso:"KM",name:"Comoros",code:"+269"},{iso:"CD",name:"Congo (DRC)",code:"+243"},{iso:"CG",name:"Congo (Republic)",code:"+242"},{iso:"CK",name:"Cook Islands",code:"+682"},{iso:"CR",name:"Costa Rica",code:"+506"},{iso:"CI",name:"Côte d’Ivoire",code:"+225"},{iso:"HR",name:"Croatia",code:"+385"},{iso:"CU",name:"Cuba",code:"+53"},{iso:"CW",name:"Curaçao",code:"+599"},{iso:"CY",name:"Cyprus",code:"+357"},{iso:"CZ",name:"Czechia",code:"+420"},{iso:"DK",name:"Denmark",code:"+45"},{iso:"DJ",name:"Djibouti",code:"+253"},{iso:"DM",name:"Dominica",code:"+1"},{iso:"DO",name:"Dominican Republic",code:"+1"},{iso:"EC",name:"Ecuador",code:"+593"},{iso:"EG",name:"Egypt",code:"+20"},{iso:"SV",name:"El Salvador",code:"+503"},{iso:"GQ",name:"Equatorial Guinea",code:"+240"},{iso:"ER",name:"Eritrea",code:"+291"},{iso:"EE",name:"Estonia",code:"+372"},{iso:"SZ",name:"Eswatini",code:"+268"},{iso:"ET",name:"Ethiopia",code:"+251"},{iso:"FK",name:"Falkland Islands",code:"+500"},{iso:"FO",name:"Faroe Islands",code:"+298"},{iso:"FJ",name:"Fiji",code:"+679"},{iso:"FI",name:"Finland",code:"+358"},{iso:"FR",name:"France",code:"+33"},{iso:"GF",name:"French Guiana",code:"+594"},{iso:"PF",name:"French Polynesia",code:"+689"},{iso:"GA",name:"Gabon",code:"+241"},{iso:"GM",name:"Gambia",code:"+220"},{iso:"GE",name:"Georgia",code:"+995"},{iso:"DE",name:"Germany",code:"+49"},{iso:"GH",name:"Ghana",code:"+233"},{iso:"GI",name:"Gibraltar",code:"+350"},{iso:"GR",name:"Greece",code:"+30"},{iso:"GL",name:"Greenland",code:"+299"},{iso:"GD",name:"Grenada",code:"+1"},{iso:"GP",name:"Guadeloupe",code:"+590"},{iso:"GU",name:"Guam",code:"+1"},{iso:"GT",name:"Guatemala",code:"+502"},{iso:"GG",name:"Guernsey",code:"+44"},{iso:"GN",name:"Guinea",code:"+224"},{iso:"GW",name:"Guinea-Bissau",code:"+245"},{iso:"GY",name:"Guyana",code:"+592"},{iso:"HT",name:"Haiti",code:"+509"},{iso:"HN",name:"Honduras",code:"+504"},{iso:"HK",name:"Hong Kong",code:"+852"},{iso:"HU",name:"Hungary",code:"+36"},{iso:"IS",name:"Iceland",code:"+354"},{iso:"IN",name:"India",code:"+91"},{iso:"ID",name:"Indonesia",code:"+62"},{iso:"IR",name:"Iran",code:"+98"},{iso:"IQ",name:"Iraq",code:"+964"},{iso:"IE",name:"Ireland",code:"+353"},{iso:"IM",name:"Isle of Man",code:"+44"},{iso:"IL",name:"Israel",code:"+972"},{iso:"IT",name:"Italy",code:"+39"},{iso:"JM",name:"Jamaica",code:"+1"},{iso:"JP",name:"Japan",code:"+81"},{iso:"JE",name:"Jersey",code:"+44"},{iso:"JO",name:"Jordan",code:"+962"},{iso:"KZ",name:"Kazakhstan",code:"+7"},{iso:"KE",name:"Kenya",code:"+254"},{iso:"KI",name:"Kiribati",code:"+686"},{iso:"KW",name:"Kuwait",code:"+965"},{iso:"KG",name:"Kyrgyzstan",code:"+996"},{iso:"LA",name:"Laos",code:"+856"},{iso:"LV",name:"Latvia",code:"+371"},{iso:"LB",name:"Lebanon",code:"+961"},{iso:"LS",name:"Lesotho",code:"+266"},{iso:"LR",name:"Liberia",code:"+231"},{iso:"LY",name:"Libya",code:"+218"},{iso:"LI",name:"Liechtenstein",code:"+423"},{iso:"LT",name:"Lithuania",code:"+370"},{iso:"LU",name:"Luxembourg",code:"+352"},{iso:"MO",name:"Macao",code:"+853"},{iso:"MG",name:"Madagascar",code:"+261"},{iso:"MW",name:"Malawi",code:"+265"},{iso:"MY",name:"Malaysia",code:"+60"},{iso:"MV",name:"Maldives",code:"+960"},{iso:"ML",name:"Mali",code:"+223"},{iso:"MT",name:"Malta",code:"+356"},{iso:"MH",name:"Marshall Islands",code:"+692"},{iso:"MQ",name:"Martinique",code:"+596"},{iso:"MR",name:"Mauritania",code:"+222"},{iso:"MU",name:"Mauritius",code:"+230"},{iso:"YT",name:"Mayotte",code:"+262"},{iso:"MX",name:"Mexico",code:"+52"},{iso:"FM",name:"Micronesia",code:"+691"},{iso:"MD",name:"Moldova",code:"+373"},{iso:"MC",name:"Monaco",code:"+377"},{iso:"MN",name:"Mongolia",code:"+976"},{iso:"ME",name:"Montenegro",code:"+382"},{iso:"MS",name:"Montserrat",code:"+1"},{iso:"MA",name:"Morocco",code:"+212"},{iso:"MZ",name:"Mozambique",code:"+258"},{iso:"MM",name:"Myanmar",code:"+95"},{iso:"NA",name:"Namibia",code:"+264"},{iso:"NR",name:"Nauru",code:"+674"},{iso:"NP",name:"Nepal",code:"+977"},{iso:"NL",name:"Netherlands",code:"+31"},{iso:"NC",name:"New Caledonia",code:"+687"},{iso:"NZ",name:"New Zealand",code:"+64"},{iso:"NI",name:"Nicaragua",code:"+505"},{iso:"NE",name:"Niger",code:"+227"},{iso:"NG",name:"Nigeria",code:"+234"},{iso:"NU",name:"Niue",code:"+683"},{iso:"NF",name:"Norfolk Island",code:"+672"},{iso:"KP",name:"North Korea",code:"+850"},{iso:"MK",name:"North Macedonia",code:"+389"},{iso:"MP",name:"Northern Mariana Islands",code:"+1"},{iso:"NO",name:"Norway",code:"+47"},{iso:"OM",name:"Oman",code:"+968"},{iso:"PK",name:"Pakistan",code:"+92"},{iso:"PW",name:"Palau",code:"+680"},{iso:"PS",name:"Palestine",code:"+970"},{iso:"PA",name:"Panama",code:"+507"},{iso:"PG",name:"Papua New Guinea",code:"+675"},{iso:"PY",name:"Paraguay",code:"+595"},{iso:"PE",name:"Peru",code:"+51"},{iso:"PH",name:"Philippines",code:"+63"},{iso:"PL",name:"Poland",code:"+48"},{iso:"PT",name:"Portugal",code:"+351"},{iso:"PR",name:"Puerto Rico",code:"+1"},{iso:"QA",name:"Qatar",code:"+974"},{iso:"RE",name:"Réunion",code:"+262"},{iso:"RO",name:"Romania",code:"+40"},{iso:"RU",name:"Russia",code:"+7"},{iso:"RW",name:"Rwanda",code:"+250"},{iso:"BL",name:"Saint Barthélemy",code:"+590"},{iso:"SH",name:"Saint Helena",code:"+290"},{iso:"KN",name:"Saint Kitts and Nevis",code:"+1"},{iso:"LC",name:"Saint Lucia",code:"+1"},{iso:"MF",name:"Saint Martin",code:"+590"},{iso:"PM",name:"Saint Pierre and Miquelon",code:"+508"},{iso:"VC",name:"Saint Vincent and the Grenadines",code:"+1"},{iso:"WS",name:"Samoa",code:"+685"},{iso:"SM",name:"San Marino",code:"+378"},{iso:"ST",name:"Sao Tome and Principe",code:"+239"},{iso:"SA",name:"Saudi Arabia",code:"+966"},{iso:"SN",name:"Senegal",code:"+221"},{iso:"RS",name:"Serbia",code:"+381"},{iso:"SC",name:"Seychelles",code:"+248"},{iso:"SL",name:"Sierra Leone",code:"+232"},{iso:"SG",name:"Singapore",code:"+65"},{iso:"SX",name:"Sint Maarten",code:"+1"},{iso:"SK",name:"Slovakia",code:"+421"},{iso:"SI",name:"Slovenia",code:"+386"},{iso:"SB",name:"Solomon Islands",code:"+677"},{iso:"SO",name:"Somalia",code:"+252"},{iso:"ZA",name:"South Africa",code:"+27"},{iso:"KR",name:"South Korea",code:"+82"},{iso:"SS",name:"South Sudan",code:"+211"},{iso:"ES",name:"Spain",code:"+34"},{iso:"LK",name:"Sri Lanka",code:"+94"},{iso:"SD",name:"Sudan",code:"+249"},{iso:"SR",name:"Suriname",code:"+597"},{iso:"SJ",name:"Svalbard and Jan Mayen",code:"+47"},{iso:"SE",name:"Sweden",code:"+46"},{iso:"CH",name:"Switzerland",code:"+41"},{iso:"SY",name:"Syria",code:"+963"},{iso:"TW",name:"Taiwan",code:"+886"},{iso:"TJ",name:"Tajikistan",code:"+992"},{iso:"TZ",name:"Tanzania",code:"+255"},{iso:"TH",name:"Thailand",code:"+66"},{iso:"TL",name:"Timor-Leste",code:"+670"},{iso:"TG",name:"Togo",code:"+228"},{iso:"TK",name:"Tokelau",code:"+690"},{iso:"TO",name:"Tonga",code:"+676"},{iso:"TT",name:"Trinidad and Tobago",code:"+1"},{iso:"TN",name:"Tunisia",code:"+216"},{iso:"TR",name:"Turkey",code:"+90"},{iso:"TM",name:"Turkmenistan",code:"+993"},{iso:"TC",name:"Turks and Caicos Islands",code:"+1"},{iso:"TV",name:"Tuvalu",code:"+688"},{iso:"UG",name:"Uganda",code:"+256"},{iso:"UA",name:"Ukraine",code:"+380"},{iso:"AE",name:"United Arab Emirates",code:"+971"},{iso:"GB",name:"United Kingdom",code:"+44"},{iso:"US",name:"United States",code:"+1"},{iso:"UY",name:"Uruguay",code:"+598"},{iso:"UZ",name:"Uzbekistan",code:"+998"},{iso:"VU",name:"Vanuatu",code:"+678"},{iso:"VA",name:"Vatican City",code:"+379"},{iso:"VE",name:"Venezuela",code:"+58"},{iso:"VN",name:"Vietnam",code:"+84"},{iso:"WF",name:"Wallis and Futuna",code:"+681"},{iso:"EH",name:"Western Sahara",code:"+212"},{iso:"YE",name:"Yemen",code:"+967"},{iso:"ZM",name:"Zambia",code:"+260"},{iso:"ZW",name:"Zimbabwe",code:"+263"}].map(({iso:e,code:t,name:a})=>({flag:Pe(e),code:t,iso:e,name:a})).sort((e,t)=>e.name.localeCompare(t.name));var Le=a("aVe6"),Te=a("ar4q"),Re=a.n(Te);const ze=Re().PhoneNumberUtil.getInstance(),De=(e,t)=>{const a=(e=>Le.Yj().trim().min(1,{message:"generic_error_required_field_web"}).refine(t=>{try{const a=ze.parse(t,e),n=ze.isValidNumber(a),i=ze.isValidNumberForRegion(a,e);return n&&i}catch(e){return!1}},{message:(0,p.AP)("errormessage_text_invalidphonenumber_web")}))(t).safeParse(e);if(a.success)return{isValid:!0};const n=a.error.issues[0];return{isValid:!1,error:(null==n?void 0:n.message)||(0,p.AP)("errormessage_text_invalidphonenumber_web")}},Me=(e,t)=>{try{const a=ze.parse(e,t);if(ze.isValidNumber(a))return ze.format(a,Re().PhoneNumberFormat.E164)}catch(e){}return null},He=({value:e,initialCountryCode:t,countryCode:a,error:i,handleSubmit:r,onChange:o,onCountryChange:s})=>{const l=(a||t||"FR").toUpperCase(),c=Ne.find(e=>e.iso===l),d=!!e&&((e,t)=>{const a=e.trim();if(0===a.length)return!1;const n=a.replace(/\D/g,"");if(n.length<4)return!0;try{const e=ze.parse(a,t),n=ze.isPossibleNumberWithReason(e);return n===Re().PhoneNumberUtil.ValidationResult.TOO_SHORT||n===Re().PhoneNumberUtil.ValidationResult.IS_POSSIBLE_LOCAL_ONLY}catch(e){return n.length<6}})(e,l),{isValid:m,error:p}=e?De(e,l):{isValid:!1,error:void 0},u=!e||m||d?(null==i?void 0:i.message)||void 0:p;return n.createElement(x.a,{as:"form",onSubmit:t=>{e&&m?r(t):t.preventDefault()},w:"full"},n.createElement(be.z,{spacing:2,alignItems:"flex-start"},n.createElement(Ce,{countryList:Ne,value:(null==c?void 0:c.code)||"+33",isInvalid:!!e&&!m&&!d||!!i,onChange:e=>{const t=Ne.find(t=>t.code===e);t&&s(t.iso)}}),n.createElement(x.a,{flex:1},n.createElement(Ie,{id:"phone-number",value:e,onChange:o,isInvalid:!!e&&!m&&!d||!!i}))),u?n.createElement(x.a,{mt:2,color:"red.500",fontSize:"sm"},u):null,n.createElement(ce.$n,{type:"submit",isDisabled:!e||!m,"data-testid":"activate-landing-cta",w:{base:"100%",md:"fit-content"},mt:"spacing.xl"},"texts"in{}?"":"Send link by SMS"))};var Fe,Be,Oe,je=a("hXd+");let Ue=(0,o.Ay)()(Fe=class extends n.Component{constructor(e){super(e),this.initialCountryCode=void 0,this._onCountryChange=e=>{this.setState({countryCode:e})},this._onPhoneNumberChange=e=>{this.setState({phoneNumber:e,error:void 0})},this._handleResendSmsLink=async()=>{const{partner:e,repository:t}=this.props;try{if(e&&this.state.countryCode){const a=Me(this.state.phoneNumber,this.state.countryCode)||this.state.phoneNumber;await t.validateSubscriptionBySms(a,e.id,e.legacyId,this.state.countryCode);const n={name:"LINK_RESENT",message:(0,p.AP)("generic_text_newlinksentviaSMS_web")};this._handleSuccess(n)}}catch(e){this._handleError(e)}},this._handleChangePhoneNumber=()=>{const{partner:e,history:t,location:a}=this.props;this.setState({phoneNumber:"",success:void 0,error:void 0});const n=(0,je.z)(a)?"?version=2":"",i=(0,ae.jd)(`${e.activationLink}${n}`),r=(0,ae.Ir)(i,["activationSent"]);t.push(r)},this._handleSubmit=async e=>{const{partner:t,repository:a,history:n,location:i}=this.props;e.preventDefault();try{if(t&&this.state.countryCode){const e=Me(this.state.phoneNumber,this.state.countryCode)||this.state.phoneNumber;await a.validateSubscriptionBySms(e,t.id,t.legacyId,this.state.countryCode);const r=(0,je.z)(i)?"?version=2":"";n.push((0,ae.jd)(`${t.activationLink}/sent_activation_link_success${r}`))}}catch(e){this._handleError(e)}},this.initialCountryCode=e.partner.countryCodes&&e.partner.countryCodes[0],this.state={phoneNumber:"",countryCode:this.initialCountryCode,success:void 0,error:void 0}}componentDidMount(){const e=this.props.location.pathname.split("/"),t="sent_activation_link_success"===e[e.length-1],a=new URLSearchParams(this.props.location.search),n="1"===a.get("activationSent")||"true"===a.get("activationSent");if(t||n){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}componentDidUpdate(e){const t=this.props.location.pathname.split("/"),a="sent_activation_link_success"===t[t.length-1],n=new URLSearchParams(this.props.location.search),i="1"===n.get("activationSent")||"true"===n.get("activationSent");if((e.location.pathname!==this.props.location.pathname||e.location.search!==this.props.location.search)&&(a||i)){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}render(){const{partner:e}=this.props,{phoneNumber:t,countryCode:a,success:i,error:r}=this.state,o=new URLSearchParams(this.props.location.search),s="1"===o.get("activationSent")||"true"===o.get("activationSent"),l=Boolean(i)||s;let c=e.texts.activate.title,d=e.texts.activate.subtitle;return l&&(c=(0,p.AP)("uajlandingpage_title_activationlinksent_web"),d=(0,p.AP)("uajlandingpage_text_clickonlinksentviaSMStocomplete_web",{sprintf:[t]})),n.createElement(he.A,{heading:c,subheading:d,partner:e,success:i,error:r,steps:[e.texts.activate.step_1,e.texts.activate.step_2,e.texts.activate.step_3],currentStep:l?2:1,progressLabel:l?"Check your messages":"Verify your identity with SMS",bannerTitle:l?void 0:"Verify your phone number",bannerText:l?void 0:`Use the phone number related to the subscription to ${e.brandName}.`,headingInlineSlot:l?n.createElement(x.a,{bg:"background.neutral.secondary.default",borderRadius:"xs",paddingX:"spacing.l",paddingY:"spacing.m",width:"100%"},n.createElement(be.z,{gap:"spacing.s",alignItems:"center"},Be||(Be=n.createElement(Ee._,{color:"green.500"})),n.createElement(R.E,{color:"text.neutral.secondary.default",fontSize:"sm"},"LINK_RESENT"===(null==i?void 0:i.name)?(null==i?void 0:i.message)||(0,p.AP)("generic_text_newlinksentviaSMS_web"):"generic_text_linksentviaSMS_web"))):void 0},l?n.createElement(x.a,null,Oe||(Oe=n.createElement(D.D,{variant:"heading.m",marginBottom:"spacing.l"},"Tu n’as pas reçu de lien ?")),n.createElement(x.a,{display:"flex",flexDirection:{base:"column",md:"row"},gap:"spacing.s",mt:"spacing.2xl"},n.createElement(ce.$n,{"data-testid":"activate-landing-success-resend-link",variant:"outline",w:{base:"100%",md:"fit-content"},onClick:()=>{this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"resend-link",eventaction:"click",eventcategory:"partner-activation",partner_name:e.activationLink.split("/")[2]}),this._handleResendSmsLink()}},(0,p.AP)("generic_action_resendSMS_web")),n.createElement(ce.$n,{"data-testid":"activate-landing-success-change-phone",variant:"ghost",w:{base:"100%",md:"fit-content"},onClick:()=>{this._handleChangePhoneNumber()}},(0,p.AP)("Changer le numéro de téléphone")))):n.createElement(He,{partner:e,initialCountryCode:this.initialCountryCode,countryCode:a,value:t,error:r,handleSubmit:this._handleSubmit,onChange:this._onPhoneNumberChange,onCountryChange:this._onCountryChange}))}_handleError(e){const{partner:t,history:a}=this.props;if(this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:e.name,eventaction:"onError",eventcategory:"partner-activation",partner_name:t.activationLink.split("/")[2]}),"SUBSCRIPTION_ALREADY_LINKED"===e.name){const n=re({errorName:e.name,partnerName:t.brandName});return void a.push(n)}let n={};t&&(n={sprintf:[t.brandName]});const i=Z(e.name,n,"msisdn");this.setState({error:{name:e.name,message:i}})}_handleSuccess(e){const t=Q[e.name];this.setState({error:void 0,success:{name:e.name,message:t}})}})||Fe;const Ge=(0,te.y)(Ue),We=({id:e,onChange:t,value:a,isInvalid:i=!1,type:r="text",inputMode:o,placeholder:s})=>{const l=(0,n.useCallback)(e=>{t(e.target.value)},[t]);return n.createElement(le.p,{id:e,placeholder:s,value:a,onChange:l,inputMode:o,type:r,border:"1px solid",borderColor:i?"red.500":"transparent",_focus:{borderColor:i?"red.500":"accent.main"},_invalid:{borderColor:"red.500"},borderRadius:"s"})};var Xe;class $e extends n.Component{constructor(...e){super(...e),this.state={code:"",error:void 0},this._handleCodeChange=e=>{this.setState({code:e.target.value})},this._handleSubmit=async e=>{const{partner:t,repository:a}=this.props,{code:n}=this.state;e.preventDefault();try{if(t&&n){const e=await a.validateSubscriptionByCode(n,t.id,t.legacyId);if(!e)return void this._handleError({name:"UNEXPECTED_ERROR",message:""});this._handleSuccess(e)}}catch(e){this._handleError(e)}}}render(){const{partner:e}=this.props,{code:t,error:a}=this.state,i=a,r=i&&i.message;return n.createElement(he.A,{heading:e.texts.activate.title,subheading:e.texts.activate.subtitle,partner:e,error:a,steps:[e.texts.activate.step_1,e.texts.activate.step_2],currentStep:1,progressLabel:"Verify your offer with code"},n.createElement(x.a,{marginBottom:"4",maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},w:{base:"100%",md:"auto"}},n.createElement("form",{onSubmit:this._handleSubmit},Xe||(Xe=n.createElement(x.a,{mb:"spacing.xs"},"Code")),n.createElement(We,{id:"partner-code",value:t,onChange:e=>this.setState({code:e,error:void 0}),inputMode:"text",type:"text",isInvalid:Boolean(i)}),r?n.createElement(x.a,{mt:"spacing.xs",color:"red.500",fontSize:"sm"},r):null,n.createElement(ce.$n,{"data-testid":"activate-landing-cta",type:"submit",disabled:Boolean(!t),w:{base:"100%",md:"fit-content"},mt:"spacing.xl"},e.texts.activate.input_cta))))}_handleError(e){const{partner:t,history:a}=this.props;if("SUBSCRIPTION_ALREADY_LINKED"===e.name){const n=re({errorName:e.name,partnerName:t.brandName});return void a.push(n)}let n={};t&&(n={sprintf:[t.brandName]});const i=Z(e.name,n,"code");this.setState({error:{name:e.name,message:i}})}_handleSuccess(e){window.location.replace(e)}}const Ve=(0,te.y)($e);var Ye,Ke;let qe=(0,o.Ay)()(Ye=class extends n.Component{constructor(...e){super(...e),this.state={email:"",success:void 0,error:void 0},this._handleEmailChange=e=>{this.setState({email:e.target.value})},this._handleChangeEmail=()=>{const{partner:e,history:t,location:a}=this.props;this.setState({email:"",success:void 0,error:void 0});const n=(0,je.z)(a)?"?version=2":"";t.push((0,ae.jd)(`${e.activationLink}${n}`))},this._handleSubmit=async e=>{const{partner:t,repository:a,history:n,location:i}=this.props;e.preventDefault();try{if(t&&this.state.email){await a.validateSubscriptionByEmail(this.state.email,t.id,t.legacyId);const e=(0,je.z)(i)?"?version=2":"";n.push((0,ae.jd)(`${t.activationLink}/sent_activation_link_success${e}`))}}catch(e){this._handleError(e)}}}componentDidMount(){const e=this.props.location.pathname.split("/");if("sent_activation_link_success"===e[e.length-1]){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}componentDidUpdate(e){const t=this.props.location.pathname.split("/"),a="sent_activation_link_success"===t[t.length-1];if(e.location.pathname!==this.props.location.pathname&&a){const e={name:"LINK_SENT",message:""};this._handleSuccess(e)}}render(){const{partner:e}=this.props,{email:t,success:a,error:i}=this.state,r=i,o=r&&r.message,s=Boolean(a);let l=e.texts.activate.title,c=e.texts.activate.subtitle;return s&&(l=(0,p.AP)("uajlandingpage_title_activationlinksent_web"),c=(0,p.AP)("uajlandingpage_text_clickonlinksentviaemailtocomplete_web",{sprintf:[t]})),n.createElement(he.A,{heading:l,subheading:c,partner:e,error:i,steps:[e.texts.activate.step_1,e.texts.activate.step_2,e.texts.activate.step_3],currentStep:s?2:1,progressLabel:s?"Check your messages":"Verify your identity with email"},s?n.createElement(n.Fragment,null,n.createElement(J,{"data-testid":"activate-landing-success-change-phone",onClick:()=>{this._handleChangeEmail()}},(0,p.AP)("generic_action_changeemailaddress_web"))):n.createElement(n.Fragment,null,n.createElement(x.a,{marginBottom:"4",maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},n.createElement("form",{onSubmit:this._handleSubmit},Ke||(Ke=n.createElement(x.a,{mb:"spacing.xs"},"Email")),n.createElement(We,{id:"email",value:t,onChange:e=>this.setState({email:e,error:void 0}),inputMode:"email",type:"email",isInvalid:Boolean(r)}),o?n.createElement(x.a,{mt:"spacing.xs",color:"red.500",fontSize:"sm"},o):null,n.createElement(ce.$n,{"data-testid":"activate-landing-cta",type:"submit",disabled:Boolean(!t),w:{base:"100%",md:"fit-content"},mt:"spacing.xl"},e.texts.activate.input_cta)))))}_handleError(e){const{partner:t,history:a}=this.props;if(this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:e.name,eventaction:"onError",eventcategory:"partner-activation",partner_name:t.activationLink.split("/")[2]}),"SUBSCRIPTION_ALREADY_LINKED"===e.name){const n=re({errorName:e.name,partnerName:t.brandName});return void a.push(n)}let n={};t&&(n={sprintf:[t.brandName]});const i=Z(e.name,n,"email");this.setState({error:{name:e.name,message:i}})}_handleSuccess(e){const t=Q[e.name];this.setState({error:void 0,success:{name:e.name,message:t}})}})||Ye;const Ze=(0,te.y)(qe);var Qe,Je,et,tt,at,nt,it,rt,ot,st,lt;const ct=(0,o.Ay)(({match:e})=>({partner_name:e.params.slug}),{dispatchOnMount:!0})(Qe=class extends n.Component{constructor(e){super(e),this.slug=void 0,this.api=void 0,this.repository=void 0,this.isComponentMounted=void 0,this.slug=this.props.match.params.slug,this.api=new m.A,this.repository=new d.A(this.api),this.isComponentMounted=!1,this.state={partner:void 0,isFetching:!1}}async componentDidMount(){this.isComponentMounted=!0;try{this._handleFetchStart();const e=await this.repository.findOneBySlug(this.slug);this._handleFetchEnd(),this._handlePartner(e)}catch(e){this._handleFetchEnd()}}componentWillUnmount(){this.isComponentMounted=!1}render(){const{partner:e,isFetching:t}=this.state;if(t||!e)return Je||(Je=n.createElement(l.A,null));const a=(0,je.z)(this.props.location),i=r()(e,"activationTypes.0");if("msisdn"===i)return a?n.createElement(n.Fragment,null,et||(et=n.createElement(s.sA,null)),n.createElement(Ge,{partner:e,repository:this.repository}),tt||(tt=n.createElement(c.A,null))):n.createElement(n.Fragment,null,at||(at=n.createElement(s.Qr,null)),n.createElement(se,{partner:e,repository:this.repository}));if("code"===i)return a?n.createElement(n.Fragment,null,nt||(nt=n.createElement(s.sA,null)),n.createElement(Ve,{partner:e,repository:this.repository}),it||(it=n.createElement(c.A,null))):n.createElement(n.Fragment,null,rt||(rt=n.createElement(s.Qr,null)),n.createElement(me,{partner:e,repository:this.repository}));if("email"===i)return a?n.createElement(n.Fragment,null,ot||(ot=n.createElement(s.sA,null)),n.createElement(Ze,{partner:e,repository:this.repository}),st||(st=n.createElement(c.A,null))):n.createElement(n.Fragment,null,lt||(lt=n.createElement(s.Qr,null)),n.createElement(ge,{partner:e,repository:this.repository}));throw new Error(`The partner uses an unsupported activation type - only "code", "msisdn" and "email" are supported - "${i}" was supplied`)}_handleFetchEnd(){this.isComponentMounted&&this.setState({isFetching:!1})}_handlePartner(e){this.isComponentMounted&&this.setState({partner:e})}_handleFetchStart(){this.isComponentMounted&&this.setState({isFetching:!0})}})||Qe},"hXd+":(e,t,a)=>{function n(e){try{var t;return e.search?"2"===new URLSearchParams(e.search).get("version"):!(null===(t=e.query)||void 0===t||!t.version)&&"2"===e.query.version}catch{return!1}}a.d(t,{z:()=>n}),a("gS5K")},lely:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J}),a("/eM8");var n=a("q1tI"),i=a("TRpf"),r=a("5pmF"),o=a("r2ys"),s=a("Zah6"),l=a("FSqQ"),c=a("nrKQ");let d=function(e){return e.Premium="premium",e.PremiumXFamily="premium x family",e.Family="family",e}({});const m_getGiftPageData=e=>new Promise((t,a)=>{c.A.call({method:"redeem.getGiftPageData",data:{SLUG:e},success:e=>{t(e)},error:e=>{a(e)}})}),m_checkCodeValidity=e=>new Promise((t,a)=>{c.A.call({method:"premium_checkCodeValidity",data:{CODE:e},success:e=>{t(e)},error:e=>{const t=e.payload.GIFT_CODE_ERROR;a(t)}})}),m_redeemGiftCode=e=>new Promise((t,a)=>{c.A.call({method:"gift_redeemCode",data:{CODE:e},success:e=>{t(e)},error:e=>{a(e)}})});var p=a("TDRX"),u=a("y7xR"),g=a("Wp0Y"),h=a("pVdW");const b={premium:{name:(0,g.AP)("deezerplans_title_deezerpremium_web"),headline:[n.createElement("p",{key:0},(0,g.AP)("Sans engagement."))],content:[n.createElement(h.E,{key:0},(0,g.AP)("fnacdartylandingpage_text_listenadfreedwnldfavoriteslistenoffline_web")),n.createElement(h.E,{key:1},(0,g.AP)("fnacdartylandingpage_text_overXmilliontrackspodcastsliveradioalldevices_web",{sprintf:[73],count:73}))]},family:{name:(0,g.AP)("deezerplans_title_deezerfamily_web"),headline:[n.createElement("p",{key:0},(0,g.AP)("Sans engagement."))],content:[n.createElement(h.E,{key:0},(0,g.AP)("newofferscardsusp_text_musicforeveryone_web")),n.createElement(h.E,{key:1},(0,g.AP)("newofferscardsusp_text_getXaccountsallbenefitsofXplan_web",{sprintf:[6,(0,g.AP)("deezerplans_title_deezerpremium_web")],count:6,offername:(0,g.AP)("deezerplans_title_deezerpremium_web")})),n.createElement(h.E,{key:2},(0,g.AP)("newofferscardsusp_text_listenmultipledevices_web"))]}},E=({offerType:e})=>n.createElement(p.a,{maxWidth:{base:"100%",md:"255px"},marginLeft:{base:0,md:"16"},marginTop:{base:8,md:0}},n.createElement(p.a,{alignItems:"center",borderRadius:"md",color:"white",display:"flex",fontSize:"xl",fontWeight:"700",justifyContent:"center",lineHeight:6,marginBottom:"spacing.2xl",maxWidth:"180px",paddingY:"spacing.m",paddingX:"spacing.l",background:"premium"===e?"linear-gradient(69.06deg, #B84FDD -26.76%, #4965F4 44.6%, #2EFB74 132.54%)":"linear-gradient(246.32deg, #FF3737 -47.6%, #FF5D31 9.71%, #FF842A 67.97%, #FAFE3A 126.23%)"},b[e].name),n.createElement(u.D,{color:"darkGrey.900",fontSize:"xl",marginBottom:"spacing.l"},b[e].headline),n.createElement(h.E,{color:"lightGrey.900",fontSize:"md"},b[e].content));var f,_;const v=()=>n.createElement(p.a,{alignItems:"center",backgroundColor:"border.accent.onContent.default",display:"flex",justifyContent:"center",paddingY:{base:"spacing.2xl",md:24},paddingX:{base:"spacing.2xl",md:0},flexDirection:{base:"column",md:"row"},marginBottom:{base:0,md:"auto"}},n.createElement(u.D,{fontSize:"4xl",maxWidth:{base:"none",md:"500px"},marginBottom:{base:"spacing.3xl",md:0},minWidth:{base:0,md:"auto"},paddingTop:{base:"spacing.2xl",md:0},width:{base:"100%",md:"auto"},dangerouslySetInnerHTML:{__html:(0,g.AP)("fnacdartylandingpage_title_planXorplanYchoose_web",{sprintf:[(0,g.AP)("deezerplans_title_deezerpremium_web"),(0,g.AP)("deezerplans_title_deezerfamily_web")]})}}),n.createElement(p.a,{marginLeft:{base:0,md:"spacing.3xl"},paddingBottom:{base:"spacing.2xl",md:0}},n.createElement(p.a,{display:"flex",flexDirection:{base:"column",md:"row"}},n.createElement(p.a,{maxWidth:{base:"100%",md:"255px"}},f||(f=n.createElement(E,{offerType:"premium"}))),n.createElement(p.a,{marginLeft:{base:0,md:16},marginTop:{base:"spacing.2xl",md:0},maxWidth:{base:"100%",md:"255px"}},_||(_=n.createElement(E,{offerType:"family"}))))));a("aRRr");const y="Deezer Premium",x={premium:{label:"Premium",illustration:"@deezer/images/unlogged/redeem/deezer-premium-illustration.png",blocks:[{label:(0,g.AP)("deezerpremiumlandingpage_title_playondemand_web"),description:n.createElement(n.Fragment,null,n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_millionstrackpodcastradioandmore_web")}}),n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_adfreeskipcraftowncollection_web")}}))},{label:(0,g.AP)("specialofferlandingpage_subtitle_offlinelistening_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_dwnldfavmusicpodcastsanytmeanywh_web")}})},{label:(0,g.AP)("deezerpremiumlandingpage_title_meetyourmusicmatchmaker_web"),description:n.createElement(n.Fragment,null,n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_youlistenyoulovewelearn_web")}}),n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_mostpersonalizedreco_web")}}))},{label:(0,g.AP)("deezerpremiumlandingpage_title_tuneintoyourfavoritehosts_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_evergrowcatalogdedicatedshowstab_web")}})},{label:(0,g.AP)("deezerpremiumlandingpage_title_neverstopdiscovering_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerpremiumlandingpage_text_identifysongsaveasfavddtoplaylst_web")}})},{label:(0,g.AP)("deezerpremiumlandingpage_title_syncupyourlife_web"),description:n.createElement(n.Fragment,null,n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerfamilylandingpage_text_switchbetweendevicesorsync_web")}}),n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerfamilylandingpage_text_connectsmartwatchorcarsystem_web")}}))}]},hifi:{label:"Hifi",illustration:"@deezer/images/unlogged/redeem/deezer-hifi-illustration.png",blocks:[{label:(0,g.AP)("generic_title_planXbenefits_web",{sprintf:[y]}),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("sonyredeemcodepage_text_playanytrackanytimenoadsoffline_web")}})},{label:(0,g.AP)("generic_title_highfidelitysound_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerhifilandingpage_text_listenflacmusicinhifisound_web")}})},{label:(0,g.AP)("deezerfamilylandingpage_title_crossdevicelistening_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerhifilandingpage_text_streamflacmusicaccrossalldevices_web")}})},{label:(0,g.AP)("generic_title_millionofflactracks_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("sonyredeemcodepage_text_expansivecatalogflactracks_web")}})},{label:(0,g.AP)("generic_title_highendsoundsystemcompatibility_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("sonyredeemcodepage_text_enjoycristalclearmusic_web")}})},{label:(0,g.AP)("generic_title_deluxemusicexperience_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("sonyredeemcodepage_text_excluaccess360rawith360bydeezer_web")}})}]},family:{label:"Family",illustration:"@deezer/images/unlogged/redeem/deezer-family-illustration.png",blocks:[{label:(0,g.WI)("deezerfamilylandingpage_title_Xindividualprofiles_web","deezerfamilylandingpage_title_Xindividualprofiles_web",{sprintf:["6"],count:6}),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.WI)("deezerfamilylandingpage_text_getXindivprofilesfamilymusicplan_web","deezerfamilylandingpage_text_getXindivprofilesfamilymusicplan_web",{sprintf:["6"],count:6})}})},{label:(0,g.AP)("yearlyoffer_action_saveonplanX_web",{sprintf:[y]}),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerfamilylandingpage_text_playforwholefamilypriceof2planX_web",{sprintf:[y]})}})},{label:(0,g.AP)("deezerfamilylandingpage_title_kidprofiles_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerfamilylandingpage_text_keepcontrolkidfriendlycontent_web",{sprintf:["Deezer Family"]})}})},{label:(0,g.AP)("generic_title_planXbenefits_web",{sprintf:[y]}),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.AP)("deezerfamilylandingpage_text_listenwithoutlimits_web",{sprintf:[y]})}})},{label:(0,g.AP)("deezerfamilylandingpage_title_crossdevicelistening_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.WI)("deezerfamilylandingpage_text_connectuptoXdevices_web","deezerfamilylandingpage_text_connectuptoXdevices_web",{sprintf:["13"],count:13})}})},{label:(0,g.AP)("deezerfamilylandingpage_title_tailormadefeatures_web"),description:n.createElement(h.E,{dangerouslySetInnerHTML:{__html:(0,g.WI)("deezerfamilylandingpage_text_enjoysongcatcherflowlyricsv2_web","deezerfamilylandingpage_text_enjoysongcatcherflowlyricsv2_web",{sprintf:["6"],count:6})}})}]}};var k=a("u37T"),A=a("siwx");const S={premium:{desktop:a.p+"images/unlogged/redeem/deezer-premium-illustration.43a79f40a2d9f43a82fd.png",mobile:a.p+"images/unlogged/redeem/deezer-premium-illustration-mobile.0060a50c26ba48492815.png"},family:{desktop:a.p+"images/unlogged/redeem/deezer-family-illustration.bbc752d3e936cfd3466d.png",mobile:a.p+"images/unlogged/redeem/deezer-family-illustration-mobile.5684e8387393db06dfe4.png"},hifi:{desktop:a.p+"images/unlogged/redeem/deezer-hifi-illustration.06dd9f25c629fd2675ea.png",mobile:a.p+"images/unlogged/redeem/deezer-hifi-illustration-mobile.16b40f9d4531d4b268e4.png"}},w=({id:e,offerType:t})=>{const a=x[t],i=(0,k.A)({base:S[t].mobile,sm:S[t].desktop});return a?n.createElement(p.a,{display:"flex",flexDirection:{base:"column-reverse",sm:"row"},marginBottom:{base:0,sm:24},paddingTop:{base:"spacing.2xl",sm:36},id:e},n.createElement(A._,{objectFit:"cover",backgroundColor:"white",src:i,height:{base:"340px",sm:"300px"},marginTop:{base:0,sm:"spacing.3xl"},marginBottom:{base:"spacing.2xl",sm:0},minWidth:{base:0,sm:"550px"},width:{base:"100%",sm:"550px"}}),n.createElement(p.a,{marginLeft:{base:0,sm:"spacing.3xl"},padding:{base:"spacing.2xl",sm:0}},n.createElement(u.D,{fontSize:{base:"5xl",sm:"6xl"},marginBottom:{base:"spacing.3xl",sm:16},maxWidth:{base:"none",sm:"500px"},minWidth:{base:0,sm:"auto"},width:{base:"100%",sm:"auto"}},(0,g.AP)("generic_title_whychooseplanX_web",{sprintf:[`Deezer ${a.label}`]})),n.createElement(p.a,{display:{base:"block",sm:"flex"},flexWrap:"wrap"},a.blocks.map(({label:e,description:t})=>n.createElement(p.a,{key:e,flex:{base:"1",sm:"1 0 30%"},marginBottom:"spacing.2xl",marginRight:{base:0,sm:16},maxWidth:{base:"none",sm:"300px"},width:{base:"100%",sm:"auto"}},n.createElement(u.D,{fontSize:"xl",marginBottom:"spacing.l"},e),n.createElement(h.E,null,t)))))):null};var C=a("ej6z"),I=a("LSdk");const P=({brandName:e,logoUrl:t})=>n.createElement(p.a,{display:"flex",marginBottom:{base:"spacing.3xl",md:16}},n.createElement(p.a,{alignItems:"center",display:"flex",paddingRight:"spacing.l",paddingLeft:0},n.createElement(C.N,{href:"/","data-testid":"deezer-logo"},n.createElement(I.T,{height:{base:6,md:8}}))),t?n.createElement(p.a,{alignItems:"center",display:"flex",paddingLeft:"spacing.l",paddingRight:0,borderLeft:"1px solid black"},n.createElement(A._,{height:{base:8,md:12},alt:e,src:t,"data-testid":"partner-logo"})):null);var N=a("Qyje"),L=a.n(N),T=a("XkdG"),R=a("HmE0"),z=a("yiM3");const D=({placeholder:e,redirectPage:t,userLanguage:a})=>{const[i,r]=(0,n.useState)(),[o,s]=(0,n.useState)(""),l=(0,n.useCallback)(async e=>{try{await m_checkCodeValidity(e)}catch(e){r(e)}try{const t=await m_redeemGiftCode(e);window.location.assign(t.REDIRECT_URL)}catch(e){const n=e;if("USER_NOT_LOGGED"===n.name){const e=`${window.location.href.split(/[?#]/)[0]}?autoSubmit=true&code=${o}`,n=(e=>{if(e&&e.length>=2){const t=e.substring(0,2).toLowerCase();return console.log("[Redeem] Using Redux language:",t),t}return console.log("[Redeem] Redux language not available, defaulting to en"),"en"})(a);console.log("[Redeem] Redirecting to auth page with locale:",n);const i=(0,z.t)({route:"signup"===t?"register":"login",redirect:e,query:{template:"activation_journey"},locale:n});return console.log("[Redeem] Auth URL generated:",i),void window.location.replace(i)}const i=n.response.error[n.name];r(i)}},[o,t,a]);return(0,n.useEffect)(()=>{const{autoSubmit:e,code:t}=L().parse(window.location.search,{ignoreQueryPrefix:!0});t&&s(t),e&&l(t)},[l]),n.createElement(n.Fragment,null,n.createElement(p.a,{maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},n.createElement("form",{onSubmit:e=>{e.preventDefault(),l(o)}},n.createElement(T.p,{placeholder:e,_placeholder:{fontSize:"sm"},value:o,onChange:e=>{s(e.target.value)},mb:{base:"spacing.m",md:0},"data-testid":"redeem-textfield"}),n.createElement(R.$n,{type:"submit",fontSize:"xs",paddingX:"spacing.l",paddingY:"spacing.s",height:{base:10,md:8},minHeight:{base:10,md:8},maxHeight:{base:10,md:8},textTransform:"uppercase",position:{base:"initial",md:"absolute"},right:2,top:"50%",transform:{base:"none",md:"translateY(-50%)"},w:{base:"full",md:"auto"},zIndex:"overlay","data-testid":"redeem-submit-button"},(0,g.AP)("Valider mon code")))),n.createElement(p.a,{maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},position:"relative",w:{base:"100%",md:"auto"}},i?n.createElement(p.a,{borderRadius:"4px",marginY:"spacing.l",padding:"spacing.l spacing.xl",backgroundColor:"background.accent.onDark.default",color:"text.feedback.error.default",width:"100%","data-testid":"error-container"},i):null))};var M=a("Vd8Q");function H(e){return`https://${M.default.get("host_img_url_ssl")}/${e}`}var F,B,O,j=a("yCtO");const U=({data:e,whyChooseId:t,userLanguage:a})=>n.createElement(p.a,{display:"flex",marginLeft:"auto",marginRight:"auto",minHeight:{base:"none",md:"800px"},width:"100%",flexDirection:{base:"column",md:"row"},height:{base:"auto",md:"800px"},marginBottom:{base:"spacing.2xl",md:0}},n.createElement(p.a,{display:"flex",flex:"1",flexDirection:"column",height:"100%",justifyContent:"space-between",margin:"0 auto",minHeight:"800px",marginLeft:{base:0,sm:36,md:36,lg:"250px"},marginRight:{base:0,sm:24,md:24,lg:24},maxWidth:{base:"none",sm:"none",md:"none",lg:"none"},minWidth:{base:0,sm:"450px"},paddingX:"spacing.2xl",paddingY:"spacing.3xl",width:{base:"100%",sm:"100%",md:"100%",lg:"100%"}},n.createElement(p.a,{maxWidth:"600px"},n.createElement(P,{brandName:e.partnerName,logoUrl:H(e.partnerLogo)}),n.createElement(u.D,{fontSize:{base:"4xl",md:"6xl"},marginBottom:"spacing.2xl","data-testid":"redeem-header"},e.mainTitle),n.createElement(h.E,{fontSize:"lg",marginBottom:"spacing.2xl","data-testid":"redeem-heading-text"},e.subtitle),n.createElement(D,{placeholder:e.placeholderText,redirectPage:e.redirectPage,userLanguage:a}),F||(F=n.createElement(p.a,{height:"1px",marginY:"spacing.m",width:"100%"})),n.createElement(h.E,{fontSize:"xs",dangerouslySetInnerHTML:{__html:e.codeHelperText.replace(/<a/g,'<a style="color: #a238ff;"')}}),B||(B=n.createElement(p.a,{height:"1px",marginY:"spacing.m",width:"100%"})),n.createElement(h.E,{fontSize:"xs",dangerouslySetInnerHTML:{__html:e.helpContactText.replace(/<a/g,'<a style="color: #a238ff;"')}})),e.offerType===d.PremiumXFamily?null:n.createElement(p.a,{as:"a",display:{base:"none",md:"flex"},alignItems:"center",marginBottom:"spacing.2xl",marginTop:"spacing.l",href:`#${t}`,"data-testid":"why-choose-section"},O||(O=n.createElement(p.a,{display:"inline",marginRight:"spacing.m"},n.createElement(j.e,null))),n.createElement(h.E,{fontSize:"xs"},function(e){const t=x[e];return(0,g.AP)("generic_title_whychooseplanX_web",{sprintf:[`Deezer ${t.label}`]})}(e.offerType)))),n.createElement(A._,{src:H(e.backgroundImage),alt:`${e.partnerName}-illustration`,backgroundColor:"white",maxWidth:{base:"none",md:"600px"},minHeight:{base:"300px",md:"800px"},minWidth:{base:0,md:"400px"},objectFit:"cover",height:{base:"100%",md:"auto"},maxHeight:{base:"600px",md:"none"},width:{base:"100%",md:"auto"}})),G=({partnerName:e,bannerBg:t,redirectTo:a,country:i})=>t?n.createElement(C.N,{href:a},n.createElement(p.a,{as:"img",src:H(t),alt:`${e}-promotional-banner`,mb:24,maxH:"750px",maxW:"100%",minW:"100%",objectFit:"cover",display:{base:"none",md:"block"}})):n.createElement(p.a,{bgImage:`url("@deezer/images/unlogged/redeem/${i}/player.jpg")`,bgPos:"center",bgRepeat:"no-repeat",bgSize:"contain",h:{base:"270px",md:"370px",lg:"490px",xl:"704px"},mb:24}),W=({title:e,placeholder:t,redirectPage:a,userLanguage:i})=>n.createElement(p.a,{display:"flex",flexDir:"column",alignItems:"center",justifyContent:"center",mb:{base:"spacing.2xl",md:24},mt:{base:"spacing.2xl",md:24},textAlign:"center",p:{base:"spacing.2xl",md:0}},n.createElement(u.D,{fontSize:{base:"3xl",md:"4xl"},mb:{base:"spacing.2xl",md:16},maxW:{base:"none",md:"550px"},minW:{base:0,md:"400px"},w:"100%"},e),n.createElement(D,{placeholder:t,redirectPage:a,userLanguage:i})),X=({termsAndConditions:e})=>e?n.createElement(p.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:{base:"spacing.2xl",md:"spacing.3xl"},textAlign:"center",backgroundColor:"lightGrey.50",width:"100%"},n.createElement(h.E,{color:"lightGrey.900",fontSize:"sm",lineHeight:"18px",maxWidth:"650px",minWidth:{base:0,md:"400px"},width:"100%"},e)):null;var $,V,Y,K,q,Z=a("E6Gc");const Q="why-choose-section",J=(0,i.Ng)(e=>({userCountry:e.user.COUNTRY,userLanguage:e.user.SETTING_LANG}))(e=>{const[t,a]=(0,n.useState)();(0,Z.lI)("light");const i=e.match.params.slug,c=e.userCountry,u=e.userLanguage;return(0,n.useEffect)(()=>{(async()=>{const e=await m_getGiftPageData(i);a(e)})()},[i]),t?n.createElement(p.a,{bg:"white",fontSize:"sm",w:"100%"},n.createElement(U,{data:t,whyChooseId:Q,userLanguage:u}),t.offerType===d.PremiumXFamily?V||(V=n.createElement(v,null)):n.createElement(w,{id:Q,offerType:t.offerType}),n.createElement(G,{partnerName:t.partnerName,bannerBg:t.partnershipImage,redirectTo:t.backgroundUrl,country:c}),n.createElement(W,{title:t.subtitle,placeholder:t.placeholderText,redirectPage:t.redirectPage,userLanguage:u}),n.createElement(X,{termsAndConditions:t.termsAndConditions}),Y||(Y=n.createElement(r.A,null)),K||(K=n.createElement(o.A,null)),q||(q=n.createElement(s.A,null))):$||($=n.createElement(l.A,null))})},m90r:(e,t,a)=>{a.d(t,{Eb:()=>i,PB:()=>o,sb:()=>r}),a("WpbS");var n=a("nrKQ");function i(){return n.A.callAsync({method:"payment_getPlanCatalog"})}let r=function(e){return e[e.Premium=1]="Premium",e[e.PremiumWithHifi=1000001]="PremiumWithHifi",e[e.DuoWithHifi=1000002]="DuoWithHifi",e[e.Family=100001]="Family",e[e.FamilyWithHifi=1000006]="FamilyWithHifi",e}({});function o(e,t){return e.reduce((e,a)=>{var n,i;if(null===(n=a.subscription_period_collection.initial)||void 0===n||!n.price_by_month||t&&!t.includes(a.offer_id))return e;const r=function(e){var t;const a=e.subscription_period_collection.try_and_buy;let n=0;switch(null==a?void 0:a.duration_type){case"D":break;case"Y":n=12*a.duration;break;default:n=null!==(t=null==a?void 0:a.duration)&&void 0!==t?t:0}return n}(a);return(null!==(i=null==e?void 0:e.freeMonths)&&void 0!==i?i:0<r)?{offer:a,freeMonths:r}:e},{offer:void 0,freeMonths:void 0})}},miiT:(e,t,a)=>{a.d(t,{A:()=>o});var n=a("+9dH"),i=a("pVdW"),r=a("q1tI");const o=({children:e,...t})=>r.createElement(i.E,(0,n.A)({as:"h2",fontSize:{base:"md",md:"lg"},marginBottom:8,"data-testid":"activate-landing-subheader"},t),e)},nRPM:(e,t,a)=>{e.exports=a.p+"images/unlogged/activate/default-background-image.b6d734fa19525c8605cf.png"},oqWs:(e,t,a)=>{a.d(t,{A:()=>c});var n=a("+9dH"),i=a("TDRX"),r=a("CdHq"),o=a("siwx"),s=a("q1tI"),l=a("nRPM");const c=({children:e,...t})=>s.createElement(i.a,(0,n.A)({backgroundColor:"white",minHeight:"730px",position:"relative"},t),s.createElement(o._,{src:l,position:"absolute",top:"0",right:"0",objectFit:"contain",display:{base:"none",md:"block"}}),s.createElement(r.s,{direction:{base:"column",md:"row"},justifyContent:"center",alignItems:"center",padding:{base:"80px 20px",md:"40px 15px"},boxSizing:"border-box",margin:"0 auto",position:"relative",zIndex:"2",width:{base:"100%",md:"780px",lg:"1050px",xl:"1270px"}},s.createElement(i.a,{margin:"0 auto",maxWidth:"100%",marginRight:{base:0,md:"400px"}},e)))},r2ys:(e,t,a)=>{a.d(t,{A:()=>o});var n=a("q1tI"),i=a("uHHB"),r=a("vGT4");const o=()=>{const{state:e}=(0,r.b)(),t=(e=>null==e?void 0:e.settings)(e);return(0,n.useEffect)(()=>{const{consentString:e,statistics:a=0,targetedAdvertising:n=0}=t||{};window.sas&&window.sas.cmd.push(()=>{window.sas.setGdprConsentData(e)}),(0,i.A)("consentStatistics",a.toString(),100),(0,i.A)("consentMarketing",n.toString(),100)},[t]),null}},rmGu:(e,t,a)=>{a.r(t),a.d(t,{LinkPage:()=>q,default:()=>Z}),a("/eM8"),a("gS5K");var n,i,r,o=a("q1tI"),s=a("X6oL"),l=a("Ty5D"),c=a("Wp0Y"),d=a("FSqQ"),m=a("oqWs"),p=a("Cl2C"),u=a("Rm4k"),g=a("y+AQ"),h=a("BUPU"),b=a("r2ys"),E=a("5pmF"),f=a("Zah6"),_=(a("gkSg"),a("f4Bz"),a("6XPn")),v=a("D0rv"),y=a("iooo"),x=a("E6Gc"),k=a("TDRX"),A=a("siwx"),S=a("mmFw"),w=a("pVdW"),C=a("wZBD"),I=a("HmE0"),P=a("pmZX"),N=a("TRpf"),L=a("xobL"),T=a("RYij"),R=a("7cH/"),z=a("g2yj");const D=({partner:e,ctaHref:t,onCtaClick:a})=>{const s=(0,N.d4)(e=>e.user),l=(0,L.Mn)(s)||"",d=(0,L.hS)(s)||"",m=(0,L.Ck)(s)||"",p=(0,c.AP)("uajcongrats_title_yourofferXisnowactivated_web",{sprintf:[e.brandName]}),u=e.partnerLogos[e.PARTNER_LOGO_THEME_LIGHT][e.PARTNER_LOGO_DEFAULT_SIZE];return o.createElement(o.Fragment,null,o.createElement(T.A,{heading:p,centerHeading:!0,subheading:"",partner:e,steps:[(null==e?void 0:e.texts.activate.step_1)||"",(null==e?void 0:e.texts.activate.step_2)||"",(null==e?void 0:e.texts.activate.step_3)||"",null==e?void 0:e.texts.activate.step_4],currentStep:4,hideStepper:!0,progressLabel:"Activation confirmed"},o.createElement(k.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.2xl"},o.createElement(A._,{src:R,alt:"generic_text_success_web",objectFit:"contain",width:{base:"174px",md:"217px"},height:{base:"96px",md:"120px"}}))),o.createElement(k.a,{position:"relative",top:{base:"-8px",md:"-16px"},left:"0",width:"100%",zIndex:"1",color:"background.neutral.primary.default"},n||(n=o.createElement(z.A,null))),o.createElement(k.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.2xl",maxWidth:"35rem",marginX:"auto",paddingTop:"spacing.2xl",paddingBottom:"spacing.3xl",paddingX:"spacing.l"},o.createElement(k.a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"spacing.s",width:"100%"},o.createElement(k.a,{width:"100%",maxWidth:"28rem",display:"flex",alignItems:"center",gap:"spacing.m",bg:"background.neutral.secondary.default",borderRadius:"xs",paddingX:"spacing.l",paddingY:"spacing.m"},o.createElement(S.e,{size:"size.l",variant:"neutral",name:l}),o.createElement(k.a,{display:"flex",flexDirection:"column",gap:"spacing.s"},o.createElement(k.a,{display:"flex",flexDirection:"column"},o.createElement(w.E,{color:"text.neutral.primary.default",fontWeight:700},`Logged as ${l}`),o.createElement(w.E,{color:"text.neutral.secondary.default",fontSize:"sm"},d)),o.createElement(k.a,{display:"flex",alignItems:"center",gap:"spacing.s"},o.createElement(C.J,{display:"inline-flex",alignItems:"center",gap:"spacing.xs",bg:"background.accent.primary.default",borderRadius:"xs",paddingX:"spacing.xs",paddingY:"spacing.2xs",paddingLeft:"spacing.s"},i||(i=o.createElement(P.h,{color:"icon.accent.onDark.default",size:"small"})),o.createElement(k.a,{fontWeight:600,color:"text.accent.onDark.default",fontSize:"xs"},m||"Premium")),o.createElement(A._,{src:u,alt:e.brandName,height:"1.25rem",objectFit:"contain"}))))),r||(r=o.createElement(w.E,{color:"text.neutral.secondary.default",textAlign:"center"},"Unlimited music is waiting for you: download the Deezer app and start streaming!")),o.createElement(I.$n,{as:"a",href:t,marginTop:"spacing.s",onClick:a},(0,c.AP)("generic_action_listennow_web"))))};var M,H,F,B,O,j,U,G,W,X,$,V,Y=a("hXd+"),K=a("fyOZ");let q=(0,s.Ay)(({match:e})=>({partner_name:e.params.slug}),{dispatchOnMount:!0})(M=class extends o.Component{constructor(e){super(e),this.slug=void 0,this.token=void 0,this.api=void 0,this.repository=void 0,this.slug=this.props.match.params.slug,this.token=this.props.location.query.token,this.api=new v.A,this.repository=new _.A(this.api),this.state={partner:void 0,error:void 0,isFetching:!1,linked:!1}}async componentDidMount(){try{this._handleFetchStart();const e=await this.repository.findOneBySlug(this.slug);this._handleFetchEnd(),this._handlePartner(e);const t=await this.repository.linkSubscriber(this.token,e.legacyId);this._handleLinkSubscriber(t)}catch(e){this._handleError(e),this._handleFetchEnd()}}render(){const{partner:e,error:t,isFetching:a,linked:n}=this.state;if(a)return H||(H=o.createElement(d.A,null));const i=(0,Y.z)(this.props.location);if(e&&t)return o.createElement("div",{id:"activate__link"},F||(F=o.createElement(x.Qr,null)),o.createElement(m.A,null,o.createElement(p.A,{partner:e}),o.createElement(u.A,null,(0,c.AP)("uajerrormessage_title_alreadylinkedtopayingsub_web")),o.createElement(g.A,null,(0,c.AP)("uajerrormessage_text_chooseotherorcreatenewaccount_web",{sprintf:[e.brandName,(0,c.AP)("deezerplans_title_deezerfree_web")]})),o.createElement(k.a,{marginTop:4},o.createElement(g.A,null,(0,c.AP)("uajlogin_text_signuporloginwithplanX_web",{sprintf:[(0,c.AP)("deezerplans_title_deezerfree_web")]}))),o.createElement("a",{href:`/activate/${this.slug}/validate?token=${this.token}`},o.createElement(h.A,{marginTop:24,"data-testid":"activate-link-create-account"},(0,c.AP)("generic_action_chooseanotheraccount_web")))),B||(B=o.createElement(E.A,null)),O||(O=o.createElement(b.A,null)),j||(j=o.createElement(f.A,null)));if(e&&n){if(i){const t="/activate/success";return o.createElement(o.Fragment,null,U||(U=o.createElement(x.sA,null)),o.createElement(D,{partner:e,ctaHref:t,onCtaClick:()=>{this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"start-playing",eventaction:"click",eventcategory:"partner-activation",partner_name:this.slug})}}),G||(G=o.createElement(K.A,null)))}return o.createElement("div",{id:"activate__link"},W||(W=o.createElement(x.Qr,null)),o.createElement(m.A,null,o.createElement(p.A,{partner:e}),o.createElement(u.A,{"data-testid":"offer-activated-header"},(0,c.AP)("uajcongrats_title_yourofferXisnowactivated_web",{sprintf:[e.brandName]})),o.createElement(g.A,{"data-testid":"offer-activated-text"},(0,c.AP)("uajcongrats_text_enjoyallyourfavmusicnow_web")),o.createElement("a",{href:"/activate/success",onClick:()=>{this.props.tracking&&this.props.tracking.trackEvent({event:"click",eventlabel:"start-playing",eventaction:"click",eventcategory:"partner-activation",partner_name:this.slug})}},o.createElement(h.A,{marginTop:24,"data-testid":"activate-link-create-account"},(0,c.AP)("generic_action_listennow_web")))),X||(X=o.createElement(E.A,null)),$||($=o.createElement(b.A,null)),V||(V=o.createElement(f.A,null)))}return null}_handleFetchStart(){this.setState({isFetching:!0})}_handleFetchEnd(){this.setState({isFetching:!1})}_handlePartner(e){this.setState({partner:e})}_handleLinkSubscriber(e){this.setState({linked:e})}_handleError(e){const{history:t}=this.props;if(this.setState({error:e}),(0,Y.z)(this.props.location)){var a,n;const e=(null===(a=this.state.partner)||void 0===a?void 0:a.activationLink)||"",i=(null===(n=this.state.partner)||void 0===n?void 0:n.brandName)||"",r=new URLSearchParams(this.props.location.search);return r.set("version","2"),void t.push((0,y.jd)(`/activate/error?error=NOT_ELIGIBLE_ACCOUNT&activationLink=${e}&partnerName=${i}&${r.toString()}`))}t.push((0,y.jd)(`/activate/${this.slug}/not_eligible_account`))}})||M;const Z=(0,l.y)(q)},"y+AQ":(e,t,a)=>{a.d(t,{A:()=>o});var n=a("+9dH"),i=a("q1tI"),r=a("pVdW");const o=({children:e,...t})=>i.createElement(r.E,(0,n.A)({"data-testid":"activate-common-paragraph"},t),e)}}]);