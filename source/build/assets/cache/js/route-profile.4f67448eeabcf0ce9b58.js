"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[9774],{"2azY":(e,t,a)=>{a.r(t),a.d(t,{default:()=>ul});var s=a("q1tI"),l=a("TRpf"),r=a("XiPH"),i=a("lXQd"),n=a("XOWT"),o=a("nrKQ"),c=a("WKgy"),d=a("xSQY"),p=a("5G9X"),m=a("X6oL"),h=a("34sk"),u=a("xobL"),A=a("mKPD"),_=a("xckG"),E=a("4rpV"),y=a("Gr39"),b=a("8L3l"),g=a("ZPsS"),f=a("HGOC");const P={albums:p.Ay.Album,artists:p.Ay.Artist,loved:p.Ay.Song,playlists:p.Ay.Playlist,radios:p.Ay.Radio,shows:p.Ay.Show},T=new r.wQ.Entity("PROFILE_TAB",{album:new r.wQ.Array(_.A),artist:new r.wQ.Array(E.A),playlist:new r.wQ.Array(y.A),radio:new r.wQ.Array(b.A),show:new r.wQ.Array(g.A),song:new r.wQ.Array(f.A)},{idAttribute:()=>"entities",processStrategy:e=>{const t={};for(const[a,s]of Object.entries(e)){const e=P[a];e&&(0,A.SF)(e)&&(t[e]=s.data||[])}return t}}),v=new r.wQ.Entity("USERS",{},{idAttribute:"USER_ID"});var S=a("iiSH"),w=a("FSqQ"),C=a("17x9"),I=a.n(C),N=a("Ty5D"),R=a("juqV"),D=a("H/eQ"),x=a("Wp0Y"),L=a("iooo"),F=a("LOQS"),O=a("7E8A"),k=a("iyH+"),B=a("cFUB"),U=a("U9ZG"),M=a("OPhi"),G=a("+dDc");class H extends s.Component{render(){return s.createElement(s.Fragment,null,this._renderFollowAction(),this._renderShuffleAction())}_renderFollowAction(){const{id:e,isFollowed:t,isHiddenUser:a,isPersonal:l,onFollowToggle:r}=this.props;return l||a?null:s.createElement(k.$,{id:e,color:B.cW.PRIMARY,type:p.Ay.User,action:B.Hj.FOLLOW,context:{ID:e,TYPE:O.CONTEXT_PAGE_PROFILE},isFollowed:t,onToggleState:r})}_renderShuffleAction(){const{id:e,isPersonal:t,isHiddenUser:a,hasPersonalPlaylist:l,hasFavoritePlaylist:r,hasFavoriteAlbum:i,hasEnoughFavoriteSong:n}=this.props;return!t||a?null:r||i||l||n?s.createElement(U.A,{id:e,type:p.Ay.User,action:["shuffle"],data:this.context.data,context:{ID:this.props.id,TYPE:"shuffled_collection"}}):null}}H.contextTypes={data:I().object};const z=(0,l.Ng)(({user:e,entities:t,feedbacks:a})=>({hasPersonalPlaylist:Object.keys((0,G.eL)(t,(0,u.F6)(e))).length>0,hasFavoritePlaylist:(0,M.pp)(a,p.Ay.Playlist)>0,hasFavoriteAlbum:(0,M.pp)(a,p.Ay.Album)>0,hasEnoughFavoriteSong:(0,M.pp)(a,p.Ay.Song)>10}))(H);var X=a("MTsA"),W=a("2NhJ"),Y=a("oq/a"),q=a("zJSK"),Z=a("WY4A"),j=a("Ozpl"),K=a("wRgy"),$=a("JKL/"),J=a("23Qi"),Q=a("kPsn"),V=a("V1gm");class ee extends s.Component{render(){const{name:e,isPersonal:t,isHiddenUser:a}=this.props,l=(0,R.A)("profile-header-container",{"is-private":a});return s.createElement("div",{className:l},s.createElement("div",{className:"container"},s.createElement(W.Ay,null,this._renderThumbnail(),s.createElement(Y.A,{className:"profile-header-info"},s.createElement(q.A,null,t?(0,x.AP)("menu_title_favorites_web"):e),this._renderSubtitle())),this._renderToolbar(),this._renderNavbar()))}_renderSubtitle(){const{nbFollower:e,nbFollowing:t,isHiddenUser:a}=this.props;if(a)return null;const l=(0,x.WI)("%s follower","%s followers",{sprintf:[(0,J.A)(e)],count:e}),r=(0,x.WI)("%s following","%s following",{sprintf:[(0,J.A)(t)],count:t});return s.createElement(Z.A,null,s.createElement(j.A,null,l),s.createElement(j.A,null,r))}_renderThumbnail(){var e;const{name:t,picture:a,isHiddenUser:l,isPersonal:r}=this.props;if(r)return null;const{urls:i}=(0,Q.jg)(p.Ay.User,null,{__TYPE__:p.Ay.User,USER_PICTURE:l?"":a});return s.createElement(K.A,{alt:t,src:null===(e=i.large)||void 0===e?void 0:e[0],borderRadius:"rounded",type:p.Ay.User,"data-testid":"user-cover"})}_renderToolbar(){const{id:e,onFollowToggle:t,isFollowed:a,isPersonal:l,isHiddenUser:r}=this.props;return s.createElement($.A,null,s.createElement(z,{onFollowToggle:t,id:e,isFollowed:a,isPersonal:l,isHiddenUser:r}))}_renderNavbar(){const{tabList:e,activeTab:t,isHiddenUser:a}=this.props;return a?null:s.createElement(X.A,{items:e,active:t,align:"left"})}}ee.contextTypes={data:I().object},ee.defaultProps={nbFollower:0,nbFollowing:0,isPersonal:!1,tabList:[],activeTab:"home",isHiddenUser:!1};const te=(0,l.Ng)(({entities:e},{id:t})=>({name:(0,V.Nc)(e,t)||"",picture:(0,V.aR)(e,t)||""}))(ee);a("WpbS"),a("/eM8");var ae=a("p/gB"),se=a("AY3M"),le=a("tZCQ"),re=a("shsj"),ie=a("H9Ex"),ne=a("eq2Y"),oe=a("b5vm"),ce=a("wGgI"),de=a("lpJY"),pe=a("X/JG"),me=a("HmE0"),he=a("7bxg"),ue=a("i6DM"),Ae=a("fkXJ"),_e=a("Vsul"),Ee=(a("pxP/"),a("70bL"));var Pe,Te=a("g1Fm");const ve=({onClose:e})=>{const a=(0,l.d4)(Ee.sc),[r,i]=(0,l.d4)(e=>[(0,u.F6)(e.user),(0,u.Mn)(e.user)]),[n,o]=s.useState(!1);return s.createElement("div",{className:"Tytst","data-testid":"library-transfer-banner"},s.createElement("button",{className:"sL356",onClick:()=>{(0,ue.KI)(),e&&e()},type:"button"},Pe||(Pe=s.createElement(he.w,null))),s.createElement("p",{className:"_rMIA"},(0,x.AP)("libraryimporter_title_transferyourfavorites_web")),s.createElement("p",{className:"aayeA"},(0,x.AP)("libraryimporter_text_moveplaylistsandfavoritestodzr_web")),s.createElement(me.$n,{colorScheme:"white",size:"sm",onClick:async()=>{o(!0);const e=await(0,ue.Kl)(r,i,true).catch(()=>(0,Ae.A)({body:(0,x.AP)("Une erreur est survenue, merci de réessayer plus tard."),status:"error"}));e&&(0,_e.A)(e),o(!1)},isDisabled:n||!a},(0,Te.A)((0,x.AP)("libraryimporter_action_selectaserviceUPP_web"),!0)))};var Se=a("5MdW"),we=a("TqF5"),Ce=a("0JBE"),Ie=a("aoCz"),Ne=a("7Gye");var Le;const Fe=({handleAdd:e,label:t,rounded:a=!1})=>{const l=(0,R.A)("thumbnail",{"thumbnail-bordered":!a,"thumbnail-rounded":a}),r=(0,R.A)("thumbnail-caption",{"is-centered":a});return s.createElement(s.Fragment,null,s.createElement("div",{className:l},s.createElement("button",{type:"button",className:"BEemH","aria-label":t,onClick:e},s.createElement("div",{className:"picture-img"},s.createElement("div",{className:"cCDZT"},Le||(Le=s.createElement(Ne.c,{size:"medium",scale:3,color:"icon.neutral.primary.default"})))))),s.createElement("div",{className:r},s.createElement("div",{className:"heading-4"},s.createElement("button",{type:"button",className:"Ztl2n",onClick:e},t))))},Oe=()=>{const e=(0,l.wA)(),{page:t}=(0,Ce.iQ)();return s.createElement(Fe,{handleAdd:()=>{(0,Se.Q)({screen_view_name:t,initialization_type:"favorite_playlists"===t?"favorite_playlist":"favorite_tab"}),e((0,we.qf)({name:"PLAYLIST_ASSISTANT",props:{type:Ie.F.CREATION},background:"background.neutral.primary.default"}))},label:(0,x.AP)("playlistspage_title_createaplaylist_web")})};var ke=a("nxAS"),Be=a("/uRm"),Ue=a("I36q");const Me=({callbackLink:e="/profile/me"})=>{const t=(0,l.wA)();return s.createElement(Fe,{rounded:!0,handleAdd:()=>{t((0,ke.J2)({name:le.A.isAllowed("public_api_onboarding")?Be.F.ONBOARDING:Be.F.ONBOARDING_LEGACY,data:{showCloseButton:!0,context:Ue.d.Improve,isOnlyAddArtist:!0,callbackLink:e}}))},label:(0,x.AP)("onboardingartistpicker_title_addartists_web")})};var Ge,He,ze=a("y7xR"),Xe=a("vF4p");class We extends s.Component{constructor(e){super(e);const{albums:t,artists:a,playlists:s,shows:l,top_album:r,recently_played:i}=e.data;this.state={data:e.data,albums:t,artists:a,playlists:s,shows:l,recentlyPlayed:i,selectedTop:r&&r.total?"top_album":"top_track",isLibraryTransferBannerClosed:!1},this._onSwitchTop=this._onSwitchTop.bind(this),this._onLibraryTransferBannerClose=this._onLibraryTransferBannerClose.bind(this)}static getDerivedStateFromProps(e,t){if(!e.data)return null;const{albums:a,artists:s,playlists:l,shows:r,top_album:i,recently_played:n}=e.data,o=i&&i.total?"top_album":"top_track";return{data:e.data,albums:a,artists:s,playlists:l,shows:r,recentlyPlayed:n,selectedTop:t.selectedTop!==o?t.selectedTop:o,isLibraryTransferBannerClosed:t.isLibraryTransferBannerClosed}}async componentDidMount(){const e={album:{ids:Object.keys(this.props.cachedAlbums),loader:this.props.loadAlbum},playlist:{ids:Object.keys(this.props.cachedPlaylists),loader:this.props.loadPlaylist},show:{ids:Object.keys(this.props.cachedShows),loader:this.props.loadShow}};await Promise.all(Object.values(e).map(({ids:e,loader:t})=>e.reduce((e,a)=>e.then(()=>t({id:a})),Promise.resolve())))}render(){return s.createElement(Ce.OJ,{value:{page:"favorite_tab"}},this._renderLibraryTransfer(),this._renderPlayedSection(),this._renderContent())}_renderLibraryTransfer(){const{data:e,isLibraryTransferBannerClosed:t}=this.state;return this.props.isMe&&e.display_tmm_entrypoint&&!t?s.createElement("div",{className:"container"},s.createElement("section",{className:"user-section"},s.createElement(ve,{onClose:this._onLibraryTransferBannerClose}))):null}_renderPlayedSection(){return this.props.isMe&&this.state.recentlyPlayed&&this.state.recentlyPlayed.data.length>0?this._renderRecentlyPlayed():this._renderTops()}_renderRecentlyPlayed(){const{recentlyPlayed:e}=this.state,t=e.data&&e.data.length>0?[...e.data]:[],a=this._filterRecentlyPlayed(t);return 0===a.length?this._renderTops():s.createElement("section",{className:"user-section"},s.createElement(pe.A,{key:"profile_recently_played",title:(0,x.AP)("favoritestab_title_recentlyplayedcontent_web"),data:a,pageContext:O.CONTEXT_PAGE_PROFILE_RECENTLY_PLAYED,alignment:"left",context:"profile_recently_played"},s.createElement(de.A,{data:a,pageContext:O.CONTEXT_PAGE_PROFILE_RECENTLY_PLAYED,context:"profile_recently_played",nbLines:1})))}_renderTops(){const e=this.state.data,{selectedTop:t}=this.state;if(!e.top_track.total&&!e.top_album.total&&!e.top_artist.total)return null;const a={top_track:{key:"profile_top_tracks",data:e.top_track.data,total:e.top_track.total,label:(0,x.AP)("Titres"),context:"profile_top_tracks",placeholder:(0,x.AP)("Aucun Top Titres")},top_album:{key:"profile_top_albums",data:e.top_album.data,total:e.top_album.total,label:(0,x.AP)("favoritessidebar_title_albums_web"),context:"profile_top_albums",placeholder:(0,x.AP)("Aucun Top Albums")},top_artist:{key:"profile_top_artists",data:e.top_artist.data,total:e.top_artist.total,label:(0,x.AP)("Artistes"),context:"profile_top_artists",placeholder:(0,x.AP)("Aucun Top Artistes")}},l=s.createElement(ce.Ay,{label:a[t].label},Object.entries(a).map(([e,a])=>s.createElement(ce.Ay.Item,{key:e,isSelected:e===t},s.createElement("button",{"data-testid":e,type:"button",onClick:this._onSwitchTop.bind(this,e)},a.label))));let r={key:a[t].key,data:a[t].data,context:a[t].context,pageContext:O.CONTEXT_PAGE_PROFILE_TAB_HOME,nbLines:1,placeHolder:{img:"nocontent",wording:a[t].placeholder}};return s.createElement("div",{className:"container"},s.createElement("section",{className:"user-section"},s.createElement("div",{className:"user-section-title top-title clearfix"},s.createElement(ze.D,{variant:"heading.m"},(0,x.AP)("Top")),s.createElement("div",{className:"action-top-page"},l)),s.createElement(de.A,r)))}_renderContent(){const{isMe:e,downloaded:t,userHasDownload:a}=this.props,{playlists:l,albums:r,artists:i,shows:n}=this.props.data;let o={};a&&e&&(o.downloads={data:t,total:t.length,tab:Xe.E6.downloads}),Object.assign(o,{playlists:{data:l.data,total:l.total,tab:Xe.E6.playlists},albums:{data:r.data,total:r.total,tab:Xe.E6.albums},artists:{data:i.data,total:i.total,tab:Xe.E6.artists}}),le.A.isAllowed("talk")&&(o.shows={data:n.data,total:n.total,tab:Xe.E6.shows});let c=[];return Object.entries(o).forEach(([e,t])=>{const a=this._renderPrependElement(e);if(t.total>0||void 0!==a){const l=t.data.map(e=>({...e,context:(0,ae.Pe)(e.__TYPE__||e.type,se.z6)}));c.push(s.createElement("section",{className:"user-section",key:"profile_page_home_"+e},s.createElement(pe.A,{title:this._getTitle(e),target:`/profile/${this.props.id}/${t.tab}`,hasMoreItems:t.total>0,related:{target:`/profile/${this.props.id}/${t.tab}`,label:(0,x.AP)("Voir tout")},data:l,pageContext:O.CONTEXT_PAGE_PROFILE_TAB_HOME,prependElement:a,alignment:"left",tab:t.tab},s.createElement(de.A,{hasMoreItems:t.total>0,related:{target:`/profile/${this.props.id}/${t.tab}`,label:(0,x.AP)("Voir tout")},data:l,pageContext:O.CONTEXT_PAGE_PROFILE_TAB_HOME,prependElement:a,nbLines:1}))))}}),c}_renderPrependElement(e){const{isMe:t}=this.props;if(t)return e===Xe.E6.playlists?Ge||(Ge=s.createElement(Oe,null)):e===Xe.E6.artists?He||(He=s.createElement(Me,null)):void 0}_onSwitchTop(e){this.state.selectedTop!==e&&this.setState({selectedTop:e})}_onLibraryTransferBannerClose(){this.setState({isLibraryTransferBannerClosed:!0})}_getTitle(e){return{downloads:(0,x.AP)("Téléchargé"),playlists:(0,x.AP)("Playlists"),albums:(0,x.AP)("favoritessidebar_title_albums_web"),artists:(0,x.AP)("Artistes"),shows:(0,x.AP)("Podcasts")}[e]}_filterRecentlyPlayed(e=[]){const t=[p.Ay.Album,p.Ay.Artist,p.Ay.Livestream,p.Ay.Playlist,p.Ay.Radio,p.Ay.Show,p.Ay.User];return e.filter(({__TYPE__:e})=>t.includes(e)).map(({__TYPE__:e,...t})=>e===p.Ay.User?{id:t.USER_ID,subtitle:String(t.USER_ID)===String(this.props.userID)?(0,x.AP)("flowcarddescription_text_aninfinitemixoffavoritesandnew_web"):t.BLOG_NAME,context:{ID:Number(t.USER_ID),TYPE:(0,ae.C3)(p.Ay.Flow)},__TYPE__:p.Ay.Flow}:{...t,context:{ID:Number(t[p.vn[e]]),TYPE:(0,ae.C3)(e)},__TYPE__:e===p.Ay.User?p.Ay.Flow:e})}}We.defaultProps={cachedAlbums:{},cachedPlaylists:{},cachedShows:{}};const Ye=(0,l.Ng)(e=>{const{all:t}=(0,re.w1)(e.cache,e.entities,(0,u.F6)(e.user));return{userID:e.user.id,userHasDownload:(0,u.Jt)(e.user),cachedAlbums:e.cache.album,cachedPlaylists:e.cache.playlist,cachedShows:e.cache.show,downloaded:t}},{loadAlbum:ie.eQ,loadPlaylist:ne.vW,loadShow:oe.A5})(We);var qe=a("mk5l"),Ze=a("o+h5"),je=a("hIIJ"),Ke=a("Z9kq"),$e=a("h8EF");class Je extends s.Component{constructor(){super(),this._onChangeSearch=this._onChangeSearch.bind(this),this.state={query:"",filter:""}}componentDidMount(){(async()=>{for(let e of Object.keys(this.props.cachedAlbums))await this.props.loadAlbum({id:e})})(),(async()=>{for(let e of Object.keys(this.props.cachedPlaylists))await this.props.loadPlaylist({id:e})})(),(async()=>{for(let e of Object.keys(this.props.cachedShows))await this.props.loadShow({id:e})})(),F.A.log({type:"cdp",eventName:"screen_view",customAttributes:{screen_view_name:$e.bv.downloads}})}render(){return s.createElement("section",{className:"user-section"},s.createElement("div",{className:"container clearfix"},s.createElement("div",{className:"user-section-title"},le.A.isAllowed("revamp2023")?s.createElement(je.A,{title:(0,x.WI)("desktopapp_title_Xdownloads_web","desktopapp_title_Xdownloads_web",{sprintf:[(0,J.A)(this.props.all.length)],count:this.props.all.length})}):s.createElement("h1",{className:"heading-1"},(0,x.WI)("desktopapp_title_Xdownloads_web","desktopapp_title_Xdownloads_web",{sprintf:[(0,J.A)(this.props.all.length)],count:this.props.all.length})),this._renderActions())),this._renderAll(),this._renderAlbums(),this._renderPlaylists(),this._renderShows())}_renderActions(){return s.createElement("div",{className:"action-top-page"},s.createElement("div",{className:"btn-group user-search"},s.createElement(Ke.D,{size:"small",onChange:this._onChangeSearch,placeholder:(0,x.AP)("Rechercher")})))}_renderAll(){if(""===this.state.filter&&0!==this.props.all.length)return null;const e=this.props.all.map(e=>({...e,context:(0,ae.Pe)(Ze.Ay.parser.type(e),se.z6)}));return s.createElement("div",{className:"container clearfix"},s.createElement(de.A,{data:e,filter:this.state.filter,pageContext:O.CONTEXT_PAGE_PROFILE_TAB_DOWNLOADS}))}_renderAlbums(){return""!==this.state.filter||0===this.props.albums.length?null:s.createElement("div",{className:"container clearfix"},s.createElement(je.A,{title:(0,x.AP)("favoritessidebar_title_albums_web"),mb:"spacing.xl"}),s.createElement(de.A,{context:(0,ae.Pe)(p.Ay.Album,se.z6),data:this.props.albums,pageContext:O.CONTEXT_PAGE_PROFILE_TAB_DOWNLOADS}))}_renderPlaylists(){return""!==this.state.filter||0===this.props.playlists.length?null:s.createElement("div",{className:"container clearfix"},le.A.isAllowed("revamp2023")?s.createElement(je.A,{title:(0,x.AP)("Playlists"),mb:"spacing.xl"}):s.createElement("div",{className:"user-section-title top-title clearfix"},s.createElement("h2",{className:"heading-2"},(0,x.AP)("Playlists"))),s.createElement(de.A,{context:(0,ae.Pe)(p.Ay.Playlist,se.z6),data:this.props.playlists,pageContext:O.CONTEXT_PAGE_PROFILE_TAB_DOWNLOADS}))}_renderShows(){return""!==this.state.filter||0===this.props.shows.length?null:s.createElement("div",{className:"container clearfix"},le.A.isAllowed("revamp2023")?s.createElement(je.A,{title:(0,x.AP)("Podcasts"),mb:"spacing.xl"}):s.createElement("div",{className:"user-section-title top-title clearfix"},s.createElement("h2",{className:"heading-2"},(0,x.AP)("Podcasts"))),s.createElement(de.A,{context:(0,ae.Pe)(p.Ay.Show,se.z6),data:this.props.shows,pageContext:O.CONTEXT_PAGE_PROFILE_TAB_DOWNLOADS}))}_onChangeSearch(e){this.setState({query:e,filter:(0,qe.A)(e.toLowerCase().trim())})}}Je.defaultProps={cachedAlbums:{},cachedPlaylists:{},cachedShows:{}};const Qe=(0,l.Ng)(({entities:e,user:t,cache:a})=>{const{all:s,albums:l,playlists:r,shows:i}=(0,re.w1)(a,e,(0,u.F6)(t));return{userID:t.id,cachedAlbums:a.album,cachedPlaylists:a.playlist,cachedShows:a.show,all:s,albums:l,playlists:r,shows:i}},{loadAlbum:ie.eQ,loadPlaylist:ne.vW,loadShow:oe.A5})(Je);a("Dk60");var Ve=a("M3gt"),et=a("Q4xC"),tt=a("AfN5"),at=a("STEc");const st={TITLE:{SIZE:at.uq.Full},ARTIST:{SIZE:at.uq.PercentXs},PARENT:{BREAKPOINT:at.x1.md,SIZE:at.uq.PercentXs},DATE:{BREAKPOINT:at.x1.md,SIZE:at.uq.xl},DURATION:{SIZE:at.uq.sm},SELECT:{ALIGN:at.uP.Right,SIZE:at.uq.sm}};var lt,rt,it,nt=a("xCFc"),ot=a("BP9I"),ct=a("1Uwb"),dt=a("XLml"),pt=a("fSLK"),mt=a("/G5K"),ht=a("pQlO"),ut=a("r4LN"),At=a("wkd/"),_t=a("PJQK"),Et=a("tgyz"),yt=a("CxZw"),bt=a("SehT");const gt=(0,s.memo)((0,Ce.S2)(({data:e,index:t,style:a})=>{const{context:l,container:r,loadingStatus:n,shouldExplicitBeHidden:o}=(0,nt.$A)(),{playerStatus:c,play:d,isItemLoadedInPlayer:m}=(0,Et.A)(l,r,n.isFullyFetched,!0),h=e.toDisplay[t],u=h.item.hasExplicitLyrics&&o,A=(0,s.useCallback)((t,a)=>{d({playIndex:a,playItems:e.toPlay,isTrackActive:t})},[e.toPlay,d]),_=(0,s.useCallback)(t=>{d({notify:!1,playIndex:t,playItems:e.toPlay,playLyrics:!0})},[e.toPlay,d]);return s.createElement(ct.A.Row,{style:a,uuid:h.uuid,id:h.item.id,index:h.index,isActive:m(h.item)&&c.isSameContext,isReadable:h.item.right===yt.A.READABLE,isRestrictedByExplicit:u,type:h.item.type,isDraggable:!0},s.createElement(_t.A,{size:st.TITLE.SIZE},s.createElement(_t.A.Play,{ariaLabel:(0,x.AP)("generic_action_playsongXbyartistX_web",{sprintf:[h.item.title,(0,i.A)(h,"item.artists[0].name","")]}),hasExplicitCover:h.item.parent.hasExplicitCover,onPlayItems:A,pictureUrl:h.item.cover(Ze.r4).url}),lt||(lt=s.createElement(_t.A.Download,null)),s.createElement(_t.A.PlayableLabel,{hasExplicitLyrics:h.item.hasExplicitLyrics,label:h.item.title,onPlayItems:A,tooltipText:(0,bt.Y)(h.item,o)}),s.createElement(ct.A.IconGroup,null,s.createElement(_t.A.ShowLyrics,{item:h.item,lyricsId:h.item.lyricsId,onPlayLyrics:_}),rt||(rt=s.createElement(_t.A.AddToFavorite,null)),s.createElement(_t.A.OpenContextMenu,{item:h.item}))),s.createElement(ct.A.CellBody,{size:st.ARTIST.SIZE},s.createElement(ut.A,{links:h.item.artists.map(e=>({...e,type:p.Ay.Artist}))})),s.createElement(ct.A.CellBody,{breakpoint:st.PARENT.BREAKPOINT,size:st.PARENT.SIZE},s.createElement(ut.A,{links:[{...h.item.parent,type:p.Ay.Album}]})),s.createElement(ct.A.CellBody,{breakpoint:st.DATE.BREAKPOINT,size:st.DATE.SIZE},s.createElement(mt.A,{date:1e3*h.item.date})),s.createElement(ct.A.CellBody,{size:st.DURATION.SIZE},s.createElement(ht.A,{duration:h.item.duration})),s.createElement(ct.A.CellBody,{align:st.SELECT.ALIGN,size:st.SELECT.SIZE},it||(it=s.createElement(At.A,null))))},({index:e,data:t})=>({item:p.Ay.Track,itemIndex:e,itemId:t.toDisplay[e].item.id})),pt.t7);var ft,Pt,Tt,vt=a("ZH8F"),St=a("dalA"),wt=a("3AbJ"),Ct=a("ftFY"),It=a("7u2F");const Nt=({context:e,isFullyFetched:t,items:a,nextFetchDataIndex:l,onFetch:r,userId:n,shouldExplicitBeHidden:o=!1,total:c})=>{const d={id:n,type:tt.Kk.HISTORY},p=(0,s.useRef)(null),{loadingStatus:m,fetchNext:h,fetchAll:u}=(0,wt.A)(r,n,t,l,e),{manageItems:A,tableItems:_}=(0,Ct.A)(n,a,e,{fetchAll:u,generateId:e=>`${e.id}-${(0,i.A)(e,"legacy.TRACK_NUMBER","")}`}),{playerStatus:E,play:y}=(0,Et.A)(e,d,t,!0),b=(0,It.A)(_,e,u);(0,St.A)(vt.g.PLAY,()=>{y({playItems:_.toPlay})},e);const g=(0,nt.Ay)({container:d,context:e,loadingStatus:m,manageItems:A,playerStatus:E,select:b,shouldExplicitBeHidden:o});return s.createElement(nt.ru,{value:g},s.createElement(ct.A,{tableRef:p,rowCount:c},s.createElement(ct.A.Header,null,s.createElement(ct.A.CellHead,{size:st.TITLE.SIZE},(0,x.AP)("datagrid_title_trackUPP_web")),s.createElement(ct.A.CellHead,{size:st.ARTIST.SIZE},(0,x.AP)("datagrid_title_artistUPP_web")),s.createElement(ct.A.CellHead,{breakpoint:st.PARENT.BREAKPOINT,size:st.PARENT.SIZE},(0,x.AP)("datagrid_title_albumUPP_web")),s.createElement(ct.A.CellHead,{breakpoint:st.DATE.BREAKPOINT,size:st.DATE.SIZE},(0,x.AP)("datagrid_title_dateUPP_web")),s.createElement(ct.A.CellHead,{ariaLabel:(0,x.AP)("sortingmenu_title_duration_web"),size:st.DURATION.SIZE},ft||(ft=s.createElement(et.m,null))),s.createElement(ct.A.CellHead,{align:st.SELECT.ALIGN,size:st.SELECT.SIZE},s.createElement(ot.A,{rowCount:_.toDisplay.length}))),s.createElement(ct.A.Body,null,s.createElement(Ve.A,{isItemLoaded:e=>e<a.length-S.Hs,itemCount:_.toDisplay.length,loadMoreItems:h,threshold:S.Hs},({onItemsRendered:e,ref:t})=>s.createElement(dt.A,{onItemsRendered:e,tableRef:p,items:_,ref:t},gt)),Pt||(Pt=s.createElement(ct.A.RowLoader,null)))),0===_.toDisplay.length&&(Tt||(Tt=s.createElement(ct.A.EmptyContent,null))))};var Rt,Dt=a("sAMA"),xt=a("Fzox"),Lt=a("Bhnp"),Ft=a("thsB");const Ot=({id:e})=>{const[t,a]=(0,s.useState)(null),[l,r]=(0,s.useState)(!0),i=(0,xt.j)(),n=(0,xt.G)(e=>(0,u.Uw)(e.user)===Dt.g),o=(0,xt.G)(Lt.JS),c=(0,s.useCallback)(({start:e,nb:t})=>i((0,Ft.FB)(e,t)),[i]);if((0,s.useEffect)(()=>(D.A.ready(D.A.user.userReady,()=>{c({start:0,nb:S.ww}).catch(a).finally(()=>{r(!1)})}),()=>{(0,Ft.w8)()}),[c]),t)throw t;if(l)return Rt||(Rt=s.createElement("div",{className:"loved-loader"},s.createElement(w.A,null)));const d=(0,x.AP)("profilepagetab_title_listeninghistory_web"),p={ID:e,TYPE:se.pB};return s.createElement(Ce.OJ,{value:{page:"favorite_playlists_listening_history"}},s.createElement("div",{className:"container"},s.createElement(je.A,{title:d})),s.createElement("div",{className:"container"},s.createElement(Nt,{context:p,isFullyFetched:o.HAS_FULLY_LOADED_SONGS,items:o.data,onFetch:c,nextFetchDataIndex:o.NEXT_FETCH_DATA_INDEX,shouldExplicitBeHidden:n,total:o.NB_SONG,userId:e})))};var kt=a("G4qV"),Bt=a("nLzw"),Ut=a("hTBE"),Mt=a("rA75");const Gt={[Mt.R.PlaylistPersonal]:(e,t)=>Number(e.PARENT_USER_ID)===t,[Mt.R.PlaylistFavorite]:(e,t)=>{const a=Number(e.PARENT_USER_ID)===t,s=(0,G.C5)(c.A.getState().entities,{id:e.PLAYLIST_ID});return!a&&!s},[Mt.R.PlaylistCollaborative]:e=>(0,G.C5)(c.A.getState().entities,{id:e.PLAYLIST_ID})};var zt=a("WBQ7"),Xt=a("YVUD"),Wt=a("QOhT"),Yt=a("hz5U"),qt=a("GkjM");const jt=({cover:e,title:t,url:a})=>{const l=Yt.A.getImageSrc("misc",e,264,264,"none");return s.createElement(s.Fragment,null,s.createElement(Wt.A,{type:"generic",redirectUrl:a,context:(0,ae.yh)(p.Ay.Episode),alt:t,imgSrc:l,width:264,height:264,bordered:!0}),s.createElement("div",{className:"thumbnail-caption"},s.createElement("div",{className:"heading-4"},s.createElement(qt.A,{to:a},t))))};var Kt=a("Fg+i");const $t=({id:e})=>{const t=(0,x.AP)("favorites_title_latestepisodes_web"),a=Kt.Zo;return s.createElement(jt,{cover:a,title:t,url:`/profile/${e}/podcasts/${Kt.eb.latest}`})},Jt=({id:e})=>{const t=(0,x.AP)("favorites_title_inprogress_web"),a=Kt.lC;return s.createElement(jt,{cover:a,title:t,url:`/profile/${e}/podcasts/${Kt.eb.resume}`})};a("aRRr");const aa=({title:e,description:t,children:a})=>s.createElement("div",{className:"GA4MM"},s.createElement("div",{className:"MYpMR"},e),t&&s.createElement("div",{className:"aCUH2"},t),a&&s.createElement("div",{className:"Wxxal"},a)),sa=({query:e})=>s.createElement(aa,{title:(0,x.AP)("emptystate_title_noresultsforXsearchterm_web",{sprintf:[e]})});var la=a("55Ip");const ra=({isMe:e})=>e?s.createElement(aa,{title:(0,x.AP)("emptystate_title_nofavoritealbums_web"),description:(0,x.AP)("emptystate_text_discoverouralbumselection_web")},s.createElement(me.$n,{as:la.N_,to:(0,L.jd)("/channels/new")},(0,Te.A)((0,x.AP)("generic_action_addalbumsUPP_web"),!0))):s.createElement(aa,{title:(0,x.AP)("emptystate_title_nofavoritealbums_web")}),ia=({isMe:e})=>e?null:s.createElement(aa,{title:(0,x.AP)("emptystate_title_nofavoriteartistsyet_web")}),na=()=>s.createElement(aa,{title:(0,x.AP)("emptystate_title_nofollowersyet_web")}),oa=()=>s.createElement(aa,{title:(0,x.AP)("emptystate_title_notfollowninganyoneyet_web")}),ca=({isMe:e})=>e?s.createElement(aa,{title:(0,x.AP)("emptystate_title_nofavoritemixes_web"),description:(0,x.AP)("emptystate_text_discoverourselectionofmixes_web")},s.createElement(me.$n,{as:la.N_,to:(0,L.jd)("/channels/mixes")},(0,Te.A)((0,x.AP)("generic_action_addmixesUPP_web"),!0))):s.createElement(aa,{title:(0,x.AP)("emptystate_title_nofavoritemixes_web")}),da=({isMe:e})=>e?null:s.createElement(aa,{title:(0,x.AP)("emptystate_title_nofavoriteplaylistsyet_web")}),pa=({isMe:e})=>e?null:s.createElement(aa,{title:(0,x.AP)("emptystate_title_nofavoritepodcasts_web")});a("W8Tb");var ma=a("kSUS"),ha=a("8iEq");const ua=ce.y8,Aa=ce.qT,_a=ce.VX,Ea=({align:e,items:t,onChange:a,selectedKey:l,size:r,isDisabled:i})=>{const n=Math.max(t.findIndex(e=>e.key===l),0);return s.createElement("div",{className:"btn-group"},s.createElement(ce.Ay,{selected:n,align:e,size:r,isDisabled:i,overflow:t.length>6},t.map(e=>s.createElement(ce.Ay.Item,{key:e.key,label:e.label,isSelected:l===e.key},s.createElement("button",{type:"button",onClick:()=>a(e.key)},e.label)))))};Ea.defaultProps={selectedKey:"",size:ua,align:Aa,isDisabled:!1};const ya=Ea;class ba extends s.Component{render(){const{type:e,align:t,activeSort:a,onSortChange:l,isDisabled:r}=this.props,i=this._getSortOptionsByType(e);return 0===i.length?null:s.createElement(ya,{align:t,selectedKey:a,onChange:l,items:i,isDisabled:r})}_getSortOptions(){return{album:[{key:ha.L$,label:(0,x.AP)("sortingmenu_title_recentlyaddedalbums_web")},{key:ha._y,label:(0,x.AP)("sortingmenu_title_AZalbum_web")},{key:ha.lG,label:(0,x.AP)("sortingmenu_title_AZartist_web")}],artist:[{key:ha.L$,label:(0,x.AP)("sortingmenu_title_recentlyaddedartists_web")},{key:ha.lG,label:(0,x.AP)("sortingmenu_title_AZgeneric_web")}],show:[{key:ha.Lh,label:(0,x.AP)("sortingmenu_title_recentlyaddedpodcasts_web")},{key:ha.Y,label:(0,x.AP)("sortingmenu_title_recentlyupdatedpodcasts_web")},{key:ha.D7,label:(0,x.AP)("sortingmenu_title_AZgeneric_web")}],playlist:[{key:ha.L$,label:(0,x.AP)("sortingmenu_title_recentlyaddedplaylists_web")},{key:ha.WU,label:(0,x.AP)("sortingmenu_title_recentlyupdatedplaylists_web")},{key:ha.Lq,label:(0,x.AP)("sortingmenu_title_AZgeneric_web")}]}}_getSortOptionsByType(e){const t=this._getSortOptions();return void 0===t[e]?[]:t[e].filter(e=>!e.disabled)}}ba.defaultProps={align:Aa,isMe:!0,isDisabled:!1};var ga=a("chf7");const[fa,Pa,Ta]=(0,ga.q6)({name:"FilterContext"}),va=({isDisabled:e,activeFilter:t,onFilterChange:a})=>{const l=Pa();return 0===l.length?null:s.createElement(ya,{selectedKey:t,onChange:a,isDisabled:e,items:l})};var Sa,wa=a("VkUI");const Ca=({id:e})=>s.createElement("div",{className:"action-curator"},s.createElement(me.$n,{size:"small",leftIcon:Sa||(Sa=s.createElement(Ne.c,null)),onClick:()=>wa.default.open(`/lightbox/curators/edit_playlist/${e}`)},(0,x.AP)("Taguer par genre et moods")));let Ra=function(e){return e.Search="search",e.Filter="filter",e.Sorter="sorter",e.EditPlaylistsTags="edit_playlists_tags",e}({});const Da=({id:e,isMe:t,type:a,actions:l,onFilterChange:r,onSortChange:i,onQueryChange:n,filter:o=Mt.R.None,sort:c="",query:d=""})=>{const[p,m]=(0,s.useState)(o),h=(0,ma.A)(e=>{const t=e.target.value,a=""!==t?Mt.R.None:p;""!==t&&""===d&&m(o),n(t),a!==o&&r(a)},300),u=t&&le.A.isAllowed("curator_feature")&&l.includes(Ra.EditPlaylistsTags),A=l.includes(Ra.Search),_=l.includes(Ra.Sorter),E=l.includes(Ra.Filter);return s.createElement("div",{className:"HAQXJ"},A&&s.createElement("div",{className:"jU4En"},s.createElement(Ke.D,{onChange:h,placeholder:(0,x.AP)("Rechercher"),size:"small"})),E&&s.createElement(va,{activeFilter:o,onFilterChange:r,isDisabled:""!==d}),_&&s.createElement(ba,{type:a,activeSort:c,onSortChange:i,align:_a,isDisabled:""!==d}),u&&s.createElement(Ca,{id:e}))},xa=JSON.parse('{"type":"album","actions":{"search":{"fields":["ALB_TITLE","ART_NAME"]},"sorter":{"default":"DATE_CREATE","settings_key":"sort_profile_album"}}}'),La=JSON.parse('{"type":"artist","actions":{"search":{"fields":["ART_NAME"]},"filter":{"default":"","fields":["GENRES"]},"sorter":{"default":"DATE_CREATE","settings_key":"sort_profile_artist"}}}'),Fa=JSON.parse('{"type":"user","actions":{"search":{"fields":["BLOG_NAME"]}}}'),Oa=JSON.parse('{"type":"user","actions":{"search":{"fields":["BLOG_NAME"]}}}'),ka=JSON.parse('{"type":"playlist","actions":{"edit_playlists_tags":{},"filter":{"default":""},"search":{"fields":["TITLE"]},"sorter":{"default":"DATE_CREATE","settings_key":"sort_profile_playlist"}}}'),Ba=JSON.parse('{"type":"radio","actions":{"search":{"fields":["TITLE"]}}}'),Ua=JSON.parse('{"type":"show","actions":{"search":{"fields":["SHOW_NAME"]},"sorter":{"default":"DATE_FAVORITE","settings_key":"sort_profile_show"}}}'),Ma={[Xe.E6.albums]:xa,[Xe.E6.artists]:La,[Xe.E6.followers]:Fa,[Xe.E6.following]:Oa,[Xe.E6.playlists]:ka,[Xe.E6.radios]:Ba,[Xe.E6.shows]:Ua},Ga=e=>(0,i.A)(Ma,`[${e}].type`),Ha=e=>(0,i.A)(Ma,`[${e}].actions.filter.fields`,Mt.R.None),za=e=>(0,i.A)(Ma,`[${e}].actions.sorter.default`,ha.cT),Xa=e=>(0,i.A)(Ma,`[${e}].actions.sorter.settings_key`),Wa=(e,t)=>({[Xe.E6.home]:{label:(0,x.AP)("profilepagetab_title_highlights_web")},[Xe.E6.loved]:{label:(0,x.AP)("favoritessidebar_title_favoritetracks_web"),type:p.Ay.Song},[Xe.E6.downloads]:{label:(0,x.AP)("desktopapp_title_downloads_web"),disabled:!e||!t},[Xe.E6.playlists]:{label:(0,x.AP)("favoritessidebar_title_playlists_web"),type:p.Ay.Playlist},[Xe.E6.albums]:{label:(0,x.AP)("favoritessidebar_title_albums_web"),type:p.Ay.Album},[Xe.E6.artists]:{label:(0,x.AP)("favoritessidebar_title_artists_web"),type:p.Ay.Artist},[Xe.E6.history]:{label:(0,x.AP)("profilepagetab_title_listeninghistory_web"),disabled:!e},[Xe.E6.shows]:{url:Xe.E6.podcasts,label:(0,x.AP)("favoritessidebar_title_podcasts_web"),disabled:!le.A.isAllowed("talk"),type:p.Ay.Show},[Xe.E6.personal_song]:{label:(0,x.AP)("profilepagetab_title_mymp3s_web"),disabled:!e},[Xe.E6.following]:{label:(0,x.AP)("profilepagetab_title_following_web")},[Xe.E6.followers]:{label:(0,x.AP)("profilepagetab_title_followers_web")}}),Ya=e=>{switch(e){case Xe.E6.albums:return O.CONTEXT_PAGE_PROFILE_TAB_ALBUMS;case Xe.E6.artists:return O.CONTEXT_PAGE_PROFILE_TAB_ARTISTS;case Xe.E6.followers:return O.CONTEXT_PAGE_PROFILE_TAB_FOLLOWERS;case Xe.E6.following:return O.CONTEXT_PAGE_PROFILE_TAB_FOLLOWING;case Xe.E6.playlists:return O.CONTEXT_PAGE_PROFILE_TAB_PLAYLISTS;case Xe.E6.radios:return O.CONTEXT_PAGE_PROFILE_TAB_RADIOS;case Xe.E6.shows:return O.CONTEXT_PAGE_PROFILE_TAB_SHOWS;default:return O.CONTEXT_PAGE_PROFILE}},qa=e=>{switch(e){case Xe.E6.albums:return(0,ae.Pe)(p.Ay.Album,se.z6);case Xe.E6.artists:return(0,ae.Pe)(p.Ay.Artist,se.z6);case Xe.E6.playlists:return(0,ae.Pe)(p.Ay.Playlist,se.z6);case Xe.E6.radios:return(0,ae.Pe)(p.Ay.Radio,se.z6);case Xe.E6.shows:return(0,ae.Pe)(p.Ay.Show,se.z6);default:return`unknown_profile_tab_${e}`}};var Za,ja,Ka,$a=a("6dJ7");const Ja=(0,kt.Ad)(kt.UI,Bt.A);class Qa extends s.Component{constructor(e,t){super(e,t),this._filter=Ja((...e)=>e,([e,t,a,s,l,r])=>this._search(((e,t=Mt.R.None,{user_id:a=0,fields:s=[]}={})=>t===Mt.R.None?e:Gt[t]?e.filter(e=>Gt[t](e,a)):s.includes("GENRES")?e.filter(e=>!e.GENRES||!e.GENRES.data||e.GENRES.data.find(({GENRE_ID:e})=>e===t)):e)((0,Ut.A)(l,e,r),t,a),s));const a=zt.default.get(Xa(e.tab),za(e.tab));var s;this.state={search:"",activeFilter:(s=e.tab,(0,i.A)(Ma,`[${s}].actions.filter.default`,Mt.R.None)),selectedSort:(0,Ut.v)(a)&&e.isMe?a:za(e.tab)},this._onFilterChanged=this._onFilterChanged.bind(this),this._onSearchChanged=this._onSearchChanged.bind(this),this._onSortChanged=this._onSortChanged.bind(this)}render(){const{id:e,items:t,tab:a}=this.props,{activeFilter:l,search:r,selectedSort:i}=this.state;if(void 0===t.data)return null;const n=this._filter(i,l,{user_id:e,fields:Ha(a)},r.toLocaleLowerCase(),t.data,Ga(a)),o=n.length,c=this._renderPlaceholder(n);return s.createElement(Ce.OJ,{value:{page:`favorite_${a}`}},s.createElement("section",{className:"user-section"},s.createElement("div",{className:"container"},s.createElement("div",{className:"user-section-title clearfix"},this._renderTabTitle(o),this._renderActions())),c?s.createElement("div",{className:"container"},c):s.createElement(Xt.A,{id:e,type:"profile",data:n,total:o,progressiveDisplay:!0,pageContext:Ya(a),gridAttributes:{placeHolder:!1,context:qa(a),prependElement:this._renderPrependElement()}})))}_renderTabTitle(e){const t={sprintf:[(0,J.A)(e)],count:e},a={[Xe.E6.albums]:(0,x.WI)("%s album","% albums",t),[Xe.E6.artists]:(0,x.WI)("%s artiste","%s artistes",t),[Xe.E6.followers]:(0,x.WI)("%s follower","%s followers",t),[Xe.E6.following]:(0,x.WI)("%s following","%s following",t),[Xe.E6.playlists]:(0,x.WI)("%s playlist","%s playlists",t),[Xe.E6.radios]:(0,x.WI)("%s mix","%s mix",t),[Xe.E6.shows]:(0,x.WI)("%s podcast","%s podcasts",t)};return le.A.isAllowed("revamp2023")?s.createElement(je.A,{title:a[this.props.tab],style:{float:"left",lineHeight:"32px"}}):s.createElement("h1",{className:"heading-1"},a[this.props.tab])}_renderActions(){const{id:e,isMe:t,items:a,tab:l}=this.props;if(a.data.length<1)return null;const{selectedSort:r}=this.state,n=(e=>Object.keys((0,i.A)(Ma,`[${e}].actions`)))(l);if(0===n.length)return null;const{activeFilter:o,search:c}=this.state;return s.createElement(Da,{id:e,isMe:t,actions:n,type:Ga(l),filter:o,sort:r,query:c,onFilterChange:this._onFilterChanged,onSortChange:this._onSortChanged,onQueryChange:this._onSearchChanged,key:`tab_actions_${l}`})}_renderPrependElement(){const{id:e,isMe:t,tab:a}=this.props,{search:l,activeFilter:r}=this.state;if(""===l&&r===Mt.R.None)return a===Xe.E6.playlists&&t?Za||(Za=s.createElement(Oe,{key:"CreatePlaylist"})):a===Xe.E6.shows&&t?[s.createElement($t,{id:e,key:Kt.eb.latest}),s.createElement(Jt,{id:e,key:Kt.eb.resume})]:a===Xe.E6.artists&&t?s.createElement(Me,{key:"AddArtist",callbackLink:`/profile/me/${Xe.E6.artists}`}):void 0}_renderPlaceholder(e){const{isMe:t,tab:a}=this.props,{search:l}=this.state,r=void 0!==this._renderPrependElement();if(!(e.length>0||r)){if(""!==l)return s.createElement(sa,{query:l});switch(a){case Xe.E6.albums:return s.createElement(ra,{isMe:t});case Xe.E6.artists:return s.createElement(ia,{isMe:t});case Xe.E6.followers:return ja||(ja=s.createElement(na,null));case Xe.E6.following:return Ka||(Ka=s.createElement(oa,null));case Xe.E6.radios:return s.createElement(ca,{isMe:t});case Xe.E6.playlists:return s.createElement(da,{isMe:t});case Xe.E6.shows:return s.createElement(pa,{isMe:t});default:return}}}_onFilterChanged(e){this.setState({activeFilter:e}),(0,$e.h4)({action:$e.dJ.FILTER_CLICKED,payload:{path:this.props.tab,filter_name:e,filter_type:"filter"}})}_onSortChanged(e){this.setState({selectedSort:e}),this.props.isMe&&zt.default.set(Xa(this.props.tab),e),(0,$e.h4)({action:$e.dJ.FILTER_CLICKED,payload:{path:this.props.tab,filter_name:e,filter_type:"sort"}})}_onSearchChanged(e){this.setState({search:e}),e&&(0,$e.h4)({action:$e.dJ.FILTER_CLICKED,payload:{path:this.props.tab,filter_name:"search",filter_type:"filter"}})}_search(e,t){const{tab:a}=this.props,s=(e=>(0,i.A)(Ma,`[${e}].actions.search.fields`))(a);return s?e.filter(e=>s.some(a=>{let s=e[a]||"";return e&&e.TYPE&&Number(e.TYPE)===$a.S7&&(s=(0,x.AP)("Coups de coeur")),(0,qe.A)(s.toLowerCase()).indexOf(t)>-1},!1)):e}}const Va=Qa;var es,ts,as,ss=a("Rap7"),ls=a("iphN"),rs=a("Jfek"),is=a("1h7S"),ns=a("9MQu"),os=a("KJ1h"),cs=a("Eiyd"),ds=a("C53p");const ps=({id:e,context:t})=>{const a=(0,l.d4)(t=>(0,G.lS)(t.entities,{id:e,currentUserId:t.user.id})),r=(0,l.d4)(e=>(0,M.pp)(e.feedbacks,p.Ay.Song,!1)),i=(0,l.d4)(e=>(0,u.Jt)(e.user)),n={NB_SONG:r,PICTURE_TYPE:a.PICTURE_TYPE,PLAYLIST_PICTURE:a.PLAYLIST_PICTURE,TITLE:a.TITLE},o=(0,is.Ay)({containerData:n,context:t,id:e,isDownloadable:i,isShareable:!0,type:p.Ay.Playlist,shareType:rs.Gb.playlist});return s.createElement(is.PK.Provider,{value:o},s.createElement(ns.e,{size:"medium",gap:le.A.isAllowed("revamp2023")?"spacing.xs":"12px",spacing:0,"data-testid":"toolbar"},es||(es=s.createElement(cs.A,null)),ts||(ts=s.createElement(ds.A,null)),as||(as=s.createElement(os.A,null))))};var ms=a("TDRX");const hs=({isMe:e})=>e?s.createElement(aa,{title:(0,x.AP)("emptystate_title_notracksyet_web"),description:(0,x.AP)("emptystate_text_findtrackstoaddhere_web")},s.createElement(me.$n,{as:la.N_,to:(0,L.jd)("/channels/explore")},(0,x.AP)("playlistpage_action_addtracks_web"))):s.createElement(aa,{title:(0,x.AP)("emptystate_title_notracksyet_web")});var us,As,_s=a("1Pdy"),Es=a("3R0U"),ys=a("zCrf"),bs=a("ISNy"),gs=a("8SzP"),fs=a("gPEU");const Ps=()=>{const[e,t]=(0,s.useState)(null),[a,l]=(0,s.useState)(!0),[r,i]=(0,s.useState)(0),n=(0,xt.j)(),{lovedTracksId:o,playlistData:c}=(0,xt.G)(e=>{const t=(0,u.G8)(e.user);return{lovedTracksId:t,playlistData:(0,G.lS)(e.entities,{id:t,currentUserId:e.user.id})}}),d=(0,xt.G)(e=>(0,M.pp)(e.feedbacks,p.Ay.Song,!1)),m=(0,xt.G)(bs.VL),A=(0,xt.G)(e=>(0,re._B)(e.cache,{id:o,type:p.Ay.Playlist})),_=(0,xt.G)(e=>(0,u.Uw)(e.user)===Dt.g),E={ID:o,TYPE:(0,ae.Us)(p.Ay.Playlist)},y=(0,s.useCallback)(async({nb:e,start:t})=>{await n((0,ys.bm)({start:t,nb:e},{cacheUsage:A?Es.u.READ_ONLY:Es.u.NONE})),i(t+e)},[n,A]),b=(0,s.useCallback)(({order:e})=>n((0,h.rc)(p.Ay.Song,e)),[n]),{type:g}=(0,gs.r)();if((0,s.useEffect)(()=>(D.A.ready(D.A.user.userReady,()=>{n((0,h.G5)(p.Ay.Song)).then(()=>y({start:0,nb:S.ww})).catch(t).finally(()=>{l(!1)})}),()=>{(0,ys.w8)()}),[y,n]),(0,St.A)(vt.g.FILTER,()=>{(0,$e.h4)({action:$e.dJ.FILTER_CLICKED,payload:{path:"loved",filter_name:"search",filter_type:"filter"}})},E),e)throw e;if(a)return us||(us=s.createElement("div",{className:"loved-loader"},s.createElement(w.A,null)));const f={total:d,data:m.slice(0,r)},P=(0,x.WI)("%s coup de cœur","%s coups de cœur",{sprintf:[(0,J.A)(f.total)],count:f.total}),T=[_s.Rj.Add,_s.Rj.Delete,_s.Rj.Reorder];return s.createElement(Ce.OJ,{value:{page:"favorite_tracks"}},s.createElement("div",{className:"container"},s.createElement(ms.a,{mb:"spacing.l"},s.createElement(je.A,{title:P})),s.createElement("div",{className:"loved-heading"},s.createElement(ps,{context:E,id:o}),s.createElement(ss.A,{context:E,isDisabled:f.total<=0,classname:"profile-tracklist-filter"}))),s.createElement("div",{className:"container"},f.total>0?s.createElement(ls.A,{context:E,hasFilter:!1,isFullyFetched:r>=f.total,isPersonalFavoritesSongs:!0,items:f.data,nextFetchDataIndex:r,onFetch:y,onReorder:b,options:T,playlistId:o,shouldExplicitBeHidden:_,total:f.total},"sender"===g&&s.createElement(fs.B,{playlist:c})):As||(As=s.createElement(hs,{isMe:!0}))))},Ts=a("DjLa").WR.PERSONAL_SONGS,vs={TITLE:{SIZE:at.uq.Full},ARTIST:{SIZE:at.uq.PercentXs},PARENT:{BREAKPOINT:at.x1.md,SIZE:at.uq.PercentXs},DURATION:{SIZE:at.uq.sm},SELECT:{ALIGN:at.uP.Right,SIZE:at.uq.sm}};var Ss,ws,Cs;const Ns=s.memo(({data:e,index:t,style:a})=>{const l=e.toDisplay[t],{context:r,container:n,loadingStatus:o,shouldExplicitBeHidden:c}=s.useContext(nt.Gt),{playerStatus:d,play:m,isItemLoadedInPlayer:h}=(0,Et.A)(r,n,o.isFullyFetched),u=l.item.hasExplicitLyrics&&c,A=(t,a)=>{m({playIndex:a,playItems:e.toPlay,isTrackActive:t})};return s.createElement(ct.A.Row,{style:a,uuid:l.uuid,id:l.item.id,index:l.index,isActive:h(l.item)&&d.isSameContext,isReadable:l.item.right===yt.A.READABLE,isRestrictedByExplicit:u,type:l.item.type,isDraggable:!0},s.createElement(_t.A,{size:vs.TITLE.SIZE},s.createElement(_t.A.Play,{ariaLabel:(0,x.AP)("generic_action_playsongXbyartistX_web",{sprintf:[l.item.title,(0,i.A)(l,"item.artists[0].name","")]}),hasExplicitCover:l.item.parent.hasExplicitCover,onPlayItems:A,pictureUrl:l.item.cover(Ze.r4).url}),Ss||(Ss=s.createElement(_t.A.Download,null)),s.createElement(_t.A.PlayableLabel,{hasExplicitLyrics:l.item.hasExplicitLyrics,label:l.item.title,onPlayItems:A,tooltipText:(0,bt.Y)(l.item,c)}),s.createElement(ct.A.IconGroup,null,ws||(ws=s.createElement(_t.A.AddToFavorite,null)),s.createElement(_t.A.Edit,{item:l.item}),s.createElement(_t.A.OpenContextMenu,{item:l.item}))),s.createElement(ct.A.CellBody,{size:vs.ARTIST.SIZE},s.createElement(ut.A,{links:l.item.artists.map(e=>({...e,type:p.Ay.Artist}))})),s.createElement(ct.A.CellBody,{breakpoint:vs.PARENT.BREAKPOINT,size:vs.PARENT.SIZE},s.createElement(ut.A,{links:[{...l.item.parent,type:p.Ay.Album}]})),s.createElement(ct.A.CellBody,{size:vs.DURATION.SIZE},s.createElement(ht.A,{duration:l.item.duration})),s.createElement(ct.A.CellBody,{align:vs.SELECT.ALIGN,size:vs.SELECT.SIZE},Cs||(Cs=s.createElement(At.A,null))))},pt.t7);var Rs,Ds,xs;const Ls=({context:e,isFullyFetched:t,items:a,nextFetchDataIndex:l,onFetch:r,userId:i,shouldExplicitBeHidden:n=!1,total:o})=>{const c={id:i,type:tt.Kk.PERSONAL_SONG},d=(0,s.useRef)(null),{loadingStatus:p,fetchNext:m,fetchAll:h}=(0,wt.A)(r,i,t,l,e),{manageItems:u,tableItems:A}=(0,Ct.A)(i,a,e,{fetchAll:h,sortStorageKey:Ts}),{playerStatus:_,play:E}=(0,Et.A)(e,c,t),y=(0,It.A)(A,e,h),b=(0,s.useCallback)(()=>{r({id:i,start:0,nb:2e3})},[r,i]);(0,St.A)(vt.g.PLAY,()=>{E({playItems:A.toPlay})},e),(0,St.A)(vt.g.FILTER,e=>{u.action.filter(e.query||"")},e),(0,s.useEffect)(()=>(D.A.subscribe(D.A.user.sendPersonalSong,b),()=>{D.A.unsubscribe(D.A.user.sendPersonalSong,b)}),[b]);const g=(0,nt.Ay)({container:c,context:e,loadingStatus:p,manageItems:u,playerStatus:_,select:y,shouldExplicitBeHidden:n});return s.createElement(nt.ru,{value:g},s.createElement(ct.A,{tableRef:d,rowCount:o},s.createElement(ct.A.Header,null,s.createElement(ct.A.CellHead,{size:vs.TITLE.SIZE,sortPath:"item.title"},(0,x.AP)("datagrid_title_trackUPP_web")),s.createElement(ct.A.CellHead,{size:vs.ARTIST.SIZE,sortPath:"item.artist.name"},(0,x.AP)("datagrid_title_artistUPP_web")),s.createElement(ct.A.CellHead,{breakpoint:vs.PARENT.BREAKPOINT,size:vs.PARENT.SIZE,sortPath:"item.parent.name"},(0,x.AP)("datagrid_title_albumUPP_web")),s.createElement(ct.A.CellHead,{ariaLabel:(0,x.AP)("sortingmenu_title_duration_web"),size:vs.DURATION.SIZE,sortPath:"item.duration"},Rs||(Rs=s.createElement(et.m,null))),s.createElement(ct.A.CellHead,{align:vs.SELECT.ALIGN,size:vs.SELECT.SIZE},s.createElement(ot.A,{rowCount:A.toDisplay.length}))),s.createElement(ct.A.Body,null,s.createElement(Ve.A,{isItemLoaded:e=>e<a.length-S.Hs,itemCount:A.toDisplay.length,loadMoreItems:m,threshold:S.Hs},({onItemsRendered:e,ref:t})=>s.createElement(dt.A,{onItemsRendered:e,tableRef:d,items:A,ref:t},Ns)),Ds||(Ds=s.createElement(ct.A.RowLoader,null)))),0===A.toDisplay.length&&(xs||(xs=s.createElement(ct.A.EmptyContent,null))))};var Fs=a("MRGC"),Os=a("N67Q"),ks=a("jERP");const Bs=()=>s.createElement(Os.A,null,s.createElement(ks.A,{accept:"audio/mp3,audio/mpeg",type:"audio",directory:"user",action:"sendPersonalSong",multiFile:!0},s.createElement(me.$n,{fontFamily:"body"},(0,x.AP)("Envoyer vos mp3"))));var Us,Ms;const Gs=({id:e,context:t})=>{const a=(0,l.d4)(e=>(0,Fs.Vz)(e)),r=(0,is.Ay)({containerData:a,context:t,id:e,type:t.TYPE});return s.createElement(is.PK.Provider,{value:r},s.createElement(ns.e,{size:"medium",gap:le.A.isAllowed("revamp2023")?"spacing.xs":"12px",spacing:0,"data-testid":"toolbar"},Us||(Us=s.createElement(cs.A,null)),Ms||(Ms=s.createElement(Bs,null))))};var Hs,zs=a("K5vB"),Xs=a("Kgcv");const Ws=({id:e})=>{const[t,a]=(0,s.useState)(null),[l,r]=(0,s.useState)(!0),n=(0,xt.j)(),o=(0,xt.G)(e=>(0,u.Uw)(e.user)===Dt.g),c=(0,xt.G)(Fs.Vz),d=(0,s.useCallback)(({start:e,nb:t})=>n((0,Xs.Zi)(e,t)),[n]);if((0,s.useEffect)(()=>(D.A.ready(D.A.user.userReady,()=>{d({start:0,nb:S.ww}).catch(a).finally(()=>{r(!1)})}),()=>{(0,Xs.w8)()}),[d]),t)throw t;if(l)return Hs||(Hs=s.createElement("div",{className:"loved-loader"},s.createElement(w.A,null)));const p=(0,i.A)(c,"NB_SONG",0),m=(0,x.WI)("%s MP3","%s MP3",{sprintf:[(0,J.A)(p)],count:p}),h={ID:e,TYPE:se.EB};return s.createElement(s.Fragment,null,s.createElement("div",{className:"container"},s.createElement(ms.a,{mb:"spacing.l"},s.createElement(je.A,{title:m})),s.createElement("div",{className:"loved-heading"},s.createElement(zs.AG,{value:{onSuccess:()=>n((0,Xs.vQ)(0,2e3)),onError:()=>(0,Ae.A)({body:(0,x.AP)("Une erreur est survenue, merci de réessayer plus tard."),status:"error"})}},s.createElement(Gs,{context:h,id:e})),s.createElement(ss.A,{context:h,isDisabled:p<=0,classname:"profile-tracklist-filter"}))),s.createElement("div",{className:"container"},s.createElement(Ls,{context:h,isFullyFetched:c.HAS_FULLY_LOADED_SONGS,items:c.data,onFetch:d,nextFetchDataIndex:c.NEXT_FETCH_DATA_INDEX,shouldExplicitBeHidden:o,total:p,userId:e})))};var Ys,qs,Zs,js,Ks,$s=a("rOn+"),Js=a("Ye48");const Qs=({id:e,context:t})=>{const a=(0,l.d4)(t=>(0,G.lS)(t.entities,{id:e,currentUserId:t.user.id})),r=(0,l.d4)(e=>(0,u.Jt)(e.user)),i=(0,is.Ay)({containerData:a,context:t,id:e,isDownloadable:r,isLoveable:!a.IS_PRIVATE,isShareable:!a.IS_PRIVATE,type:p.Ay.Playlist,shareType:rs.Gb.playlist});return s.createElement(is.PK.Provider,{value:i},s.createElement(ns.e,{size:"medium",gap:le.A.isAllowed("revamp2023")?"spacing.xs":"12px",spacing:0,"data-testid":"toolbar"},Ys||(Ys=s.createElement(cs.A,null)),qs||(qs=s.createElement($s.A,null)),Zs||(Zs=s.createElement(ds.A,null)),js||(js=s.createElement(os.A,null)),Ks||(Ks=s.createElement(Js.A,null))))};var Vs,el,tl=a("A2sV");const al=({id:e,userId:t})=>{var a,l;const[r,i]=(0,s.useState)(null),[n,o]=(0,s.useState)(!0),c=(0,xt.j)(),d=(0,xt.G)(e=>(0,u.Uw)(e.user)===Dt.g),m=(0,xt.G)(t=>(0,G.lS)(t.entities,{id:e,currentUserId:(0,u.F6)(t.user)})),h=(0,s.useCallback)(({start:t,nb:a})=>c((0,ne.vW)({id:e,start:t,nb:a})),[c,e]),{data:A}=(0,tl.x87)({variables:{userId:t}});if((0,s.useEffect)(()=>(D.A.ready(D.A.user.userReady,()=>{h({start:0,nb:S.ww}).catch(i).finally(()=>{o(!1)})}),()=>{(0,ne.w8)()}),[h]),r)throw r;if(n)return Vs||(Vs=s.createElement("div",{className:"loved-loader"},s.createElement(w.A,null)));const _=null!==(a=null==A||null===(l=A.user)||void 0===l?void 0:l.favorites.estimatedTracksCount)&&void 0!==a?a:0,E=(0,x.WI)("%s coup de cœur","%s coups de cœur",{sprintf:[(0,J.A)(_)],count:_}),y={ID:e,TYPE:(0,ae.Us)(p.Ay.Playlist)};return s.createElement(Ce.OJ,{value:{page:"favorite_tracks"}},s.createElement("div",{className:"container"},s.createElement(ms.a,{mb:"spacing.l"},s.createElement(je.A,{title:E})),s.createElement("div",{className:"loved-heading"},s.createElement(Qs,{context:y,id:e}),s.createElement(ss.A,{context:y,isDisabled:m.NB_SONG<=0,classname:"profile-tracklist-filter"}))),s.createElement("div",{className:"container"},m.NB_SONG>0?s.createElement(ls.A,{context:y,hasFilter:!1,isFullyFetched:m.HAS_FULLY_LOADED_SONGS,items:m.SONGS,nextFetchDataIndex:m.NEXT_FETCH_DATA_INDEX,onFetch:h,playlistId:e,shouldExplicitBeHidden:d,total:m.NB_SONG}):el||(el=s.createElement(hs,{isMe:!1}))))};var sl,ll,rl,il;class nl extends s.Component{constructor(e){super(e),this.state={data:e.data},this._onTabClick=this._onTabClick.bind(this),this._onFavoriteChanged=this._onFavoriteChanged.bind(this),this._tabsNotToLog=[Xe.E6.personal_song,Xe.E6.followers,Xe.E6.following]}getChildContext(){return{userId:this.props.id,isMe:this.props.isMe,data:this.state.data||{}}}static getDerivedStateFromProps(e){return{data:e.data}}componentDidMount(){const{tab:e}=this.props;D.A.subscribe(D.A.navigation.tabChange,(e,t)=>{this._onTabClick(t)},"profile"),D.A.subscribe(D.A.user.addFavorite,this._onFavoriteChanged,"profile"),D.A.subscribe(D.A.user.deleteFavorite,this._onFavoriteChanged,"profile"),this._tabsNotToLog.includes(e)||F.A.log({type:"cdp",eventName:"screen_view",customAttributes:{screen_view_name:Xe.Xw[e]}})}componentDidUpdate(e){const{tab:t}=this.props;e.tab===t||this._tabsNotToLog.includes(t)||F.A.log({type:"cdp",eventName:"screen_view",customAttributes:{screen_view_name:Xe.Xw[t]}})}componentWillUnmount(){D.A.unsubscribeAll("profile")}render(){return s.createElement("div",{className:"naboo-catalog",id:"page_profile"},this._renderHeader(),s.createElement("div",{className:"naboo-catalog-content-wrapper"},s.createElement("div",{className:"naboo-catalog-content"},this._renderTabContent())))}_renderHeader(){const{id:e,nbFollowers:t,nbFollowing:a,isDeleted:l,isFollowed:r,isHidden:i,isPersonal:n,tab:o,onFollowToggle:c}=this.props;return l?null:s.createElement(te,{id:e,nbFollower:t,nbFollowing:a,isDeleted:l,isFollowed:r,isPersonal:n,tabList:this._getTabList(),activeTab:o,isHiddenUser:i,onFollowToggle:c})}_renderTabContent(){const{id:e,lovedTracksId:t,isHidden:a,isMe:l,tab:r,isLoading:i}=this.props,n=this.state.data;if(!l&&a)return this._renderPlaceholder();if(!Xe.pw.includes(r)){if(i)return sl||(sl=s.createElement(w.A,null));if(!n)return null}switch(r){case Xe.E6.home:return s.createElement("div",{role:"tabpanel"},s.createElement(Ye,{id:e,data:n,isMe:l}));case Xe.E6.downloads:return ll||(ll=s.createElement("div",{role:"tabpanel"},s.createElement(Qe,null)));case Xe.E6.loved:return s.createElement("div",{role:"tabpanel"},l?rl||(rl=s.createElement(Ps,null)):s.createElement(s.Suspense,{fallback:null},s.createElement(al,{id:t,userId:String(e)})));case Xe.E6.personal_song:return s.createElement("div",{role:"tabpanel"},s.createElement(Ws,{id:e}));case Xe.E6.history:return s.createElement("div",{role:"tabpanel"},s.createElement(Ot,{id:e}));default:return s.createElement("div",{role:"tabpanel"},s.createElement(fa,{value:this._getFilterContext()},s.createElement(Va,{id:e,key:`profile_${r}`,tab:r,items:n,isMe:l})))}}_renderPlaceholder(){const{isDeleted:e}=this.props,t=e?(0,x.AP)("Ce profil a été supprimé."):(0,x.AP)("Ce profil est privé."),a=(0,R.A)({"naboo-offline":e});return s.createElement("div",{className:"placeholders-container"},s.createElement("div",{className:a},il||(il=s.createElement("div",{className:"placeholders-img private"})),s.createElement("div",{className:"placeholders-title"},t)))}_onFavoriteChanged(e,t){const{isMe:a,tab:s}=this.props;if(!a)return;const l="USER.addFavorite"===e.namespace?"add":"remove";s===Xe.E6.home?this._handleFavoriteChangeOnHome(l,t):this._handleFavoriteChangeOnDedicatedTab(l,t)}_onTabClick(e){const{id:t,history:a}=this.props;let s=`/profile/${t}`;e.id!==Xe.E6.home&&(s+=`/${e.url||e.id}`),a.push((0,L.jd)(s))}_getFilterContext(){const{tab:e,genres:t}=this.props;return e===Xe.E6.playlists?[{key:Mt.R.None,label:(0,x.AP)("filtertagplaylists_title_all_web")},{key:Mt.R.PlaylistPersonal,label:(0,x.AP)("filtertagplaylists_title_personal_web")},{key:Mt.R.PlaylistFavorite,label:(0,x.AP)("filtertagplaylists_title_added_web")},{key:Mt.R.PlaylistCollaborative,label:(0,x.AP)("filtertagplaylists_title_collaborative_web")}]:(null==t?void 0:t.length)>0?(e=>[{key:Mt.R.None,label:(0,x.AP)("filtertagartists_title_all_web")},...e.map(({GENRE_ID:e,GENRE_NAME:t})=>({key:e,label:t}))])(t):[]}_getTabList(){const{isMe:e,userHasDownload:t}=this.props,a=Wa(e,t);let s=[];return Object.keys(a).forEach(e=>{s.push({...a[e],id:e,action:this._onTabClick})}),s}_handleFavoriteChangeOnHome(e,t){const{type:a}=t,s=`${a}s`,l=(0,i.A)(this.state,`data.[${s}].data`);if(!l)return;const r=this._updateFavoriteList(l,e,t);this.setState({data:{...this.state.data,[s]:{...this.state.data[s],data:r,total:r.length}}})}_updateFavoriteList(e,t,a){const{id:s,type:l}=a,r=p.vn[l];return"add"===t?e.find(e=>String(e[r])===String(s))?[...e]:[a,...e]:e.filter(e=>String(e[r])!==String(s))}_handleFavoriteChangeOnDedicatedTab(e,t){const{type:a}=t;let s;switch(a){case p.Ay.User:s=Xe.E6.following;break;case p.Ay.Song:return;default:s=`${a}s`}if(this.props.tab!==s)return;const l=(0,i.A)(this.state,"data.data");if(!l)return;const r=this._updateFavoriteList(l,e,t);this.setState({data:{...this.state.data,data:r,total:r.length}})}}nl.childContextTypes={userId:I().number,isMe:I().bool,data:I().object},nl.defaultProps={data:null,feedbackType:null,isHiddenUser:!1};const ol=(0,N.y)((0,l.Ng)(({user:e})=>({userHasDownload:(0,u.Jt)(e)}))(nl));var cl,dl,pl,ml=a("yJX9");let hl=(0,m.Ay)({event:"updatepage",pagename:"profile",pagecategory:"profile"})((dl=class extends s.Component{constructor(e){super(e),this.state={error:null},this._handleFollowToggle=()=>{this.setState(e=>{const t=!e.isFollowed;return{isFollowed:t,nbFollowers:t?e.nbFollowers+1:Math.max(e.nbFollowers-1,0)}})};const{appState:t,match:{params:a}}=e;this._formatAndPushDataToStore=this._formatAndPushDataToStore.bind(this),e.appState&&Object.keys(e.appState).length&&this._formatAndPushDataToStore(e.appState,a.tab),this.state={data:e.appState||null,isFollowed:!!t&&!1!==(0,i.A)(e,"appState.DATA.FOLLOW",!1),nbFollowers:t?(0,i.A)(e,"appState.DATA.NB_FOLLOWER",0):0,isFetching:!1}}componentDidMount(){const{match:{params:e}}=this.props;this._hasDataToDisplayProfile()||this._fetchProfile(e.id,e.tab)}componentDidUpdate(e){const{id:t,tab:a}=this.props.match.params;e.match.params.tab===a&&e.match.params.id===t||this._fetchProfile(t,a)}componentWillUnmount(){o.A.cancel(this._fetchPageApiRef)}render(){const{data:e,isFetching:t,nbFollowers:a,isFollowed:l}=this.state,r=this._hasDataToDisplayProfile();if(this.state.error)throw this.state.error;if(t&&!1===r)return pl||(pl=s.createElement(w.A,null));if(!r)return null;const n=(e=>"podcasts"===e?Xe.E6.shows:Xe.E6[e])(this.props.match.params.tab)||Xe.E6.home,o=(0,i.A)(e,`TAB[${n}]`),c=(0,i.A)(e,"TAB.genre_filters.data"),d={id:Number(this.props.match.params.id),tab:n,genres:c,data:o,lovedTracksId:(0,i.A)(e,"DATA.USER.LOVEDTRACKS_ID"),isHidden:!e.DATA.IS_PUBLIC||e.DATA.IS_BLOCKED||"2"===e.DATA.USER.ACTIVATION,isDeleted:"2"===e.DATA.USER.ACTIVATION,isPersonal:e.DATA.IS_PERSONNAL,nbFollowers:a,nbFollowing:e.DATA.NB_FOLLOWING,isFollowed:l,isLoading:t,isMe:this.props.isMe,onFollowToggle:this._handleFollowToggle};return s.createElement(ol,d)}_getFeedbackItemTypeByTabKey(e){return(0,i.A)(Wa[e],"type",null)}_formatAndPushDataToStore(e,t){const{match:a,isMe:s}=this.props,l=t?e.TAB:e.TAB.home;l&&Object.keys(l).forEach(e=>{l[e].data&&(l[e].data=l[e].data.map(e=>({...e,partial:!0})))});const i=Object.keys(l||{}).length>0?(0,r.S8)(l,T):{},o=(0,n.A)(e,"DATA.USER")?(0,r.S8)(e.DATA.USER,v):{};s&&Object.keys(l).forEach(e=>{const t=this._getFeedbackItemTypeByTabKey(e);if(t&&l[e].data){let s=l[e].data;t===p.Ay.Playlist&&(s=l[e].data.filter(e=>String(e.PARENT_USER_ID)!==String(a.params.id))),c.A.dispatch((0,h.G8)(ml.Z.favorites,t,d.A.normalize(s,t)))}}),c.A.dispatch({type:"profile/FETCHED_TAB",data:{entities:{...i.entities,...o.entities},tab:t||Xe.E6.home}})}_fetchProfile(e,t){const a={user_id:e,tab:t||Xe.E6.home,nb:S.XQ};this.setState({isFetching:!0}),this._fetchPageApiRef=o.A.call({method:"deezer.pageProfile",data:a,success:e=>{this.setState({data:e,isFollowed:!1!==(0,i.A)(e,"DATA.FOLLOW",!1),nbFollowers:(0,i.A)(e,"DATA.NB_FOLLOWER",0),isFetching:!1}),this._formatAndPushDataToStore(e,t)},error:e=>{this.setState({error:e,isFetching:!1})}})}_hasDataToDisplayProfile(){return(0,n.A)(this.state,"data.DATA.USER")}},dl.displayName="profile",dl.defaultProps={appState:void 0},cl=dl))||cl;const ul=(0,l.Ng)(({user:e},{match:t})=>({isMe:Number(t.params.id)===(0,u.F6)(e)}))(hl)},FSqQ:(e,t,a)=>{a.d(t,{A:()=>i});var s,l=a("q1tI"),r=a("juqV");class i extends l.Component{render(){const{className:e}=this.props;let t=(0,r.A)("loader-container",e);return l.createElement("div",{className:t,"data-testid":"loader"},s||(s=l.createElement("div",{className:"loader animate-spin"})))}}},I36q:(e,t,a)=>{a.d(t,{d:()=>s});let s=function(e){return e.Welcome="welcome",e.Improve="improve",e}({})},"JKL/":(e,t,a)=>{a.d(t,{A:()=>r});var s=a("q1tI"),l=a("TDRX");const r=({children:e,className:t=""})=>s.createElement(l.a,{mt:"spacing.xl",mb:"spacing.2xl",className:t},e)},Rap7:(e,t,a)=>{a.d(t,{A:()=>p});var s=a("q1tI"),l=a("kSUS"),r=a("lXQd"),i=a("juqV"),n=a("Wp0Y"),o=a("Z9kq"),c=a("ZH8F");const p=({context:e,isDisabled:t=!1,placeholder:a=(0,n.AP)("search_action_searchwithintracks_web"),classname:p})=>{const m=(0,l.A)(t=>{document.dispatchEvent((0,c.e)(c.g.FILTER,{context:e,query:(0,r.A)(t,"target.value","")}))},500);return s.createElement("div",{className:(0,i.A)("j_Jqy",p)},s.createElement(o.D,{isDisabled:t,onChange:m,size:"small",placeholder:a}))}},U9ZG:(e,t,a)=>{a.d(t,{A:()=>N});var s,l,r,i=a("q1tI"),n=a("Ty5D"),o=a("TRpf"),c=a("HmE0"),d=a("9MQu"),p=a("NgX8"),m=a("TDRX"),h=a("5Loq"),u=a("ZUSG"),A=a("EPmj"),_=a("Wp0Y"),E=a("5G9X"),y=a("LjZa"),b=a("tZCQ"),g=a("TqF5"),f=a("0oT0"),P=a("2EvD"),T=a("Jfek"),v=a("eerp"),S=a("g1Fm"),w=a("cFUB"),C=a("AfN5");class I extends i.Component{constructor(e,t){super(e,t),this._onEdit=this._onEdit.bind(this),this._onShare=this._onShare.bind(this),this._onGoToAccount=this._onGoToAccount.bind(this)}shouldComponentUpdate(e){return this.props.id!==e.id||this.props.type!==e.type||this.props.action.length!==e.action.length}render(){return b.A.isAllowed("revamp2023")?i.createElement(d.e,{as:"ul",size:"medium",gap:"spacing.xs",spacing:"0"},this.props.action.map(e=>"function"==typeof this["_render"+(0,S.A)(e)]?i.createElement(m.a,{as:"li",key:e},this["_render"+(0,S.A)(e)]()):null)):i.createElement("ul",{className:"list-actions"},this.props.action.map(e=>"function"==typeof this["_render"+(0,S.A)(e)]?i.createElement("li",{className:"list-actions-item",key:e},this["_render"+(0,S.A)(e)]()):null))}_renderFavorite(){const{context:e,id:t,type:a}=this.props;return i.createElement(f.A,{id:t,type:a,action:w.Hj.FAVORITE,context:e})}_renderPlay(){const{id:e,type:t,context:a}=this.props,s=t===E.Ay.Song?{forceAsFirstTrack:!0}:{};return i.createElement(f.A,{action:w.Hj.PLAY,color:w.cW.PRIMARY,context:a,dzPlayerOptions:s,id:e,type:t===E.Ay.Song?C.Kk.TRACK_MIX:t,wordingType:w.Hn.FULL})}_renderShuffle(){const{id:e,type:t,context:a}=this.props;return i.createElement(f.A,{id:e,type:t,action:w.Hj.SHUFFLE,color:w.cW.PRIMARY,wordingType:w.Hn.FULL,context:a})}_renderShare(){return i.createElement(c.K0,{icon:s||(s=i.createElement(A.l,null)),onClick:this._onShare,variant:"ghost","aria-label":(0,_.AP)("Partager")})}_renderEdit(){return i.createElement(p.m,{label:(0,_.AP)("Editer")},i.createElement(c.K0,{"aria-haspopup":!0,"aria-label":(0,_.AP)("generic_action_edit_web"),icon:l||(l=i.createElement(u.r,null)),onClick:this._onEdit,variant:"ghost"}))}_renderOptions(){const{context:e,data:t,id:a,type:s}=this.props,l={anchor:i.createElement(c.K0,{"aria-haspopup":!0,"aria-label":(0,_.AP)("generic_action_viewmenu_web"),icon:r||(r=i.createElement(h.j,null)),variant:"ghost"}),context:e,id:String(a),data:t,placement:"right",type:s};return i.createElement(P.A,l)}_onShare(){const{id:e,data:t,context:a,type:s}=this.props;this.props.openModal({name:T.DN,props:{componentType:T.Wg.directShareMasthead,context:a,data:t,id:e,type:(0,v.A)(s)}})}_onEdit(){this.props.edit()}_onGoToAccount(){this.props.history.push("/account")}}I.defaultProps={data:{},action:["favorite","share","options"],edit:y.A};const N=(0,n.y)((0,o.Ng)(null,{openModal:g.qf})(I))},Votb:(e,t,a)=>{a.d(t,{z:()=>r});var s=a("nKUr"),l=a("eOc8");const r=(0,a("xi32").R)((e,t)=>(0,s.jsx)(l.B,{align:"center",...e,direction:"row",ref:t}));r.displayName="HStack"},"X/JG":(e,t,a)=>{a.d(t,{A:()=>w});var s,l,r,i,n=a("+9dH"),o=a("17x9"),c=a.n(o),d=a("q1tI"),p=a("TRpf"),m=a("kSUS"),h=a("juqV"),u=a("Wp0Y"),A=a("H/eQ"),_=a("LOQS"),E=a("HmE0"),y=a("hIIJ"),b=a("sCpb"),g=a("fsGD"),f=a("vF4p"),P=a("RSbz"),T=a("6vqc"),v=a("nN8/");class S extends d.Component{constructor(e){super(e),this._initAds=this._initAds.bind(this),this._debouncedCheckItems=this._debouncedCheckItems.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this.state={itemIndex:0,itemWidth:0,containerWidth:0,displayedItemCount:0,hasControlLeft:!1,hasControlRight:!0,mouseIn:!1},this._nodeRef=d.createRef()}getChildContext(){return{layout:g.Pl}}componentDidMount(){this.props.data.length>0&&(this._checkItems(),A.A.subscribe(A.A.layout.adsBackground,this._initAds),A.A.subscribe(A.A.layout.resize,this._debouncedCheckItems),this._setAutoAnimate())}componentDidUpdate(e,t){const{mouseIn:a}=this.state,{data:s,related:l}=this.props;t.mouseIn!==a&&(a?clearTimeout(this._intervalAutoAnimate):this._setAutoAnimate()),(e.data.length!==s.length||e.related!==l&&s.length>0)&&this._checkItems()}componentWillUnmount(){clearTimeout(this._timeoutRef),this._debounceRef&&this._debounceRef.cancel(),this.props.autoAnimate&&clearTimeout(this._intervalAutoAnimate),A.A.unsubscribe(A.A.layout.adsBackground,this._initAds),A.A.unsubscribe(A.A.layout.resize,this._debouncedCheckItems)}render(){const{itemIndex:e,itemWidth:t}=this.state,{children:a,related:s,hasMoreItems:l}=this.props,r=e*("rtl"===this.props.langDirection?1:-1)*t,i={transform:`translateX(${r}px)`,msTransform:`translateX(${r}px)`,WebkitTransform:`translateX(${r}px)`},n={};""!==s.target&&""!==s.label&&l&&(n.label=s.label,n.target=s.target);const o=d.Children.map(a,e=>d.isValidElement(e)?d.cloneElement(e,{viewMore:n}):e);return d.createElement("div",{className:"carousel",ref:this._nodeRef},d.createElement("div",{className:"container"},this._renderHeadings()),d.createElement("div",{className:"container"},d.createElement("div",{className:"carousel-wrapper"},d.createElement("div",{className:"carousel-inner",style:i,onMouseEnter:this._onMouseOver,onMouseLeave:this._onMouseOut},o))))}_renderHeadings(){const{alignment:e,enrichedTitle:t}=this.props,a=(0,h.A)("channel-headings",{"is-centered":"center"===e});return d.createElement("div",{className:a},t?this._renderEnrichedTitle():this._renderTitle(),this._renderControls())}_renderTitle(){const{title:e,related:t,subtitle:a,target:s}=this.props;if(""===e)return null;const l=t.target||s;return d.createElement(v.Mk.Consumer,null,({dynamicContentlogAction:t})=>d.createElement(y.A,{href:void 0!==l&&""!==l?l:void 0,title:e,subtitle:a,onClick:()=>this._onClickViewAll(t)}))}_renderEnrichedTitle(){const{related:e,target:t,enrichedTitle:a}=this.props,s=e.target||t;return d.createElement(b.A,{href:void 0!==s&&""!==s?s:void 0,enrichedTitle:a})}_onClickViewAll(e){const{module_id:t,pageContext:a,tab:s}=this.props;e({action:v.D$.VIEW_ALL_CLICKED,payload:{module_id:t}}),null!=a&&a.includes("profile_")&&_.A.log({type:"cdp",eventName:"view_all_clicked",customAttributes:{section_name:f.Xw[s],screen_view_name:"profile_recently_played"===a?f.Xw.home:f.Xw[a.replace("profile_","")]}})}_shouldDisplayControls(){const{hasControlLeft:e,hasControlRight:t}=this.state;return e||t}_renderControlRight(){return this._shouldDisplayControls()?d.createElement("div",{className:"carousel-control carousel-next"},d.createElement(E.K0,{"aria-label":(0,u.AP)("Suivant"),isDisabled:!this.state.hasControlRight,icon:"ltr"===this.props.langDirection?s||(s=d.createElement(T.v,null)):l||(l=d.createElement(P.Y,null)),onClick:this._onSlide.bind(this,"right",!0),variant:"ghost"})):null}_renderControlLeft(){return this._shouldDisplayControls()?d.createElement("div",{className:"carousel-control carousel-prev"},d.createElement(E.K0,{"aria-label":(0,u.AP)("Précédent"),isDisabled:!this.state.hasControlLeft,icon:"ltr"===this.props.langDirection?r||(r=d.createElement(P.Y,null)):i||(i=d.createElement(T.v,null)),onClick:this._onSlide.bind(this,"left",!0),variant:"ghost"})):null}_renderControls(){if(!this.props.data.length)return null;let e={};return this.props.autoAnimate&&(e={onMouseEnter:this._onMouseOver,onMouseLeave:this._onMouseOut}),d.createElement("div",(0,n.A)({className:"carousel-controls"},e),this._renderControlLeft(),this._renderControlRight())}_onAutoAnimation(){const{hasControlLeft:e,hasControlRight:t,mouseIn:a}=this.state;!a&&t?this._onSlide("right",t):!a&&e&&this._processNewState(0)}_onMouseOver(){this.setState({mouseIn:!0})}_onMouseOut(){this.setState({mouseIn:!1})}_onSlide(e,t){if(t){const{itemIndex:t,displayedItemCount:a}=this.state,s=t+("left"===e?-1:1)*a;s!==t&&this._processNewState(s)}}_measureContainerWidth(){return this._nodeRef.current?this._nodeRef.current.querySelector(".carousel-inner").getBoundingClientRect().width:0}_checkItems(){if(!this._nodeRef.current)return;const e=this._nodeRef.current.getElementsByClassName("thumbnail-col");if(!e||0===e.length)return;const t=this._measureContainerWidth(),a="margin"+("rtl"===this.props.langDirection?"Right":"Left"),s=e[0].offsetWidth+parseInt(window.getComputedStyle(e[0])[a],10),l=Math.min(e.length,Math.ceil(t/s));this.setState({containerWidth:t,displayedItemCount:l,itemWidth:s},()=>{this._processNewState(this.state.itemIndex)})}_debouncedCheckItems(){this._debounceRef=(0,m.A)(()=>{this._checkItems()},300),this._debounceRef()}_processNewState(e){if(!this._nodeRef.current)return;const t=this._nodeRef.current.getElementsByClassName("thumbnail-col"),{displayedItemCount:a}=this.state;e=Math.min(t.length-a,Math.max(0,e)),this.setState({itemIndex:e,hasControlLeft:e>0,hasControlRight:e+a<t.length})}_initAds(){this._checkItems()}_setAutoAnimate(){this.props.autoAnimate&&(this._intervalAutoAnimate=setInterval(()=>{this._onAutoAnimation()},6e3))}}S.childContextTypes={layout:c().string},S.defaultProps={title:"",subtitle:"",target:"",section_id:"",hasMoreItems:!1,related:{target:"",label:""},options:[],alignment:"center",autoAnimate:!1,context:""};const w=(0,p.Ng)(({user:e})=>({langDirection:e.DIRECTION}))(S)},YVUD:(e,t,a)=>{a.d(t,{A:()=>P});var s=a("+9dH"),l=a("17x9"),r=a.n(l),i=a("q1tI"),n=a("nrKQ"),o=a("Wp0Y"),c=a("tZCQ"),d=a("R6sl"),p=a("kSUS"),m=a("H/eQ");class h extends i.Component{constructor(e){super(e),this._onScroll=this._onScroll.bind(this),this._onResize=this._onResize.bind(this)}UNSAFE_componentWillMount(){this._scrollActive=0!==this.props.total&&this.props.total>this.props.start,this._scrollActive&&0===this.props.start&&this._loadData()}componentDidMount(){this._resizeCallback=(0,p.A)(this._onResize,500),m.A.subscribe(m.A.layout.scroll,this._onScroll),window.addEventListener("resize",this._resizeCallback),this._scrollActive&&!this._hasScrollbar()&&this._loadData()}UNSAFE_componentWillReceiveProps(e){this._scrollActive=0!==e.total&&e.total>e.start,this._scrollActive&&0===e.start&&this._loadData()}componentDidUpdate(){this._scrollActive=0!==this.props.total&&this.props.total>this.props.start,this._scrollActive&&!this._hasScrollbar()&&this._loadData()}componentWillUnmount(){this._resizeCallback.cancel(),m.A.unsubscribe(m.A.layout.scroll,this._onScroll),window.removeEventListener("resize",this._resizeCallback)}render(){return i.createElement("div",{className:this.props.wrapperClass,"aria-live":"polite"},this.props.children)}_onScroll(e,{height:t,yscroll:a}){const s=document.body.scrollHeight;this._scrollActive&&s<=t+a+this.props.spacer&&this._loadData()}_onResize(){this._scrollActive&&!this._hasScrollbar()&&this._loadData()}_loadData(){this._scrollActive=!1;const{start:e,nb:t}=this.props;this.props.loadData(e,t)}_hasScrollbar(){return window.innerHeight<document.body.scrollHeight}}h.defaultProps={wrapperClass:"container",spacer:0,nb:20};const u=h;var A=a("hIIJ"),_=a("5G9X"),E=a("7E8A"),y=a("AfN5");const b={[_.Ay.TalkShow]:!0,[E.CONTEXT_PAGE_ARTIST_TAB_RELATED_ARTIST]:!0,[_.Ay.TopArtistFull]:!0,[_.Ay.Playlist]:!0,[y.Kk.PERSONAL_LOVED]:!0,[_.Ay.PersonalPlaylist]:!0,[_.Ay.CuratedChartsPlaylist]:!0,[_.Ay.ChartsPlaylist]:!0,[_.Ay.CuratorPlaylist]:!0,[_.Ay.CollaborativePlaylist]:!0,[_.Ay.Smarttracklist]:!0,[y.Kk.SEARCH]:!0,talkSearch:!0,[_.Ay.Album]:!0,lyricsSearch:!0,[E.CONTEXT_PAGE_SEARCH_TAB_ARTIST]:!0,[E.CONTEXT_PAGE_SEARCH_TAB_PLAYLIST]:!0,[E.CONTEXT_PAGE_SEARCH_TAB_ALBUM]:!0,[E.CONTEXT_PAGE_SEARCH_TAB_RADIO]:!0,[E.CONTEXT_PAGE_SEARCH_TAB_CHANNEL]:!0,[E.CONTEXT_PAGE_SEARCH_TAB_SHOW]:!0,[E.CONTEXT_PAGE_SEARCH_TAB_LIVESTREAM]:!0,[E.CONTEXT_PAGE_SEARCH_TAB_USER]:!0,[E.CONTEXT_PAGE_SEARCH_TAB_LYRICS]:!0},g=e=>Boolean(b[e]);class f extends i.Component{constructor(e){super(e),this._progressiveDisplayGroup=20,this._loadData=this._loadData.bind(this),this.state={data:e.data,total:e.total,progressiveDisplayLength:this._progressiveDisplayGroup}}UNSAFE_componentWillReceiveProps(e){(e.id!==this.props.id||e.filter!==this.props.filter||e.progressiveDisplay||g(this.props.pageContext))&&this.setState({data:e.data,total:e.total,progressiveDisplayLength:this._progressiveDisplayGroup})}componentWillUnmount(){n.A.cancel(this._apiCallRef)}render(){const{progressiveDisplayLength:e,data:t,total:a}=this.state,l=this.props.progressiveDisplay?t.slice(0,e):t,r=l.length,n=this._getGridAttributes();return i.createElement(u,{loadData:this._loadData,start:r,total:a,spacer:340},this._renderTitle(),a>-1&&i.createElement(d.A,(0,s.A)({data:l,pageContext:this.props.pageContext},n)))}_renderTitle(){const{title:e}=this.props;return""!==e&&(c.A.isAllowed("revamp2023")?i.createElement(A.A,{title:e,mb:"spacing.2xl"}):i.createElement("div",{className:"thumbnail-grid-title heading-1"},e))}_loadData(e,t){let{data:a,progressiveDisplayLength:s}=this.state;const{progressiveDisplay:l,method:r,id:i}=this.props;if(l)return void this.setState({progressiveDisplayLength:s+this._progressiveDisplayGroup});const o=r&&r.params?r.params:{},c=this.state.next||e,d=Object.assign({},o,{start:c,nb:t});void 0!==i&&(d.id=i),g(this.props.pageContext)?this.props.fetchData(d):this._apiCallRef=n.A.call({method:this._getMethodName(),data:d,success:e=>{const t={total:e.total,next:e.next||null};e.data.length>0&&(t.data=a.concat(e.data)),this.setState(t)}})}_getMethodName(){const{type:e,method:t,pageContext:a}=this.props;return void 0!==t&&t?t.name:{related_playlist:e+".get"+("artist"===e?"SelectedAnd":"")+"RelatedPlaylist",shows:"deezer.pageShows"}[a]}_getGridAttributes(){return this.props.gridAttributes?this.props.gridAttributes:{[E.CONTEXT_PAGE_ARTIST_TAB_RELATED_PLAYLIST]:{context:this.props.type+"_similar_playlist",placeHolder:{img:"recommendation",wording:(0,o.AP)("Aucune playlist n'est disponible.")}}}[this.props.pageContext]||{placeHolder:this.props.placeHolder}}}f.contextTypes={isMe:r().bool,playlistFilter:r().string,searchFilter:r().string},f.defaultProps={data:[],filter:void 0,method:null,gridAttributes:null,total:-1,title:"",progressiveDisplay:!1,fetchData:()=>{},placeHolder:!1};const P=f},lpJY:(e,t,a)=>{a.d(t,{A:()=>s});const s=a("R6sl").A},sCpb:(e,t,a)=>{a.d(t,{A:()=>m});var s=a("q1tI"),l=a("mmFw"),r=a("CdHq"),i=a("y7xR"),n=a("pVdW"),o=a("9OcB"),c=a("GkjM"),d=a("hz5U"),p=a("5G9X");const m=({enrichedTitle:e,href:t})=>{var a;let m;if(null!==(a=e.pictures[0])&&void 0!==a&&a.md5){const t=d.A.getCoverType(e.type);m=d.A.getImageSrc(t,e.pictures[0].md5,48,48,"none")}return s.createElement(r.s,{direction:"row",align:"center"},s.createElement(c.A,{to:t,me:"spacing.s"},e.type===p.Ay.Artist||e.type===p.Ay.User?s.createElement(l.e,{src:m,name:e.title,size:"size.xl",variant:"neutral","data-testid":"dynamic_page_section_image"}):s.createElement(o.A,{src:m,type:e.type,alt:e.title,size:"size.xl","data-testid":"dynamic_page_section_image"})),s.createElement(r.s,{direction:"column",w:"100%"},s.createElement(n.E,{variant:"body.s.default",mb:"spacing.xs",color:"text.neutral.secondary.default","data-testid":"dynamic_page_section_lead_in",noOfLines:1,maxW:"90%"},e.lead_in),s.createElement(i.D,{variant:"heading.m",noOfLines:1,maxW:"90%","data-testid":"dynamic_page_section_title"},s.createElement(c.A,{to:t,_hover:{textDecoration:"underline"},_active:{textDecoration:"underline"},_focus:{textDecoration:"underline"}},e.title))))}},wGgI:(e,t,a)=>{a.d(t,{qT:()=>p,VX:()=>m,y8:()=>d,Ay:()=>u});var s=a("q1tI"),l=a("juqV"),r=a("HmE0"),i=a("yCtO");class n extends s.Component{render(){const{children:e,isDisabled:t,isSelected:a}=this.props,r=(0,l.A)("dropdown-item",{hidden:t,"is-selected":a});return s.createElement("li",{className:r},e)}}n.defaultProps={isDisabled:!1,isSelected:!1};const o=n;var c;const d="sm",p="left",m="right";class h extends s.Component{constructor(e){super(e),this._onToggle=this._onToggle.bind(this),this._onClose=this._onClose.bind(this),this.state={label:e.children[e.selected].props.label||e.label,isOpen:!1}}static getDerivedStateFromProps(e){return{label:e.children[e.selected].props.label||e.label}}render(){const{children:e,align:t,size:a,overflow:n,isDisabled:o}=this.props,{label:d,isOpen:p}=this.state,h=(0,l.A)("dropdown",{"dropdown-active":this.state.isOpen}),u=(0,l.A)("dropdown-menu",{"is-right":t===m,"is-overflow":n});return s.createElement("span",{className:h},s.createElement(r.$n,{"data-testid":`dropdown_${d}`,size:a,rightIcon:c||(c=s.createElement(i.e,null)),onClick:this._onToggle,variant:"outline",isDisabled:o},d),s.createElement("ul",{className:u,"aria-hidden":!p,onClick:this._onClose,onMouseDown:e=>e.stopPropagation()},p?e:null))}_onClose(){this.setState({isOpen:!1},()=>{document.removeEventListener("mousedown",this._onClose)})}_onToggle(){const e=!this.state.isOpen;this.setState({isOpen:e},()=>{e&&document.addEventListener("mousedown",this._onClose)})}}h.defaultProps={label:null,size:d,align:p,className:null,selected:0,overflow:!1,isDisabled:!1},h.Item=o;const u=h}}]);