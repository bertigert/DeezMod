"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[5928],{"1lpQ":(e,t,r)=>{r.d(t,{A:()=>o});var a=r("+9dH"),n=r("q1tI"),i=r("Wp0Y"),l=r("wZBD"),s=r("NgX8"),c=r("KZST");const o=({size:e,...t})=>"small"===e?n.createElement(s.m,{label:(0,i.AP)("label_title_explicitUPP_web")},n.createElement(c.g,(0,a.A)({"aria-label":"explicit_label",size:"small"},t))):n.createElement(l.J,(0,a.A)({"aria-label":"explicit_label",size:"small"},t),(0,i.AP)("label_title_explicitUPP_web"))},"2NhJ":(e,t,r)=>{r.d(t,{Ay:()=>i});var a=r("q1tI"),n=r("CdHq");const i=({children:e,className:t=""})=>a.createElement(n.s,{gap:"spacing.2xl",className:t,"data-testid":"masthead"},e)},"47Te":(e,t,r)=>{r("8/eH")},KZST:(e,t,r)=>{r.d(t,{g:()=>n});var a=r("nKUr");const n=(0,r("QSQl").w)({displayName:"ExplicitIcon",viewBox:"0 0 24 24",pathSmall:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.552 4.827A45.351 45.351 0 0 0 4 11.947c0 2.785.246 5.21.57 7.23a.968.968 0 0 0 .951.823h12.977a.97.97 0 0 0 .95-.827 45.347 45.347 0 0 0 .552-7.12 45.4 45.4 0 0 0-.57-7.23.968.968 0 0 0-.951-.823H5.502a.97.97 0 0 0-.95.827Zm9.766 4.292V8.03H9.83v8.47h4.488v-1.089h-3.206V12.76h3.003v-1.056h-3.003V9.119h3.206Z",clipRule:"evenodd"})],pathMedium:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M3.76 22c-.48 0-.9-.34-.98-.82h-.01c-.42-2.42-.74-5.32-.77-8.65v-.46c0-3.58.35-6.68.8-9.25.08-.48.5-.82.98-.82h16.44c.48 0 .9.34.98.82.45 2.57.8 5.67.8 9.25v.46c-.03 3.32-.35 6.22-.77 8.65h-.01c-.08.48-.5.82-.98.82H3.76ZM15.275 7.87V5.95H8.9V17.5h6.375v-1.92H11.21v-2.97h3.772v-1.86H11.21V7.87h4.065Z",clipRule:"evenodd"})]});n.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"ExplicitIcon"}},Ozpl:(e,t,r)=>{r.d(t,{A:()=>l});var a=r("q1tI"),n=r("juqV"),i=r("sk1u");const l=({children:e,className:t=""})=>{const r=(0,n.A)(i.A.infoItem,t);return a.createElement("li",{className:r},e)}},U9ZG:(e,t,r)=>{r.d(t,{A:()=>I});var a,n,i,l=r("q1tI"),s=r("Ty5D"),c=r("TRpf"),o=r("HmE0"),d=r("9MQu"),u=r("NgX8"),p=r("TDRX"),m=r("5Loq"),h=r("ZUSG"),y=r("EPmj"),A=r("Wp0Y"),E=r("5G9X"),g=r("LjZa"),v=r("tZCQ"),_=r("TqF5"),f=r("0oT0"),b=r("2EvD"),k=r("Jfek"),T=r("eerp"),w=r("g1Fm"),x=r("cFUB"),S=r("AfN5");class N extends l.Component{constructor(e,t){super(e,t),this._onEdit=this._onEdit.bind(this),this._onShare=this._onShare.bind(this),this._onGoToAccount=this._onGoToAccount.bind(this)}shouldComponentUpdate(e){return this.props.id!==e.id||this.props.type!==e.type||this.props.action.length!==e.action.length}render(){return v.A.isAllowed("revamp2023")?l.createElement(d.e,{as:"ul",size:"medium",gap:"spacing.xs",spacing:"0"},this.props.action.map((e=>"function"==typeof this["_render"+(0,w.A)(e)]?l.createElement(p.a,{as:"li",key:e},this["_render"+(0,w.A)(e)]()):null))):l.createElement("ul",{className:"list-actions"},this.props.action.map((e=>"function"==typeof this["_render"+(0,w.A)(e)]?l.createElement("li",{className:"list-actions-item",key:e},this["_render"+(0,w.A)(e)]()):null)))}_renderFavorite(){const{context:e,id:t,type:r}=this.props;return l.createElement(f.A,{id:t,type:r,action:x.Hj.FAVORITE,context:e})}_renderPlay(){const{id:e,type:t,context:r}=this.props,a=t===E.Ay.Song?{forceAsFirstTrack:!0}:{};return l.createElement(f.A,{action:x.Hj.PLAY,color:x.cW.PRIMARY,context:r,dzPlayerOptions:a,id:e,type:t===E.Ay.Song?S.Kk.TRACK_MIX:t,wordingType:x.Hn.FULL})}_renderShuffle(){const{id:e,type:t,context:r}=this.props;return l.createElement(f.A,{id:e,type:t,action:x.Hj.SHUFFLE,color:x.cW.PRIMARY,wordingType:x.Hn.FULL,context:r})}_renderShare(){return l.createElement(o.K0,{icon:a||(a=l.createElement(y.l,null)),onClick:this._onShare,variant:"ghost","aria-label":(0,A.AP)("Partager")})}_renderEdit(){return l.createElement(u.m,{label:(0,A.AP)("Editer")},l.createElement(o.K0,{"aria-haspopup":!0,"aria-label":(0,A.AP)("generic_action_edit_web"),icon:n||(n=l.createElement(h.r,null)),onClick:this._onEdit,variant:"ghost"}))}_renderOptions(){const{context:e,data:t,id:r,type:a}=this.props,n={anchor:l.createElement(o.K0,{"aria-haspopup":!0,"aria-label":(0,A.AP)("generic_action_viewmenu_web"),icon:i||(i=l.createElement(m.j,null)),variant:"ghost"}),context:e,id:String(r),data:t,placement:"right",type:a};return l.createElement(b.A,n)}_onShare(){const{id:e,data:t,context:r,type:a}=this.props;this.props.openModal({name:k.DN,props:{componentType:k.Wg.directShareMasthead,context:r,data:t,id:e,type:(0,T.A)(a)}})}_onEdit(){this.props.edit()}_onGoToAccount(){this.props.history.push("/account")}}N.defaultProps={data:{},action:["favorite","share","options"],edit:g.A};const I=(0,s.y)((0,c.Ng)(null,{openModal:_.qf})(N))},WY4A:(e,t,r)=>{r.d(t,{A:()=>i});var a=r("q1tI"),n=r("CdHq");const i=({children:e,className:t=""})=>a.createElement(n.s,{as:"ul",mt:"spacing.xs",color:"text.neutral.secondary.default",className:t},e)},ZOeD:(e,t,r)=>{r.d(t,{V:()=>s}),r("/eM8");var a,n=r("Vd8Q");r("EV0h"),r("gS5K");const i={Spotify:"https://open.spotify.com/track/",Apple:`https://music.apple.com/${null!==(a=function(){if("undefined"==typeof window)return null;const e=window.location.href;return new URL(e).pathname.split("/")[1]||null}())&&void 0!==a?a:"en"}/song/`,YouTubeMusic:"https://music.youtube.com/watch?v="},l=`//${n.default.get("host_website_ssl")}/profile/me`;class s{constructor(){this.token=""}async v1(e){const t={...e};this.token&&(t.deezer_access_token=this.token);const r=await fetch("https://www.tunemymusic.com/api/AuthenticateUser.php",{method:"POST",cache:"default",body:JSON.stringify(t)}).catch((e=>{throw e}));if(!r.ok||200!==r.status)throw new Error("TMM: response error");return r.json()}async v2(e,t){const r=await fetch("https://api.tunemymusic.com/v2/api"+e,{headers:{"Content-Type":"application/json"},method:"POST",cache:"default",body:JSON.stringify({...t})});if(!r.ok||200!==r.status)throw new Error("TMM: response error");return r.json()}setToken(e){this.token=e}async getLibraryTransferUrl(e,t,r){return this.v1({deezer_user_id:e,deezer_user_name:t,deezer_redirect_url:r?"deezer://reload":l})}async findTrack(e){var t;const r={...e,region:"Apple"===e.platform?null===(t=e.region)||void 0===t?void 0:t.toUpperCase():void 0},a=await this.v2("/FindTrack",r);return"not found"===a.result?Promise.reject(new Error("Track not found")):{...a,url:(n=e.platform,l=a.trackId,i[n]+l)};var n,l}}},eerp:(e,t,r)=>{r.d(t,{A:()=>n});const a={song:0,track:0,album:1,artist:2,playlist:3,collaborativePlaylist:3,radio:4,smart_radio:6,smartradio:6,sradio:6,show:7,episode:8};function n(e){return a[e]}},hIIJ:(e,t,r)=>{r.d(t,{A:()=>u});var a=r("+9dH"),n=r("q1tI"),i=r("55Ip"),l=r("Wp0Y"),s=r("HmE0"),c=r("TDRX"),o=r("y7xR"),d=r("pVdW");const u=({children:e,href:t,className:r,title:u,subtitle:p,onClick:m,ctaLabel:h=(0,l.AP)("Voir tout"),isExternalLink:y=!1,...A})=>n.createElement(c.a,(0,a.A)({flex:1,className:r},A),n.createElement(o.D,{variant:"heading.m","data-testid":"section_title"},u,t?y?n.createElement(s.$n,{as:"a",href:t,target:"_blank",variant:"outline",size:"small",ms:"spacing.s","data-testid":"section_title_cta"},h):n.createElement(i.N_,{to:t,onClick:()=>null==m?void 0:m()},n.createElement(s.$n,{variant:"outline",size:"small",ms:"spacing.s","data-testid":"section_title_cta"},h)):null,e),p?n.createElement(d.E,{variant:"body.s.default",mt:"spacing.xs",color:"text.neutral.secondary.default","data-testid":"section-title-subtitle"},p):null)},hwXd:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Se});var a=r("+9dH"),n=(r("gS5K"),r("q1tI")),i=r("Ty5D"),l=r("A2sV"),s=r("pgpk"),c=r("kPsn"),o=r("MWM2"),d=r("5G9X");const u=(e,t)=>{if(t.__TYPE__!==s.r.TRACK)throw new Error("Legacy track has wrong format");var r;if(!e)throw new Error("GraphQL track has wrong format");return{id:e.id,name:e.title,picture:(0,c.jg)(d.Ay.Song,e.album&&e.album.cover,t),duration:e.duration,isExplicit:e.isExplicit,contributors:(0,o.Z)(t.ARTISTS,e.contributors.edges),lyrics:e.lyrics,relatedAlbums:(r=e.relatedTracks.edges,r&&r.length?r.map((e=>{const t=e.node;return null!=t&&t.album?{id:t.album.id,name:t.album.displayTitle||"",picture:(0,c.jg)(d.Ay.Album,t.album.cover)}:null})).filter((e=>e)):[])}};var p=r("Fzox"),m=r("xobL"),h=r("FSqQ"),y=r("sdUN"),A=(r("WpbS"),r("s026")),E=r("1lpQ"),g=r("2NhJ"),v=r("oq/a"),_=r("zJSK"),f=r("wRgy"),b=r("WQvr"),k=r("lDkB"),T=r("uSSP"),w=r("B3z3"),x=r("WY4A"),S=r("Ozpl"),N=r("JKL/"),I=r("CTxd"),P=r("U9ZG");var M,R=r("p/gB");class F extends n.Component{render(){const{name:e,picture:t}=this.props;return t?n.createElement(n.Fragment,null,n.createElement(g.Ay,null,this._renderThumbnail(),n.createElement(v.A,null,this._renderSticker(),n.createElement(_.A,null,e),this._renderContributors(),this._renderInfos())),this._renderToolbar()):null}_renderThumbnail(){var e;const{name:t,picture:r}=this.props;return r?n.createElement(f.A,{alt:t,src:null===(e=r.urls.large)||void 0===e?void 0:e[0],isExplicitCover:Boolean(r.isExplicit),type:d.Ay.Song,"data-testid":"song-cover"}):null}_renderContributors(){const{contributors:e}=this.props;return e&&e.length?n.createElement(b.A,null,this._renderContributorsThumbnail(),this._renderContributorsName()):null}_renderContributorsThumbnail(){const{contributors:e}=this.props;return e&&e.length?n.createElement(k.A,{className:"HHqFa"},e.slice(0,10).map((e=>e.picture?n.createElement(T.A,{key:e.id,text:e.name,to:`/artist/${e.id}`,className:"hyovq"},n.createElement(I.Ay,(0,a.A)({},e.picture,{height:28,width:28,rounded:!0,type:d.Ay.Artist}))):null)).reverse()):null}_renderContributorsName(){const{contributors:e}=this.props;return e&&e.length?n.createElement("div",null,e.slice(0,10).map((e=>n.createElement(w.A,{key:`artist_${e.id}`,to:`/artist/${e.id}`},e.name))).reduce(((e,t)=>[e,", ",t]))):null}_renderInfos(){const{duration:e}=this.props;return e?n.createElement(x.A,null,this._renderDuration()):null}_renderDuration(){const{duration:e}=this.props;return e?n.createElement(S.A,null,(0,A.A)(e)):null}_renderSticker(){const{isExplicit:e}=this.props;return e?n.createElement("div",{className:"FvlvG"},M||(M=n.createElement(E.A,null))):null}_renderToolbar(){const{id:e,dataFromStore:t}=this.props;return n.createElement(N.A,null,n.createElement(P.A,{action:["play","favorite","share","options"],context:{ID:e,TYPE:(0,R.Us)(d.Ay.Track)},data:t,id:Number(e),type:d.Ay.Song}))}}const H=F;var U,q=r("Wp0Y"),z=r("3nMj"),J=r("3ns7"),O=r("hIIJ"),j=r("GxIe"),G=r("0JBE");const V=({trackId:e})=>{var t;const{data:r,loading:a,error:i}=(0,l.yJp)({variables:{trackId:e,relatedAlbumsFirst:4,relatedAlbumsContributorsFirst:1}});if(a)return U||(U=n.createElement(h.A,null));if(i)throw i;if(null==r||null===(t=r.track)||void 0===t||!t.relatedTracks)return null;const s=r.track.relatedTracks.edges.map((e=>{var t;return null===(t=e.node)||void 0===t?void 0:t.album})),c=s.length?s.map((t=>{var r,a;return t?n.createElement(G.OJ,{key:t.id,value:{legacyContext:{ID:t.id,CONTEXT_ID:e,TYPE:"track_related_album"}}},n.createElement(j.A,{id:t.id,albumName:t.displayTitle,picture:null===(r=t.cover)||void 0===r?void 0:r.large[0],hasExplicitCover:null===(a=t.cover)||void 0===a?void 0:a.explicitStatus,isExplicitAlbum:Boolean(t.isExplicit),contributors:t.contributors.edges.map((e=>e.node)),releaseDate:(0,z.A)(t.releaseDate)})):null})):null;return n.createElement("div",{className:"container"},n.createElement(O.A,{title:(0,q.AP)("discography_title_featuredin_web"),mb:"spacing.xl"}),n.createElement(J.kK,null,c))};var K,Y=r("TRpf"),W=r("UAd1"),Z=r("u7vQ"),B=r("AfN5"),Q=r("H/eQ"),X=r("HmE0"),$=r("hsEi"),ee=r("g1Fm"),te=r("WrS5"),re=r("TqF5");const ae=({trackId:e,hasSyncLyrics:t})=>{const r=(0,Y.d4)((({user:e})=>(0,m.UJ)(e))),a=(0,Y.d4)((e=>e.player.music.track)),i=(0,Y.d4)((e=>e.player.config.playerType)),l=(0,Y.wA)(),s=(0,n.useCallback)((()=>{if(r){if(i!==B.Cc.ADS){if(String(a.SNG_ID)!==e)return Q.A.subscribeOnce(Q.A.player.displayCurrentSong,(()=>{l((0,W.IG)(!0))})),void Z.Ay.play({context:{ID:e,TYPE:(0,R.Us)(d.Ay.Track)},id:e,type:d.Ay.Track});Z.Ay.isPaused()||Z.Ay.isPlaying()||Z.Ay.control.play(),l((0,W.IG)(!0))}}else l((0,re.qf)({name:te.b.AUTH_MODAL,size:"small",props:{context:"lyrics"}}))}),[i,a.SNG_ID,e,l]),c=t?(0,q.AP)("ÉCOUTER AVEC LES PAROLES"):(0,q.AP)("AFFICHER EN PLEIN ÉCRAN");return n.createElement(X.$n,{leftIcon:K||(K=n.createElement($.c,null)),onClick:s},(0,ee.A)(c,!0))},se=({copyright:e,writers:t,licence:r})=>n.createElement("div",{className:"Nhuwr",role:"complementary"},r&&r.length?n.createElement("p",null,r):null,e&&e.length?n.createElement("p",null,"© ",e):null,t&&t.length?n.createElement("p",null,t):null);var ce,oe=r("sAMA");const de=({trackId:e,isExplicit:t})=>{const{data:r,loading:a,error:i}=(0,l.H91)({variables:{trackId:e}}),s=(0,Y.d4)((e=>e.app&&e.app.online)),c=(0,Y.d4)((e=>(0,m.Uw)(e.user)));if(a)return ce||(ce=n.createElement(h.A,null));if(i)throw i;if(!r||!r.track||!r.track.lyrics||t&&c===oe.g||!s)return null;const o=Boolean(r.track.lyrics.synchronizedLines&&r.track.lyrics.synchronizedLines.length),d=r.track.lyrics.text.split(/\r\n|\r|\n/g);return n.createElement("div",{className:"HNa4n"},n.createElement(ae,{trackId:e,hasSyncLyrics:o}),n.createElement("div",{className:"OgC1d"},d.map(((e,t)=>n.createElement("p",{key:`lyrics_${t}`,dangerouslySetInnerHTML:{__html:e||"&nbsp;"}})))),n.createElement(se,{copyright:r.track.lyrics.copyright,writers:r.track.lyrics.writers}))};r("/eM8"),r("47Te");var ue=r("LOQS"),pe=r("ZOeD"),me=r("TDRX"),he=r("Votb"),ye=r("ej6z"),Ae=r("siwx"),Ee=r("pVdW"),ge=r("6vqc");function ve({children:e,href:t,onClick:r,src:a,platformName:i}){return n.createElement(he.z,{cursor:t?"pointer":"not-allowed",width:"fit-content",as:ye.N,href:t,target:"_blank",onClick:r},n.createElement(Ae._,{src:a,alt:i,height:"40px",width:"40px"}),n.createElement(Ee.E,{color:t?"text.neutral.primary.default":"text.neutral.primary.disabled"},e),n.createElement(ge.v,{color:t?"icon.neutral.primary.default":"icon.neutral.primary.disabled"}))}const _e=r.p+"images/pages/discovery/universalsharing/spotify.0e766bfd09ee938f12ad.png",fe=r.p+"images/pages/discovery/universalsharing/appleMusic.3c64b5dd811784dd5814.png",be=r.p+"images/pages/discovery/universalsharing/youtubeMusic.d6cdfe0f4fc0a972dab5.png",ke=[{image:_e,text:(0,q.AP)("unloggedcatalogsharedtrack_action_streamonspotify_web"),id:"Spotify",trackId:"spotify"},{image:fe,text:(0,q.AP)("unloggedcatalogsharedtrack_action_streamonapplemusic_web"),id:"Apple",trackId:"apple_music"},{image:be,text:(0,q.AP)("unloggedcatalogsharedtrack_action_streamonyoutubemusic_web"),id:"YouTubeMusic",trackId:"youtube_music"}],Te=new pe.V,we=({trackId:e,dataFromStore:t})=>{const r=(0,p.G)((({user:e})=>(0,m.JJ)(e))),[a,i]=(0,n.useReducer)(((e,t)=>"UPDATE"===t.type?{...e,...t.payload}:e),{Spotify:{status:"loading"},Apple:{status:"loading"},YouTubeMusic:{status:"loading"}});return(0,n.useEffect)((()=>{Promise.allSettled(ke.map((e=>Te.findTrack({track:{album:null==t?void 0:t.ALB_TITLE,artist:null==t?void 0:t.ART_NAME,isrc:null==t?void 0:t.DATA.ISRC,name:null==t?void 0:t.DATA.SNG_TITLE},region:r,platform:e.id})))).then((e=>{e.forEach(((e,t)=>{if("fulfilled"===e.status){const r=ke[t].id,a=e.value.url;i({type:"UPDATE",payload:{[r]:{status:"success",url:a}}})}"rejected"===e.status&&i({type:"UPDATE",payload:{[ke[t].id]:{status:"error"}}})}))}))}),[t,e,r]),n.createElement(me.a,{className:"container",paddingTop:0},ke.map((t=>{const r=a[t.id];return n.createElement(ve,{key:t.id,href:"success"===r.status?r.url:void 0,onClick:()=>{return r=t.trackId,void ue.A.log({type:"cdp",eventName:"item_clicked",customAttributes:{screen_view_name:"universal_share_listen_page",screen_view_id_type:"track",screen_view_id:e,item_id:r,item_type:"music_streaming_platform"}});var r},src:t.image,platformName:t.id},t.text)})))};var xe;const Se=({params:e,dataFromStore:t})=>{const r=(0,p.G)((({user:e})=>(0,m.UJ)(e))),s=new URLSearchParams((0,i.zy)().search),{data:c,loading:o,error:A}=(0,l.w8_)({variables:{trackId:e.id,relatedAlbumsFirst:4,relatedAlbumsContributorsFirst:1}});if(!t)return null;if(A)throw A;if(String(e.id)!==String(t.SNG_ID)||t.partial||o)return xe||(xe=n.createElement(h.A,null));if(!c||!c.track){const e=new Error("missing data in track graphql call");throw e.cause=JSON.stringify(c),e}const E=u(c.track,t);return n.createElement("div",{className:"naboo-catalog",id:"page_naboo_track",itemScope:!0,itemType:"http://schema.org/MusicRecording"},n.createElement("div",{className:"catalog-content"},n.createElement("div",{className:"container"},n.createElement(H,(0,a.A)({},E,{dataFromStore:t})))),"1"===s.get("universal_link")&&!r&&n.createElement(we,{trackId:c.track.id,dataFromStore:t}),n.createElement(V,{trackId:c.track.id}),n.createElement(de,{trackId:c.track.id,isExplicit:E.isExplicit}),n.createElement(y.A,{type:d.Ay.Track,data:t}))}},"oq/a":(e,t,r)=>{r.d(t,{A:()=>i});var a=r("q1tI"),n=r("CdHq");const i=({children:e,className:t=""})=>a.createElement(n.s,{justifyContent:"center",direction:"column",flex:"1",className:t},e)},sk1u:(e,t,r)=>{r.d(t,{A:()=>a});const a={thumbnail:"GryKF","thumbnail-list":"U1nbu",thumbnailList:"U1nbu","info-item":"dMJfv",infoItem:"dMJfv"}},wRgy:(e,t,r)=>{r.d(t,{A:()=>c});var a=r("q1tI"),n=r("juqV"),i=r("TDRX"),l=r("9OcB"),s=r("sk1u");const c=({className:e="",children:t,...r})=>{const c=(0,n.A)(s.A.thumbnail,e);return a.createElement(i.a,{className:c},a.createElement(l.A,r,t))}},zJSK:(e,t,r)=>{r.d(t,{A:()=>i});var a=r("q1tI"),n=r("y7xR");const i=({children:e,className:t=""})=>a.createElement(n.D,{color:"text.neutral.primary.default",variant:"display.m",mb:"spacing.xl",noOfLines:2,wordBreak:"break-word",className:t,title:e},e)}}]);