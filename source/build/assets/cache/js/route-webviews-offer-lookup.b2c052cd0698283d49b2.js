"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[845,1809],{CV49:(e,t,o)=>{o.d(t,{c:()=>i});var a=o("nKUr"),l=o("8EFB"),r=o("q1tI"),n=o("rMwH"),s=o("xi32"),c=o("IRKz");const i=(0,s.R)((e,t)=>{const{className:o,...s}=e,{bodyId:i,setBodyMounted:d}=(0,n.k3)();(0,r.useEffect)(()=>(d(!0),()=>d(!1)),[d]);const f=(0,l.cx)("chakra-modal__body",o),p=(0,n.x5)();return(0,a.jsx)(c.B.div,{ref:t,className:f,id:i,...s,__css:p.body})});i.displayName="ModalBody"},LSdk:(e,t,o)=>{o.d(t,{T:()=>d});var a=o("nKUr"),l=(o("q1tI"),o("TDRX")),r=o("IRKz");function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},a=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),a.forEach(function(t){n(e,t,o[t])})}return e}function i(e,t){if(null==e)return{};var o,a,l=function(e,t){if(null==e)return{};var o,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(l[o]=e[o]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(l[o]=e[o])}return l}const d=e=>{var{height:t="30px",iconOnly:o,color:l="text.neutral.primary.default"}=e,r=i(e,["height","iconOnly","color"]);return(0,a.jsx)(f,s({height:t,color:l,iconOnly:o},r))},f=e=>{var{color:t,compensate:o,iconOnly:n}=e,d=i(e,["color","compensate","iconOnly"]);return(0,a.jsxs)(l.a,function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);o.push.apply(o,a)}return o}(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}),e}(s({as:"svg",viewBox:n?"0 0 279 279":"0 0 992 279",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Deezer logo"},d),{sx:s({width:d.width,height:d.height},d.sx),children:[!n&&(0,a.jsx)(r.B.path,{clipRule:"evenodd",d:"M353.119 68.19h54.962c34.031 0 58.095 22.64 58.095 54.82s-24.064 54.82-58.095 54.82h-54.962V68.19Zm42.717 80.023h9.967c10.679 0 16.375-7.119 16.375-25.203 0-18.083-5.696-25.203-16.375-25.203h-9.967v50.406Zm167.163 29.617h-90.275V68.19h90.275v29.617h-47.701v12.673h44.853v24.206h-44.853v13.527h47.701v29.617Zm100.526 0h-90.274V68.19h90.274v29.617h-47.7v12.673h44.853v24.206h-44.853v13.527h47.7v29.617Zm327.639 0c-6.152-16.765-14.756-34.653-26.33-54.704 13.536-3.97 21.631-12.504 21.631-25.603 0-19.935-18.368-29.333-47.416-29.333h-59.803v109.64h42.716v-45.352c9.491 15.984 16.483 31.068 21.074 45.352h48.128Zm-69.202-60.658V97.807h14.809c6.265 0 9.825 3.418 9.825 9.683s-3.56 9.682-9.825 9.682h-14.809Zm-52.968 60.658h-90.275V68.19h90.275v29.617h-47.7v12.673h44.853v24.206h-44.853v13.527h47.7v29.617ZM673.779 97.807h44.076c-18.287 14.963-33.337 31.91-44.931 50.406v29.617h96.967v-29.617h-48.466c11.106-16.158 26.625-32.248 48.466-50.406V68.19h-96.112v29.617Z",fillRule:"evenodd",fill:t}),(0,a.jsx)(r.B.path,{clipRule:"evenodd",d:"M232.97 42.874c2.569-14.89 6.339-24.254 10.515-24.271h.008c7.787.026 14.099 32.498 14.099 72.59 0 40.091-6.321 72.589-14.116 72.589-3.196 0-6.145-5.518-8.519-14.765-3.752 33.85-11.538 57.119-20.552 57.119-6.974 0-13.233-13.978-17.435-36.022-2.869 41.924-10.09 71.669-18.53 71.669-5.297 0-10.126-11.787-13.701-30.979-4.299 39.617-14.231 67.376-25.813 67.376-11.582 0-21.532-27.75-25.813-67.376-3.549 19.192-8.378 30.979-13.701 30.979-8.44 0-15.643-29.745-18.53-71.669-4.202 22.044-10.444 36.022-17.436 36.022-9.004 0-16.8-23.261-20.551-57.119-2.357 9.274-5.323 14.765-8.519 14.765-7.795 0-14.116-32.498-14.116-72.59 0-40.09 6.32-72.59 14.116-72.59 4.184 0 7.928 9.39 10.523 24.272C49.057 17.198 55.81.51 63.446.51c9.067 0 16.924 23.6 20.64 57.87 3.638-24.942 9.155-40.843 15.335-40.843 8.66 0 16.022 31.274 18.75 74.897 5.129-22.366 12.554-36.397 20.773-36.397 8.218 0 15.643 14.04 20.763 36.398 2.737-43.624 10.09-74.898 18.751-74.898 6.17 0 11.679 15.9 15.334 40.843C197.5 24.11 205.357.51 214.423.51c7.61 0 14.389 16.697 18.547 42.363ZM.09 84.053c0-17.922 3.583-32.454 8.006-32.454s8.007 14.532 8.007 32.454c0 17.921-3.584 32.454-8.007 32.454S.09 101.974.09 84.053Zm261.653 0c0-17.922 3.584-32.454 8.007-32.454 4.422 0 8.007 14.532 8.007 32.454 0 17.921-3.585 32.454-8.007 32.454-4.423 0-8.007-14.533-8.007-32.454Z",fill:"background.accent.primary.default",fillRule:"evenodd"})]}))}},LTto:(e,t,o)=>{o.d(t,{A:()=>E});var a=o("WKgy"),l=o("+9dH"),r=o("q1tI"),n=o("TRpf"),s=o("Zlrv"),c=o("TqF5"),i=o("Wp0Y");const d=({onClick:e,...t})=>{const o=(0,n.wA)();return r.createElement(s.s_,(0,l.A)({id:"modal-close",onClick:t=>{null==e||e(t),o((0,c.Oo)())},"aria-label":(0,i.AP)("Fermer")},t))};d.displayName="Close";const f=d;var p,m=o("9yOc"),u=o("jiu+"),h=o("LSdk"),b=o("PBDT"),g=o("juqV"),k=o("CV49");var y=o("nHPd");a.A.addReducers({modal:c.Ay});const E={Close:f,Layout:function({children:e}){return m.A.is("mobile")||m.A.is("tablet")?r.createElement(s.aF,{isOpen:!0,size:"full"},r.createElement("div",{className:"modal-container"},r.createElement("div",{className:"modal-dialog modal-small"},p||(p=r.createElement("div",{className:"modal-header-partner"},r.createElement("span",{className:"cell"},r.createElement(u.QQ,null,r.createElement(h.T,null))))),e))):r.createElement(s.aF,{isOpen:!0,size:"full"},r.createElement(b.o,{flexDirection:"column",mt:"spacing.3xl"},e))},Body:e=>r.createElement(k.c,(0,l.A)({"data-testid":"modal_body",className:(0,g.A)("modal-body",e.className)},e),e.children),Header:({children:e,...t})=>r.createElement(y.r,(0,l.A)({"data-testid":"modal_header"},t),e),Footer:({children:e,...t})=>r.createElement(s.jl,t,e)}},PBDT:(e,t,o)=>{o.d(t,{o:()=>n});var a=o("nKUr"),l=o("IRKz"),r=o("xi32");const n=(0,l.B)("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});n.displayName="Center";const s={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};(0,r.R)(function(e,t){const{axis:o="both",...r}=e;return(0,a.jsx)(l.B.div,{ref:t,__css:s[o],...r,position:"absolute"})})},TDRX:(e,t,o)=>{o.d(t,{a:()=>a});const a=(0,o("IRKz").B)("div");a.displayName="Box"},Upom:(e,t,o)=>{o.r(t),o.d(t,{default:()=>b});var a,l,r,n=o("q1tI"),s=o("X6oL"),c=o("TRpf"),i=o("HmE0"),d=o("TqF5"),f=o("pxP/"),p=o("nrKQ"),m=o("ljoE"),u=o("LTto");let h=(0,s.Ay)({action:"trigger",event:"trigger-offer-lookup",box:"offer_lookup"})(((l=class extends n.Component{constructor(e){super(e),this.modalClose=this._modalClose.bind(this),this.clickOffer=this._clickOffer.bind(this),this.clickCongratulation=this._clickCongratulation.bind(this);const t=this.props.data.offer;this.state={partner:this.props.data.partner,message:{title:t.title,text:t.text,buttonLabel:t.buttonLabel,linkLabel:t.linkLabel},actions:{offerLookUpActions:this.clickOffer}}}componentDidMount(){this.props.customerMessage&&(0,m.A)(this.props.name),this.props.tracking.trackEvent({action:"display",event:"close-offer-lookup",box:"offer_lookup"},{dispatch:p.A.call({method:"log_central.log",data:{BATCH:[{channel:"pushbox",params:{action:"display",name:"offer_lookup"}}]}})})}render(){return n.createElement("div",{className:"modal-offer-look-up"},n.createElement(u.A.Header,{className:"offer-look-up-header"},n.createElement("div",{className:"offer-look-up-header-partner"},r||(r=n.createElement("span",{className:"offer-look-up-cell cell"},n.createElement("span",{className:"offer-look-up-logo-deezer logo logo-deezer-black"}))),n.createElement("span",{className:"offer-look-up-cell cell"},n.createElement("img",{alt:"telco logo",className:"offer-look-up-telco-logo",src:this.state.partner.logo})),n.createElement("span",{className:"offer-look-up-close-modal cell modal-close"},n.createElement("button",{className:"offer-look-up-close icon icon-cancel",onClick:this.modalClose})))),n.createElement(u.A.Body,null,n.createElement("div",{className:"offer-look-up-wrapper"},n.createElement("div",{className:"offer-look-up-message"},n.createElement("div",{className:"message-title"},this.state.message.title),n.createElement("div",{className:"message-text"},this.state.message.text)),n.createElement("div",{className:"offer-look-up-actions"},this.state.message.buttonLabel&&n.createElement(i.$n,{className:"actions-button",onClick:this.state.actions.offerLookUpActions,"data-testid":"offer-lookup-btn"},this.state.message.buttonLabel),this.state.message.linkLabel&&n.createElement(i.$n,{className:"actions-button",variant:"ghost",onClick:this.modalClose},this.state.message.linkLabel)))))}_modalClose(){this.props.tracking.trackEvent({action:"click",event:"close-offer-lookup",box:"offer_lookup"},{dispatch:p.A.call({method:"log_central.log",data:{BATCH:[{channel:"pushbox",params:{action:"close",name:"offer_lookup"}}]}})}),this.props.closeModal()}_clickOffer(){const e=this.props.data.congratulation;this.props.tracking.trackEvent({action:"click",event:"click-offer-lookup",box:"offer_lookup"},{dispatch:p.A.call({method:"log_central.log",data:{BATCH:[{channel:"pushbox",params:{action:"click",name:"offer_lookup"}}]}})}),p.A.call({method:"operator_LinkOfferLookup",data:{OPERATOR_ID:this.props.data.partner.id},success:()=>{this.setState({message:{title:e.title,text:e.text,buttonLabel:e.buttonLabel,linkLabel:e.linkLabel},actions:{offerLookUpActions:this.clickCongratulation}})}})}_clickCongratulation(){this.props.tracking.trackEvent({action:"click",event:"confirmation-offer-lookup",box:"offer-lookup"}),this.props.successAction()}}).defaultProps={customerMessage:!1,data:{partner:{id:String(),logo:String()},offer:{title:String(),text:String(),buttonLabel:String(),linkLabel:String()},congratulation:{title:String(),text:String(),buttonLabel:String()}},successAction:()=>{f.A.reload()}},a=l))||a;const b=(0,c.Ng)(null,{closeModal:d.Oo},(e,t,o)=>({...e,...t,...o}))(h)},juqV:(e,t,o)=>{function a(e){var t,o,l="";if("string"==typeof e||"number"==typeof e)l+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(o=a(e[t]))&&(l&&(l+=" "),l+=o)}else for(o in e)e[o]&&(l&&(l+=" "),l+=o);return l}o.d(t,{A:()=>l});const l=function(){for(var e,t,o=0,l="",r=arguments.length;o<r;o++)(e=arguments[o])&&(t=a(e))&&(l&&(l+=" "),l+=t);return l}},ljoE:(e,t,o)=>{o.d(t,{A:()=>l});var a=o("nrKQ");function l(e){a.A.call({method:"customermessage.callback",data:{name:e}})}},nHPd:(e,t,o)=>{o.d(t,{r:()=>d});var a=o("nKUr"),l=o("81AO"),r=o("8EFB"),n=o("q1tI"),s=o("rMwH"),c=o("xi32"),i=o("IRKz");const d=(0,c.R)((e,t)=>{const{className:o,...c}=e,{headerId:d,setHeaderMounted:f}=(0,s.k3)();(0,n.useEffect)(()=>(f(!0),()=>f(!1)),[f]);const p=(0,r.cx)("chakra-modal__header",o),m=(0,s.x5)(),u=(0,l.H2)({flex:0,...m.header});return(0,a.jsx)(i.B.header,{ref:t,className:p,id:d,...c,__css:u})});d.displayName="ModalHeader"},rehe:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c});var a=o("q1tI"),l=o("nrKQ"),r=o("Vd8Q"),n=o("pxP/"),s=o("Upom");class c extends a.Component{constructor(e){super(e),this.state={fetched:!1,data:{}}}componentDidMount(){this.fetchOfferLookupBoxData()}componentWillUnmount(){l.A.cancel(this._apiRef)}reload(){n.A.href=`deezer://${r.default.get("host_website_ssl")}/relog`}fetchOfferLookupBoxData(){this._apiRef=l.A.call({method:"operator.getOfferLookupDisplayInfo",success:e=>{this.setState({fetched:!0,data:e})}})}render(){return!1===this.state.fetched?null:a.createElement(s.default,{customerMessage:!0,data:this.state.data,name:"OFFER_LOOKUP",closeModal:this.reload,successAction:this.reload})}}}}]);