"use strict";(self.webpackJsonpDeezer=self.webpackJsonpDeezer||[]).push([[8680],{Iph3:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var a=r("q1tI"),n=r("Zlrv"),s=r("nHPd"),o=r("CV49"),l=r("eOc8"),i=r("pVdW"),c=r("FVVF"),d=r("80JK"),u=r("8WIx"),m=r("XkdG"),p=r("jysG"),f=r("3BUG"),b=r("YIja"),y=r("HmE0"),_=r("Wp0Y"),g=(r("/eM8"),r("nrKQ")),w=r("TqF5"),O=r("TRpf");const h={"Email already exists":(0,_.AP)("errormessage_title_accountalrdyassociatedwithemail_web"),"Incorrect mail format":(0,_.AP)("formerrormessage_text_emailaddressformatnotvalid_web"),email_empty:(0,_.AP)("formerrormessage_text_fieldmustnotbeempty_web"),email_not_valid:(0,_.AP)("formerrormessage_text_emailaddressformatnotvalid_web"),password_empty:(0,_.AP)("formerrormessage_text_fieldmustnotbeempty_web"),password_with_spaces:(0,_.AP)("errormessage_text_passwordnbeginendwithspace_web"),password_too_long:(0,_.AP)("formerrormessage_text_passwordtoomanychars_web",{sprintf:[50],count:50}),password_too_short:(0,_.AP)("formerrormessage_text_passwordnotenoughchars_web",{sprintf:[8],count:8}),password_too_weak:(0,_.AP)("securitylevel_title_tooweak_web")};var j=r("JPzp"),v=r("IZLt");const E={email:"",password:"",apiError:"",emailErrorMessage:"",passwordErrorMessage:"",isSubmitting:!1},P=e=>{const t=(0,O.wA)(),[r,n]=(0,a.useState)(E),s=(e,t)=>{n((r=>({...r,[e]:t})))},o=e=>t=>{s(e,t.target.value)};return{formValues:r,handleEmail:o("email"),handlePassword:o("password"),submitForm:async()=>{s("isSubmitting",!0),s("apiError","");const{email:a,password:n}=r;g.A.call({method:"user.addCredentials",data:{EMAIL:a.trim(),PASSWORD:n},success:async r=>{r&&(await(0,j.d)(r),g.A.call({method:"user.requestDataExport",success:()=>{t((0,w.qf)({name:"REQUEST_MY_DATA_CONFIRMATION",size:"small"}))},error:()=>{t((0,w.qf)({name:"CODE_REQUEST",props:{email:a,requestType:"request_my_data",cb:e},size:"small"}))}}))},error:e=>{var t;new v.A({error:null!==(t=e.message)&&void 0!==t?t:e.name,journey_type:"update-user-infos",gateway_method:"user.addCredentials",server_payload:e}).send(),s("apiError",(e=>{var t;let r=(0,_.AP)("errormessage_text_anerroroccurredpleasetryagain_web");switch(e.name){case"DATA_ERROR":case"REQUEST_ERROR":{const a=h[e.message];if(a){r=a;break}"email_domain_not_valid"===e.message&&(r=(0,_.AP)("errormessage_text_domainnnamenotallowed_web",{sprintf:[null===(t=e.payload)||void 0===t?void 0:t.domain]}));break}}return r})(e))},finally:()=>{s("isSubmitting",!1)}})}}};var x;const A=({cb:e})=>{const{handleEmail:t,formValues:r,handlePassword:g,submitForm:w}=P(e);return a.createElement(a.Fragment,null,x||(x=a.createElement(n.s_,null)),a.createElement(s.r,null,(0,_.AP)("requestmydatapopin_title_downloadyourdzrdata_web")),a.createElement(o.c,null,a.createElement(l.B,{spacing:"spacing.m"},a.createElement(i.E,null,(0,_.AP)("requestmydatamessage_text_secureaccountwithcredentials_web")),a.createElement(i.E,null,(0,_.AP)("requestmydatamessage_text_usethisemailnowloggedoutfromalldevices_web")),a.createElement(c.T,{spacing:"spacing.s"},a.createElement(d.MJ,null,a.createElement(u.l,null,(0,_.AP)("generic_title_email_web")),a.createElement(m.p,{"data-testid":"request_data_add_email_field",type:"email",onChange:t}),a.createElement(p.Wt,null,r.emailErrorMessage)),a.createElement(d.MJ,null,a.createElement(u.l,null,(0,_.AP)("generic_title_password_web")),a.createElement(f.y,{"data-testid":"request_data_add_password_field",onChange:g}),a.createElement(p.Wt,null,r.passwordErrorMessage)),r.apiError&&a.createElement(b.N,{status:"error"},r.apiError)))),a.createElement(n.jl,null,a.createElement(y.$n,{onClick:w},(0,_.AP)("generic_action_confirm_web"))))}},JPzp:(e,t,r)=>{r.d(t,{d:()=>n}),r("/eM8");var a=r("nrKQ");const n=e=>new Promise(((t,r)=>{a.A.call({method:"userAuth.loginByArl",data:{ARL:e},success:t,error:r})}))},U7Z4:(e,t,r)=>{r.d(t,{Fc:()=>h,TN:()=>v,XL:()=>j,_0:()=>P});var a=r("nKUr"),n=r("q1tI"),s=r("jiu+"),o=r("CdHq"),l=r("xi32"),i=r("IRKz"),c=r("pVdW"),d=r("3bOE"),u=r("0mGY"),m=r("X5lq"),p=r("w/ZN"),f=r("kD7r");function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){b(e,t,r[t])}))}return e}function _(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r.push.apply(r,a)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function g(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const w=(0,i.B)(o.s,{baseStyle:{alignItems:"center",borderRadius:"base",overflow:"hidden",position:"relative",px:"spacing.l",py:"spacing.m",width:"100%"}}),O={error:s.QQ,info:f._G,success:s.QQ,warning:s.K2},h=(0,l.R)((function(e,t){var{status:r="info",children:s,addRole:o=!0}=e,l=g(e,["status","children","addRole"]);let i="background.neutral.primary.default",c="text.neutral.primary.default";switch(r){case"error":i="background.feedback.error.default",c="text.neutral.primary.default";break;case"warning":i="background.feedback.warning.default",c="text.neutral.primary.default";break;case"success":i="background.feedback.success.default",c="text.neutral.primary.default"}const d=O[r];return(0,a.jsx)(d,{children:(0,a.jsx)(w,_(y({bg:i,color:c,"data-status":r,ref:t,role:o?"alert":void 0},l),{children:n.Children.map(s,(e=>n.isValidElement(e)?n.cloneElement(e,{status:r}):e))}))})}));h.displayName="Alert";const j=(0,l.R)((function(e,t){return(0,a.jsx)(c.E,y({as:"div",ref:t,variant:"body.xl.default","data-status":e.status},e))}));j.displayName="AlertTitle";const v=(0,l.R)((function(e,t){return(0,a.jsx)(c.E,y({as:"div",ref:t,variant:"body.l.default","data-status":e.status},e))}));v.displayName="AlertDescription";const E={error:u.o,info:m.u,success:d.k,warning:p.i};function P(e){var{status:t="info"}=e,r=g(e,["status"]);const n=E[t];return(0,a.jsx)(i.B.span,_(y({display:"inherit","data-status":t,me:"spacing.s"},r),{children:r.children||(0,a.jsx)(n,{color:"icon.neutral.primary.default",size:"medium"})}))}P.displayName="AlertIcon"},X5lq:(e,t,r)=>{r.d(t,{u:()=>n});var a=r("nKUr");const n=(0,r("QSQl").w)({displayName:"InformationIcon",viewBox:"0 0 24 24",pathSmall:[(0,a.jsx)("path",{d:"M13 9c0-.335-.073-.575-.218-.735C12.616 8.08 12.354 8 12 8c-.357 0-.617.084-.782.268-.146.163-.218.403-.218.732 0 .36.082.61.248.77.166.16.416.23.752.23.368 0 .634-.106.799-.31.134-.166.201-.397.201-.69Zm-1.66 7h1.33v-4.67h-1.33V16Z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 20c5.137 0 8-2.863 8-8 0-5.137-2.863-8-8-8-5.137 0-8 2.863-8 8 0 5.137 2.863 8 8 8Zm0-14.667c4.424 0 6.667 2.243 6.667 6.667 0 4.424-2.243 6.667-6.667 6.667-4.424 0-6.667-2.243-6.667-6.667 0-4.424 2.243-6.667 6.667-6.667Z",clipRule:"evenodd"})],pathMedium:[(0,a.jsx)("path",{d:"M13.5 7.5c0-.503-.11-.862-.327-1.103C12.923 6.12 12.531 6 12 6c-.536 0-.925.126-1.173.403-.219.243-.327.604-.327 1.097 0 .54.123.914.372 1.154.249.24.624.346 1.128.346.552 0 .952-.159 1.199-.465.2-.249.301-.596.301-1.035ZM11 11v7h2v-7h-2Z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 23c7.064 0 11-3.936 11-11S19.064 1 12 1 1 4.936 1 12s3.936 11 11 11Zm0-20c5.972 0 9 3.028 9 9 0 5.972-3.028 9-9 9-5.972 0-9-3.028-9-9 0-5.972 3.028-9 9-9Z",clipRule:"evenodd"})]});n.defaultProps={fill:"currentColor",boxSize:"24px",display:"block","data-testid":"InformationIcon"}},YIja:(e,t,r)=>{r.d(t,{N:()=>u});var a=r("nKUr"),n=r("q1tI"),s=r("U7Z4"),o=r("TDRX"),l=r("eOc8");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=(0,r("xi32").R)(((e,t)=>{var{action:r,children:u,title:m,status:p,icon:f}=e,b=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["action","children","title","status","icon"]);return(0,a.jsxs)(s.Fc,function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r.push.apply(r,a)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){i(e,t,r[t])}))}return e}({ref:t,status:p},b),{children:["boolean"==typeof f?(0,a.jsx)(s._0,{status:p}):f,(0,a.jsxs)(o.a,{flex:"1",children:[m&&(0,a.jsx)(s.XL,{children:m}),(0,a.jsx)(s.TN,{display:"block",lineHeight:"5",children:u})]}),r&&(0,a.jsx)(l.B,{direction:"row",display:"flex",alignItems:"center",spacing:"3",children:n.Children.map(r,(e=>(0,a.jsx)(o.a,{children:e})))})]}))}))},kD7r:(e,t,r)=>{r.d(t,{_G:()=>o});var a=r("nKUr"),n=r("jiu+"),s=r("MaGs");r("q1tI");const o=({children:e})=>{const{colorMode:t}=(0,s.G6)();return"light"===t?(0,a.jsx)(n.QQ,{children:e}):(0,a.jsx)(n.K2,{children:e})}}}]);