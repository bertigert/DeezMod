(()=>{"use strict";var __webpack_modules__={944:module=>{module.exports=require("macos-version")},857:module=>{module.exports=require("os")}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.r(__webpack_exports__);require("reflect-metadata");const external_inversify_namespaceObject=require("inversify"),external_electron_namespaceObject=require("electron");var __decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};let IpcService=class{on(channel,listener){external_electron_namespaceObject.ipcRenderer.on(channel,listener)}send(channel,...args){external_electron_namespaceObject.ipcRenderer.send(channel,...args)}emit(channel,...args){external_electron_namespaceObject.ipcRenderer.emit(channel,...args)}};IpcService=__decorate([(0,external_inversify_namespaceObject.injectable)()],IpcService);const services_IpcService=IpcService;var AutoStartService_decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};let AutoStartService=class{initLoginItem(app){this.setAutoStart(!0,app)}isOpenAtLogin(app){const{openAtLogin}=app.getLoginItemSettings();return openAtLogin||!1}setAutoStart(enableAutoStart,app){app.setLoginItemSettings({openAtLogin:enableAutoStart})}};AutoStartService=AutoStartService_decorate([(0,external_inversify_namespaceObject.injectable)()],AutoStartService);const services_AutoStartService=AutoStartService;var platform_PLATFORM;!function(PLATFORM){PLATFORM.WINDOWS="windows",PLATFORM.DARWIN="darwin",PLATFORM.LINUX="linux",PLATFORM.UNKNOWN="unknown"}(platform_PLATFORM||(platform_PLATFORM={}));Symbol("Application"),Symbol("ApplicationMenu");const SERVICE_AUTOSTART=Symbol("AutoStart"),SERVICE_IPC=(Symbol("Cookie"),Symbol("DeepLink"),Symbol("History"),Symbol("Ipc")),di=(Symbol("Media"),Symbol("Menu"),Symbol("Network"),Symbol("PowerSave"),Symbol("Sentry"),Symbol("Thumbar"),Symbol("Tray"),Symbol("Updater"),Symbol("User"),Symbol("WindowState"),new external_inversify_namespaceObject.Container);di.bind(SERVICE_IPC).to(services_IpcService).inSingletonScope(),di.bind(SERVICE_AUTOSTART).to(services_AutoStartService).inSingletonScope();const renderer_di=di;renderer_di.get(SERVICE_IPC).on("app-go-to-raw",((event,hash)=>{window.location.hash=hash}));const remote_namespaceObject=require("@electron/remote"),autoStartService=renderer_di.get(SERVICE_AUTOSTART);renderer_di.get(SERVICE_IPC).on("channel-autostart-init",(()=>{autoStartService.initLoginItem(remote_namespaceObject.app)}));const HistoryIpc_ipc=renderer_di.get(SERVICE_IPC);var HistoryEvents,MediaPlayerState,MediaPlayerRepeatMode,MediaPlayerVolume,MediaPlayerControl,MediaEvents,MenuItemType,NetworkStatus,UserEvents;HistoryIpc_ipc.on("update-data",((event,historyInfo)=>{window.electron.trigger("history-updated",historyInfo)})),HistoryIpc_ipc.on("history-closing-app",(()=>{window.electron.trigger("history-closing")})),function(HistoryEvents){HistoryEvents.HistoryChanged="history-changed"}(HistoryEvents||(HistoryEvents={})),function(MediaPlayerState){MediaPlayerState.Playing="playing",MediaPlayerState.Paused="paused"}(MediaPlayerState||(MediaPlayerState={})),function(MediaPlayerRepeatMode){MediaPlayerRepeatMode[MediaPlayerRepeatMode.None=0]="None",MediaPlayerRepeatMode[MediaPlayerRepeatMode.All=1]="All",MediaPlayerRepeatMode[MediaPlayerRepeatMode.Once=2]="Once"}(MediaPlayerRepeatMode||(MediaPlayerRepeatMode={})),function(MediaPlayerVolume){MediaPlayerVolume[MediaPlayerVolume.Down=-1]="Down",MediaPlayerVolume[MediaPlayerVolume.Up=1]="Up"}(MediaPlayerVolume||(MediaPlayerVolume={})),function(MediaPlayerControl){MediaPlayerControl.Play="play",MediaPlayerControl.PlayPause="play-pause",MediaPlayerControl.Pause="pause",MediaPlayerControl.Stop="stop",MediaPlayerControl.Prev="prev",MediaPlayerControl.Next="next"}(MediaPlayerControl||(MediaPlayerControl={})),function(MediaEvents){MediaEvents.PlayerUpdated="player-updated",MediaEvents.TrackUpdated="track-updated"}(MediaEvents||(MediaEvents={})),function(MenuItemType){MenuItemType.About="about",MenuItemType.Close="close",MenuItemType.Copy="copy",MenuItemType.Cut="cut",MenuItemType.Devtools="devtools",MenuItemType.Features="features",MenuItemType.Front="front",MenuItemType.Hide="hide",MenuItemType.HideOthers="hide-others",MenuItemType.HistoryBack="history-back",MenuItemType.HistoryForward="history-forward",MenuItemType.Logout="logout",MenuItemType.Minimize="minimize",MenuItemType.Open="open",MenuItemType.Paste="paste",MenuItemType.PlayerPlay="player-play",MenuItemType.PlayerNext="player-next",MenuItemType.PlayerPrev="player-prev",MenuItemType.PlayerShuffle="player-shuffle",MenuItemType.PlayerRepeatMode="player-repeat-mode",MenuItemType.PlayerVolumeUp="player-volume-up",MenuItemType.PlayerVolumeDown="player-volume-down",MenuItemType.Preferences="preferences",MenuItemType.Quit="quit",MenuItemType.Reload="reload",MenuItemType.ResetZoom="reset-zoom",MenuItemType.SelectAll="select-all",MenuItemType.Separator="separator",MenuItemType.SwitchProfile="switch-profile",MenuItemType.ToggleFullScreen="toggle-full-screen",MenuItemType.Unhide="unhide",MenuItemType.Version="version",MenuItemType.ZoomIn="zoom-in",MenuItemType.ZoomOut="zoom-out"}(MenuItemType||(MenuItemType={})),function(NetworkStatus){NetworkStatus.Online="online",NetworkStatus.Offline="offline"}(NetworkStatus||(NetworkStatus={})),function(UserEvents){UserEvents.LoggedIn="logged-in",UserEvents.LoggedOut="logged-out"}(UserEvents||(UserEvents={}));const PlayerIpc_ipc=renderer_di.get(SERVICE_IPC);PlayerIpc_ipc.on("channel-player-media-control",((event,control)=>{const dzPlayer=window.dzPlayer;if(dzPlayer)switch(control){case MediaPlayerControl.Play:dzPlayer.playing||dzPlayer.control.togglePause();break;case MediaPlayerControl.Pause:dzPlayer.playing&&dzPlayer.control.togglePause();break;case MediaPlayerControl.PlayPause:dzPlayer.control.togglePause();break;case MediaPlayerControl.Stop:dzPlayer.control.stop();break;case MediaPlayerControl.Prev:dzPlayer.control.prevSong();break;case MediaPlayerControl.Next:dzPlayer.control.nextSong()}})),PlayerIpc_ipc.on("channel-player-shuffle-update",((event,shuffle)=>{const dzPlayer=window.dzPlayer;dzPlayer&&dzPlayer.control.setShuffle(shuffle)})),PlayerIpc_ipc.on("channel-player-repeat-mode-update",((event,repeatMode)=>{const dzPlayer=window.dzPlayer;dzPlayer&&dzPlayer.control.setRepeat(repeatMode)})),PlayerIpc_ipc.on("channel-player-volume-update",((event,volume)=>{const dzPlayer=window.dzPlayer;dzPlayer&&dzPlayer.control.setVolume(Math.max(0,Math.min(1,dzPlayer.volume+.1*volume)))}));const UserIpc_ipc=renderer_di.get(SERVICE_IPC);UserIpc_ipc.on("channel-user-log-out",(()=>{window.electron.deleteLoginInfo()})),UserIpc_ipc.on("channel-user-switch-profile",(()=>{window.electron.trigger("user-switch-profile")}));require("path");require("electron-log");require("fs");__webpack_require__(857);require("i18next");require("i18next-sprintf-postprocessor");require("i18next-node-fs-backend");require("semver"),platform_PLATFORM.WINDOWS,platform_PLATFORM.DARWIN,platform_PLATFORM.LINUX;function nodeRequire(module){return require(module)}const renderer_ipc=renderer_di.get(SERVICE_IPC);renderer_ipc.on("channel-network-changed",((event,networkStatus)=>{window.electron.trigger("connectivity-changed",networkStatus==NetworkStatus.Online,!0)})),renderer_ipc.on("channel-updater-downloaded",((event,updateInfo)=>{const isForceUpdate=updateInfo&&1==updateInfo.forceUpdate;window.electron.trigger("update-available",isForceUpdate,!0)})),document.addEventListener("DOMContentLoaded",(()=>{window.Events&&window.Events.ready(window.Events.player.playerReady,(()=>{window.electron.triggerAll()}))})),window.addEventListener("message",(event=>{if(event.data&&event.data.type)switch(event.data.type){case"user-updated":{const user=event.data.user,userMetadata=user.USER,multiAccount=userMetadata.MULTI_ACCOUNT,isFamily=multiAccount&&(multiAccount.ENABLED||multiAccount.CHILD_COUNT>0);renderer_ipc.send("channel-user-store-updated",{id:userMetadata.USER_ID,isFamily,isEmployee:userMetadata.SETTING.global.is_employee,offerId:user.OFFER_ID,country:user.COUNTRY,gatekeeps:user.__DZR_GATEKEEPS__});break}case"player-repeat-changed":renderer_ipc.send("channel-player-repeat-mode-update",{repeatMode:event.data.player.repeat,canPrev:event.data.player.hasPrev,canNext:event.data.player.hasNext,canRepeat:event.data.player.hasRepeat});break;case"player-shuffle-changed":renderer_ipc.send("channel-player-shuffle-update",{shuffle:event.data.player.shuffle,canPrev:event.data.player.hasPrev,canNext:event.data.player.hasNext,canShuffle:event.data.player.hasShuffle});break;case"player-playing-changed":{const state=!0===event.data.isPlaying?MediaPlayerState.Playing:MediaPlayerState.Paused;renderer_ipc.send("channel-player-state-update",state);break}case"player-track-updated":{const hostConfig=event.data.trackInfo.hostImage||"images.deezer.com/images",song=event.data.trackInfo.song,defaultCover=`${`https://${hostConfig}`}/${song.SHOW_ART_MD5?"talk":"cover"}/${song.ALB_PICTURE||song.SHOW_ART_MD5||song.LIVESTREAM_IMAGE_MD5||"d41d8cd98f00b204e9800998ecf8427e"}/${250}x${250}.${"jpg"}`,track={title:song.SNG_TITLE||song.LIVESTREAM_TITLE||song.EPISODE_TITLE||"",artist:song.ART_NAME||song.LIVESTREAM_TITLE||song.SHOW_NAME||"",album:song.ALB_TITLE,coverUrl:defaultCover},player={canPrev:event.data.trackInfo.hasPrev,canNext:event.data.trackInfo.hasNext,canRepeat:event.data.player.hasRepeat,canShuffle:event.data.player.hasShuffle};renderer_ipc.send("channel-player-track-update",track,player);break}}}),!1),function(layoutName,callback){const layouts=nodeRequire("./assets/layout.json"),manifest=nodeRequire("./assets/manifest.json");if(void 0===layouts[layoutName])return void console.error(`Layout "${layoutName}" not found`);const layout=layouts[layoutName];if(void 0!==layout.js_init&&(window.JS_INIT=layout.js_init),void 0!==layout.js){const jsPromises=[];layout.js.forEach((scriptName=>{const scriptLabel=`js/${scriptName}.js`;if(void 0===manifest[scriptLabel])return void console.error(`Script "${scriptLabel}" not found in manifest`);const scriptPath=`./assets/${manifest[scriptLabel].path}`;jsPromises.push(new Promise((resolve=>{const scriptTag=document.createElement("script");scriptTag.type="text/javascript",scriptTag.onload=resolve,scriptTag.src=scriptPath,document.getElementsByTagName("head")[0].appendChild(scriptTag)})))})),Promise.all(jsPromises).then(callback)}void 0!==layout.css&&layout.css.forEach((cssFileName=>{const cssFileLabel=window.electron.isRtl()?`css/sass_c/${cssFileName}.rtl.css`:`css/sass_c/${cssFileName}.css`;if(void 0===manifest[cssFileLabel])return void console.error(`CSS "${cssFileLabel}" not found in manifest`);const cssFilePath=`./assets/${manifest[cssFileLabel].path}`,cssTag=document.createElement("link");cssTag.rel="stylesheet",cssTag.type="text/css",cssTag.href=cssFilePath,document.getElementsByTagName("head")[0].appendChild(cssTag)}))}("electron",(function(){const DOMContentLoaded_event=document.createEvent("Event");DOMContentLoaded_event.initEvent("DOMContentLoaded",!0,!0),window.document.dispatchEvent(DOMContentLoaded_event)}));(async function load_plugins(){const plugin_loader=require("./plugin_loader");const functions_in_scope=plugin_loader.execute_plugins(window.DeezMod.plugins.renderer,"renderer");if(functions_in_scope!==""){try{eval(functions_in_scope)}catch(e){console.error("Error executing plugins in renderer context with loader scope",e)}}})()})(),module.exports=__webpack_exports__})();